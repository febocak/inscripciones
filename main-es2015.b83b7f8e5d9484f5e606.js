(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(t,e,n){t.exports=n("zUnb")},"1XSQ":function(t,e,n){"use strict";n("8Y7J");var r=n("SVse"),i=n("quSY");class o extends i.a{constructor(t,e){super()}schedule(t,e=0){return this}}class s extends o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}class a extends s{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}let u=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class l extends u{constructor(t,e=u.now){super(t,()=>l.delegate&&l.delegate!==this?l.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return l.delegate&&l.delegate!==this?l.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}class c extends l{}const h=new c(a);var d=n("HDdC");n.d(e,"a",function(){return f}),n.d(e,"b",function(){return p});class f{constructor(t,e){this.zone=t,this.platformId=e}schedule(...t){return this.zone.runGuarded(function(){return h.schedule.apply(h,t)})}keepUnstableUntilFirst(t){return Object(r.t)(this.platformId)?new d.a(e=>{const n=()=>{},r=Zone.current.scheduleMacroTask("firebaseZoneBlock",n,{},n,n);t.subscribe(t=>{"scheduled"===r.state&&r.invoke(),e.next(t)},t=>{"scheduled"===r.state&&r.invoke(),e.error(t)},()=>{"scheduled"===r.state&&r.invoke(),e.complete()})}):t}runOutsideAngular(t){return new d.a(e=>this.zone.runOutsideAngular(()=>t.subscribe(t=>this.zone.run(()=>e.next(t)),t=>this.zone.run(()=>e.error(t)),()=>this.zone.run(()=>e.complete()))))}}const p=t=>e=>new d.a(n=>e.subscribe(e=>t.run(()=>n.next(e)),e=>t.run(()=>n.error(e)),()=>t.run(()=>n.complete())))},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},"2Vo4":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("XNiG"),i=n("9ppp");class o extends r.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new i.a;return this._value}next(t){super.next(this._value=t)}}},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"2vqZ":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("XNiG"),i=n("8Y7J");let o=(()=>{class t{constructor(){this.message$=new r.a}clearMessages(){this.message$.next(null)}ok(t){this.message$.next({class:"alert-success",message:t})}info(t){this.message$.next({class:"alert-info",message:t})}warning(t){this.message$.next({class:"alert-warning",message:t})}error(t){this.message$.next({class:"alert-danger",message:t})}}return t.ngInjectableDef=i.Mb({factory:function(){return new t},token:t,providedIn:"root"}),t})()},"4I5i":function(t,e,n){"use strict";function r(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}n.d(e,"a",function(){return i}),r.prototype=Object.create(Error.prototype);const i=r},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n("ZUHj"),i=n("l7GE"),o=n("51Dv"),s=n("lJxs"),a=n("Cfvw");function u(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(u((n,r)=>Object(a.a)(t(n,r)).pipe(Object(s.a)((t,i)=>e(n,t,r,i))),n)):("number"==typeof e&&(n=e),e=>e.lift(new l(t,n)))}class l{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new c(t,this.project,this.concurrent))}}class c extends i.a{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e,t,n)}_innerSub(t,e,n){const i=new o.a(this,void 0,void 0);this.destination.add(i),Object(r.a)(this,t,e,n,i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t,e,n,r,i){this.destination.next(e)}notifyComplete(t){const e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"51Dv":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");class i extends r.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}},"6Joi":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r,o=n("q/0M"),s=n("mrSG"),a=n("zVF4"),u=n("x7I3"),l=i.SDK_VERSION,c=new o.Logger("@firebase/firestore"),h=function(t){return t[t.DEBUG=0]="DEBUG",t[t.ERROR=1]="ERROR",t[t.SILENT=2]="SILENT",t}({});function d(){return c.logLevel===o.LogLevel.DEBUG?h.DEBUG:c.logLevel===o.LogLevel.SILENT?h.SILENT:h.ERROR}function f(t){switch(t){case h.DEBUG:c.logLevel=o.LogLevel.DEBUG;break;case h.ERROR:c.logLevel=o.LogLevel.ERROR;break;case h.SILENT:c.logLevel=o.LogLevel.SILENT;break;default:c.error("Firestore ("+l+"): Invalid value passed to `setLogLevel`")}}function p(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(c.logLevel<=o.LogLevel.DEBUG){var i=n.map(g);c.debug.apply(c,["Firestore ("+l+") ["+t+"]: "+e].concat(i))}}function m(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(c.logLevel<=o.LogLevel.ERROR){var r=e.map(g);c.error.apply(c,["Firestore ("+l+"): "+t].concat(r))}}function g(t){if("string"==typeof t)return t;var e=b.getPlatform();try{return e.formatJSON(t)}catch(n){return t}}function y(t){var e="FIRESTORE ("+l+") INTERNAL ASSERTION FAILED: "+t;throw m(e),new Error(e)}function v(t,e){t||y(e)}var b=function(){function t(){}return t.setPlatform=function(e){t.platform&&y("Platform already defined"),t.platform=e},t.getPlatform=function(){return t.platform||y("Platform not set"),t.platform},t}();function w(){return b.getPlatform().emptyByteString}var _={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},E=function(t){function e(e,n){var r=t.call(this,n)||this;return r.code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return s.__extends(e,t),e}(Error);function S(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new E(_.INVALID_ARGUMENT,t)}for(var r in n.prototype=t.prototype,t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}function C(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function T(t,e){return void 0!==t?t:e}function I(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Number(n);isNaN(r)||e(r,t[n])}}function A(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function k(t){for(var e in v(null!=t&&"object"==typeof t,"isEmpty() expects object parameter."),t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function D(t,e){if(0!==e.length)throw new E(_.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+W(e.length,"argument")+".")}function N(t,e,n){if(e.length!==n)throw new E(_.INVALID_ARGUMENT,"Function "+t+"() requires "+W(n,"argument")+", but was called with "+W(e.length,"argument")+".")}function O(t,e,n){if(e.length<n)throw new E(_.INVALID_ARGUMENT,"Function "+t+"() requires at least "+W(n,"argument")+", but was called with "+W(e.length,"argument")+".")}function x(t,e,n,r){if(e.length<n||e.length>r)throw new E(_.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+W(e.length,"argument")+".")}function R(t,e,n,r){F(t,e,H(n)+" argument",r)}function P(t,e,n,r){void 0!==r&&R(t,e,n,r)}function M(t,e,n,r){F(t,e,n+" option",r)}function L(t,e,n,r){void 0!==r&&M(t,e,n,r)}function V(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var o=[],s=0,a=i;s<a.length;s++){var u=a[s];if(u===r)return;o.push(q(u))}var l=q(r);throw new E(_.INVALID_ARGUMENT,"Invalid value "+l+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,r,i)}function j(t,e,n,r){if(!e.some(function(t){return t===r}))throw new E(_.INVALID_ARGUMENT,"Invalid value "+q(r)+" provided to function "+t+"() for its "+H(n)+" argument. Acceptable values: "+e.join(", "))}function F(t,e,n,r){if(!("object"===e?U(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=q(r);throw new E(_.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function U(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function q(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":y("Unknown wrong type: "+typeof t)}function B(t,e,n){if(void 0===n)throw new E(_.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+H(e)+" argument, but it was undefined.")}function G(t,e,n){A(e,function(e,r){if(n.indexOf(e)<0)throw new E(_.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))})}function z(t,e,n,r){var i=q(r);return new E(_.INVALID_ARGUMENT,"Function "+t+"() requires its "+H(n)+" argument to be a "+e+", but it was: "+i)}function H(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function W(t,e){return t+" "+e+(1===t?"":"s")}var K=function(){function t(){}return t.newId=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",n=0;n<20;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return v(20===e.length,"Invalid auto ID: "+e),e},t}();function Q(t,e){return t<e?-1:t>e?1:0}function $(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].isEqual(e[n]))return!1;return!0}function Y(t){return t+"\0"}function J(){if("undefined"==typeof Uint8Array)throw new E(_.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function X(){if(!b.getPlatform().base64Available)throw new E(_.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Z=function(){function t(t){X(),this._binaryString=t}return t.fromBase64String=function(e){N("Blob.fromBase64String",arguments,1),R("Blob.fromBase64String","string",1,e),X();try{var n=b.getPlatform().atob(e);return new t(n)}catch(r){throw new E(_.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+r)}},t.fromUint8Array=function(e){if(N("Blob.fromUint8Array",arguments,1),J(),!(e instanceof Uint8Array))throw z("Blob.fromUint8Array","Uint8Array",1,e);var n=Array.prototype.map.call(e,function(t){return String.fromCharCode(t)}).join("");return new t(n)},t.prototype.toBase64=function(){return N("Blob.toBase64",arguments,0),X(),b.getPlatform().btoa(this._binaryString)},t.prototype.toUint8Array=function(){N("Blob.toUint8Array",arguments,0),J();for(var t=new Uint8Array(this._binaryString.length),e=0;e<this._binaryString.length;e++)t[e]=this._binaryString.charCodeAt(e);return t},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._binaryString===t._binaryString},t.prototype._compareTo=function(t){return Q(this._binaryString,t._binaryString)},t}(),tt=S(Z,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),et=function(){return function(t,e,n,r,i){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i}}(),nt="(default)",rt=function(){function t(t,e){this.projectId=t,this.database=e||nt}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return this.database===nt},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.compareTo=function(t){return Q(this.projectId,t.projectId)||Q(this.database,t.database)},t}(),it=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.setPreviousValue(t)},this.writeNewSequenceNumber=function(t){return e.writeSequenceNumber(t)})}return t.prototype.setPreviousValue=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(t),t},t.INVALID=-1,t}(),ot=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&y("offset "+e+" out of range "+t.length),void 0===n?n=t.length-e:n>t.length-e&&y("length "+n+" out of range "+(t.length-e)),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return v(this.length>=(t=void 0===t?1:t),"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return v(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return v(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return v(t<this.length,"Index out of range"),this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),st=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s.__extends(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(t){if(t.indexOf("//")>=0)throw new E(_.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new e(t.split("/").filter(function(t){return t.length>0}))},e.EMPTY_PATH=new e([]),e}(ot),at=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ut=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s.__extends(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return at.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new E(_.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new E(_.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new E(_.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new E(_.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.EMPTY_PATH=new e([]),e}(ot),lt=function(){function t(e){this.path=e,v(t.isDocumentKey(e),"Invalid DocumentKey with an odd number of segments: "+e.toArray().join("/"))}return t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===st.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return st.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new st(e.slice()))},t.fromPathString=function(e){return new t(st.fromString(e))},t.EMPTY=new t(new st([])),t}(),ct=function(){return function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}}(),ht=function(t){return t.All="all",t.ListenStreamIdle="listen_stream_idle",t.ListenStreamConnectionBackoff="listen_stream_connection_backoff",t.WriteStreamIdle="write_stream_idle",t.WriteStreamConnectionBackoff="write_stream_connection_backoff",t.OnlineStateTimeout="online_state_timeout",t.ClientMetadataRefresh="client_metadata_refresh",t.LruGarbageCollection="lru_garbage_collection",t.RetryTransaction="retry_transaction",t}({}),dt=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new ct,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new E(_.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}(),ft=function(){function t(){this.tail=Promise.resolve(),this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.timerIdsToSkip=[]}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._isShuttingDown},enumerable:!0,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenAfterShutdown=function(t){this.verifyNotFailed(),this.enqueueInternal(t)},t.prototype.enqueueEvenAfterShutdown=function(t){return this.verifyNotFailed(),this.enqueueInternal(t)},t.prototype.enqueueAndInitiateShutdown=function(t){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){switch(e.label){case 0:return this.verifyNotFailed(),this._isShuttingDown?[3,2]:(this._isShuttingDown=!0,[4,this.enqueueEvenAfterShutdown(t)]);case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.enqueue=function(t){return this.verifyNotFailed(),this._isShuttingDown?new Promise(function(t){}):this.enqueueInternal(t)},t.prototype.enqueueInternal=function(t){var e=this,n=this.tail.then(function(){return e.operationInProgress=!0,t().catch(function(t){e.failure=t,e.operationInProgress=!1;var n=t.stack||t.message||"";throw m("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout(function(){throw t},0),t}).then(function(t){return e.operationInProgress=!1,t})});return this.tail=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.verifyNotFailed(),v(e>=0,"Attempted to schedule an operation with a negative delay of "+e),this.timerIdsToSkip.indexOf(t)>-1&&(e=0);var i=dt.createAndSchedule(this,t,e,n,function(t){return r.removeDelayedOperation(t)});return this.delayedOperations.push(i),i},t.prototype.verifyNotFailed=function(){this.failure&&y("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},t.prototype.verifyOperationInProgress=function(){v(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},t.prototype.drain=function(){return this.enqueueEvenAfterShutdown(function(){return Promise.resolve()})},t.prototype.containsDelayedOperation=function(t){for(var e=0,n=this.delayedOperations;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.runDelayedOperationsEarly=function(t){var e=this;return this.drain().then(function(){v(t===ht.All||e.containsDelayedOperation(t),"Attempted to drain to missing operation "+t),e.delayedOperations.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),t!==ht.All&&i.timerId===t)break}return e.drain()})},t.prototype.skipDelaysForTimerId=function(t){this.timerIdsToSkip.push(t)},t.prototype.removeDelayedOperation=function(t){var e=this.delayedOperations.indexOf(t);v(e>=0,"Delayed operation not found."),this.delayedOperations.splice(e,1)},t}(),pt="\x01",mt="\x01",gt="\x10",yt="\x11";function vt(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=wt(e)),e=bt(t.get(n),e);return wt(e)}function bt(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+=pt+gt;break;case pt:n+=pt+yt;break;default:n+=o}}return n}function wt(t){return t+pt+mt}function _t(t){var e=t.length;if(v(e>=2,"Invalid path "+t),2===e)return v(t.charAt(0)===pt&&t.charAt(1)===mt,"Non-empty path "+t+" had length 2"),st.EMPTY_PATH;for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf(pt,o);switch((s<0||s>n)&&y('Invalid encoded resource path: "'+t+'"'),t.charAt(s+1)){case mt:var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case gt:i+=t.substring(o,s),i+="\0";break;case yt:i+=t.substring(o,s+1);break;default:y('Invalid encoded resource path: "'+t+'"')}o=s+2}return new st(r)}var Et=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new E(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new E(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new E(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new E(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Q(this.nanoseconds,t.nanoseconds):Q(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t}(),St=function(){function t(t){this.timestamp=t}return t.fromMicroseconds=function(e){var n=Math.floor(e/1e6);return new t(new Et(n,e%1e6*1e3))},t.fromTimestamp=function(e){return new t(e)},t.forDeletedDoc=function(){return t.MIN},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t.MIN=new t(new Et(0,0)),t}(),Ct=function(){function t(t,e){this.comparator=t,this.root=e||It.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,It.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,It.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Tt(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Tt(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Tt(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Tt(this.root,t,this.comparator,!0)},t}(),Tt=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){v(this.nodeStack.length>0,"getNext() called on iterator when hasNext() is false.");var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),It=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw y("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw y("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check();if(t!==this.right.check())throw y("Black depths differ");return t+(this.isRed()?0:1)},t.EMPTY=null,t.RED=!0,t.BLACK=!1,t}(),At=function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw y("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw y("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw y("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw y("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw y("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new It(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}();It.EMPTY=new At;var kt=function(){function t(t){this.comparator=t,this.data=new Ct(this.comparator)}return t.fromMapKeys=function(e){var n=new t(e.comparator);return e.forEach(function(t){n=n.add(t)}),n},t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Dt(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Dt(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Dt=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Nt=new Ct(lt.comparator);function Ot(){return Nt}function xt(){return Ot()}var Rt=new Ct(lt.comparator);function Pt(){return Rt}var Mt=new Ct(lt.comparator);function Lt(){return Mt}var Vt=new kt(lt.comparator);function jt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Vt,r=0,i=t;r<i.length;r++)n=n.add(i[r]);return n}var Ft=new kt(Q);function Ut(){return Ft}var qt=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r,v(r.length>0,"Cannot create an empty mutation batch")}return t.prototype.applyToRemoteDocument=function(t,e,n){e&&v(e.key.isEqual(t),"applyToRemoteDocument: key "+t+" should match maybeDoc key\n        "+e.key);var r=n.mutationResults;v(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=o.applyToRemoteDocument(e,r[i]))}return e},t.prototype.applyToLocalView=function(t,e){e&&v(e.key.isEqual(t),"applyToLocalDocument: key "+t+" should match maybeDoc key\n        "+e.key);for(var n=0,r=this.baseMutations;n<r.length;n++)(a=r[n]).key.isEqual(t)&&(e=a.applyToLocalView(e,e,this.localWriteTime));for(var i=e,o=0,s=this.mutations;o<s.length;o++){var a;(a=s[o]).key.isEqual(t)&&(e=a.applyToLocalView(e,i,this.localWriteTime))}return e},t.prototype.applyToLocalDocumentSet=function(t){var e=this,n=t;return this.mutations.forEach(function(r){var i=e.applyToLocalView(r.key,t.get(r.key));i&&(n=n.insert(r.key,i))}),n},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},jt())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&$(this.mutations,t.mutations)&&$(this.baseMutations,t.baseMutations)},t}(),Bt=function(){function t(t,e,n,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.streamToken=r,this.docVersions=i}return t.from=function(e,n,r,i){v(e.mutations.length===r.length,"Mutations sent "+e.mutations.length+" must equal results received "+r.length);for(var o=Lt(),s=e.mutations,a=0;a<s.length;a++)o=o.insert(s[a].key,r[a].version);return new t(e,n,r,i,o)},t}(),Gt=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&y("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(r){return t.reject(r)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),zt=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}return t.forUser=function(e,n,r,i){return v(""!==e.uid,"UserID must not be an empty string."),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Qt(t).iterate({index:Re.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.acknowledgeBatch=function(t,e,n){return this.getMutationQueueMetadata(t).next(function(e){return e.lastStreamToken=Kt(n),Yt(t).put(e)})},t.prototype.getLastStreamToken=function(t){return this.getMutationQueueMetadata(t).next(function(t){return t.lastStreamToken})},t.prototype.setLastStreamToken=function(t,e){return this.getMutationQueueMetadata(t).next(function(n){return n.lastStreamToken=Kt(e),Yt(t).put(n)})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=$t(t),s=Qt(t);return s.add({}).next(function(a){v("number"==typeof a,"Auto-generated key is not a number");var u=new qt(a,e,n,r),l=i.serializer.toDbMutationBatch(i.userId,u);i.documentKeysByBatchId[a]=u.keys();for(var c=[],h=0,d=r;h<d.length;h++){var f=d[h],p=Pe.key(i.userId,f.key.path,a);c.push(s.put(l)),c.push(o.put(p,Pe.PLACEHOLDER)),c.push(i.indexManager.addToCollectionParentIndex(t,f.key.path.popLast()))}return Gt.waitFor(c).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Qt(t).get(e).next(function(t){return t?(v(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),n.serializer.fromDbMutationBatch(t)):null})},t.prototype.lookupMutationKeys=function(t,e){var n=this;return this.documentKeysByBatchId[e]?Gt.resolve(this.documentKeysByBatchId[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.documentKeysByBatchId[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Qt(t).iterate({index:Re.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(v(e.batchId>=r,"Should have found mutation after "+r),o=n.serializer.fromDbMutationBatch(e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Qt(t).iterate({index:Re.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Qt(t).loadAll(Re.userMutationsIndex,n).next(function(t){return t.map(function(t){return e.serializer.fromDbMutationBatch(t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Pe.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return $t(t).iterate({range:i},function(r,i,s){var a=r[0],u=r[2],l=_t(r[1]);if(a===n.userId&&e.path.isEqual(l))return Qt(t).get(u).next(function(t){if(!t)throw y("Dangling document-mutation reference found: "+r+" which points to "+u);v(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+u),o.push(n.serializer.fromDbMutationBatch(t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new kt(Q),i=[];return e.forEach(function(e){var o=Pe.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=$t(t).iterate({range:s},function(t,i,o){var s=t[0],a=t[2],u=_t(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),Gt.waitFor(i).next(function(){return n.lookupMutationBatches(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this;v(!e.isDocumentQuery(),"Document queries shouldn't go down this path"),v(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=e.path,i=r.length+1,o=Pe.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new kt(Q);return $t(t).iterate({range:s},function(t,e,o){var s=t[0],u=t[2],l=_t(t[1]);s===n.userId&&r.isPrefixOf(l)?l.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.lookupMutationBatches(t,a)})},t.prototype.lookupMutationBatches=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(Qt(t).get(e).next(function(t){if(null===t)throw y("Dangling document-mutation reference found, which points to "+e);v(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),r.push(n.serializer.fromDbMutationBatch(t))}))}),Gt.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return Wt(t.simpleDbTransaction,this.userId,e).next(function(r){return n.removeCachedMutationKeys(e.batchId),Gt.forEach(r,function(e){return n.referenceDelegate.removeMutationReference(t,e)})})},t.prototype.removeCachedMutationKeys=function(t){delete this.documentKeysByBatchId[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Gt.resolve();var r=IDBKeyRange.lowerBound(Pe.prefixForUser(e.userId)),i=[];return $t(t).iterate({range:r},function(t,n,r){if(t[0]===e.userId){var o=_t(t[1]);i.push(o)}else r.done()}).next(function(){v(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map(function(t){return t.canonicalString()}))})})},t.prototype.containsKey=function(t,e){return Ht(t,this.userId,e)},t.prototype.getMutationQueueMetadata=function(t){var e=this;return Yt(t).get(this.userId).next(function(t){return t||new xe(e.userId,-1,"")})},t}();function Ht(t,e,n){var r=Pe.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return $t(t).iterate({range:o,keysOnly:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function Wt(t,e,n){var r=t.store(Re.store),i=t.store(Pe.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.iterate({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){v(1===a,"Dangling document-mutation reference found: Missing batch "+n.batchId)}));for(var l=[],c=0,h=n.mutations;c<h.length;c++){var d=h[c],f=Pe.key(e,d.key.path,n.batchId);o.push(i.delete(f)),l.push(d.key)}return Gt.waitFor(o).next(function(){return l})}function Kt(t){return t instanceof Uint8Array?(v("YES"===process.env.USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence."),t.toString()):t}function Qt(t){return cn.getStore(t,Re.store)}function $t(t){return cn.getStore(t,Pe.store)}function Yt(t){return cn.getStore(t,xe.store)}var Jt=1,Xt=function(t){return t[t.QueryCache=0]="QueryCache",t[t.SyncEngine=1]="SyncEngine",t}({}),Zt=function(){function t(t,e){this.generatorId=t,v((t&Jt)===t,"Generator ID "+t+" contains more than "+Jt+" reserved bits"),this.seek(void 0!==e?e:this.generatorId)}return t.prototype.next=function(){var t=this.nextId;return this.nextId+=1<<Jt,t},t.prototype.after=function(t){return this.seek(t+(1<<Jt)),this.next()},t.prototype.seek=function(t){v((t&Jt)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=t},t.forQueryCache=function(){return new t(Xt.QueryCache,2)},t.forSyncEngine=function(){return new t(Xt.SyncEngine)},t}(),te="SimpleDb",ee=function(){function t(e){this.db=e,12.2===t.getIOSVersion(a.getUA())&&m("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.openOrCreate=function(e,n,r){return v(t.isAvailable(),"IndexedDB not supported in current environment."),p(te,"Opening database:",e),new Gt(function(i,o){var s=window.indexedDB.open(e,n);s.onsuccess=function(e){i(new t(e.target.result))},s.onblocked=function(){o(new E(_.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=function(t){var e=t.target.error;o("VersionError"===e.name?new E(_.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):e)},s.onupgradeneeded=function(t){p(te,'Database "'+e+'" requires upgrade from version:',t.oldVersion);var n=t.target.result,i=new re(s.transaction);r.createOrUpgrade(n,i,t.oldVersion,ke).next(function(){p(te,"Database upgrade to version "+ke+" complete")})}}).toPromise()},t.delete=function(t){return p(te,"Removing database:",t),oe(window.indexedDB.deleteDatabase(t)).toPromise()},t.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(void 0===window.navigator)return"YES"===process.env.USE_MOCK_PERSISTENCE;var e=a.getUA(),n=t.getIOSVersion(e),r=0<n&&n<10,i=t.getAndroidVersion(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.getStore=function(t,e){return t.store(e)},t.getIOSVersion=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.getAndroidVersion=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.setVersionChangeListener=function(t){this.db.onversionchange=function(e){return t(e)}},t.prototype.runTransaction=function(t,e,n){var r=re.open(this.db,t,e),i=n(r).catch(function(t){return r.abort(t),Gt.reject(t)}).toPromise();return i.catch(function(){}),r.completionPromise.then(function(){return i})},t.prototype.close=function(){this.db.close()},t}(),ne=function(){function t(t){this.dbCursor=t,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.dbCursor=t},enumerable:!0,configurable:!0}),t.prototype.done=function(){this.shouldStop=!0},t.prototype.skip=function(t){this.nextKey=t},t.prototype.delete=function(){return oe(this.dbCursor.delete())},t}(),re=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this.completionDeferred=new ct,this.transaction.oncomplete=function(){e.completionDeferred.resolve()},this.transaction.onabort=function(){t.error?e.completionDeferred.reject(t.error):e.completionDeferred.resolve()},this.transaction.onerror=function(t){var n=ae(t.target.error);e.completionDeferred.reject(n)}}return t.open=function(e,n,r){return new t(e.transaction(r,n))},Object.defineProperty(t.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){t&&this.completionDeferred.reject(t),this.aborted||(p(te,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return v(!!e,"Object store not part of transaction: "+t),new ie(e)},t}(),ie=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(p(te,"PUT",this.store.name,t,e),n=this.store.put(e,t)):(p(te,"PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),oe(n)},t.prototype.add=function(t){return p(te,"ADD",this.store.name,t,t),oe(this.store.add(t))},t.prototype.get=function(t){var e=this;return oe(this.store.get(t)).next(function(n){return void 0===n&&(n=null),p(te,"GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return p(te,"DELETE",this.store.name,t),oe(this.store.delete(t))},t.prototype.count=function(){return p(te,"COUNT",this.store.name),oe(this.store.count())},t.prototype.loadAll=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.iterateCursor(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.deleteAll=function(t,e){p(te,"DELETE ALL",this.store.name);var n=this.options(t,e);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,function(t,e,n){return n.delete()})},t.prototype.iterate=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.iterateCursor(r,e)},t.prototype.iterateSerial=function(t){var e=this.cursor({});return new Gt(function(n,r){e.onerror=function(t){var e=ae(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.iterateCursor=function(t,e){var n=[];return new Gt(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new ne(i),s=e(i.primaryKey,i.value,o);if(s instanceof Gt){var a=s.catch(function(t){return o.done(),Gt.reject(t)});n.push(a)}o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}else r()}}).next(function(){return Gt.waitFor(n)})},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:(v(void 0===e,"3rd argument must not be defined if 2nd is a range."),e=t)),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.keysOnly?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function oe(t){return new Gt(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=ae(t.target.error);n(e)}})}var se=!1;function ae(t){var e=ee.getIOSVersion(a.getUA());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new E("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return se||(se=!0,setTimeout(function(){throw r},0)),r}}return t}var ue=function(){function t(t,e){this.referenceDelegate=t,this.serializer=e,this.targetIdGenerator=Zt.forQueryCache()}return t.prototype.allocateTargetId=function(t){var e=this;return this.retrieveMetadata(t).next(function(n){return n.highestTargetId=e.targetIdGenerator.after(n.highestTargetId),e.saveMetadata(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.retrieveMetadata(t).next(function(t){return St.fromTimestamp(new Et(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return he(t.simpleDbTransaction)},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.retrieveMetadata(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.saveMetadata(t,i)})},t.prototype.addQueryData=function(t,e){var n=this;return this.saveQueryData(t,e).next(function(){return n.retrieveMetadata(t).next(function(r){return r.targetCount+=1,n.updateMetadataFromQueryData(e,r),n.saveMetadata(t,r)})})},t.prototype.updateQueryData=function(t,e){return this.saveQueryData(t,e)},t.prototype.removeQueryData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return le(t).delete(e.targetId)}).next(function(){return n.retrieveMetadata(t)}).next(function(e){return v(e.targetCount>0,"Removing from an empty query cache"),e.targetCount-=1,n.saveMetadata(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return le(t).iterate(function(s,a){var u=r.serializer.fromDbTarget(a);u.sequenceNumber<=e&&void 0===n[u.targetId]&&(i++,o.push(r.removeQueryData(t,u)))}).next(function(){return Gt.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){var n=this;return le(t).iterate(function(t,r){var i=n.serializer.fromDbTarget(r);e(i)})},t.prototype.retrieveMetadata=function(t){return ce(t.simpleDbTransaction)},t.prototype.saveMetadata=function(t,e){return(n=t,cn.getStore(n,qe.store)).put(qe.key,e);var n},t.prototype.saveQueryData=function(t,e){return le(t).put(this.serializer.toDbTarget(e))},t.prototype.updateMetadataFromQueryData=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getQueryCount=function(t){return this.retrieveMetadata(t).next(function(t){return t.targetCount})},t.prototype.getQueryData=function(t,e){var n=this,r=e.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return le(t).iterate({range:i,index:Fe.queryTargetsIndexName},function(t,r,i){var s=n.serializer.fromDbTarget(r);e.isEqual(s.query)&&(o=s,i.done())}).next(function(){return o})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=de(t);return e.forEach(function(e){var s=vt(e.path);i.push(o.put(new Ue(n,s))),i.push(r.referenceDelegate.addReference(t,e))}),Gt.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=de(t);return Gt.forEach(e,function(e){var o=vt(e.path);return Gt.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=de(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=de(t),i=jt();return r.iterate({range:n,keysOnly:!0},function(t,e,n){var r=_t(t[1]),o=new lt(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=vt(e.path),r=IDBKeyRange.bound([n],[Y(n)],!1,!0),i=0;return de(t).iterate({index:Ue.documentTargetsIndex,keysOnly:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.getQueryDataForTarget=function(t,e){var n=this;return le(t).get(e).next(function(t){return t?n.serializer.fromDbTarget(t):null})},t}();function le(t){return cn.getStore(t,Fe.store)}function ce(t){return ee.getStore(t,qe.store).get(qe.key).next(function(t){return v(null!==t,"Missing metadata row."),t})}function he(t){return ce(t).next(function(t){return t.highestListenSequenceNumber})}function de(t){return cn.getStore(t,Ue.store)}var fe=function(){function t(t,e){this.key=t,this.version=e}return t.compareByKey=function(t,e){return lt.comparator(t.key,e.key)},t}(),pe=function(t){function e(e,n,r,i,o){var s=t.call(this,e,n)||this;return s.data=r,s.proto=o,s.hasLocalMutations=!!i.hasLocalMutations,s.hasCommittedMutations=!!i.hasCommittedMutations,s}return s.__extends(e,t),e.prototype.field=function(t){return this.data.field(t)},e.prototype.fieldValue=function(t){var e=this.field(t);return e?e.value():void 0},e.prototype.value=function(){return this.data.value()},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.data.isEqual(t.data)&&this.hasLocalMutations===t.hasLocalMutations&&this.hasCommittedMutations===t.hasCommittedMutations},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.compareByField=function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?r.compareTo(i):y("Trying to compare documents on fields that don't exist")},e}(fe),me=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return s.__extends(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(fe),ge=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s.__extends(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(fe),ye=function(){function t(t){this.mapKeyFn=t,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(o[0].isEqual(t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){A(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return k(this.inner)},t}(),ve=function(){function t(){this.changes=new ye(function(t){return t.toString()}),this.changesApplied=!1}return t.prototype.addEntry=function(t){this.assertNotApplied(),this.changes.set(t.key,t)},t.prototype.removeEntry=function(t){this.assertNotApplied(),this.changes.set(t,null)},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Gt.resolve(n):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){v(!this.changesApplied,"Changes have already been applied.")},t}(),be="The remote document changelog no longer contains all changes for all local query views. It may be necessary to rebuild these views.",we=function(){function t(t,e,n){this.serializer=t,this.indexManager=e,this.keepDocumentChangeLog=n,this._lastProcessedDocumentChangeId=0}return Object.defineProperty(t.prototype,"lastProcessedDocumentChangeId",{get:function(){return this._lastProcessedDocumentChangeId},enumerable:!0,configurable:!0}),t.prototype.start=function(t){var e=ee.getStore(t,ze.store);return this.synchronizeLastDocumentChangeId(e)},t.prototype.addEntry=function(t,e,n){var r=this;return Ee(t).put(Ce(e),n).next(function(){r.indexManager.addToCollectionParentIndex(t,e.path.popLast())})},t.prototype.removeEntry=function(t,e){var n=Ee(t),r=Ce(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e,n){var r=this;return this.getMetadata(t).next(function(i){return i.byteSize+=n,r.setMetadata(t,i).next(function(){if(r.keepDocumentChangeLog)return Se(t).put({changes:r.serializer.toDbResourcePaths(e)})})})},t.prototype.getEntry=function(t,e){var n=this;return Ee(t).get(Ce(e)).next(function(t){return t?n.serializer.fromDbRemoteDocument(t):null})},t.prototype.getSizedEntry=function(t,e){var n=this;return Ee(t).get(Ce(e)).next(function(t){return t?{maybeDocument:n.serializer.fromDbRemoteDocument(t),size:Te(t)}:null})},t.prototype.getEntries=function(t,e){var n=this,r=xt();return this.forEachDbEntry(t,e,function(t,e){r=r.insert(t,e?n.serializer.fromDbRemoteDocument(e):null)}).next(function(){return r})},t.prototype.getSizedEntries=function(t,e){var n=this,r=xt(),i=new Ct(lt.comparator);return this.forEachDbEntry(t,e,function(t,e){e?(r=r.insert(t,n.serializer.fromDbRemoteDocument(e)),i=i.insert(t,Te(e))):(r=r.insert(t,null),i=i.insert(t,0))}).next(function(){return{maybeDocuments:r,sizeMap:i}})},t.prototype.forEachDbEntry=function(t,e,n){if(e.isEmpty())return Gt.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Ee(t).iterate({range:r},function(t,e,r){for(var s=lt.fromSegments(t);o&&lt.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.skip(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e){var n=this;v(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=Pt(),i=e.path.length+1,o=e.path.toArray(),s=IDBKeyRange.lowerBound(o);return Ee(t).iterate({range:s},function(t,o,s){if(t.length===i){var a=n.serializer.fromDbRemoteDocument(o);e.path.isPrefixOf(a.key.path)?a instanceof pe&&e.matches(a)&&(r=r.insert(a.key,a)):s.done()}}).next(function(){return r})},t.prototype.getNewDocumentChanges=function(t){var e=this;v(this.keepDocumentChangeLog,"Can only call getNewDocumentChanges() when document change log is enabled");var n=jt(),r=Ot(),i=IDBKeyRange.lowerBound(this._lastProcessedDocumentChangeId+1),o=!0,s=Se(t);return s.iterate({range:i},function(t,r){if(o&&(o=!1,e._lastProcessedDocumentChangeId+1!==r.id))return e.synchronizeLastDocumentChangeId(s).next(function(){return Gt.reject(new E(_.DATA_LOSS,be))});n=n.unionWith(e.serializer.fromDbResourcePaths(r.changes)),e._lastProcessedDocumentChangeId=r.id}).next(function(){var i=[];return n.forEach(function(n){i.push(e.getEntry(t,n).next(function(t){var e=t||new me(n,St.forDeletedDoc());r=r.insert(n,e)}))}),Gt.waitFor(i)}).next(function(){return r})},t.prototype.removeDocumentChangesThroughChangeId=function(t,e){var n=IDBKeyRange.upperBound(e);return Se(t).delete(n)},t.prototype.synchronizeLastDocumentChangeId=function(t){var e=this;return this._lastProcessedDocumentChangeId=0,t.iterate({keysOnly:!0,reverse:!0},function(t,n,r){e._lastProcessedDocumentChangeId=t,r.done()})},t.prototype.newChangeBuffer=function(){return new t.RemoteDocumentChangeBuffer(this)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return _e(t).get(je.key).next(function(t){return v(!!t,"Missing document cache metadata"),t})},t.prototype.setMetadata=function(t,e){return _e(t).put(je.key,e)},t.RemoteDocumentChangeBuffer=function(t){function e(e){var n=t.call(this)||this;return n.documentCache=e,n.documentSizes=new ye(function(t){return t.toString()}),n}return s.__extends(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=jt();return this.changes.forEach(function(o,s){var a=e.documentSizes.get(o);if(v(void 0!==a,"Cannot modify a document that wasn't read (for "+o+")"),s){var u=e.documentCache.serializer.toDbRemoteDocument(s),l=Te(u);r+=l-a,n.push(e.documentCache.addEntry(t,o,u))}else r-=a,n.push(e.documentCache.removeEntry(t,o));i=i.add(o)}),n.push(this.documentCache.updateMetadata(t,i,r)),Gt.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.documentCache.getSizedEntry(t,e).next(function(t){return null===t?(n.documentSizes.set(e,0),null):(n.documentSizes.set(e,t.size),t.maybeDocument)})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.documentCache.getSizedEntries(t,e).next(function(t){var e=t.maybeDocuments;return t.sizeMap.forEach(function(t,e){n.documentSizes.set(t,e)}),e})},e}(ve),t}();function _e(t){return cn.getStore(t,je.store)}function Ee(t){return cn.getStore(t,Ve.store)}function Se(t){return cn.getStore(t,ze.store)}function Ce(t){return t.path.toArray()}function Te(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw y("Unknown remote document type");e=t.noDocument}return JSON.stringify(e).length}var Ie=function(){function t(){this.collectionParentIndex=new Ae}return t.prototype.addToCollectionParentIndex=function(t,e){return this.collectionParentIndex.add(e),Gt.resolve()},t.prototype.getCollectionParents=function(t,e){return Gt.resolve(this.collectionParentIndex.getEntries(e))},t}(),Ae=function(){function t(){this.index={}}return t.prototype.add=function(t){v(t.length%2==1,"Expected a collection path.");var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new kt(st.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.getEntries=function(t){return(this.index[t]||new kt(st.comparator)).toArray()},t}(),ke=8,De=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;v(n<r&&n>=0&&r<=ke,"Unexpected schema upgrade from v"+n+" to v{toVersion}."),n<1&&r>=1&&(function(t){t.createObjectStore(Oe.store)}(t),function(t){t.createObjectStore(xe.store,{keyPath:xe.keyPath}),t.createObjectStore(Re.store,{keyPath:Re.keyPath,autoIncrement:!0}).createIndex(Re.userMutationsIndex,Re.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Pe.store)}(t),Ge(t),function(t){t.createObjectStore(Ve.store)}(t));var o=Gt.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Ue.store),t.deleteObjectStore(Fe.store),t.deleteObjectStore(qe.store)}(t),Ge(t)),o=o.next(function(){return function(t){var e=t.store(qe.store),n=new qe(0,0,St.MIN.toTimestamp(),0);return e.put(qe.key,n)}(e)})),n<4&&r>=4&&(0!==n&&(o=o.next(function(){return function(t,e){return e.store(Re.store).loadAll().next(function(n){t.deleteObjectStore(Re.store),t.createObjectStore(Re.store,{keyPath:Re.keyPath,autoIncrement:!0}).createIndex(Re.userMutationsIndex,Re.userMutationsKeyPath,{unique:!0});var r=e.store(Re.store),i=n.map(function(t){return r.put(t)});return Gt.waitFor(i)})}(t,e)})),o=o.next(function(){!function(t){t.createObjectStore(He.store,{keyPath:He.keyPath})}(t),function(t){t.createObjectStore(ze.store,{keyPath:"id",autoIncrement:!0})}(t)})),n<5&&r>=5&&(o=o.next(function(){return i.removeAcknowledgedMutations(e)})),n<6&&r>=6&&(o=o.next(function(){return function(t){t.createObjectStore(je.store)}(t),i.addDocumentGlobal(e)})),n<7&&r>=7&&(o=o.next(function(){return i.ensureSequenceNumbers(e)})),n<8&&r>=8&&(o=o.next(function(){return i.createCollectionParentIndex(t,e)})),o},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(Ve.store).iterate(function(t,n){e+=Te(n)}).next(function(){var n=new je(e);return t.store(je.store).put(je.key,n)})},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(xe.store),r=t.store(Re.store);return n.loadAll().next(function(n){return Gt.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(Re.userMutationsIndex,i).next(function(r){return Gt.forEach(r,function(r){v(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=e.serializer.fromDbMutationBatch(r);return Wt(t,n.userId,i).next(function(){})})})})})},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(Ue.store),n=t.store(Ve.store);return he(t).next(function(t){var r=[];return n.iterate(function(n,i){var o=new st(n),s=function(t){return[0,vt(t)]}(o);r.push(e.get(s).next(function(n){return n?Gt.resolve():function(n){return e.put(new Ue(0,vt(n),t))}(o)}))}).next(function(){return Gt.waitFor(r)})})},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(Be.store,{keyPath:Be.keyPath});var n=e.store(Be.store),r=new Ae,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:vt(i)})}};return e.store(Ve.store).iterate({keysOnly:!0},function(t,e){var n=new st(t);return i(n.popLast())}).next(function(){return e.store(Pe.store).iterate({keysOnly:!0},function(t,e){var n=_t(t[1]);return i(n.popLast())})})},t}(),Ne=function(){return function(t,e){this.seconds=t,this.nanoseconds=e}}(),Oe=function(){function t(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}return t.store="owner",t.key="owner",t}(),xe=function(){function t(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}return t.store="mutationQueues",t.keyPath="userId",t}(),Re=function(){function t(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}return t.store="mutations",t.keyPath="batchId",t.userMutationsIndex="userMutationsIndex",t.userMutationsKeyPath=["userId","batchId"],t}(),Pe=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,vt(e)]},t.key=function(t,e,n){return[t,vt(e),n]},t.store="documentMutations",t.PLACEHOLDER=new t,t}(),Me=function(){return function(t,e){this.path=t,this.readTime=e}}(),Le=function(){return function(t,e){this.path=t,this.version=e}}(),Ve=function(){function t(t,e,n,r){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r}return t.store="remoteDocuments",t}(),je=function(){function t(t){this.byteSize=t}return t.store="remoteDocumentGlobal",t.key="remoteDocumentGlobalKey",t}(),Fe=function(){function t(t,e,n,r,i,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.query=o}return t.store="targets",t.keyPath="targetId",t.queryTargetsIndexName="queryTargetsIndex",t.queryTargetsKeyPath=["canonicalId","targetId"],t}(),Ue=function(){function t(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n,v(0===t==(void 0!==n),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return t.store="targetDocuments",t.keyPath=["targetId","path"],t.documentTargetsIndex="documentTargetsIndex",t.documentTargetsKeyPath=["path","targetId"],t}(),qe=function(){function t(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return t.key="targetGlobalKey",t.store="targetGlobal",t}(),Be=function(){function t(t,e){this.collectionId=t,this.parent=e}return t.store="collectionParents",t.keyPath=["collectionId","parent"],t}();function Ge(t){t.createObjectStore(Ue.store,{keyPath:Ue.keyPath}).createIndex(Ue.documentTargetsIndex,Ue.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Fe.store,{keyPath:Fe.keyPath}).createIndex(Fe.queryTargetsIndexName,Fe.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(qe.store)}var ze=function(){function t(t){this.changes=t}return t.store="remoteDocumentChanges",t.keyPath="id",t}(),He=function(){function t(t,e,n,r,i){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r,this.lastProcessedDocumentChangeId=i}return t.store="clientMetadata",t.keyPath="clientId",t}(),We=[xe.store,Re.store,Pe.store,Ve.store,Fe.store,Oe.store,qe.store,Ue.store].concat([He.store,ze.store]).concat([je.store]).concat([Be.store]),Ke=function(){function t(){this.collectionParentsCache=new Ae}return t.prototype.addToCollectionParentIndex=function(t,e){if(v(e.length%2==1,"Expected a collection path."),this.collectionParentsCache.add(e)){v(e.length>=1,"Invalid collection path.");var n=e.lastSegment(),r=e.popLast();return Qe(t).put({collectionId:n,parent:vt(r)})}return Gt.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Y(e),""],!1,!0);return Qe(t).loadAll(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(_t(o.parent))}return n})},t}();function Qe(t){return cn.getStore(t,Be.store)}var $e=function(t){return t[t.Listen=0]="Listen",t[t.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",t[t.LimboResolution=2]="LimboResolution",t}({}),Ye=function(){function t(t,e,n,r,i,o){void 0===i&&(i=St.MIN),void 0===o&&(o=w()),this.query=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.resumeToken=o}return t.prototype.copy=function(e){return new t(this.query,this.targetId,this.purpose,void 0===e.sequenceNumber?this.sequenceNumber:e.sequenceNumber,void 0===e.snapshotVersion?this.snapshotVersion:e.snapshotVersion,void 0===e.resumeToken?this.resumeToken:e.resumeToken)},t.prototype.isEqual=function(t){return this.targetId===t.targetId&&this.purpose===t.purpose&&this.sequenceNumber===t.sequenceNumber&&this.snapshotVersion.isEqual(t.snapshotVersion)&&this.resumeToken===t.resumeToken&&this.query.isEqual(t.query)},t}(),Je=function(){function t(t){this.remoteSerializer=t}return t.prototype.fromDbRemoteDocument=function(t){if(t.document)return this.remoteSerializer.fromDocument(t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=lt.fromSegments(t.noDocument.path),n=this.fromDbTimestamp(t.noDocument.readTime);return new me(e,n,{hasCommittedMutations:!!t.hasCommittedMutations})}return t.unknownDocument?(e=lt.fromSegments(t.unknownDocument.path),n=this.fromDbTimestamp(t.unknownDocument.version),new ge(e,n)):y("Unexpected DbRemoteDocument")},t.prototype.toDbRemoteDocument=function(t){if(t instanceof pe){var e=t.proto?t.proto:this.remoteSerializer.toDocument(t);return new Ve(null,null,e,i=t.hasCommittedMutations)}if(t instanceof me){var n=t.key.path.toArray(),r=this.toDbTimestamp(t.version),i=t.hasCommittedMutations;return new Ve(null,new Me(n,r),null,i)}return t instanceof ge?(n=t.key.path.toArray(),r=this.toDbTimestamp(t.version),new Ve(new Le(n,r),null,null,!0)):y("Unexpected MaybeDocumment")},t.prototype.toDbTimestamp=function(t){var e=t.toTimestamp();return new Ne(e.seconds,e.nanoseconds)},t.prototype.fromDbTimestamp=function(t){var e=new Et(t.seconds,t.nanoseconds);return St.fromTimestamp(e)},t.prototype.toDbMutationBatch=function(t,e){var n=this,r=e.baseMutations.map(function(t){return n.remoteSerializer.toMutation(t)}),i=e.mutations.map(function(t){return n.remoteSerializer.toMutation(t)});return new Re(t,e.batchId,e.localWriteTime.toMillis(),r,i)},t.prototype.fromDbMutationBatch=function(t){var e=this,n=(t.baseMutations||[]).map(function(t){return e.remoteSerializer.fromMutation(t)}),r=t.mutations.map(function(t){return e.remoteSerializer.fromMutation(t)}),i=Et.fromMillis(t.localWriteTimeMs);return new qt(t.batchId,i,n,r)},t.prototype.toDbResourcePaths=function(t){var e=[];return t.forEach(function(t){e.push(vt(t.path))}),e},t.prototype.fromDbResourcePaths=function(t){for(var e=jt(),n=0,r=t;n<r.length;n++)e=e.add(new lt(_t(r[n])));return e},t.prototype.fromDbTarget=function(t){var e,n=this.fromDbTimestamp(t.readTime);return e=void 0!==t.query.documents?this.remoteSerializer.fromDocumentsTarget(t.query):this.remoteSerializer.fromQueryTarget(t.query),new Ye(e,t.targetId,$e.Listen,t.lastListenSequenceNumber,n,t.resumeToken)},t.prototype.toDbTarget=function(t){v($e.Listen===t.purpose,"Only queries with purpose "+$e.Listen+" may be stored, got "+t.purpose);var e,n,r=this.toDbTimestamp(t.snapshotVersion);return e=t.query.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(t.query):this.remoteSerializer.toQueryTarget(t.query),t.resumeToken instanceof Uint8Array?(v("YES"===process.env.USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence ."),n=t.resumeToken.toString()):n=t.resumeToken,new Fe(t.targetId,t.query.canonicalId(),r,n,t.sequenceNumber,e)},t}();function Xe(t,e){var n=t[1],r=e[1],i=Q(t[0],e[0]);return 0===i?Q(n,r):i}var Ze=function(){function t(t){this.maxElements=t,this.buffer=new kt(Xe),this.previousIndex=0}return t.prototype.nextIndex=function(){return++this.previousIndex},t.prototype.addElement=function(t){var e=[t,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Xe(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),t}(),tn={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},en=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t.COLLECTION_DISABLED=-1,t.MINIMUM_CACHE_SIZE_BYTES=1048576,t.DEFAULT=new t(t.DEFAULT_CACHE_SIZE_BYTES=41943040,t.DEFAULT_COLLECTION_PERCENTILE=10,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3),t.DISABLED=new t(t.COLLECTION_DISABLED,0,0),t}(),nn=function(){function t(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.hasRun=!1,this.gcTask=null}return t.prototype.start=function(){v(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==en.COLLECTION_DISABLED&&this.scheduleGC()},t.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),t.prototype.scheduleGC=function(){var t=this;v(null===this.gcTask,"Cannot schedule GC while a task is pending");var e=this.hasRun?3e5:6e4;p("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(ht.LruGarbageCollection,e,function(){return t.gcTask=null,t.hasRun=!0,t.localStore.collectGarbage(t.garbageCollector).then(function(){return t.scheduleGC()}).catch(hn)})},t}(),rn=function(){function t(t,e){this.delegate=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.delegate.getSequenceNumberCount(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Gt.resolve(it.INVALID);var r=new Ze(e);return this.delegate.forEachTarget(t,function(t){return r.addElement(t.sequenceNumber)}).next(function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(t,function(t){return r.addElement(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.delegate.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.delegate.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return this.params.cacheSizeCollectionThreshold===en.COLLECTION_DISABLED?(p("LruGarbageCollector","Garbage collection skipped; disabled"),Gt.resolve(tn)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(p("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),tn):n.runGarbageCollection(t,e)})},t.prototype.getCacheSize=function(t){return this.delegate.getCacheSize(t)},t.prototype.runGarbageCollection=function(t,e){var n,r,i,o,s,a,u,l=this,c=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>l.params.maximumSequenceNumbersToCollect?(p("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.maximumSequenceNumbersToCollect+" from "+e),r=l.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),l.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),l.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),l.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),d()<=h.DEBUG&&p("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-c)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-c)+"ms"),Gt.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),on="IndexedDbPersistence",sn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",an="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",un="This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.",ln=function(t){function e(e,n){var r=t.call(this)||this;return r.simpleDbTransaction=e,r.currentSequenceNumber=n,r}return s.__extends(e,t),e}(function(){return function(){}}()),cn=function(){function t(e,n,r,i,o,s,a){if(this.persistenceKey=e,this.clientId=n,this.queue=i,this.multiClientParams=a,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(t){return Promise.resolve()},!t.isAvailable())throw new E(_.UNIMPLEMENTED,un);if(this.referenceDelegate=new pn(this,s),this.dbName=e+t.MAIN_DATABASE,this.serializer=new Je(o),this.document=r.document,this.allowTabSynchronization=void 0!==a,this.queryCache=new ue(this.referenceDelegate,this.serializer),this.indexManager=new Ke,this.remoteDocumentCache=new we(this.serializer,this.indexManager,this.allowTabSynchronization),!r.window||!r.window.localStorage)throw new E(_.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=r.window,this.webStorage=this.window.localStorage}return t.getStore=function(t,e){if(t instanceof ln)return ee.getStore(t.simpleDbTransaction,e);throw y("IndexedDbPersistence must use instances of IndexedDbTransaction")},t.createIndexedDbPersistence=function(e,n,r,i,o,a){return s.__awaiter(this,void 0,void 0,function(){var u;return s.__generator(this,function(s){switch(s.label){case 0:return[4,(u=new t(e,n,r,i,o,a)).start()];case 1:return s.sent(),[2,u]}})})},t.createMultiClientIndexedDbPersistence=function(e,n,r,i,o,a,u){return s.__awaiter(this,void 0,void 0,function(){var l;return s.__generator(this,function(s){switch(s.label){case 0:return[4,(l=new t(e,n,r,i,o,a,u)).start()];case 1:return s.sent(),[2,l]}})})},t.prototype.start=function(){var t=this;return v(!this.started,"IndexedDbPersistence double-started!"),v(null!==this.window,"Expected 'window' to be defined"),ee.openOrCreate(this.dbName,ke,new De(this.serializer)).then(function(e){return t.simpleDb=e,t.updateClientMetadataAndTryBecomePrimary()}).then(function(){return t.attachVisibilityHandler(),t.attachWindowUnloadHook(),t.scheduleClientMetadataAndPrimaryLeaseRefreshes(),t.startRemoteDocumentCache()}).then(function(){return t.simpleDb.runTransaction("readonly",[qe.store],function(e){return he(e).next(function(e){t.listenSequence=new it(e,t.multiClientParams?t.multiClientParams.sequenceNumberSyncer:void 0)})})}).then(function(){t._started=!0}).catch(function(e){return t.simpleDb&&t.simpleDb.close(),Promise.reject(e)})},t.prototype.startRemoteDocumentCache=function(){var t=this;return this.simpleDb.runTransaction("readonly",We,function(e){return t.remoteDocumentCache.start(e)})},t.prototype.setPrimaryStateListener=function(t){var e=this;return this.primaryStateListener=function(n){return s.__awaiter(e,void 0,void 0,function(){return s.__generator(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.simpleDb.setVersionChangeListener(function(n){return s.__awaiter(e,void 0,void 0,function(){return s.__generator(this,function(e){switch(e.label){case 0:return null!==n.newVersion?[3,2]:[4,t()];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.queue.enqueueAndForget(function(){return s.__awaiter(e,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.updateClientMetadataAndTryBecomePrimary=function(){var t=this;return this.simpleDb.runTransaction("readwrite",We,function(e){return fn(e).put(new He(t.clientId,Date.now(),t.networkEnabled,t.inForeground,t.remoteDocumentCache.lastProcessedDocumentChangeId)).next(function(){if(t.isPrimary)return t.verifyPrimaryLease(e).next(function(e){e||(t.isPrimary=!1,t.queue.enqueueAndForget(function(){return t.primaryStateListener(!1)}))})}).next(function(){return t.canActAsPrimary(e)}).next(function(n){var r=t.isPrimary;return t.isPrimary=n,r!==t.isPrimary&&t.queue.enqueueAndForget(function(){return t.primaryStateListener(t.isPrimary)}),r&&!t.isPrimary?t.releasePrimaryLeaseIfHeld(e):t.isPrimary?t.acquireOrExtendPrimaryLease(e):void 0})})},t.prototype.verifyPrimaryLease=function(t){var e=this;return dn(t).get(Oe.key).next(function(t){return Gt.resolve(e.isLocalClient(t))})},t.prototype.removeClientMetadata=function(t){return fn(t).delete(this.clientId)},t.prototype.maybeGarbageCollectMultiClientState=function(){return s.__awaiter(this,void 0,void 0,function(){var e,n,r=this;return s.__generator(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),n=[],[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(i){var o=t.getStore(i,He.store);return o.loadAll().next(function(t){e=r.filterActiveClients(t,18e5),n=t.filter(function(t){return-1===e.indexOf(t)})}).next(function(){return Gt.forEach(n,function(t){return o.delete(t.clientId)})}).next(function(){if((e=e.filter(function(t){return t.clientId!==r.clientId})).length>0){var t=e.map(function(t){return t.lastProcessedDocumentChangeId||0}),n=Math.min.apply(Math,t);return r.remoteDocumentCache.removeDocumentChangesThroughChangeId(i,n)}})})]);case 1:i.sent(),n.forEach(function(t){r.window.localStorage.removeItem(r.zombiedClientLocalStorageKey(t.clientId))}),i.label=2;case 2:return[2]}})})},t.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var t=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(ht.ClientMetadataRefresh,4e3,function(){return t.updateClientMetadataAndTryBecomePrimary().then(function(){return t.maybeGarbageCollectMultiClientState()}).then(function(){return t.scheduleClientMetadataAndPrimaryLeaseRefreshes()})})},t.prototype.isLocalClient=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.canActAsPrimary=function(t){var e=this;return dn(t).get(Oe.key).next(function(n){if(null!==n&&e.isWithinAge(n.leaseTimestampMs,5e3)&&!e.isClientZombied(n.ownerId)){if(e.isLocalClient(n)&&e.networkEnabled)return!0;if(!e.isLocalClient(n)){if(!n.allowTabSynchronization)throw new E(_.FAILED_PRECONDITION,an);return!1}}return!(!e.networkEnabled||!e.inForeground)||fn(t).loadAll().next(function(t){return void 0===e.filterActiveClients(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&p(on,"Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return s.__awaiter(this,void 0,void 0,function(){var t=this;return s.__generator(this,function(e){switch(e.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite",[Oe.store,He.store],function(e){return t.releasePrimaryLeaseIfHeld(e).next(function(){return t.removeClientMetadata(e)})})];case 1:return e.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),[2]}})})},t.prototype.filterActiveClients=function(t,e){var n=this;return t.filter(function(t){return n.isWithinAge(t.updateTimeMs,e)&&!n.isClientZombied(t.clientId)})},t.prototype.getActiveClients=function(){var t=this;return this.simpleDb.runTransaction("readonly",[He.store],function(e){return fn(e).loadAll().next(function(e){return t.filterActiveClients(e,18e5).map(function(t){return t.clientId})})})},t.clearPersistence=function(e){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(n){switch(n.label){case 0:return t.isAvailable()?[4,ee.delete(e+t.MAIN_DATABASE)]:[2,Promise.resolve()];case 1:return n.sent(),[2]}})})},Object.defineProperty(t.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),t.prototype.getMutationQueue=function(t){return v(this.started,"Cannot initialize MutationQueue before persistence is started."),zt.forUser(t,this.serializer,this.indexManager,this.referenceDelegate)},t.prototype.getQueryCache=function(){return v(this.started,"Cannot initialize QueryCache before persistence is started."),this.queryCache},t.prototype.getRemoteDocumentCache=function(){return v(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},t.prototype.getIndexManager=function(){return v(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},t.prototype.runTransaction=function(t,e,n){var r=this;return p(on,"Starting transaction:",t),this.simpleDb.runTransaction("readonly"===e?"readonly":"readwrite",We,function(i){return"readwrite-primary"===e?r.verifyPrimaryLease(i).next(function(e){if(!e)throw m("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.queue.enqueueAndForget(function(){return r.primaryStateListener(!1)}),new E(_.FAILED_PRECONDITION,sn);return n(new ln(i,r.listenSequence.next()))}).next(function(t){return r.acquireOrExtendPrimaryLease(i).next(function(){return t})}):r.verifyAllowTabSynchronization(i).next(function(){return n(new ln(i,r.listenSequence.next()))})})},t.prototype.verifyAllowTabSynchronization=function(t){var e=this;return dn(t).get(Oe.key).next(function(t){if(null!==t&&e.isWithinAge(t.leaseTimestampMs,5e3)&&!e.isClientZombied(t.ownerId)&&!e.isLocalClient(t)&&!t.allowTabSynchronization)throw new E(_.FAILED_PRECONDITION,an)})},t.prototype.acquireOrExtendPrimaryLease=function(t){var e=new Oe(this.clientId,this.allowTabSynchronization,Date.now());return dn(t).put(Oe.key,e)},t.isAvailable=function(){return ee.isAvailable()},t.buildStoragePrefix=function(t){var e=t.databaseId.projectId;return t.databaseId.isDefaultDatabase||(e+="."+t.databaseId.database),"firestore/"+t.persistenceKey+"/"+e+"/"},t.prototype.releasePrimaryLeaseIfHeld=function(t){var e=this,n=dn(t);return n.get(Oe.key).next(function(t){return e.isLocalClient(t)?(p(on,"Releasing primary lease."),n.delete(Oe.key)):Gt.resolve()})},t.prototype.isWithinAge=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(m("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.attachVisibilityHandler=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){t.queue.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.updateClientMetadataAndTryBecomePrimary()})},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},t.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(v(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},t.prototype.attachWindowUnloadHook=function(){var t=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){t.markClientZombied(),t.queue.enqueueAndForget(function(){return t.shutdown()})},this.window.addEventListener("unload",this.windowUnloadHandler))},t.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(v("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},t.prototype.isClientZombied=function(t){try{var e=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(t));return p(on,"Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(n){return m(on,"Failed to get zombied client id.",n),!1}},t.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(t){m("Failed to set zombie client id.",t)}},t.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(t){}},t.prototype.zombiedClientLocalStorageKey=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t.MAIN_DATABASE="main",t}();function hn(t){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){if(!function(t){return t.code===_.FAILED_PRECONDITION&&t.message===sn}(t))throw t;return p(on,"Unexpectedly lost primary lease"),[2]})})}function dn(t){return t.store(Oe.store)}function fn(t){return t.store(He.store)}var pn=function(){function t(t,e){this.db=t,this.inMemoryPins=null,this.garbageCollector=new rn(this,e)}return t.prototype.getSequenceNumberCount=function(t){var e=this.orphanedDocmentCount(t);return this.db.getQueryCache().getQueryCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.orphanedDocmentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getQueryCache().forEachTarget(t,e)},t.prototype.forEachOrphanedDocumentSequenceNumber=function(t,e){return this.forEachOrphanedDocument(t,function(t,n){return e(n)})},t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.addReference=function(t,e){return mn(t,e)},t.prototype.removeReference=function(t,e){return mn(t,e)},t.prototype.removeTargets=function(t,e,n){return this.db.getQueryCache().removeTargets(t,e,n)},t.prototype.removeMutationReference=function(t,e){return mn(t,e)},t.prototype.isPinned=function(t,e){return this.inMemoryPins.containsKey(e)?Gt.resolve(!0):function(t,e){var n=!1;return Yt(t).iterateSerial(function(r){return Ht(t,r,e).next(function(t){return t&&(n=!0),Gt.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.forEachOrphanedDocument(t,function(s,a){if(a<=e){var u=n.isPinned(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),de(t).delete([0,vt(s.path)])})});i.push(u)}}).next(function(){return Gt.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.copy({sequenceNumber:t.currentSequenceNumber});return this.db.getQueryCache().updateQueryData(t,n)},t.prototype.updateLimboDocument=function(t,e){return mn(t,e)},t.prototype.forEachOrphanedDocument=function(t,e){var n,r=de(t),i=it.INVALID;return r.iterate({index:Ue.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==it.INVALID&&e(new lt(_t(n)),i),i=s,n=o):i=it.INVALID}).next(function(){i!==it.INVALID&&e(new lt(_t(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function mn(t,e){return de(t).put(function(t,e){return new Ue(0,vt(t.path),e)}(e,t.currentSequenceNumber))}var gn=function(t){return t[t.NullValue=0]="NullValue",t[t.BooleanValue=1]="BooleanValue",t[t.NumberValue=2]="NumberValue",t[t.TimestampValue=3]="TimestampValue",t[t.StringValue=4]="StringValue",t[t.BlobValue=5]="BlobValue",t[t.RefValue=6]="RefValue",t[t.GeoPointValue=7]="GeoPointValue",t[t.ArrayValue=8]="ArrayValue",t[t.ObjectValue=9]="ObjectValue",t}({}),yn=function(t){return t[t.Default=0]="Default",t[t.Estimate=1]="Estimate",t[t.Previous=2]="Previous",t}({}),vn=function(){function t(t,e){this.serverTimestampBehavior=t,this.timestampsInSnapshots=e}return t.fromSnapshotOptions=function(e,n){switch(e.serverTimestamps){case"estimate":return new t(yn.Estimate,n);case"previous":return new t(yn.Previous,n);case"none":case void 0:return new t(yn.Default,n);default:return y("fromSnapshotOptions() called with invalid options.")}},t}(),bn=function(){function t(){}return t.prototype.toString=function(){var t=this.value();return null===t?"null":t.toString()},t.prototype.defaultCompareTo=function(t){return v(this.typeOrder!==t.typeOrder,"Default compareTo should not be used for values of same type."),Q(this.typeOrder,t.typeOrder)},t}(),wn=function(t){function e(){var e=t.call(this)||this;return e.typeOrder=gn.NullValue,e.internalValue=null,e}return s.__extends(e,t),e.prototype.value=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e},e.prototype.compareTo=function(t){return t instanceof e?0:this.defaultCompareTo(t)},e.INSTANCE=new e,e}(bn),_n=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=gn.BooleanValue,n}return s.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?Q(this,t):this.defaultCompareTo(t)},e.of=function(t){return t?e.TRUE:e.FALSE},e.TRUE=new e(!0),e.FALSE=new e(!1),e}(bn),En=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=gn.NumberValue,n}return s.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.compareTo=function(t){return t instanceof e?(n=this.internalValue)<(r=t.internalValue)?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1:this.defaultCompareTo(t);var n,r},e}(bn);function Sn(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}var Cn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&Sn(this.internalValue,t.internalValue)},e}(En),Tn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&Sn(this.internalValue,t.internalValue)},e.NAN=new e(NaN),e.POSITIVE_INFINITY=new e(1/0),e.NEGATIVE_INFINITY=new e(-1/0),e}(En),In=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=gn.StringValue,n}return s.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?Q(this.internalValue,t.internalValue):this.defaultCompareTo(t)},e}(bn),An=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=gn.TimestampValue,n}return s.__extends(e,t),e.prototype.value=function(t){return!t||t.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):t instanceof kn?-1:this.defaultCompareTo(t)},e}(bn),kn=function(t){function e(e,n){var r=t.call(this)||this;return r.localWriteTime=e,r.previousValue=n,r.typeOrder=gn.TimestampValue,r}return s.__extends(e,t),e.prototype.value=function(t){return t&&t.serverTimestampBehavior===yn.Estimate?new An(this.localWriteTime).value(t):t&&t.serverTimestampBehavior===yn.Previous&&this.previousValue?this.previousValue.value(t):null},e.prototype.isEqual=function(t){return t instanceof e&&this.localWriteTime.isEqual(t.localWriteTime)},e.prototype.compareTo=function(t){return t instanceof e?this.localWriteTime._compareTo(t.localWriteTime):t instanceof An?1:this.defaultCompareTo(t)},e.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},e}(bn),Dn=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=gn.BlobValue,n}return s.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(bn),Nn=function(t){function e(e,n){var r=t.call(this)||this;return r.databaseId=e,r.key=n,r.typeOrder=gn.RefValue,r}return s.__extends(e,t),e.prototype.value=function(t){return this.key},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.databaseId.isEqual(t.databaseId)},e.prototype.compareTo=function(t){if(t instanceof e){var n=this.databaseId.compareTo(t.databaseId);return 0!==n?n:lt.comparator(this.key,t.key)}return this.defaultCompareTo(t)},e}(bn),On=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=gn.GeoPointValue,n}return s.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(bn),xn=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=gn.ObjectValue,n}return s.__extends(e,t),e.prototype.value=function(t){var e={};return this.internalValue.inorderTraversal(function(n,r){e[n]=r.value(t)}),e},e.prototype.forEach=function(t){this.internalValue.inorderTraversal(t)},e.prototype.isEqual=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),r=t.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext();if(i.key!==o.key||!i.value.isEqual(o.value))return!1}return!n.hasNext()&&!r.hasNext()}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),r=t.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext(),s=Q(i.key,o.key)||i.value.compareTo(o.value);if(s)return s}return Q(n.hasNext(),r.hasNext())}return this.defaultCompareTo(t)},e.prototype.set=function(t,n){if(v(!t.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===t.length)return this.setChild(t.firstSegment(),n);var r=this.child(t.firstSegment());r instanceof e||(r=e.EMPTY);var i=r.set(t.popFirst(),n);return this.setChild(t.firstSegment(),i)},e.prototype.delete=function(t){if(v(!t.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===t.length)return new e(this.internalValue.remove(t.firstSegment()));var n=this.child(t.firstSegment());if(n instanceof e){var r=n.delete(t.popFirst());return new e(this.internalValue.insert(t.firstSegment(),r))}return this},e.prototype.contains=function(t){return null!==this.field(t)},e.prototype.field=function(t){v(!t.isEmpty(),"Can't get field of empty path");var n=this;return t.forEach(function(t){n=n instanceof e?n.internalValue.get(t):null}),n},e.prototype.fieldMask=function(){var t=new kt(ut.comparator);return this.internalValue.forEach(function(n,r){var i=new ut([n]);if(r instanceof e){var o=r.fieldMask().fields;o.isEmpty()?t=t.add(i):o.forEach(function(e){t=t.add(i.child(e))})}else t=t.add(i)}),Pn.fromSet(t)},e.prototype.toString=function(){return this.internalValue.toString()},e.prototype.child=function(t){return this.internalValue.get(t)||void 0},e.prototype.setChild=function(t,n){return new e(this.internalValue.insert(t,n))},e.EMPTY=new e(new Ct(Q)),e}(bn),Rn=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=gn.ArrayValue,n}return s.__extends(e,t),e.prototype.value=function(t){return this.internalValue.map(function(e){return e.value(t)})},e.prototype.contains=function(t){for(var e=0,n=this.internalValue;e<n.length;e++)if(n[e].isEqual(t))return!0;return!1},e.prototype.forEach=function(t){this.internalValue.forEach(t)},e.prototype.isEqual=function(t){if(t instanceof e){if(this.internalValue.length!==t.internalValue.length)return!1;for(var n=0;n<this.internalValue.length;n++)if(!this.internalValue[n].isEqual(t.internalValue[n]))return!1;return!0}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=Math.min(this.internalValue.length,t.internalValue.length),r=0;r<n;r++){var i=this.internalValue[r].compareTo(t.internalValue[r]);if(i)return i}return Q(this.internalValue.length,t.internalValue.length)}return this.defaultCompareTo(t)},e.prototype.toString=function(){return"["+this.internalValue.map(function(t){return t.toString()}).join(",")+"]"},e}(bn),Pn=function(){function t(t){this.fields=t}return t.fromSet=function(e){return new t(e)},t.fromArray=function(e){var n=new kt(ut.comparator);return e.forEach(function(t){return n=n.add(t)}),new t(n)},t.prototype.covers=function(t){var e=!1;return this.fields.forEach(function(n){n.isPrefixOf(t)&&(e=!0)}),e},t.prototype.isEqual=function(t){return this.fields.isEqual(t.fields)},t}(),Mn=function(){function t(t,e){this.field=t,this.transform=e}return t.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},t}(),Ln=function(){return function(t,e){this.version=t,this.transformResults=e}}(),Vn=function(t){return t[t.Set=0]="Set",t[t.Patch=1]="Patch",t[t.Transform=2]="Transform",t[t.Delete=3]="Delete",t}({}),jn=function(){function t(t,e){this.updateTime=t,this.exists=e,v(void 0===t||void 0===e,'Precondition can specify "exists" or "updateTime" but not both')}return t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),t.prototype.isValidFor=function(t){return void 0!==this.updateTime?t instanceof pe&&t.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===t instanceof pe:(v(this.isNone,"Precondition should be empty"),!0)},t.prototype.isEqual=function(t){return n=t.updateTime,(null!=(e=this.updateTime)?!(!n||!e.isEqual(n)):e===n)&&this.exists===t.exists;var e,n},t.NONE=new t,t}(),Fn=function(){function t(){}return t.prototype.verifyKeyMatches=function(t){null!=t&&v(t.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},t.getPostMutationVersion=function(t){return t instanceof pe?t.version:St.MIN},t}(),Un=function(t){function e(e,n,r){var i=t.call(this)||this;return i.key=e,i.value=n,i.precondition=r,i.type=Vn.Set,i}return s.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){return this.verifyKeyMatches(t),v(null==e.transformResults,"Transform results received by SetMutation."),new pe(this.key,e.version,this.value,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=Fn.getPostMutationVersion(t);return new pe(this.key,r,this.value,{hasLocalMutations:!0})},e.prototype.extractBaseValue=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.precondition.isEqual(t.precondition)},e}(Fn),qn=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.key=e,o.data=n,o.fieldMask=r,o.precondition=i,o.type=Vn.Patch,o}return s.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),v(null==e.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(t))return new ge(this.key,e.version);var n=this.patchDocument(t);return new pe(this.key,e.version,n,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=Fn.getPostMutationVersion(t),i=this.patchDocument(t);return new pe(this.key,r,i,{hasLocalMutations:!0})},e.prototype.extractBaseValue=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.fieldMask.isEqual(t.fieldMask)&&this.precondition.isEqual(t.precondition)},e.prototype.patchDocument=function(t){return this.patchObject(t instanceof pe?t.data:xn.EMPTY)},e.prototype.patchObject=function(t){var e=this;return this.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=e.data.field(n);t=null!==r?t.set(n,r):t.delete(n)}}),t},e}(Fn),Bn=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.fieldTransforms=n,r.type=Vn.Transform,r.precondition=jn.exists(!0),r}return s.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),v(null!=e.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(t))return new ge(this.key,e.version);var n=this.requireDocument(t),r=this.serverTransformResults(t,e.transformResults),i=e.version,o=this.transformObject(n.data,r);return new pe(this.key,i,o,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=this.requireDocument(t),i=this.localTransformResults(n,t,e),o=this.transformObject(r.data,i);return new pe(this.key,r.version,o,{hasLocalMutations:!0})},e.prototype.extractBaseValue=function(t){for(var e=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=t instanceof pe?t.field(i.field):void 0,s=i.transform.computeBaseValue(o||null);null!=s&&(e=null==e?xn.EMPTY.set(i.field,s):e.set(i.field,s))}return e},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&$(this.fieldTransforms,t.fieldTransforms)&&this.precondition.isEqual(t.precondition)},e.prototype.requireDocument=function(t){v(t instanceof pe,"Unknown MaybeDocument type "+t);var e=t;return v(e.key.isEqual(this.key),"Can only transform a document with the same key"),e},e.prototype.serverTransformResults=function(t,e){var n=[];v(this.fieldTransforms.length===e.length,"server transform result count ("+e.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<e.length;r++){var i=this.fieldTransforms[r],o=i.transform,s=null;t instanceof pe&&(s=t.field(i.field)),n.push(o.applyToRemoteDocument(s,e[r]))}return n},e.prototype.localTransformResults=function(t,e,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var s=o[i],a=s.transform,u=null;e instanceof pe&&(u=e.field(s.field)),null===u&&n instanceof pe&&(u=n.field(s.field)),r.push(a.applyToLocalView(u,t))}return r},e.prototype.transformObject=function(t,e){v(e.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++)t=t.set(this.fieldTransforms[n].field,e[n]);return t},e}(Fn),Gn=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.precondition=n,r.type=Vn.Delete,r}return s.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){return this.verifyKeyMatches(t),v(null==e.transformResults,"Transform results received by DeleteMutation."),new me(this.key,e.version,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){return this.verifyKeyMatches(t),this.precondition.isValidFor(t)?(t&&v(t.key.isEqual(this.key),"Can only apply mutation to document with same key"),new me(this.key,St.forDeletedDoc())):t},e.prototype.extractBaseValue=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.precondition.isEqual(t.precondition)},e}(Fn),zn=function(){function t(t,e,n){this.remoteDocumentCache=t,this.mutationQueue=e,this.indexManager=n}return t.prototype.getDocument=function(t,e){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.getDocumentInternal(t,e,r)})},t.prototype.getDocumentInternal=function(t,e,n){return this.remoteDocumentCache.getEntry(t,e).next(function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].applyToLocalView(e,t);return t})},t.prototype.applyLocalMutationsToDocuments=function(t,e,n){var r=xt();return e.forEach(function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].applyToLocalView(t,e);r=r.insert(t,e)}),r},t.prototype.getDocuments=function(t,e){var n=this;return this.remoteDocumentCache.getEntries(t,e).next(function(e){return n.getLocalViewOfDocuments(t,e)})},t.prototype.getLocalViewOfDocuments=function(t,e){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(r){var i=n.applyLocalMutationsToDocuments(t,e,r),o=Ot();return i.forEach(function(t,e){e||(e=new me(t,St.forDeletedDoc())),o=o.insert(t,e)}),o})},t.prototype.getDocumentsMatchingQuery=function(t,e){return e.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(t,e.path):e.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(t,e):this.getDocumentsMatchingCollectionQuery(t,e)},t.prototype.getDocumentsMatchingDocumentQuery=function(t,e){return this.getDocument(t,new lt(e)).next(function(t){var e=Pt();return t instanceof pe&&(e=e.insert(t.key,t)),e})},t.prototype.getDocumentsMatchingCollectionGroupQuery=function(t,e){var n=this;v(e.path.isEmpty(),"Currently we only support collection group queries at the root.");var r=e.collectionGroup,i=Pt();return this.indexManager.getCollectionParents(t,r).next(function(o){return Gt.forEach(o,function(o){var s=e.asCollectionQueryAtPath(o.child(r));return n.getDocumentsMatchingCollectionQuery(t,s).next(function(t){t.forEach(function(t,e){i=i.insert(t,e)})})}).next(function(){return i})})},t.prototype.getDocumentsMatchingCollectionQuery=function(t,e){var n,r,i=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(t,e).next(function(r){return n=r,i.mutationQueue.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return i.addMissingBaseDocuments(t,r=e,n).next(function(t){n=t;for(var e=0,i=r;e<i.length;e++)for(var o=i[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],l=u.key,c=n.get(l),h=u.applyToLocalView(c,c,o.localWriteTime);n=h instanceof pe?n.insert(l,h):n.remove(l)}})}).next(function(){return n.forEach(function(t,r){e.matches(r)||(n=n.remove(t))}),n})},t.prototype.addMissingBaseDocuments=function(t,e,n){for(var r=jt(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof qn&&null===n.get(u.key)&&(r=r.add(u.key))}var l=n;return this.remoteDocumentCache.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof pe&&(l=l.insert(t,e))}),l})},t}(),Hn=function(){function t(){this.refsByKey=new kt(Wn.compareByKey),this.refsByTarget=new kt(Wn.compareByTargetId)}return t.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},t.prototype.addReference=function(t,e){var n=new Wn(t,e);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},t.prototype.addReferences=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.removeRef(new Wn(t,e))},t.prototype.removeReferences=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.removeReferencesForId=function(t){var e=this,n=lt.EMPTY,r=new Wn(n,t),i=new Wn(n,t+1),o=[];return this.refsByTarget.forEachInRange([r,i],function(t){e.removeRef(t),o.push(t.key)}),o},t.prototype.removeAllReferences=function(){var t=this;this.refsByKey.forEach(function(e){return t.removeRef(e)})},t.prototype.removeRef=function(t){this.refsByKey=this.refsByKey.delete(t),this.refsByTarget=this.refsByTarget.delete(t)},t.prototype.referencesForId=function(t){var e=lt.EMPTY,n=new Wn(e,t),r=new Wn(e,t+1),i=jt();return this.refsByTarget.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new Wn(t,0),n=this.refsByKey.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Wn=function(){function t(t,e){this.key=t,this.targetOrBatchId=e}return t.compareByKey=function(t,e){return lt.comparator(t.key,e.key)||Q(t.targetOrBatchId,e.targetOrBatchId)},t.compareByTargetId=function(t,e){return Q(t.targetOrBatchId,e.targetOrBatchId)||lt.comparator(t.key,e.key)},t}(),Kn=function(){function t(t,e){this.persistence=t,this.localViewReferences=new Hn,this.queryDataByTarget={},v(t.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=t.getMutationQueue(e),this.remoteDocuments=t.getRemoteDocumentCache(),this.queryCache=t.getQueryCache(),this.localDocuments=new zn(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager())}return t.prototype.handleUserChange=function(t){var e=this;return this.persistence.runTransaction("Handle user change","readonly",function(n){var r;return e.mutationQueue.getAllMutationBatches(n).next(function(i){return r=i,e.mutationQueue=e.persistence.getMutationQueue(t),e.localDocuments=new zn(e.remoteDocuments,e.mutationQueue,e.persistence.getIndexManager()),e.mutationQueue.getAllMutationBatches(n)}).next(function(t){for(var i=[],o=[],s=jt(),a=0,u=r;a<u.length;a++){i.push((f=u[a]).batchId);for(var l=0,c=f.mutations;l<c.length;l++)s=s.add(c[l].key)}for(var h=0,d=t;h<d.length;h++){var f;o.push((f=d[h]).batchId);for(var p=0,m=f.mutations;p<m.length;p++)s=s.add(m[p].key)}return e.localDocuments.getDocuments(n,s).next(function(t){return{affectedDocuments:t,removedBatchIds:i,addedBatchIds:o}})})})},t.prototype.localWrite=function(t){var e=this,n=Et.now(),r=t.reduce(function(t,e){return t.add(e.key)},jt());return this.persistence.runTransaction("Locally write mutations","readwrite",function(i){return e.localDocuments.getDocuments(i,r).next(function(r){for(var o=[],s=0,a=t;s<a.length;s++){var u=a[s],l=u.extractBaseValue(r.get(u.key));null!=l&&o.push(new qn(u.key,l,l.fieldMask(),jn.exists(!0)))}return e.mutationQueue.addMutationBatch(i,n,o,t).next(function(t){var e=t.applyToLocalDocumentSet(r);return{batchId:t.batchId,changes:e}})})})},t.prototype.lookupMutationDocuments=function(t){var e=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",function(n){return e.mutationQueue.lookupMutationKeys(n,t).next(function(t){return t?e.localDocuments.getDocuments(n,t):Gt.resolve(null)})})},t.prototype.acknowledgeBatch=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(n){var r=t.batch.keys(),i=e.remoteDocuments.newChangeBuffer();return e.mutationQueue.acknowledgeBatch(n,t.batch,t.streamToken).next(function(){return e.applyWriteToRemoteDocuments(n,t,i)}).next(function(){return i.apply(n)}).next(function(){return e.mutationQueue.performConsistencyCheck(n)}).next(function(){return e.localDocuments.getDocuments(n,r)})})},t.prototype.rejectBatch=function(t){var e=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",function(n){var r;return e.mutationQueue.lookupMutationBatch(n,t).next(function(t){return v(null!==t,"Attempt to reject nonexistent batch!"),r=t.keys(),e.mutationQueue.removeMutationBatch(n,t)}).next(function(){return e.mutationQueue.performConsistencyCheck(n)}).next(function(){return e.localDocuments.getDocuments(n,r)})})},t.prototype.getHighestUnacknowledgedBatchId=function(){var t=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)})},t.prototype.getLastStreamToken=function(){var t=this;return this.persistence.runTransaction("Get last stream token","readonly",function(e){return t.mutationQueue.getLastStreamToken(e)})},t.prototype.setLastStreamToken=function(t){var e=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary",function(n){return e.mutationQueue.setLastStreamToken(n,t)})},t.prototype.getLastRemoteSnapshotVersion=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",function(e){return t.queryCache.getLastRemoteSnapshotVersion(e)})},t.prototype.applyRemoteEvent=function(e){var n=this,r=this.remoteDocuments.newChangeBuffer(),i=e.snapshotVersion;return this.persistence.runTransaction("Apply remote event","readwrite-primary",function(o){var s=[];I(e.targetChanges,function(e,r){var a=n.queryDataByTarget[e];if(a){s.push(n.queryCache.removeMatchingKeys(o,r.removedDocuments,e).next(function(){return n.queryCache.addMatchingKeys(o,r.addedDocuments,e)}));var u=r.resumeToken;if(u.length>0){var l=a.copy({resumeToken:u,snapshotVersion:i});n.queryDataByTarget[e]=l,t.shouldPersistQueryData(a,l,r)&&s.push(n.queryCache.updateQueryData(o,l))}}});var a=Ot(),u=jt();if(e.documentUpdates.forEach(function(t,e){u=u.add(t)}),s.push(r.getEntries(o,u).next(function(t){e.documentUpdates.forEach(function(i,u){var l=t.get(i);null==l||u.version.compareTo(l.version)>0||0===u.version.compareTo(l.version)&&l.hasPendingWrites?(r.addEntry(u),a=a.insert(i,u)):u instanceof me&&u.version.isEqual(St.MIN)?(r.removeEntry(i),a=a.insert(i,u)):p("LocalStore","Ignoring outdated watch update for ",i,". Current version:",l.version," Watch version:",u.version),e.resolvedLimboDocuments.has(i)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(o,i))})})),!i.isEqual(St.MIN)){var l=n.queryCache.getLastRemoteSnapshotVersion(o).next(function(t){return v(i.compareTo(t)>=0,"Watch stream reverted to previous snapshot?? "+i+" < "+t),n.queryCache.setTargetsMetadata(o,o.currentSequenceNumber,i)});s.push(l)}return Gt.waitFor(s).next(function(){return r.apply(o)}).next(function(){return n.localDocuments.getLocalViewOfDocuments(o,a)})})},t.shouldPersistQueryData=function(t,e,n){return v(e.resumeToken.length>0,"Attempted to persist query data with no resume token"),0===t.resumeToken.length||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0},t.prototype.notifyLocalViewChanges=function(t){var e=this;return this.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return Gt.forEach(t,function(t){return e.localViewReferences.addReferences(t.addedKeys,t.targetId),e.localViewReferences.removeReferences(t.removedKeys,t.targetId),Gt.forEach(t.removedKeys,function(t){return e.persistence.referenceDelegate.removeReference(n,t)})})})},t.prototype.nextMutationBatch=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch","readonly",function(n){return void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t)})},t.prototype.readDocument=function(t){var e=this;return this.persistence.runTransaction("read document","readonly",function(n){return e.localDocuments.getDocument(n,t)})},t.prototype.allocateQuery=function(t){var e=this;return this.persistence.runTransaction("Allocate query","readwrite",function(n){var r;return e.queryCache.getQueryData(n,t).next(function(i){return i?(r=i,Gt.resolve()):e.queryCache.allocateTargetId(n).next(function(i){return r=new Ye(t,i,$e.Listen,n.currentSequenceNumber),e.queryCache.addQueryData(n,r)})}).next(function(){return v(!e.queryDataByTarget[r.targetId],"Tried to allocate an already allocated query: "+t),e.queryDataByTarget[r.targetId]=r,r})})},t.prototype.releaseQuery=function(t,e){var n=this;return this.persistence.runTransaction("Release query",e?"readwrite":"readwrite-primary",function(r){return n.queryCache.getQueryData(r,t).next(function(i){v(null!=i,"Tried to release nonexistent query: "+t);var o=i.targetId,s=n.queryDataByTarget[o],a=n.localViewReferences.removeReferencesForId(o);return delete n.queryDataByTarget[o],e?Gt.resolve():Gt.forEach(a,function(t){return n.persistence.referenceDelegate.removeReference(r,t)}).next(function(){return n.persistence.referenceDelegate.removeTarget(r,s)})})})},t.prototype.executeQuery=function(t){var e=this;return this.persistence.runTransaction("Execute query","readonly",function(n){return e.localDocuments.getDocumentsMatchingQuery(n,t)})},t.prototype.remoteDocumentKeys=function(t){var e=this;return this.persistence.runTransaction("Remote document keys","readonly",function(n){return e.queryCache.getMatchingKeysForTargetId(n,t)})},t.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},t.prototype.removeCachedMutationBatchMetadata=function(t){this.mutationQueue.removeCachedMutationKeys(t)},t.prototype.setNetworkEnabled=function(t){this.persistence.setNetworkEnabled(t)},t.prototype.applyWriteToRemoteDocuments=function(t,e,n){var r=this,i=e.batch,o=i.keys(),s=Gt.resolve();return o.forEach(function(r){s=s.next(function(){return n.getEntry(t,r)}).next(function(t){var o=t,s=e.docVersions.get(r);v(null!==s,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(s)<0)&&((o=i.applyToRemoteDocument(r,o,e))?n.addEntry(o):v(!t,"Mutation batch "+i+" applied to document "+t+" resulted in null"))})}),s.next(function(){return r.mutationQueue.removeMutationBatch(t,i)})},t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.queryDataByTarget)})},t.prototype.getQueryForTarget=function(t){var e=this;return this.queryDataByTarget[t]?Promise.resolve(this.queryDataByTarget[t].query):this.persistence.runTransaction("Get query data","readonly",function(n){return e.queryCache.getQueryDataForTarget(n,t).next(function(t){return t?t.query:null})})},t.prototype.getNewDocumentChanges=function(){var t=this;return this.persistence.runTransaction("Get new document changes","readonly",function(e){return t.remoteDocuments.getNewDocumentChanges(e)})},t.RESUME_TOKEN_MAX_AGE_MICROS=3e8,t}(),Qn=function(){function t(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=w(),this.batchesByDocumentKey=new kt(Wn.compareByKey)}return t.prototype.checkEmpty=function(t){return Gt.resolve(0===this.mutationQueue.length)},t.prototype.acknowledgeBatch=function(t,e,n){var r=e.batchId,i=this.indexOfExistingBatchId(r,"acknowledged");v(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[i];return v(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,Gt.resolve()},t.prototype.getLastStreamToken=function(t){return Gt.resolve(this.lastStreamToken)},t.prototype.setLastStreamToken=function(t,e){return this.lastStreamToken=e,Gt.resolve()},t.prototype.addMutationBatch=function(t,e,n,r){v(0!==r.length,"Mutation batches should not be empty");var i=this.nextBatchId;this.nextBatchId++,this.mutationQueue.length>0&&v(this.mutationQueue[this.mutationQueue.length-1].batchId<i,"Mutation batchIDs must be monotonically increasing order");var o=new qt(i,e,n,r);this.mutationQueue.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new Wn(u.key,i)),this.indexManager.addToCollectionParentIndex(t,u.key.path.popLast())}return Gt.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Gt.resolve(this.findMutationBatch(e))},t.prototype.lookupMutationKeys=function(t,e){var n=this.findMutationBatch(e);return v(null!=n,"Failed to find local mutation batch."),Gt.resolve(n.keys())},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.indexOfBatchId(e+1),r=n<0?0:n;return Gt.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Gt.resolve(0===this.mutationQueue.length?-1:this.nextBatchId-1)},t.prototype.getAllMutationBatches=function(t){return Gt.resolve(this.mutationQueue.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Wn(e,0),i=new Wn(e,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],function(t){v(e.isEqual(t.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(t.targetOrBatchId);v(null!==r,"Batches in the index must exist in the main table"),o.push(r)}),Gt.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new kt(Q);return e.forEach(function(t){var e=new Wn(t,0),i=new Wn(t,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([e,i],function(e){v(t.isEqual(e.key),"For each key, should only iterate over a single key's batches"),r=r.add(e.targetOrBatchId)})}),Gt.resolve(this.findMutationBatches(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){v(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=e.path,r=n.length+1,i=n;lt.isDocumentKey(i)||(i=i.child(""));var o=new Wn(new lt(i),0),s=new kt(Q);return this.batchesByDocumentKey.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.targetOrBatchId)),!0)},o),Gt.resolve(this.findMutationBatches(s))},t.prototype.findMutationBatches=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.findMutationBatch(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;v(0===this.indexOfExistingBatchId(e.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return Gt.forEach(e.mutations,function(i){var o=new Wn(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.removeMutationReference(t,i.key)}).next(function(){n.batchesByDocumentKey=r})},t.prototype.removeCachedMutationKeys=function(t){},t.prototype.containsKey=function(t,e){var n=new Wn(e,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return Gt.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return 0===this.mutationQueue.length&&v(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),Gt.resolve()},t.prototype.indexOfExistingBatchId=function(t,e){var n=this.indexOfBatchId(t);return v(n>=0&&n<this.mutationQueue.length,"Batches must exist to be "+e),n},t.prototype.indexOfBatchId=function(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId},t.prototype.findMutationBatch=function(t){var e=this.indexOfBatchId(t);if(e<0||e>=this.mutationQueue.length)return null;var n=this.mutationQueue[e];return v(n.batchId===t,"If found batch must match"),n},t}(),$n=function(){function t(t){this.persistence=t,this.queries=new ye(function(t){return t.canonicalId()}),this.lastRemoteSnapshotVersion=St.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new Hn,this.targetCount=0,this.targetIdGenerator=Zt.forQueryCache()}return t.prototype.getTargetCount=function(t){return Gt.resolve(this.targetCount)},t.prototype.forEachTarget=function(t,e){return this.queries.forEach(function(t,n){return e(n)}),Gt.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Gt.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Gt.resolve(this.highestSequenceNumber)},t.prototype.allocateTargetId=function(t){var e=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=e,Gt.resolve(e)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.highestSequenceNumber&&(this.highestSequenceNumber=e),Gt.resolve()},t.prototype.saveQueryData=function(t){this.queries.set(t.query,t);var e=t.targetId;e>this.highestTargetId&&(this.highestTargetId=e),t.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=t.sequenceNumber)},t.prototype.addQueryData=function(t,e){return v(!this.queries.has(e.query),"Adding a query that already exists"),this.saveQueryData(e),this.targetCount+=1,Gt.resolve()},t.prototype.updateQueryData=function(t,e){return v(this.queries.has(e.query),"Updating a non-existent query"),this.saveQueryData(e),Gt.resolve()},t.prototype.removeQueryData=function(t,e){return v(this.targetCount>0,"Removing a target from an empty cache"),v(this.queries.has(e.query),"Removing a non-existent target from the cache"),this.queries.delete(e.query),this.references.removeReferencesForId(e.targetId),this.targetCount-=1,Gt.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.queries.forEach(function(s,a){a.sequenceNumber<=e&&!n[a.targetId]&&(r.queries.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Gt.waitFor(o).next(function(){return i})},t.prototype.getQueryCount=function(t){return Gt.resolve(this.targetCount)},t.prototype.getQueryData=function(t,e){var n=this.queries.get(e)||null;return Gt.resolve(n)},t.prototype.getQueryDataForTarget=function(t,e){return y("Not yet implemented.")},t.prototype.addMatchingKeys=function(t,e,n){this.references.addReferences(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.addReference(t,e))}),Gt.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){this.references.removeReferences(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.removeReference(t,e))}),Gt.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this.references.removeReferencesForId(e),Gt.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this.references.referencesForId(e);return Gt.resolve(n)},t.prototype.containsKey=function(t,e){return Gt.resolve(this.references.containsKey(e))},t}(),Yn=function(){function t(t,e){this.indexManager=t,this.sizer=e,this.docs=new Ct(lt.comparator),this.newDocumentChanges=jt(),this.size=0}return t.prototype.addEntry=function(t,e){var n=e.key,r=this.docs.get(n),i=r?r.size:0,o=this.sizer(e);return this.docs=this.docs.insert(n,{maybeDocument:e,size:o}),this.newDocumentChanges=this.newDocumentChanges.add(n),this.size+=o-i,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Gt.resolve(n?n.maybeDocument:null)},t.prototype.getEntries=function(t,e){var n=this,r=xt();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.maybeDocument:null)}),Gt.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e){v(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var n=Pt(),r=new lt(e.path.child("")),i=this.docs.getIteratorFrom(r);i.hasNext();){var o=i.getNext(),s=o.value.maybeDocument;if(!e.path.isPrefixOf(o.key.path))break;s instanceof pe&&e.matches(s)&&(n=n.insert(s.key,s))}return Gt.resolve(n)},t.prototype.forEachDocumentKey=function(t,e){return Gt.forEach(this.docs,function(t){return e(t)})},t.prototype.getNewDocumentChanges=function(t){var e=this,n=Ot();return this.newDocumentChanges.forEach(function(t){var r=e.docs.get(t),i=r?r.maybeDocument:new me(t,St.forDeletedDoc());n=n.insert(t,i)}),this.newDocumentChanges=jt(),Gt.resolve(n)},t.prototype.newChangeBuffer=function(){return new t.RemoteDocumentChangeBuffer(this)},t.prototype.getSize=function(t){return Gt.resolve(this.size)},t.RemoteDocumentChangeBuffer=function(t){function e(e){var n=t.call(this)||this;return n.documentCache=e,n}return s.__extends(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i?n.push(e.documentCache.addEntry(t,i)):e.documentCache.removeEntry(r)}),Gt.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.documentCache.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.documentCache.getEntries(t,e)},e}(ve),t}(),Jn=function(){function t(t,e){var n=this;this.clientId=t,this.mutationQueues={},this.listenSequence=new it(0),this._started=!1,this._started=!0,this.referenceDelegate=e(this),this.queryCache=new $n(this),this.indexManager=new Ie,this.remoteDocumentCache=new Yn(this.indexManager,function(t){return n.referenceDelegate.documentSize(t)})}return t.createLruPersistence=function(e,n,r){return new t(e,function(t){return new tr(t,new Je(n),r)})},t.createEagerPersistence=function(e){return new t(e,function(t){return new Zn(t)})},t.prototype.shutdown=function(){return this._started=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),t.prototype.getActiveClients=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){return[2,[this.clientId]]})})},t.prototype.setPrimaryStateListener=function(t){return t(!0)},t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(t){},t.prototype.getIndexManager=function(){return this.indexManager},t.prototype.getMutationQueue=function(t){var e=this.mutationQueues[t.toKey()];return e||(e=new Qn(this.indexManager,this.referenceDelegate),this.mutationQueues[t.toKey()]=e),e},t.prototype.getQueryCache=function(){return this.queryCache},t.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},t.prototype.runTransaction=function(t,e,n){var r=this;p("MemoryPersistence","Starting transaction:",t);var i=new Xn(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next(function(t){return r.referenceDelegate.onTransactionCommitted(i).next(function(){return t})}).toPromise()},t.prototype.mutationQueuesContainKey=function(t,e){return Gt.or((n=this.mutationQueues,r=[],A(n,function(t,e){return r.push(e)}),r).map(function(n){return function(){return n.containsKey(t,e)}}));var n,r},t}(),Xn=function(){return function(t){this.currentSequenceNumber=t}}(),Zn=function(){function t(t){this.persistence=t,this.inMemoryPins=null,this._orphanedDocuments=null}return Object.defineProperty(t.prototype,"orphanedDocuments",{get:function(){if(this._orphanedDocuments)return this._orphanedDocuments;throw y("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.addReference=function(t,e){return this.orphanedDocuments.delete(e),Gt.resolve()},t.prototype.removeReference=function(t,e){return this.orphanedDocuments.add(e),Gt.resolve()},t.prototype.removeMutationReference=function(t,e){return this.orphanedDocuments.add(e),Gt.resolve()},t.prototype.removeTarget=function(t,e){var n=this,r=this.persistence.getQueryCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.orphanedDocuments.add(t)})}).next(function(){return r.removeQueryData(t,e)})},t.prototype.onTransactionStarted=function(){this._orphanedDocuments=new Set},t.prototype.onTransactionCommitted=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Gt.forEach(this.orphanedDocuments,function(r){return e.isReferenced(t,r).next(function(t){t||n.removeEntry(r)})}).next(function(){return e._orphanedDocuments=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.isReferenced(t,e).next(function(t){t?n.orphanedDocuments.delete(e):n.orphanedDocuments.add(e)})},t.prototype.documentSize=function(t){return 0},t.prototype.isReferenced=function(t,e){var n=this;return Gt.or([function(){return n.persistence.getQueryCache().containsKey(t,e)},function(){return n.persistence.mutationQueuesContainKey(t,e)},function(){return Gt.resolve(n.inMemoryPins.containsKey(e))}])},t}(),tr=function(){function t(t,e,n){this.persistence=t,this.serializer=e,this.inMemoryPins=null,this.orphanedSequenceNumbers=new ye(function(t){return vt(t.path)}),this.garbageCollector=new rn(this,n)}return t.prototype.onTransactionStarted=function(){},t.prototype.onTransactionCommitted=function(t){return Gt.resolve()},t.prototype.forEachTarget=function(t,e){return this.persistence.getQueryCache().forEachTarget(t,e)},t.prototype.getSequenceNumberCount=function(t){var e=this.orphanedDocumentCount(t);return this.persistence.getQueryCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.orphanedDocumentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,function(t){e++}).next(function(){return e})},t.prototype.forEachOrphanedDocumentSequenceNumber=function(t,e){var n=this;return Gt.forEach(this.orphanedSequenceNumbers,function(r,i){return n.isPinned(t,r,i).next(function(t){return t?Gt.resolve():e(i)})})},t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.removeTargets=function(t,e,n){return this.persistence.getQueryCache().removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.forEachDocumentKey(t,function(i){return n.isPinned(t,i,e).next(function(t){t||(r++,o.removeEntry(i))})}).next(function(){return o.apply(t)}).next(function(){return r})},t.prototype.removeMutationReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Gt.resolve()},t.prototype.removeTarget=function(t,e){var n=e.copy({sequenceNumber:t.currentSequenceNumber});return this.persistence.getQueryCache().updateQueryData(t,n)},t.prototype.addReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Gt.resolve()},t.prototype.removeReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Gt.resolve()},t.prototype.updateLimboDocument=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Gt.resolve()},t.prototype.documentSize=function(t){var e,n=this.serializer.toDbRemoteDocument(t);if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw y("Unknown remote document type");e=n.noDocument}return JSON.stringify(e).length},t.prototype.isPinned=function(t,e,n){var r=this;return Gt.or([function(){return r.persistence.mutationQueuesContainKey(t,e)},function(){return Gt.resolve(r.inMemoryPins.containsKey(e))},function(){return r.persistence.getQueryCache().containsKey(t,e)},function(){var t=r.orphanedSequenceNumbers.get(e);return Gt.resolve(void 0!==t&&t>n)}])},t.prototype.getCacheSize=function(t){return this.persistence.getRemoteDocumentCache().getSize(t)},t}(),er=Number,nr=er.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),rr=er.MAX_SAFE_INTEGER||Math.pow(2,53)-1,ir=er.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};function or(t){return null==t}function sr(t){return ir(t)&&t<=rr&&t>=nr}var ar=1e3,ur=1.5,lr=6e4,cr=function(){function t(t,e,n,r,i){void 0===n&&(n=ar),void 0===r&&(r=ur),void 0===i&&(i=lr),this.queue=t,this.timerId=e,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}return t.prototype.reset=function(){this.currentBaseMs=0},t.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},t.prototype.backoffAndRun=function(t){var e=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);this.currentBaseMs>0&&p("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,function(){return e.lastAttemptTime=Date.now(),t()}),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},t.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},t.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},t}(),hr=function(t){return t[t.Initial=0]="Initial",t[t.Starting=1]="Starting",t[t.Open=2]="Open",t[t.Error=3]="Error",t[t.Backoff=4]="Backoff",t}({}),dr=function(){function t(t,e,n,r,i,o){this.queue=t,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=hr.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new cr(t,e)}return t.prototype.isStarted=function(){return this.state===hr.Starting||this.state===hr.Open||this.state===hr.Backoff},t.prototype.isOpen=function(){return this.state===hr.Open},t.prototype.start=function(){this.state!==hr.Error?(v(this.state===hr.Initial,"Already started"),this.auth()):this.performBackoff()},t.prototype.stop=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return this.isStarted()?[4,this.close(hr.Initial)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.inhibitBackoff=function(){v(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=hr.Initial,this.backoff.reset()},t.prototype.markIdle=function(){var t=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,function(){return t.handleIdleCloseTimer()}))},t.prototype.sendRequest=function(t){this.cancelIdleCheck(),this.stream.send(t)},t.prototype.handleIdleCloseTimer=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){return this.isOpen()?[2,this.close(hr.Initial)]:[2]})})},t.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},t.prototype.close=function(t,e){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(n){switch(n.label){case 0:return v(this.isStarted(),"Only started streams should be closed."),v(t===hr.Error||or(e),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,t!==hr.Error?this.backoff.reset():e&&e.code===_.RESOURCE_EXHAUSTED?(m(e.toString()),m("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):e&&e.code===_.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.onClose(e)];case 1:return n.sent(),[2]}})})},t.prototype.tearDown=function(){},t.prototype.auth=function(){var t=this;v(this.state===hr.Initial,"Must be in initial state to auth"),this.state=hr.Starting;var e=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then(function(e){t.closeCount===n&&t.startStream(e)},function(n){e(function(){var e=new E(_.UNKNOWN,"Fetching auth token failed: "+n.message);return t.handleStreamClose(e)})})},t.prototype.startStream=function(t){var e=this;v(this.state===hr.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(t),this.stream.onOpen(function(){n(function(){return v(e.state===hr.Starting,"Expected stream to be in state Starting, but was "+e.state),e.state=hr.Open,e.listener.onOpen()})}),this.stream.onClose(function(t){n(function(){return e.handleStreamClose(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.performBackoff=function(){var t=this;v(this.state===hr.Error,"Should only perform backoff when in Error state"),this.state=hr.Backoff,this.backoff.backoffAndRun(function(){return s.__awaiter(t,void 0,void 0,function(){return s.__generator(this,function(t){return v(this.state===hr.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=hr.Initial,this.start(),v(this.isStarted(),"PersistentStream should have started"),[2]})})})},t.prototype.handleStreamClose=function(t){return v(this.isStarted(),"Can't handle server close on non-started stream"),p("PersistentStream","close with error: "+t),this.stream=null,this.close(hr.Error,t)},t.prototype.getCloseGuardedDispatcher=function(t){var e=this;return function(n){e.queue.enqueueAndForget(function(){return e.closeCount===t?n():(p("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),fr=function(t){function e(e,n,r,i,o){var s=t.call(this,e,ht.ListenStreamConnectionBackoff,ht.ListenStreamIdle,n,r,o)||this;return s.serializer=i,s}return s.__extends(e,t),e.prototype.startRpc=function(t){return this.connection.openStream("Listen",t)},e.prototype.onMessage=function(t){this.backoff.reset();var e=this.serializer.fromWatchChange(t),n=this.serializer.versionFromListenResponse(t);return this.listener.onWatchChange(e,n)},e.prototype.watch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.addTarget=this.serializer.toTarget(t);var n=this.serializer.toListenRequestLabels(t);n&&(e.labels=n),this.sendRequest(e)},e.prototype.unwatch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.removeTarget=t,this.sendRequest(e)},e}(dr),pr=function(t){function e(e,n,r,i,o){var s=t.call(this,e,ht.WriteStreamConnectionBackoff,ht.WriteStreamIdle,n,r,o)||this;return s.serializer=i,s.handshakeComplete_=!1,s.lastStreamToken=w(),s}return s.__extends(e,t),Object.defineProperty(e.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.handshakeComplete_=!1,t.prototype.start.call(this)},e.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},e.prototype.startRpc=function(t){return this.connection.openStream("Write",t)},e.prototype.onMessage=function(t){if(v(!!t.streamToken,"Got a write response without a stream token"),this.lastStreamToken=t.streamToken,this.handshakeComplete_){this.backoff.reset();var e=this.serializer.fromWriteResults(t.writeResults,t.commitTime),n=this.serializer.fromVersion(t.commitTime);return this.listener.onMutationResult(n,e)}return v(!t.writeResults||0===t.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},e.prototype.writeHandshake=function(){v(this.isOpen(),"Writing handshake requires an opened stream"),v(!this.handshakeComplete_,"Handshake already completed");var t={};t.database=this.serializer.encodedDatabaseId,this.sendRequest(t)},e.prototype.writeMutations=function(t){var e=this;v(this.isOpen(),"Writing mutations requires an opened stream"),v(this.handshakeComplete_,"Handshake must be complete before writing mutations"),v(this.lastStreamToken.length>0,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:t.map(function(t){return e.serializer.toMutation(t)})};this.sendRequest(n)},e}(dr),mr=function(){function t(t,e,n,r){this.queue=t,this.connection=e,this.credentials=n,this.serializer=r}return t.prototype.newPersistentWriteStream=function(t){return new pr(this.queue,this.connection,this.credentials,this.serializer,t)},t.prototype.newPersistentWatchStream=function(t){return new fr(this.queue,this.connection,this.credentials,this.serializer,t)},t.prototype.commit=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,writes:t.map(function(t){return e.serializer.toMutation(t)})};return this.invokeRPC("Commit",n).then(function(t){return e.serializer.fromWriteResults(t.writeResults,t.commitTime)})},t.prototype.lookup=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,documents:t.map(function(t){return e.serializer.toName(t)})};return this.invokeStreamingRPC("BatchGetDocuments",n).then(function(n){var r=Ot();n.forEach(function(t){var n=e.serializer.fromMaybeDocument(t);r=r.insert(n.key,n)});var i=[];return t.forEach(function(t){var e=r.get(t);v(!!e,"Missing entity in write response for "+t),i.push(e)}),i})},t.prototype.invokeRPC=function(t,e){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeRPC(t,e,r)}).catch(function(t){throw t.code===_.UNAUTHENTICATED&&n.credentials.invalidateToken(),t})},t.prototype.invokeStreamingRPC=function(t,e){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeStreamingRPC(t,e,r)}).catch(function(t){throw t.code===_.UNAUTHENTICATED&&n.credentials.invalidateToken(),t})},t}(),gr=function(){function t(t){this.datastore=t,this.readVersions=Lt(),this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return s.__awaiter(this,void 0,void 0,function(){var e,n=this;return s.__generator(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new E(_.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.datastore.lookup(t)];case 1:return(e=r.sent()).forEach(function(t){t instanceof me||t instanceof pe?n.recordVersion(t):y("Document in a transaction was a "+t.constructor.name)}),[2,e]}})})},t.prototype.set=function(t,e){this.write(e.toMutations(t,this.precondition(t))),this.writtenDocs.add(t)},t.prototype.update=function(t,e){try{this.write(e.toMutations(t,this.preconditionForUpdate(t)))}catch(n){this.lastWriteError=n}this.writtenDocs.add(t)},t.prototype.delete=function(t){this.write([new Gn(t,this.precondition(t))]),this.writtenDocs.add(t)},t.prototype.commit=function(){return s.__awaiter(this,void 0,void 0,function(){var t;return s.__generator(this,function(e){switch(e.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;if(t=this.readVersions,this.mutations.forEach(function(e){t=t.remove(e.key)}),!t.isEmpty())throw new E(_.INVALID_ARGUMENT,"Every document read in a transaction must also be written.");return[4,this.datastore.commit(this.mutations)];case 1:return e.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t instanceof pe)e=t.version;else{if(!(t instanceof me))throw y("Document in a transaction was a "+t.constructor.name);e=St.forDeletedDoc()}var n=this.readVersions.get(t.key);if(null!==n){if(!e.isEqual(n))throw new E(_.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(t.key,e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t);return!this.writtenDocs.has(t)&&e?jn.updateTime(e):jn.NONE},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t);if(!this.writtenDocs.has(t)&&e){if(e.isEqual(St.forDeletedDoc()))throw new E(_.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return jn.updateTime(e)}return jn.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations=this.mutations.concat(t)},t.prototype.ensureCommitNotCalled=function(){v(!this.committed,"A transaction object cannot be used after its update callback has been invoked.")},t}(),yr=function(t){return t[t.Unknown=0]="Unknown",t[t.Online=1]="Online",t[t.Offline=2]="Offline",t}({}),vr=function(t){return t[t.RemoteStore=0]="RemoteStore",t[t.SharedClientState=1]="SharedClientState",t}({}),br=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state=yr.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return t.prototype.handleWatchStreamStart=function(){var t=this;0===this.watchStreamFailures&&(this.setAndBroadcast(yr.Unknown),v(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(ht.OnlineStateTimeout,1e4,function(){return t.onlineStateTimer=null,v(t.state===yr.Unknown,"Timer should be canceled if we transitioned to a different state."),t.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),t.setAndBroadcast(yr.Offline),Promise.resolve()}))},t.prototype.handleWatchStreamFailure=function(t){this.state===yr.Online?(this.setAndBroadcast(yr.Unknown),v(0===this.watchStreamFailures,"watchStreamFailures must be 0"),v(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,this.watchStreamFailures>=1&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+t.toString()),this.setAndBroadcast(yr.Offline)))},t.prototype.set=function(t){this.clearOnlineStateTimer(),this.watchStreamFailures=0,t===yr.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(t)},t.prototype.setAndBroadcast=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.logClientOfflineWarningIfNecessary=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(m(e),this.shouldWarnClientIsOffline=!1):p("OnlineStateTracker",e)},t.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},t}(),wr=function(t){return t[t.OK=0]="OK",t[t.CANCELLED=1]="CANCELLED",t[t.UNKNOWN=2]="UNKNOWN",t[t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",t[t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",t[t.NOT_FOUND=5]="NOT_FOUND",t[t.ALREADY_EXISTS=6]="ALREADY_EXISTS",t[t.PERMISSION_DENIED=7]="PERMISSION_DENIED",t[t.UNAUTHENTICATED=16]="UNAUTHENTICATED",t[t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",t[t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",t[t.ABORTED=10]="ABORTED",t[t.OUT_OF_RANGE=11]="OUT_OF_RANGE",t[t.UNIMPLEMENTED=12]="UNIMPLEMENTED",t[t.INTERNAL=13]="INTERNAL",t[t.UNAVAILABLE=14]="UNAVAILABLE",t[t.DATA_LOSS=15]="DATA_LOSS",t}({});function _r(t){switch(t){case _.OK:return y("Treated status OK as error");case _.CANCELLED:case _.UNKNOWN:case _.DEADLINE_EXCEEDED:case _.RESOURCE_EXHAUSTED:case _.INTERNAL:case _.UNAVAILABLE:case _.UNAUTHENTICATED:return!1;case _.INVALID_ARGUMENT:case _.NOT_FOUND:case _.ALREADY_EXISTS:case _.PERMISSION_DENIED:case _.FAILED_PRECONDITION:case _.ABORTED:case _.OUT_OF_RANGE:case _.UNIMPLEMENTED:case _.DATA_LOSS:return!0;default:return y("Unknown status code: "+t)}}function Er(t){if(void 0===t)return m("GRPC error has no .code"),_.UNKNOWN;switch(t){case wr.OK:return _.OK;case wr.CANCELLED:return _.CANCELLED;case wr.UNKNOWN:return _.UNKNOWN;case wr.DEADLINE_EXCEEDED:return _.DEADLINE_EXCEEDED;case wr.RESOURCE_EXHAUSTED:return _.RESOURCE_EXHAUSTED;case wr.INTERNAL:return _.INTERNAL;case wr.UNAVAILABLE:return _.UNAVAILABLE;case wr.UNAUTHENTICATED:return _.UNAUTHENTICATED;case wr.INVALID_ARGUMENT:return _.INVALID_ARGUMENT;case wr.NOT_FOUND:return _.NOT_FOUND;case wr.ALREADY_EXISTS:return _.ALREADY_EXISTS;case wr.PERMISSION_DENIED:return _.PERMISSION_DENIED;case wr.FAILED_PRECONDITION:return _.FAILED_PRECONDITION;case wr.ABORTED:return _.ABORTED;case wr.OUT_OF_RANGE:return _.OUT_OF_RANGE;case wr.UNIMPLEMENTED:return _.UNIMPLEMENTED;case wr.DATA_LOSS:return _.DATA_LOSS;default:return y("Unknown status code: "+t)}}function Sr(t){if(void 0===t)return wr.OK;switch(t){case _.OK:return wr.OK;case _.CANCELLED:return wr.CANCELLED;case _.UNKNOWN:return wr.UNKNOWN;case _.DEADLINE_EXCEEDED:return wr.DEADLINE_EXCEEDED;case _.RESOURCE_EXHAUSTED:return wr.RESOURCE_EXHAUSTED;case _.INTERNAL:return wr.INTERNAL;case _.UNAVAILABLE:return wr.UNAVAILABLE;case _.UNAUTHENTICATED:return wr.UNAUTHENTICATED;case _.INVALID_ARGUMENT:return wr.INVALID_ARGUMENT;case _.NOT_FOUND:return wr.NOT_FOUND;case _.ALREADY_EXISTS:return wr.ALREADY_EXISTS;case _.PERMISSION_DENIED:return wr.PERMISSION_DENIED;case _.FAILED_PRECONDITION:return wr.FAILED_PRECONDITION;case _.ABORTED:return wr.ABORTED;case _.OUT_OF_RANGE:return wr.OUT_OF_RANGE;case _.UNIMPLEMENTED:return wr.UNIMPLEMENTED;case _.DATA_LOSS:return wr.DATA_LOSS;default:return y("Unknown status code: "+t)}}var Cr=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||lt.comparator(e.key,n.key)}:function(t,e){return lt.comparator(t.key,e.key)},this.keyedMap=Pt(),this.sortedSet=new Ct(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Tr=function(t){return t[t.Added=0]="Added",t[t.Removed=1]="Removed",t[t.Modified=2]="Modified",t[t.Metadata=3]="Metadata",t}({}),Ir=function(t){return t[t.Local=0]="Local",t[t.Synced=1]="Synced",t}({}),Ar=function(){function t(){this.changeMap=new Ct(lt.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.changeMap.get(e);n?t.type!==Tr.Added&&n.type===Tr.Metadata?this.changeMap=this.changeMap.insert(e,t):t.type===Tr.Metadata&&n.type!==Tr.Removed?this.changeMap=this.changeMap.insert(e,{type:n.type,doc:t.doc}):t.type===Tr.Modified&&n.type===Tr.Modified?this.changeMap=this.changeMap.insert(e,{type:Tr.Modified,doc:t.doc}):t.type===Tr.Modified&&n.type===Tr.Added?this.changeMap=this.changeMap.insert(e,{type:Tr.Added,doc:t.doc}):t.type===Tr.Removed&&n.type===Tr.Added?this.changeMap=this.changeMap.remove(e):t.type===Tr.Removed&&n.type===Tr.Modified?this.changeMap=this.changeMap.insert(e,{type:Tr.Removed,doc:n.doc}):t.type===Tr.Added&&n.type===Tr.Removed?this.changeMap=this.changeMap.insert(e,{type:Tr.Modified,doc:t.doc}):y("unsupported combination of changes: "+JSON.stringify(t)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(e,t)},t.prototype.getChanges=function(){var t=[];return this.changeMap.inorderTraversal(function(e,n){t.push(n)}),t},t}(),kr=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:Tr.Added,doc:t})}),new t(e,n,Cr.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Dr=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r,i=((r={})[e]=Nr.createSynthesizedTargetChangeForCurrentChange(e,n),r);return new t(St.MIN,i,Ut(),Ot(),jt())},t}(),Nr=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(w(),n,jt(),jt(),jt())},t}(),Or=function(){return function(t,e,n,r){this.updatedTargetIds=t,this.removedTargetIds=e,this.key=n,this.newDoc=r}}(),xr=function(){return function(t,e){this.targetId=t,this.existenceFilter=e}}(),Rr=function(t){return t[t.NoChange=0]="NoChange",t[t.Added=1]="Added",t[t.Removed=2]="Removed",t[t.Current=3]="Current",t[t.Reset=4]="Reset",t}({}),Pr=function(){return function(t,e,n,r){void 0===n&&(n=w()),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}(),Mr=function(){function t(){this.pendingResponses=0,this.documentChanges=jr(),this._resumeToken=w(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),t.prototype.updateResumeToken=function(t){t.length>0&&(this._hasPendingChanges=!0,this._resumeToken=t)},t.prototype.toTargetChange=function(){var t=jt(),e=jt(),n=jt();return this.documentChanges.forEach(function(r,i){switch(i){case Tr.Added:t=t.add(r);break;case Tr.Modified:e=e.add(r);break;case Tr.Removed:n=n.add(r);break;default:y("Encountered invalid change type: "+i)}}),new Nr(this._resumeToken,this._current,t,e,n)},t.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=jr()},t.prototype.addDocumentChange=function(t,e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(t,e)},t.prototype.removeDocumentChange=function(t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(t)},t.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},t.prototype.recordTargetResponse=function(){this.pendingResponses-=1},t.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},t}(),Lr=function(){function t(t){this.metadataProvider=t,this.targetStates={},this.pendingDocumentUpdates=Ot(),this.pendingDocumentTargetMapping=Vr(),this.pendingTargetResets=new kt(Q)}return t.prototype.handleDocumentChange=function(t){for(var e=0,n=t.updatedTargetIds;e<n.length;e++){var r=n[e];t.newDoc instanceof pe?this.addDocumentToTarget(r,t.newDoc):t.newDoc instanceof me&&this.removeDocumentFromTarget(r,t.key,t.newDoc)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.removeDocumentFromTarget(r=o[i],t.key,t.newDoc)},t.prototype.handleTargetChange=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.ensureTargetState(n);switch(t.state){case Rr.NoChange:e.isActiveTarget(n)&&r.updateResumeToken(t.resumeToken);break;case Rr.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(t.resumeToken);break;case Rr.Removed:r.recordTargetResponse(),r.isPending||e.removeTarget(n),v(!t.cause,"WatchChangeAggregator does not handle errored targets");break;case Rr.Current:e.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(t.resumeToken));break;case Rr.Reset:e.isActiveTarget(n)&&(e.resetTarget(n),r.updateResumeToken(t.resumeToken));break;default:y("Unknown target watch change state: "+t.state)}})},t.prototype.forEachTarget=function(t,e){t.targetIds.length>0?t.targetIds.forEach(e):I(this.targetStates,e)},t.prototype.handleExistenceFilter=function(t){var e=t.targetId,n=t.existenceFilter.count,r=this.queryDataForActiveTarget(e);if(r){var i=r.query;if(i.isDocumentQuery())if(0===n){var o=new lt(i.path);this.removeDocumentFromTarget(e,o,new me(o,St.forDeletedDoc()))}else v(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(e)!==n&&(this.resetTarget(e),this.pendingTargetResets=this.pendingTargetResets.add(e))}},t.prototype.createRemoteEvent=function(t){var e=this,n={};I(this.targetStates,function(r,i){var o=e.queryDataForActiveTarget(r);if(o){if(i.current&&o.query.isDocumentQuery()){var s=new lt(o.query.path);null!==e.pendingDocumentUpdates.get(s)||e.targetContainsDocument(r,s)||e.removeDocumentFromTarget(r,s,new me(s,t))}i.hasPendingChanges&&(n[r]=i.toTargetChange(),i.clearPendingChanges())}});var r=jt();this.pendingDocumentTargetMapping.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.queryDataForActiveTarget(t);return!n||n.purpose===$e.LimboResolution||(i=!1,!1)}),i&&(r=r.add(t))});var i=new Dr(t,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=Ot(),this.pendingDocumentTargetMapping=Vr(),this.pendingTargetResets=new kt(Q),i},t.prototype.addDocumentToTarget=function(t,e){if(this.isActiveTarget(t)){var n=this.targetContainsDocument(t,e.key)?Tr.Modified:Tr.Added;this.ensureTargetState(t).addDocumentChange(e.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e.key,e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e.key,this.ensureDocumentTargetMapping(e.key).add(t))}},t.prototype.removeDocumentFromTarget=function(t,e,n){if(this.isActiveTarget(t)){var r=this.ensureTargetState(t);this.targetContainsDocument(t,e)?r.addDocumentChange(e,Tr.Removed):r.removeDocumentChange(e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,this.ensureDocumentTargetMapping(e).delete(t)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e,n))}},t.prototype.removeTarget=function(t){delete this.targetStates[t]},t.prototype.getCurrentDocumentCountForTarget=function(t){var e=this.ensureTargetState(t).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.recordPendingTargetRequest=function(t){this.ensureTargetState(t).recordPendingTargetRequest()},t.prototype.ensureTargetState=function(t){return this.targetStates[t]||(this.targetStates[t]=new Mr),this.targetStates[t]},t.prototype.ensureDocumentTargetMapping=function(t){var e=this.pendingDocumentTargetMapping.get(t);return e||(e=new kt(Q),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,e)),e},t.prototype.isActiveTarget=function(t){var e=null!==this.queryDataForActiveTarget(t);return e||p("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.queryDataForActiveTarget=function(t){var e=this.targetStates[t];return e&&e.isPending?null:this.metadataProvider.getQueryDataForTarget(t)},t.prototype.resetTarget=function(t){var e=this;v(!this.targetStates[t].isPending,"Should only reset active targets"),this.targetStates[t]=new Mr,this.metadataProvider.getRemoteKeysForTarget(t).forEach(function(n){e.removeDocumentFromTarget(t,n,null)})},t.prototype.targetContainsDocument=function(t,e){return this.metadataProvider.getRemoteKeysForTarget(t).has(e)},t}();function Vr(){return new Ct(lt.comparator)}function jr(){return new Ct(lt.comparator)}var Fr="RemoteStore",Ur=function(){function t(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.connectivityMonitor=i,this.connectivityMonitor.addCallback(function(t){n.enqueueAndForget(function(){return s.__awaiter(o,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return this.canUseNetwork()?(p(Fr,"Restarting streams for network reachability change."),[4,this.restartNetwork()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.onlineStateTracker=new br(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return s.__awaiter(this,void 0,void 0,function(){var t;return s.__generator(this,function(e){switch(e.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(t=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return t.lastStreamToken=e.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(yr.Unknown),[4,this.fillWritePipeline()];case 2:e.sent(),e.label=3;case 3:return[2]}})})},t.prototype.disableNetwork=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(yr.Offline),[2]}})})},t.prototype.disableNetworkInternal=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return[4,this.writeStream.stop()];case 1:return t.sent(),[4,this.watchStream.stop()];case 2:return t.sent(),this.writePipeline.length>0&&(p(Fr,"Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}})})},t.prototype.shutdown=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return p(Fr,"RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.connectivityMonitor.shutdown(),this.onlineStateTracker.set(yr.Unknown),[2]}})})},t.prototype.listen=function(t){v(!C(this.listenTargets,t.targetId),"listen called with duplicate targetId!"),this.listenTargets[t.targetId]=t,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(t)},t.prototype.unlisten=function(t){v(C(this.listenTargets,t),"unlisten called without assigned target ID!"),delete this.listenTargets[t],this.watchStream.isOpen()&&this.sendUnwatchRequest(t),k(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(yr.Unknown))},t.prototype.getQueryDataForTarget=function(t){return this.listenTargets[t]||null},t.prototype.getRemoteKeysForTarget=function(t){return this.syncEngine.getRemoteKeysForTarget(t)},t.prototype.sendWatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t.targetId),this.watchStream.watch(t)},t.prototype.sendUnwatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t),this.watchStream.unwatch(t)},t.prototype.startWatchStream=function(){v(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new Lr(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},t.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!k(this.listenTargets)},t.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},t.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},t.prototype.onWatchStreamOpen=function(){return s.__awaiter(this,void 0,void 0,function(){var t=this;return s.__generator(this,function(e){return I(this.listenTargets,function(e,n){t.sendWatchRequest(n)}),[2]})})},t.prototype.onWatchStreamClose=function(t){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){return void 0===t&&v(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(t),this.startWatchStream()):this.onlineStateTracker.set(yr.Unknown),[2]})})},t.prototype.onWatchStreamChange=function(t,e){return s.__awaiter(this,void 0,void 0,function(){var n;return s.__generator(this,function(r){switch(r.label){case 0:return this.onlineStateTracker.set(yr.Online),t instanceof Pr&&t.state===Rr.Removed&&t.cause?[2,this.handleTargetError(t)]:(t instanceof Or?this.watchChangeAggregator.handleDocumentChange(t):t instanceof xr?this.watchChangeAggregator.handleExistenceFilter(t):(v(t instanceof Pr,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(t)),e.isEqual(St.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),e.compareTo(n)>=0?[4,this.raiseWatchSnapshot(e)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}})})},t.prototype.raiseWatchSnapshot=function(t){var e=this;v(!t.isEqual(St.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(t);return I(n.targetChanges,function(n,r){if(r.resumeToken.length>0){var i=e.listenTargets[n];i&&(e.listenTargets[n]=i.copy({resumeToken:r.resumeToken,snapshotVersion:t}))}}),n.targetMismatches.forEach(function(t){var n=e.listenTargets[t];if(n){e.listenTargets[t]=n.copy({resumeToken:w()}),e.sendUnwatchRequest(t);var r=new Ye(n.query,t,$e.ExistenceFilterMismatch,n.sequenceNumber);e.sendWatchRequest(r)}}),this.syncEngine.applyRemoteEvent(n)},t.prototype.handleTargetError=function(t){var e=this;v(!!t.cause,"Handling target error without a cause");var n=t.cause,r=Promise.resolve();return t.targetIds.forEach(function(t){r=r.then(function(){return s.__awaiter(e,void 0,void 0,function(){return s.__generator(this,function(e){return C(this.listenTargets,t)?(delete this.listenTargets[t],this.watchChangeAggregator.removeTarget(t),[2,this.syncEngine.rejectListen(t,n)]):[2]})})})}),r},t.prototype.fillWritePipeline=function(){return s.__awaiter(this,void 0,void 0,function(){var t;return s.__generator(this,function(e){switch(e.label){case 0:return this.canAddToWritePipeline()?[4,this.localStore.nextMutationBatch(this.writePipeline.length>0?this.writePipeline[this.writePipeline.length-1].batchId:-1)]:[3,4];case 1:return null!==(t=e.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(t),[4,this.fillWritePipeline()];case 3:e.sent(),e.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}})})},t.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},t.prototype.outstandingWrites=function(){return this.writePipeline.length},t.prototype.addToWritePipeline=function(t){v(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(t),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(t.mutations)},t.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&this.writePipeline.length>0},t.prototype.startWriteStream=function(){v(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},t.prototype.onWriteStreamOpen=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){return this.writeStream.writeHandshake(),[2]})})},t.prototype.onWriteHandshakeComplete=function(){var t=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then(function(){for(var e=0,n=t.writePipeline;e<n.length;e++)t.writeStream.writeMutations(n[e].mutations)}).catch(hn)},t.prototype.onMutationResult=function(t,e){var n=this;v(this.writePipeline.length>0,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=Bt.from(r,t,e,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then(function(){return n.fillWritePipeline()})},t.prototype.onWriteStreamClose=function(t){return s.__awaiter(this,void 0,void 0,function(){var e=this;return s.__generator(this,function(n){return void 0===t&&v(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),t&&this.writePipeline.length>0?[2,(this.writeStream.handshakeComplete?this.handleWriteError(t):this.handleHandshakeError(t)).then(function(){e.shouldStartWriteStream()&&e.startWriteStream()})]:[2]})})},t.prototype.handleHandshakeError=function(t){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){return _r(t.code)?(p(Fr,"RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=w(),[2,this.localStore.setLastStreamToken(w()).catch(hn)]):[2]})})},t.prototype.handleWriteError=function(t){return s.__awaiter(this,void 0,void 0,function(){var e,n=this;return s.__generator(this,function(r){return _r(i=t.code)&&i!==_.ABORTED?(e=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(e.batchId,t).then(function(){return n.fillWritePipeline()})]):[2];var i})})},t.prototype.createTransaction=function(){return new gr(this.datastore)},t.prototype.restartNetwork=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(yr.Unknown),[4,this.enableNetwork()];case 2:return t.sent(),[2]}})})},t.prototype.handleCredentialChange=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return this.canUseNetwork()?(p(Fr,"RemoteStore restarting streams for new credential"),[4,this.restartNetwork()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.applyPrimaryState=function(t){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){switch(e.label){case 0:return this.isPrimary=t,t&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return e.sent(),[3,4];case 2:return t?[3,4]:[4,this.disableNetworkInternal()];case 3:e.sent(),this.onlineStateTracker.set(yr.Unknown),e.label=4;case 4:return[2]}})})},t}(),qr=function(){function t(t,e){if(N("GeoPoint",arguments,2),R("GeoPoint","number",1,t),R("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new E(_.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new E(_.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype._compareTo=function(t){return Q(this._lat,t._lat)||Q(this._long,t._long)},t}(),Br=function(){function t(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.memoizedCanonicalId=null,this.memoizedOrderBy=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return t.atPath=function(e){return new t(e)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var t=this.getInequalityFilterField(),e=this.getFirstOrderByField();if(null!==t&&null===e)this.memoizedOrderBy=t.isKeyField()?[ti]:[new Zr(t),ti];else{v(null===t||null!==e&&t.isEqual(e),"First orderBy should match inequality field."),this.memoizedOrderBy=[];for(var n=!1,r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}n||this.memoizedOrderBy.push((this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:Jr.ASCENDING)===Jr.ASCENDING?ti:ei)}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),t.prototype.addFilter=function(e){v(null==this.getInequalityFilterField()||!(e instanceof Hr)||!e.isInequality()||e.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),v(!this.isDocumentQuery(),"No filtering allowed for document query");var n=this.filters.concat([e]);return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),n,this.limit,this.startAt,this.endAt)},t.prototype.addOrderBy=function(e){v(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.explicitOrderBy.concat([e]);return new t(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.startAt,this.endAt)},t.prototype.withLimit=function(e){return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),e,this.startAt,this.endAt)},t.prototype.withStartAt=function(e){return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,e,this.endAt)},t.prototype.withEndAt=function(e){return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,e)},t.prototype.asCollectionQueryAtPath=function(e){return new t(e,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,this.endAt)},t.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var t=this.path.canonicalString();this.isCollectionGroupQuery()&&(t+="|cg:"+this.collectionGroup),t+="|f:";for(var e=0,n=this.filters;e<n.length;e++)t+=n[e].canonicalId(),t+=",";t+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++)t+=i[r].canonicalId(),t+=",";or(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.memoizedCanonicalId=t}return this.memoizedCanonicalId},t.prototype.toString=function(){var t="Query("+this.path.canonicalString();return this.isCollectionGroupQuery()&&(t+=" collectionGroup="+this.collectionGroup),this.filters.length>0&&(t+=", filters: ["+this.filters.join(", ")+"]"),or(this.limit)||(t+=", limit: "+this.limit),this.explicitOrderBy.length>0&&(t+=", orderBy: ["+this.explicitOrderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),t+")"},t.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(e=0;e<this.filters.length;e++)if(!this.filters[e].isEqual(t.filters[e]))return!1;return this.collectionGroup===t.collectionGroup&&!!this.path.isEqual(t.path)&&!(null!==this.startAt?!this.startAt.isEqual(t.startAt):null!==t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt)},t.prototype.docComparator=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],s=o.compare(t,e);if(0!==s)return s;n=n||o.field.isKeyField()}return v(n,"orderBy used that doesn't compare on key field"),0},t.prototype.matches=function(t){return this.matchesPathAndCollectionGroup(t)&&this.matchesOrderBy(t)&&this.matchesFilters(t)&&this.matchesBounds(t)},t.prototype.hasLimit=function(){return!or(this.limit)},t.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},t.prototype.getInequalityFilterField=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof Hr&&n.isInequality())return n.field}return null},t.prototype.findFilterOperator=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(r instanceof Hr&&t.indexOf(r.op)>=0)return r.op}return null},t.prototype.isDocumentQuery=function(){return lt.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},t.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},t.prototype.matchesPathAndCollectionGroup=function(t){var e=t.key.path;return null!==this.collectionGroup?t.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(e):lt.isDocumentKey(this.path)?this.path.isEqual(e):this.path.isImmediateParentOf(e)},t.prototype.matchesOrderBy=function(t){for(var e=0,n=this.explicitOrderBy;e<n.length;e++){var r=n[e];if(!r.field.isKeyField()&&null===t.field(r.field))return!1}return!0},t.prototype.matchesFilters=function(t){for(var e=0,n=this.filters;e<n.length;e++)if(!n[e].matches(t))return!1;return!0},t.prototype.matchesBounds=function(t){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,t)||this.endAt&&this.endAt.sortsBeforeDocument(this.orderBy,t))},t.prototype.assertValidBound=function(t){v(t.position.length<=this.orderBy.length,"Bound is longer than orderBy")},t}(),Gr=function(){return function(){}}(),zr=function(){function t(t){this.name=t}return t.fromString=function(e){switch(e){case"<":return t.LESS_THAN;case"<=":return t.LESS_THAN_OR_EQUAL;case"==":return t.EQUAL;case">=":return t.GREATER_THAN_OR_EQUAL;case">":return t.GREATER_THAN;case"array-contains":return t.ARRAY_CONTAINS;case"in":return t.IN;case"array-contains-any":return t.ARRAY_CONTAINS_ANY;default:return y("Unknown FieldFilter operator: "+e)}},t.prototype.toString=function(){return this.name},t.prototype.isEqual=function(t){return this.name===t.name},t.LESS_THAN=new t("<"),t.LESS_THAN_OR_EQUAL=new t("<="),t.EQUAL=new t("=="),t.GREATER_THAN=new t(">"),t.GREATER_THAN_OR_EQUAL=new t(">="),t.ARRAY_CONTAINS=new t("array-contains"),t.IN=new t("in"),t.ARRAY_CONTAINS_ANY=new t("array-contains-any"),t}(),Hr=function(t){function e(e,n,r){var i=t.call(this)||this;return i.field=e,i.op=n,i.value=r,i}return s.__extends(e,t),e.create=function(t,n,r){if(t.isKeyField())return n===zr.IN?(v(r instanceof Rn,"Comparing on key with IN, but filter value not an ArrayValue"),v(r.internalValue.every(function(t){return t instanceof Nn}),"Comparing on key with IN, but an array value was not a RefValue"),new Kr(t,r)):(v(r instanceof Nn,"Comparing on key, but filter value not a RefValue"),v(n!==zr.ARRAY_CONTAINS&&n!==zr.ARRAY_CONTAINS_ANY,"'"+n.toString()+"' queries don't make sense on document keys."),new Wr(t,n,r));if(r.isEqual(wn.INSTANCE)){if(n!==zr.EQUAL)throw new E(_.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new e(t,n,r)}if(r.isEqual(Tn.NAN)){if(n!==zr.EQUAL)throw new E(_.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new e(t,n,r)}return n===zr.ARRAY_CONTAINS?new Qr(t,r):n===zr.IN?(v(r instanceof Rn,"IN filter has invalid value: "+r.toString()),new $r(t,r)):n===zr.ARRAY_CONTAINS_ANY?(v(r instanceof Rn,"ARRAY_CONTAINS_ANY filter has invalid value: "+r.toString()),new Yr(t,r)):new e(t,n,r)},e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&this.value.typeOrder===e.typeOrder&&this.matchesComparison(e.compareTo(this.value))},e.prototype.matchesComparison=function(t){switch(this.op){case zr.LESS_THAN:return t<0;case zr.LESS_THAN_OR_EQUAL:return t<=0;case zr.EQUAL:return 0===t;case zr.GREATER_THAN:return t>0;case zr.GREATER_THAN_OR_EQUAL:return t>=0;default:return y("Unknown FieldFilter operator: "+this.op)}},e.prototype.isInequality=function(){return[zr.LESS_THAN,zr.LESS_THAN_OR_EQUAL,zr.GREATER_THAN,zr.GREATER_THAN_OR_EQUAL].indexOf(this.op)>=0},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},e.prototype.isEqual=function(t){return t instanceof e&&this.op.isEqual(t.op)&&this.field.isEqual(t.field)&&this.value.isEqual(t.value)},e.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},e}(Gr),Wr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s.__extends(e,t),e.prototype.matches=function(t){var e=lt.comparator(t.key,this.value.key);return this.matchesComparison(e)},e}(Hr),Kr=function(t){function e(e,n){var r=t.call(this,e,zr.IN,n)||this;return r.value=n,r}return s.__extends(e,t),e.prototype.matches=function(t){return this.value.internalValue.some(function(e){return t.key.isEqual(e.key)})},e}(Hr),Qr=function(t){function e(e,n){return t.call(this,e,zr.ARRAY_CONTAINS,n)||this}return s.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return e instanceof Rn&&e.contains(this.value)},e}(Hr),$r=function(t){function e(e,n){var r=t.call(this,e,zr.IN,n)||this;return r.value=n,r}return s.__extends(e,t),e.prototype.matches=function(t){var e=this.value,n=t.field(this.field);return null!==n&&e.contains(n)},e}(Hr),Yr=function(t){function e(e,n){var r=t.call(this,e,zr.ARRAY_CONTAINS_ANY,n)||this;return r.value=n,r}return s.__extends(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return n instanceof Rn&&n.internalValue.some(function(t){return e.value.contains(t)})},e}(Hr),Jr=function(){function t(t){this.name=t}return t.prototype.toString=function(){return this.name},t.ASCENDING=new t("asc"),t.DESCENDING=new t("desc"),t}(),Xr=function(){function t(t,e){this.position=t,this.before=e}return t.prototype.canonicalId=function(){for(var t=this.before?"b:":"a:",e=0,n=this.position;e<n.length;e++)t+=n[e].toString();return t},t.prototype.sortsBeforeDocument=function(t,e){v(this.position.length<=t.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=t[r],o=this.position[r];if(i.field.isKeyField())v(o instanceof Nn,"Bound has a non-key value where the key path is being used."),n=lt.comparator(o.key,e.key);else{var s=e.field(i.field);v(void 0!==s,"Field should exist since document matched the orderBy already."),n=o.compareTo(s)}if(i.dir===Jr.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},t.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++)if(!this.position[e].isEqual(t.position[e]))return!1;return!0},t}(),Zr=function(){function t(t,e){this.field=t,void 0===e&&(e=Jr.ASCENDING),this.dir=e,this.isKeyOrderBy=t.isKeyField()}return t.prototype.compare=function(t,e){var n=this.isKeyOrderBy?pe.compareByKey(t,e):pe.compareByField(this.field,t,e);switch(this.dir){case Jr.ASCENDING:return n;case Jr.DESCENDING:return-1*n;default:return y("Unknown direction: "+this.dir)}},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},t.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},t.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},t}(),ti=new Zr(ut.keyField(),Jr.ASCENDING),ei=new Zr(ut.keyField(),Jr.DESCENDING),ni=function(){function t(){}return t.prototype.applyToLocalView=function(t,e){return new kn(e,t)},t.prototype.applyToRemoteDocument=function(t,e){return e},t.prototype.computeBaseValue=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t},t.instance=new t,t}(),ri=function(){function t(t){this.elements=t}return t.prototype.applyToLocalView=function(t,e){return this.apply(t)},t.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=si(t),n=function(t){e.find(function(e){return e.isEqual(t)})||e.push(t)},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Rn(e)},t.prototype.computeBaseValue=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&$(e.elements,this.elements)},t}(),ii=function(){function t(t){this.elements=t}return t.prototype.applyToLocalView=function(t,e){return this.apply(t)},t.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=si(t),n=function(t){e=e.filter(function(e){return!e.isEqual(t)})},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Rn(e)},t.prototype.computeBaseValue=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&$(e.elements,this.elements)},t}(),oi=function(){function t(t){this.operand=t}return t.prototype.applyToLocalView=function(t,e){var n=this.computeBaseValue(t);return n instanceof Cn&&this.operand instanceof Cn?new Cn(n.internalValue+this.operand.internalValue):new Tn(n.internalValue+this.operand.internalValue)},t.prototype.applyToRemoteDocument=function(t,e){return v(null!==e,"Didn't receive transformResult for NUMERIC_ADD transform"),e},t.prototype.computeBaseValue=function(t){return t instanceof En?t:new Cn(0)},t.prototype.isEqual=function(e){return e instanceof t&&this.operand.isEqual(e.operand)},t}();function si(t){return t instanceof Rn?t.internalValue.slice():[]}var ai,ui,li=function(){function t(t){this.count=t}return t.prototype.isEqual=function(t){return t&&t.count===this.count},t}(),ci=((ai={})[Jr.ASCENDING.name]="ASCENDING",ai[Jr.DESCENDING.name]="DESCENDING",ai),hi=((ui={})[zr.LESS_THAN.name]="LESS_THAN",ui[zr.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",ui[zr.GREATER_THAN.name]="GREATER_THAN",ui[zr.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",ui[zr.EQUAL.name]="EQUAL",ui[zr.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",ui[zr.IN.name]="IN",ui[zr.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",ui),di=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fi(t,e){v(!or(t),e+" is missing")}function pi(t){return"number"==typeof t?t:"string"==typeof t?Number(t):y("can't parse "+t)}var mi=function(){function t(t,e){this.databaseId=t,this.options=e}return t.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},t.prototype.unsafeCastProtoByteString=function(t){return t},t.prototype.fromRpcStatus=function(t){var e=void 0===t.code?_.UNKNOWN:Er(t.code);return new E(e,t.message||"")},t.prototype.toInt32Value=function(t){return or(t)?void 0:{value:t}},t.prototype.fromInt32Value=function(t){var e;return or(e="object"==typeof t?t.value:t)?null:e},t.prototype.toTimestamp=function(t){return{seconds:""+t.seconds,nanos:t.nanoseconds}},t.prototype.fromTimestamp=function(t){if("string"==typeof t)return this.fromIso8601String(t);v(!!t,"Cannot deserialize null or undefined timestamp.");var e=pi(t.seconds||"0");return new Et(e,t.nanos||0)},t.prototype.fromIso8601String=function(t){var e=0,n=di.exec(t);if(v(!!n,"invalid timestamp: "+t),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t),o=Math.floor(i.getTime()/1e3);return new Et(o,e)},t.prototype.toBytes=function(t){return this.options.useProto3Json?t.toBase64():this.unsafeCastProtoByteString(t.toUint8Array())},t.prototype.fromBlob=function(t){return"string"==typeof t?(v(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),Z.fromBase64String(t)):(v(!this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),Z.fromUint8Array(t))},t.prototype.toVersion=function(t){return this.toTimestamp(t.toTimestamp())},t.prototype.fromVersion=function(t){return v(!!t,"Trying to deserialize version that isn't set"),St.fromTimestamp(this.fromTimestamp(t))},t.prototype.toResourceName=function(t,e){return this.fullyQualifiedPrefixPath(t).child("documents").child(e).canonicalString()},t.prototype.fromResourceName=function(t){var e=st.fromString(t);return v(this.isValidResourceName(e),"Tried to deserialize invalid key "+e.toString()),e},t.prototype.toName=function(t){return this.toResourceName(this.databaseId,t.path)},t.prototype.fromName=function(t){var e=this.fromResourceName(t);return v(e.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+e.get(1)+" vs "+this.databaseId.projectId),v(!e.get(3)&&!this.databaseId.database||e.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+e.get(3)+" vs "+this.databaseId.database),new lt(this.extractLocalPathFromResourceName(e))},t.prototype.toQueryPath=function(t){return this.toResourceName(this.databaseId,t)},t.prototype.fromQueryPath=function(t){var e=this.fromResourceName(t);return 4===e.length?st.EMPTY_PATH:this.extractLocalPathFromResourceName(e)},Object.defineProperty(t.prototype,"encodedDatabaseId",{get:function(){return new st(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),t.prototype.fullyQualifiedPrefixPath=function(t){return new st(["projects",t.projectId,"databases",t.database])},t.prototype.extractLocalPathFromResourceName=function(t){return v(t.length>4&&"documents"===t.get(4),"tried to deserialize invalid key "+t.toString()),t.popFirst(5)},t.prototype.isValidResourceName=function(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)},t.prototype.toValue=function(t){if(t instanceof wn)return{nullValue:"NULL_VALUE"};if(t instanceof _n)return{booleanValue:t.value()};if(t instanceof Cn)return{integerValue:""+t.value()};if(t instanceof Tn){var e=t.value();if(this.options.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:t.value()}}return t instanceof In?{stringValue:t.value()}:t instanceof xn?{mapValue:this.toMapValue(t)}:t instanceof Rn?{arrayValue:this.toArrayValue(t)}:t instanceof An?{timestampValue:this.toTimestamp(t.internalValue)}:t instanceof On?{geoPointValue:{latitude:t.value().latitude,longitude:t.value().longitude}}:t instanceof Dn?{bytesValue:this.toBytes(t.value())}:t instanceof Nn?{referenceValue:this.toResourceName(t.databaseId,t.key.path)}:y("Unknown FieldValue "+JSON.stringify(t))},t.prototype.fromValue=function(t){var e=this;if("nullValue"in t)return wn.INSTANCE;if("booleanValue"in t)return _n.of(t.booleanValue);if("integerValue"in t)return new Cn(pi(t.integerValue));if("doubleValue"in t){if(this.options.useProto3Json){if("NaN"===t.doubleValue)return Tn.NAN;if("Infinity"===t.doubleValue)return Tn.POSITIVE_INFINITY;if("-Infinity"===t.doubleValue)return Tn.NEGATIVE_INFINITY}return new Tn(t.doubleValue)}if("stringValue"in t)return new In(t.stringValue);if("mapValue"in t)return this.fromFields(t.mapValue.fields||{});if("arrayValue"in t)return fi(t.arrayValue,"arrayValue"),new Rn((t.arrayValue.values||[]).map(function(t){return e.fromValue(t)}));if("timestampValue"in t)return fi(t.timestampValue,"timestampValue"),new An(this.fromTimestamp(t.timestampValue));if("geoPointValue"in t)return fi(t.geoPointValue,"geoPointValue"),new On(new qr(t.geoPointValue.latitude||0,t.geoPointValue.longitude||0));if("bytesValue"in t){fi(t.bytesValue,"bytesValue");var n=this.fromBlob(t.bytesValue);return new Dn(n)}if("referenceValue"in t){fi(t.referenceValue,"referenceValue");var r=this.fromResourceName(t.referenceValue),i=new rt(r.get(1),r.get(3)),o=new lt(this.extractLocalPathFromResourceName(r));return new Nn(i,o)}return y("Unknown Value proto "+JSON.stringify(t))},t.prototype.toMutationDocument=function(t,e){return{name:this.toName(t),fields:this.toFields(e)}},t.prototype.toDocument=function(t){return v(!t.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(t.key),fields:this.toFields(t.data),updateTime:this.toTimestamp(t.version.toTimestamp())}},t.prototype.fromDocument=function(t,e){return new pe(this.fromName(t.name),this.fromVersion(t.updateTime),this.fromFields(t.fields||{}),{hasCommittedMutations:!!e})},t.prototype.toFields=function(t){var e=this,n={};return t.forEach(function(t,r){n[t]=e.toValue(r)}),n},t.prototype.fromFields=function(t){var e=this,n=xn.EMPTY;return A(t,function(t,r){n=n.set(new ut([t]),e.fromValue(r))}),n},t.prototype.toMapValue=function(t){return{fields:this.toFields(t)}},t.prototype.toArrayValue=function(t){var e=this,n=[];return t.forEach(function(t){n.push(e.toValue(t))}),{values:n}},t.prototype.fromFound=function(t){v(!!t.found,"Tried to deserialize a found document from a missing document."),fi(t.found.name,"doc.found.name"),fi(t.found.updateTime,"doc.found.updateTime");var e=this.fromName(t.found.name),n=this.fromVersion(t.found.updateTime),r=this.fromFields(t.found.fields||{});return new pe(e,n,r,{},t.found)},t.prototype.fromMissing=function(t){v(!!t.missing,"Tried to deserialize a missing document from a found document."),v(!!t.readTime,"Tried to deserialize a missing document without a read time.");var e=this.fromName(t.missing),n=this.fromVersion(t.readTime);return new me(e,n)},t.prototype.fromMaybeDocument=function(t){return"found"in t?this.fromFound(t):"missing"in t?this.fromMissing(t):y("invalid batch get response: "+JSON.stringify(t))},t.prototype.toWatchTargetChangeState=function(t){switch(t){case Rr.Added:return"ADD";case Rr.Current:return"CURRENT";case Rr.NoChange:return"NO_CHANGE";case Rr.Removed:return"REMOVE";case Rr.Reset:return"RESET";default:return y("Unknown WatchTargetChangeState: "+t)}},t.prototype.toTestWatchChange=function(t){if(t instanceof xr)return{filter:{count:t.existenceFilter.count,targetId:t.targetId}};if(t instanceof Or){var e;if(t.newDoc instanceof pe)return{documentChange:{document:{name:this.toName((e=t.newDoc).key),fields:this.toFields(e.data),updateTime:this.toVersion(e.version)},targetIds:t.updatedTargetIds,removedTargetIds:t.removedTargetIds}};if(t.newDoc instanceof me)return{documentDelete:{document:this.toName((e=t.newDoc).key),readTime:this.toVersion(e.version),removedTargetIds:t.removedTargetIds}};if(null===t.newDoc)return{documentRemove:{document:this.toName(t.key),removedTargetIds:t.removedTargetIds}}}if(t instanceof Pr){var n=void 0;return t.cause&&(n={code:Sr(t.cause.code),message:t.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(t.state),targetIds:t.targetIds,resumeToken:this.unsafeCastProtoByteString(t.resumeToken),cause:n}}}return y("Unrecognized watch change: "+JSON.stringify(t))},t.prototype.fromWatchChange=function(t){var e;if("targetChange"in t){fi(t.targetChange,"targetChange");var n=this.fromWatchTargetChangeState(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],i=t.targetChange.resumeToken||this.emptyByteString(),o=t.targetChange.cause,s=o&&this.fromRpcStatus(o);e=new Pr(n,r,i,s||null)}else if("documentChange"in t){fi(t.documentChange,"documentChange"),fi(t.documentChange.document,"documentChange.name"),fi(t.documentChange.document.name,"documentChange.document.name"),fi(t.documentChange.document.updateTime,"documentChange.document.updateTime");var a=t.documentChange,u=this.fromName(a.document.name),l=this.fromVersion(a.document.updateTime),c=this.fromFields(a.document.fields||{}),h=new pe(u,l,c,{},a.document);e=new Or(a.targetIds||[],a.removedTargetIds||[],h.key,h)}else if("documentDelete"in t){fi(t.documentDelete,"documentDelete"),fi(t.documentDelete.document,"documentDelete.document");var d=t.documentDelete;u=this.fromName(d.document),l=d.readTime?this.fromVersion(d.readTime):St.forDeletedDoc(),h=new me(u,l),e=new Or([],d.removedTargetIds||[],h.key,h)}else if("documentRemove"in t){fi(t.documentRemove,"documentRemove"),fi(t.documentRemove.document,"documentRemove");var f=t.documentRemove;u=this.fromName(f.document),e=new Or([],f.removedTargetIds||[],u,null)}else{if(!("filter"in t))return y("Unknown change type "+JSON.stringify(t));fi(t.filter,"filter"),fi(t.filter.targetId,"filter.targetId");var p=t.filter,m=new li(p.count||0);e=new xr(p.targetId,m)}return e},t.prototype.fromWatchTargetChangeState=function(t){return"NO_CHANGE"===t?Rr.NoChange:"ADD"===t?Rr.Added:"REMOVE"===t?Rr.Removed:"CURRENT"===t?Rr.Current:"RESET"===t?Rr.Reset:y("Got unexpected TargetChange.state: "+t)},t.prototype.versionFromListenResponse=function(t){if(!("targetChange"in t))return St.MIN;var e=t.targetChange;return e.targetIds&&e.targetIds.length?St.MIN:e.readTime?this.fromVersion(e.readTime):St.MIN},t.prototype.toMutation=function(t){var e,n=this;if(t instanceof Un)e={update:this.toMutationDocument(t.key,t.value)};else if(t instanceof Gn)e={delete:this.toName(t.key)};else if(t instanceof qn)e={update:this.toMutationDocument(t.key,t.data),updateMask:this.toDocumentMask(t.fieldMask)};else{if(!(t instanceof Bn))return y("Unknown mutation type "+t.type);e={transform:{document:this.toName(t.key),fieldTransforms:t.fieldTransforms.map(function(t){return n.toFieldTransform(t)})}}}return t.precondition.isNone||(e.currentDocument=this.toPrecondition(t.precondition)),e},t.prototype.fromMutation=function(t){var e=this,n=t.currentDocument?this.fromPrecondition(t.currentDocument):jn.NONE;if(t.update){fi(t.update.name,"name");var r=this.fromName(t.update.name),i=this.fromFields(t.update.fields||{});if(t.updateMask){var o=this.fromDocumentMask(t.updateMask);return new qn(r,i,o,n)}return new Un(r,i,n)}if(t.delete)return r=this.fromName(t.delete),new Gn(r,n);if(t.transform){r=this.fromName(t.transform.document);var s=t.transform.fieldTransforms.map(function(t){return e.fromFieldTransform(t)});return v(!0===n.exists,'Transforms only support precondition "exists == true"'),new Bn(r,s)}return y("unknown mutation proto: "+JSON.stringify(t))},t.prototype.toPrecondition=function(t){return v(!t.isNone,"Can't serialize an empty precondition"),void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:y("Unknown precondition")},t.prototype.fromPrecondition=function(t){return void 0!==t.updateTime?jn.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?jn.exists(t.exists):jn.NONE},t.prototype.fromWriteResult=function(t,e){var n=this,r=this.fromVersion(t.updateTime?t.updateTime:e),i=null;return t.transformResults&&t.transformResults.length>0&&(i=t.transformResults.map(function(t){return n.fromValue(t)})),new Ln(r,i)},t.prototype.fromWriteResults=function(t,e){var n=this;return t&&t.length>0?(v(void 0!==e,"Received a write result without a commit time"),t.map(function(t){return n.fromWriteResult(t,e)})):[]},t.prototype.toFieldTransform=function(t){var e=this,n=t.transform;if(n instanceof ni)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ri)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements.map(function(t){return e.toValue(t)})}};if(n instanceof ii)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements.map(function(t){return e.toValue(t)})}};if(n instanceof oi)return{fieldPath:t.field.canonicalString(),increment:this.toValue(n.operand)};throw y("Unknown transform: "+t.transform)},t.prototype.fromFieldTransform=function(t){var e=this,n=null;if("setToServerValue"in t)v("REQUEST_TIME"===t.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(t)),n=ni.instance;else if("appendMissingElements"in t)n=new ri((t.appendMissingElements.values||[]).map(function(t){return e.fromValue(t)}));else if("removeAllFromArray"in t)n=new ii((t.removeAllFromArray.values||[]).map(function(t){return e.fromValue(t)}));else if("increment"in t){var r=this.fromValue(t.increment);v(r instanceof En,"NUMERIC_ADD transform requires a NumberValue"),n=new oi(r)}else y("Unknown transform proto: "+JSON.stringify(t));var i=ut.fromServerFormat(t.fieldPath);return new Mn(i,n)},t.prototype.toDocumentsTarget=function(t){return{documents:[this.toQueryPath(t.path)]}},t.prototype.fromDocumentsTarget=function(t){var e=t.documents.length;return v(1===e,"DocumentsTarget contained other than 1 document: "+e),Br.atPath(this.fromQueryPath(t.documents[0]))},t.prototype.toQueryTarget=function(t){var e={structuredQuery:{}},n=t.path;null!==t.collectionGroup?(v(n.length%2==0,"Collection Group queries should be within a document path or root."),e.parent=this.toQueryPath(n),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(v(n.length%2!=0,"Document queries with filters are not supported."),e.parent=this.toQueryPath(n.popLast()),e.structuredQuery.from=[{collectionId:n.lastSegment()}]);var r=this.toFilter(t.filters);r&&(e.structuredQuery.where=r);var i=this.toOrder(t.orderBy);i&&(e.structuredQuery.orderBy=i);var o=this.toInt32Value(t.limit);return void 0!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=this.toCursor(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.toCursor(t.endAt)),e},t.prototype.fromQueryTarget=function(t){var e=this.fromQueryPath(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){v(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=this.fromFilter(n.where));var a=[];n.orderBy&&(a=this.fromOrder(n.orderBy));var u=null;n.limit&&(u=this.fromInt32Value(n.limit));var l=null;n.startAt&&(l=this.fromCursor(n.startAt));var c=null;return n.endAt&&(c=this.fromCursor(n.endAt)),new Br(e,i,a,s,u,l,c)},t.prototype.toListenRequestLabels=function(t){var e=this.toLabel(t.purpose);return null==e?null:{"goog-listen-tags":e}},t.prototype.toLabel=function(t){switch(t){case $e.Listen:return null;case $e.ExistenceFilterMismatch:return"existence-filter-mismatch";case $e.LimboResolution:return"limbo-document";default:return y("Unrecognized query purpose: "+t)}},t.prototype.toTarget=function(t){var e,n=t.query;return(e=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=t.targetId,t.resumeToken.length>0&&(e.resumeToken=this.unsafeCastProtoByteString(t.resumeToken)),e},t.prototype.toFilter=function(t){var e=this;if(0!==t.length){var n=t.map(function(t){return t instanceof Hr?e.toUnaryOrFieldFilter(t):y("Unrecognized filter: "+JSON.stringify(t))});return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},t.prototype.fromFilter=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.fromUnaryFilter(t)]:void 0!==t.fieldFilter?[this.fromFieldFilter(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e.fromFilter(t)}).reduce(function(t,e){return t.concat(e)}):y("Unknown filter: "+JSON.stringify(t)):[]},t.prototype.toOrder=function(t){var e=this;if(0!==t.length)return t.map(function(t){return e.toPropertyOrder(t)})},t.prototype.fromOrder=function(t){var e=this;return t.map(function(t){return e.fromPropertyOrder(t)})},t.prototype.toCursor=function(t){var e=this;return{before:t.before,values:t.position.map(function(t){return e.toValue(t)})}},t.prototype.fromCursor=function(t){var e=this,n=!!t.before,r=t.values.map(function(t){return e.fromValue(t)});return new Xr(r,n)},t.prototype.toDirection=function(t){return ci[t.name]},t.prototype.fromDirection=function(t){switch(t){case"ASCENDING":return Jr.ASCENDING;case"DESCENDING":return Jr.DESCENDING;default:return}},t.prototype.toOperatorName=function(t){return hi[t.name]},t.prototype.fromOperatorName=function(t){switch(t){case"EQUAL":return zr.EQUAL;case"GREATER_THAN":return zr.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return zr.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return zr.LESS_THAN;case"LESS_THAN_OR_EQUAL":return zr.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return zr.ARRAY_CONTAINS;case"IN":return zr.IN;case"ARRAY_CONTAINS_ANY":return zr.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return y("Unspecified operator");default:return y("Unknown operator")}},t.prototype.toFieldPathReference=function(t){return{fieldPath:t.canonicalString()}},t.prototype.fromFieldPathReference=function(t){return ut.fromServerFormat(t.fieldPath)},t.prototype.toPropertyOrder=function(t){return{field:this.toFieldPathReference(t.field),direction:this.toDirection(t.dir)}},t.prototype.fromPropertyOrder=function(t){return new Zr(this.fromFieldPathReference(t.field),this.fromDirection(t.direction))},t.prototype.fromFieldFilter=function(t){return Hr.create(this.fromFieldPathReference(t.fieldFilter.field),this.fromOperatorName(t.fieldFilter.op),this.fromValue(t.fieldFilter.value))},t.prototype.toUnaryOrFieldFilter=function(t){if(t.op===zr.EQUAL){if(t.value.isEqual(Tn.NAN))return{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NAN"}};if(t.value.isEqual(wn.INSTANCE))return{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.toFieldPathReference(t.field),op:this.toOperatorName(t.op),value:this.toValue(t.value)}}},t.prototype.fromUnaryFilter=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.fromFieldPathReference(t.unaryFilter.field);return Hr.create(e,zr.EQUAL,Tn.NAN);case"IS_NULL":var n=this.fromFieldPathReference(t.unaryFilter.field);return Hr.create(n,zr.EQUAL,wn.INSTANCE);case"OPERATOR_UNSPECIFIED":return y("Unspecified filter");default:return y("Unknown filter")}},t.prototype.toDocumentMask=function(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}},t.prototype.fromDocumentMask=function(t){var e=(t.fieldPaths||[]).map(function(t){return ut.fromServerFormat(t)});return Pn.fromArray(e)},t}(),gi=function(){return function(){this.viewSnap=null,this.targetId=0,this.listeners=[]}}(),yi=function(){function t(t){this.syncEngine=t,this.queries=new ye(function(t){return t.canonicalId()}),this.onlineState=yr.Unknown,this.syncEngine.subscribe(this)}return t.prototype.listen=function(t){var e=t.query,n=!1,r=this.queries.get(e);return r||(n=!0,r=new gi,this.queries.set(e,r)),r.listeners.push(t),t.applyOnlineStateChange(this.onlineState),r.viewSnap&&t.onViewSnapshot(r.viewSnap),n?this.syncEngine.listen(e).then(function(t){return r.targetId=t,t}):Promise.resolve(r.targetId)},t.prototype.unlisten=function(t){return s.__awaiter(this,void 0,void 0,function(){var e,n,r,i;return s.__generator(this,function(o){return n=!1,(r=this.queries.get(e=t.query))&&(i=r.listeners.indexOf(t))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(e),[2,this.syncEngine.unlisten(e)]):[2]})})},t.prototype.onWatchChange=function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e],i=this.queries.get(r.query);if(i){for(var o=0,s=i.listeners;o<s.length;o++)s[o].onViewSnapshot(r);i.viewSnap=r}}},t.prototype.onWatchError=function(t,e){var n=this.queries.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(e);this.queries.delete(t)},t.prototype.onOnlineStateChange=function(t){this.onlineState=t,this.queries.forEach(function(e,n){for(var r=0,i=n.listeners;r<i.length;r++)i[r].applyOnlineStateChange(t)})},t}(),vi=function(){function t(t,e,n){this.query=t,this.queryObserver=e,this.raisedInitialEvent=!1,this.snap=null,this.onlineState=yr.Unknown,this.options=n||{}}return t.prototype.onViewSnapshot=function(t){if(v(t.docChanges.length>0||t.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];i.type!==Tr.Metadata&&e.push(i)}t=new kr(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}this.raisedInitialEvent?this.shouldRaiseEvent(t)&&this.queryObserver.next(t):this.shouldRaiseInitialEvent(t,this.onlineState)&&this.raiseInitialEvent(t),this.snap=t},t.prototype.onError=function(t){this.queryObserver.error(t)},t.prototype.applyOnlineStateChange=function(t){this.onlineState=t,this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,t)&&this.raiseInitialEvent(this.snap)},t.prototype.shouldRaiseInitialEvent=function(t,e){return v(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!t.fromCache||(this.options.waitForSyncWhenOnline&&e!==yr.Offline?(v(t.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!t.docs.isEmpty()||e===yr.Offline)},t.prototype.shouldRaiseEvent=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.snap&&this.snap.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.raiseInitialEvent=function(t){v(!this.raisedInitialEvent,"Trying to raise initial events for second time"),t=kr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(t)},t}(),bi=function(){function t(t,e,n){this.targetId=t,this.addedKeys=e,this.removedKeys=n}return t.fromSnapshot=function(e,n){for(var r=jt(),i=jt(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case Tr.Added:r=r.add(a.doc.key);break;case Tr.Removed:i=i.add(a.doc.key)}}return new t(e,r,i)},t}(),wi=function(){return function(t){this.key=t}}(),_i=function(){return function(t){this.key=t}}(),Ei=function(){function t(t,e){this.query=t,this._syncedDocuments=e,this.syncState=null,this.current=!1,this.limboDocuments=jt(),this.mutatedKeys=jt(),this.documentSet=new Cr(t.docComparator.bind(t))}return Object.defineProperty(t.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),t.prototype.computeDocChanges=function(t,e){var n=this,r=e?e.changeSet:new Ar,i=e?e.documentSet:this.documentSet,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.hasLimit()&&i.size===this.query.limit?i.last():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),c=e instanceof pe?e:null;c&&(v(t.isEqual(c.key),"Mismatching keys found in document changes: "+t+" != "+c.key),c=n.query.matches(c)?c:null);var h=!!l&&n.mutatedKeys.has(l.key),d=!!c&&(c.hasLocalMutations||n.mutatedKeys.has(c.key)&&c.hasCommittedMutations),f=!1;l&&c?l.data.isEqual(c.data)?h!==d&&(r.track({type:Tr.Metadata,doc:c}),f=!0):n.shouldWaitForSyncedDocument(l,c)||(r.track({type:Tr.Modified,doc:c}),f=!0,u&&n.query.docComparator(c,u)>0&&(a=!0)):!l&&c?(r.track({type:Tr.Added,doc:c}),f=!0):l&&!c&&(r.track({type:Tr.Removed,doc:l}),f=!0,u&&(a=!0)),f&&(c?(s=s.add(c),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),this.query.hasLimit())for(;s.size>this.query.limit;){var l=s.last();s=s.delete(l.key),o=o.delete(l.key),r.track({type:Tr.Removed,doc:l})}return v(!a||!e,"View was refilled using docs that themselves needed refilling."),{documentSet:s,changeSet:r,needsRefill:a,mutatedKeys:o}},t.prototype.shouldWaitForSyncedDocument=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this;v(!t.needsRefill,"Cannot apply changes that need a refill");var i=this.documentSet;this.documentSet=t.documentSet,this.mutatedKeys=t.mutatedKeys;var o=t.changeSet.getChanges();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case Tr.Added:return 1;case Tr.Modified:case Tr.Metadata:return 2;case Tr.Removed:return 0;default:return y("Unknown ChangeType: "+t)}};return n(t)-n(e)}(t.type,e.type)||r.query.docComparator(t.doc,e.doc)}),this.applyTargetChange(n);var s=e?this.updateLimboDocuments():[],a=0===this.limboDocuments.size&&this.current?Ir.Synced:Ir.Local,u=a!==this.syncState;return this.syncState=a,0!==o.length||u?{snapshot:new kr(this.query,t.documentSet,i,o,t.mutatedKeys,a===Ir.Local,u,!1),limboChanges:s}:{limboChanges:s}},t.prototype.applyOnlineStateChange=function(t){return this.current&&t===yr.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new Ar,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},t.prototype.shouldBeInLimbo=function(t){return!this._syncedDocuments.has(t)&&!!this.documentSet.has(t)&&!this.documentSet.get(t).hasLocalMutations},t.prototype.applyTargetChange=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e._syncedDocuments=e._syncedDocuments.add(t)}),t.modifiedDocuments.forEach(function(t){return v(e._syncedDocuments.has(t),"Modified document "+t+" not found in view.")}),t.removedDocuments.forEach(function(t){return e._syncedDocuments=e._syncedDocuments.delete(t)}),this.current=t.current)},t.prototype.updateLimboDocuments=function(){var t=this;if(!this.current)return[];var e=this.limboDocuments;this.limboDocuments=jt(),this.documentSet.forEach(function(e){t.shouldBeInLimbo(e.key)&&(t.limboDocuments=t.limboDocuments.add(e.key))});var n=[];return e.forEach(function(e){t.limboDocuments.has(e)||n.push(new _i(e))}),this.limboDocuments.forEach(function(t){e.has(t)||n.push(new wi(t))}),n},t.prototype.synchronizeWithPersistedState=function(t,e){this._syncedDocuments=e,this.limboDocuments=jt();var n=this.computeDocChanges(t);return this.applyChanges(n,!0)},t.prototype.computeInitialSnapshot=function(){return kr.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===Ir.Local)},t}(),Si=5,Ci=function(){function t(t,e,n,r){this.asyncQueue=t,this.remoteStore=e,this.updateFunction=n,this.deferred=r,this.retries=Si,this.backoff=new cr(this.asyncQueue,ht.RetryTransaction)}return t.prototype.run=function(){this.runWithBackOff()},t.prototype.runWithBackOff=function(){var t=this;this.backoff.backoffAndRun(function(){return s.__awaiter(t,void 0,void 0,function(){var t,e,n=this;return s.__generator(this,function(r){return t=this.remoteStore.createTransaction(),(e=this.tryRunUpdateFunction(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.handleTransactionError(t)})})}).catch(function(t){n.handleTransactionError(t)}),[2]})})})},t.prototype.tryRunUpdateFunction=function(t){try{var e=this.updateFunction(t);return!or(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(m){return this.deferred.reject(m),null}},t.prototype.handleTransactionError=function(t){var e=this;this.retries>0&&this.isRetryableTransactionError(t)?(this.retries-=1,this.asyncQueue.enqueueAndForget(function(){return e.runWithBackOff(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.isRetryableTransactionError=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!_r(e)}return!1},t}(),Ti=function(){return function(t,e,n){this.query=t,this.targetId=e,this.view=n}}(),Ii=function(){return function(t){this.key=t,this.receivedDocument=!1}}(),Ai=function(){function t(t,e,n,r){this.localStore=t,this.remoteStore=e,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new ye(function(t){return t.canonicalId()}),this.queryViewsByTarget={},this.limboTargetsByKey=new Ct(lt.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new Hn,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=Zt.forSyncEngine(),this.isPrimary=void 0,this.onlineState=yr.Unknown}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(t){v(null!==t,"SyncEngine listener cannot be null"),v(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=t},t.prototype.listen=function(t){return s.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o;return s.__generator(this,function(s){switch(s.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(t))?(this.sharedClientState.addLocalQueryTarget(e=r.targetId),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateQuery(t)];case 2:return i=s.sent(),o=this.sharedClientState.addLocalQueryTarget(i.targetId),e=i.targetId,[4,this.initializeViewAndComputeSnapshot(i,"current"===o)];case 3:n=s.sent(),this.isPrimary&&this.remoteStore.listen(i),s.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,e]}})})},t.prototype.initializeViewAndComputeSnapshot=function(t,e){return s.__awaiter(this,void 0,void 0,function(){var n,r,i,o,a,u,l,c;return s.__generator(this,function(s){switch(s.label){case 0:return[4,this.localStore.executeQuery(n=t.query)];case 1:return r=s.sent(),[4,this.localStore.remoteDocumentKeys(t.targetId)];case 2:return i=s.sent(),o=new Ei(n,i),a=o.computeDocChanges(r),u=Nr.createSynthesizedTargetChangeForCurrentChange(t.targetId,e&&this.onlineState!==yr.Offline),v(0===(l=o.applyChanges(a,!0===this.isPrimary,u)).limboChanges.length,"View returned limbo docs before target ack from the server."),v(!!l.snapshot,"applyChanges for new view should always return a snapshot"),c=new Ti(n,t.targetId,o),this.queryViewsByQuery.set(n,c),this.queryViewsByTarget[t.targetId]=c,[2,l.snapshot]}})})},t.prototype.synchronizeViewAndComputeSnapshot=function(t){return s.__awaiter(this,void 0,void 0,function(){var e,n,r;return s.__generator(this,function(i){switch(i.label){case 0:return[4,this.localStore.executeQuery(t.query)];case 1:return e=i.sent(),[4,this.localStore.remoteDocumentKeys(t.targetId)];case 2:return n=i.sent(),r=t.view.synchronizeWithPersistedState(e,n),this.isPrimary&&this.updateTrackedLimbos(t.targetId,r.limboChanges),[2,r]}})})},t.prototype.unlisten=function(t){return s.__awaiter(this,void 0,void 0,function(){var e,n=this;return s.__generator(this,function(r){switch(r.label){case 0:return this.assertSubscribed("unlisten()"),v(!!(e=this.queryViewsByQuery.get(t)),"Trying to unlisten on query not found:"+t),this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(e.targetId),this.sharedClientState.isActiveQueryTarget(e.targetId)?[3,2]:[4,this.localStore.releaseQuery(t,!1).then(function(){n.sharedClientState.clearQueryState(e.targetId),n.remoteStore.unlisten(e.targetId),n.removeAndCleanupQuery(e)}).catch(hn)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupQuery(e),[4,this.localStore.releaseQuery(t,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}})})},t.prototype.write=function(t,e){return s.__awaiter(this,void 0,void 0,function(){var n;return s.__generator(this,function(r){switch(r.label){case 0:return this.assertSubscribed("write()"),[4,this.localStore.localWrite(t)];case 1:return n=r.sent(),this.sharedClientState.addPendingMutation(n.batchId),this.addMutationCallback(n.batchId,e),[4,this.emitNewSnapsAndNotifyLocalStore(n.changes)];case 2:return r.sent(),[4,this.remoteStore.fillWritePipeline()];case 3:return r.sent(),[2]}})})},t.prototype.runTransaction=function(t,e,n){new Ci(t,this.remoteStore,e,n).run()},t.prototype.applyRemoteEvent=function(t){return s.__awaiter(this,void 0,void 0,function(){var e,n=this;return s.__generator(this,function(r){switch(r.label){case 0:this.assertSubscribed("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.applyRemoteEvent(t)];case 2:return e=r.sent(),A(t.targetChanges,function(t,e){var r=n.limboResolutionsByTarget[Number(t)];r&&(v(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),e.addedDocuments.size>0?r.receivedDocument=!0:e.modifiedDocuments.size>0?v(r.receivedDocument,"Received change for limbo target document without add."):e.removedDocuments.size>0&&(v(r.receivedDocument,"Received remove for limbo target document without add."),r.receivedDocument=!1))}),[4,this.emitNewSnapsAndNotifyLocalStore(e,t)];case 3:return r.sent(),[3,6];case 4:return[4,hn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}})})},t.prototype.applyOnlineStateChange=function(t,e){if(this.isPrimary&&e===vr.RemoteStore||!this.isPrimary&&e===vr.SharedClientState){this.assertSubscribed("applyOnlineStateChange()");var n=[];this.queryViewsByQuery.forEach(function(e,r){var i=r.view.applyOnlineStateChange(t);v(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)}),this.syncEngineListener.onOnlineStateChange(t),this.syncEngineListener.onWatchChange(n),this.onlineState=t,this.isPrimary&&this.sharedClientState.setOnlineState(t)}},t.prototype.rejectListen=function(t,e){return s.__awaiter(this,void 0,void 0,function(){var n,r,i,o,a,u,l=this;return s.__generator(this,function(s){switch(s.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(t,"rejected",e),(r=(n=this.limboResolutionsByTarget[t])&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[t],i=(i=new Ct(lt.comparator)).insert(r,new me(r,St.forDeletedDoc())),o=jt().add(r),a=new Dr(St.MIN,{},new kt(Q),i,o),[2,this.applyRemoteEvent(a)]):[3,1];case 1:return v(!!(u=this.queryViewsByTarget[t]),"Unknown targetId: "+t),[4,this.localStore.releaseQuery(u.query,!1).then(function(){return l.removeAndCleanupQuery(u)}).catch(hn)];case 2:s.sent(),this.syncEngineListener.onWatchError(u.query,e),s.label=3;case 3:return[2]}})})},t.prototype.applyBatchState=function(t,e,n){return s.__awaiter(this,void 0,void 0,function(){var r;return s.__generator(this,function(i){switch(i.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(t)];case 1:return null===(r=i.sent())?(p("SyncEngine","Cannot apply mutation batch with id: "+t),[2]):"pending"!==e?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(this.processUserCallback(t,n||null),this.localStore.removeCachedMutationBatchMetadata(t)):y("Unknown batchState: "+e),i.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return i.sent(),[2]}})})},t.prototype.applySuccessfulWrite=function(t){return s.__awaiter(this,void 0,void 0,function(){var e,n;return s.__generator(this,function(r){switch(r.label){case 0:this.assertSubscribed("applySuccessfulWrite()"),this.processUserCallback(e=t.batch.batchId,null),this.triggerPendingWritesCallbacks(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.acknowledgeBatch(t)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(e,"acknowledged"),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,hn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}})})},t.prototype.rejectFailedWrite=function(t,e){return s.__awaiter(this,void 0,void 0,function(){var n;return s.__generator(this,function(r){switch(r.label){case 0:this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(t,e),this.triggerPendingWritesCallbacks(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.rejectBatch(t)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(t,"rejected",e),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,hn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}})})},t.prototype.registerPendingWritesCallback=function(t){return s.__awaiter(this,void 0,void 0,function(){var e,n;return s.__generator(this,function(r){switch(r.label){case 0:return this.remoteStore.canUseNetwork()||p("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.localStore.getHighestUnacknowledgedBatchId()];case 1:return-1===(e=r.sent())?(t.resolve(),[2]):((n=this.pendingWritesCallbacks.get(e)||[]).push(t),this.pendingWritesCallbacks.set(e,n),[2])}})})},t.prototype.triggerPendingWritesCallbacks=function(t){(this.pendingWritesCallbacks.get(t)||[]).forEach(function(t){t.resolve()}),this.pendingWritesCallbacks.delete(t)},t.prototype.rejectOutstandingPendingWritesCallbacks=function(t){this.pendingWritesCallbacks.forEach(function(e){e.forEach(function(e){e.reject(new E(_.CANCELLED,t))})}),this.pendingWritesCallbacks.clear()},t.prototype.addMutationCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new Ct(Q)),n=n.insert(t,e),this.mutationUserCallbacks[this.currentUser.toKey()]=n},t.prototype.processUserCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(t);r&&(v(t===n.minKey(),"Mutation callbacks processed out-of-order?"),e?r.reject(e):r.resolve(),n=n.remove(t)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},t.prototype.removeAndCleanupQuery=function(t){var e=this;if(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.queryViewsByQuery.delete(t.query),delete this.queryViewsByTarget[t.targetId],this.isPrimary){var n=this.limboDocumentRefs.referencesForId(t.targetId);this.limboDocumentRefs.removeReferencesForId(t.targetId),n.forEach(function(t){e.limboDocumentRefs.containsKey(t)||e.removeLimboTarget(t)})}},t.prototype.removeLimboTarget=function(t){var e=this.limboTargetsByKey.get(t);null!==e&&(this.remoteStore.unlisten(e),this.limboTargetsByKey=this.limboTargetsByKey.remove(t),delete this.limboResolutionsByTarget[e])},t.prototype.updateTrackedLimbos=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof wi?(this.limboDocumentRefs.addReference(i.key,t),this.trackLimboChange(i)):i instanceof _i?(p("SyncEngine","Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,t),this.limboDocumentRefs.containsKey(i.key)||this.removeLimboTarget(i.key)):y("Unknown limbo change: "+JSON.stringify(i))}},t.prototype.trackLimboChange=function(t){var e=t.key;if(!this.limboTargetsByKey.get(e)){p("SyncEngine","New document in limbo: "+e);var n=this.limboTargetIdGenerator.next(),r=Br.atPath(e.path);this.limboResolutionsByTarget[n]=new Ii(e),this.remoteStore.listen(new Ye(r,n,$e.LimboResolution,it.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(e,n)}},t.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},t.prototype.emitNewSnapsAndNotifyLocalStore=function(t,e){return s.__awaiter(this,void 0,void 0,function(){var n,r,i,o=this;return s.__generator(this,function(s){switch(s.label){case 0:return n=[],r=[],i=[],this.queryViewsByQuery.forEach(function(s,a){i.push(Promise.resolve().then(function(){var e=a.view.computeDocChanges(t);return e.needsRefill?o.localStore.executeQuery(a.query).then(function(t){return a.view.computeDocChanges(t,e)}):e}).then(function(t){var i=a.view.applyChanges(t,!0===o.isPrimary,e&&e.targetChanges[a.targetId]);if(o.updateTrackedLimbos(a.targetId,i.limboChanges),i.snapshot){o.isPrimary&&o.sharedClientState.updateQueryState(a.targetId,i.snapshot.fromCache?"not-current":"current"),n.push(i.snapshot);var s=bi.fromSnapshot(a.targetId,i.snapshot);r.push(s)}}))}),[4,Promise.all(i)];case 1:return s.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return s.sent(),[2]}})})},t.prototype.assertSubscribed=function(t){v(null!==this.syncEngineListener,"Trying to call "+t+" before calling subscribe().")},t.prototype.handleCredentialChange=function(t){return s.__awaiter(this,void 0,void 0,function(){var e,n;return s.__generator(this,function(r){switch(r.label){case 0:return e=!this.currentUser.isEqual(t),this.currentUser=t,e?(this.rejectOutstandingPendingWritesCallbacks("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.localStore.handleUserChange(t)]):[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}})})},t.prototype.applyPrimaryState=function(t){return s.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o,a,u=this;return s.__generator(this,function(s){switch(s.label){case 0:return!0!==t||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return s.sent(),e=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(e.toArray())];case 2:for(n=s.sent(),r=0,i=n;r<i.length;r++)this.remoteStore.listen(i[r]);return[3,7];case 3:return!1!==t||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,o=[],a=Promise.resolve(),I(this.queryViewsByTarget,function(t,e){u.sharedClientState.isLocalQueryTarget(t)?o.push(t):a=a.then(function(){return u.unlisten(e.query)}),u.remoteStore.unlisten(e.targetId)}),[4,a]);case 4:return s.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(o)];case 5:return s.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:s.sent(),s.label=7;case 7:return[2]}})})},t.prototype.resetLimboDocuments=function(){var t=this;I(this.limboResolutionsByTarget,function(e){t.remoteStore.unlisten(e)}),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new Ct(lt.comparator)},t.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(t){return s.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o,a,u,l,c;return s.__generator(this,function(s){switch(s.label){case 0:e=[],n=[],r=0,i=t,s.label=1;case 1:return r<i.length?(a=void 0,(u=this.queryViewsByTarget[o=i[r]])?[4,this.localStore.releaseQuery(u.query,!0)]:[3,5]):[3,11];case 2:return s.sent(),[4,this.localStore.allocateQuery(u.query)];case 3:return a=s.sent(),[4,this.synchronizeViewAndComputeSnapshot(u)];case 4:return(l=s.sent()).snapshot&&n.push(l.snapshot),[3,9];case 5:return v(!0===this.isPrimary,"A secondary tab should never have an active query without an active view."),[4,this.localStore.getQueryForTarget(o)];case 6:return v(!!(c=s.sent()),"Query data for target "+o+" not found"),[4,this.localStore.allocateQuery(c)];case 7:return a=s.sent(),[4,this.initializeViewAndComputeSnapshot(a,!1)];case 8:s.sent(),s.label=9;case 9:e.push(a),s.label=10;case 10:return r++,[3,1];case 11:return this.syncEngineListener.onWatchChange(n),[2,e]}})})},t.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},t.prototype.applyTargetState=function(t,e,n){return s.__awaiter(this,void 0,void 0,function(){var r,i,o,a,u;return s.__generator(this,function(s){switch(s.label){case 0:if(this.isPrimary)return p("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.queryViewsByTarget[t])return[3,11];switch(e){case"current":case"not-current":return[3,1];case"rejected":return[3,8]}return[3,10];case 1:return s.trys.push([1,4,,8]),[4,this.localStore.getNewDocumentChanges()];case 2:return r=s.sent(),i=Dr.createSynthesizedRemoteEventForCurrentChange(t,"current"===e),[4,this.emitNewSnapsAndNotifyLocalStore(r,i)];case 3:return s.sent(),[3,11];case 4:return(l=o=s.sent()).code!==_.DATA_LOSS||l.message!==be?[3,6]:(a=[],I(this.queryViewsByTarget,function(t){return a.push(t)}),[4,this.synchronizeQueryViewsAndRaiseSnapshots(a)]);case 5:return s.sent(),[3,7];case 6:throw o;case 7:return[3,8];case 8:return this.removeAndCleanupQuery(u=this.queryViewsByTarget[t]),[4,this.localStore.releaseQuery(u.query,!0)];case 9:return s.sent(),this.syncEngineListener.onWatchError(u.query,n),[3,11];case 10:y("Unexpected target state: "+e),s.label=11;case 11:return[2]}var l})})},t.prototype.applyActiveTargetsChange=function(t,e){return s.__awaiter(this,void 0,void 0,function(){var n,r,i,o,a,u,l,c,h,d=this;return s.__generator(this,function(f){switch(f.label){case 0:if(!this.isPrimary)return[2];n=0,r=t,f.label=1;case 1:return n<r.length?(v(!this.queryViewsByTarget[h=r[n]],"Trying to add an already active target"),[4,this.localStore.getQueryForTarget(h)]):[3,6];case 2:return v(!!(i=f.sent()),"Query data for active target "+h+" not found"),[4,this.localStore.allocateQuery(i)];case 3:return o=f.sent(),[4,this.initializeViewAndComputeSnapshot(o,!1)];case 4:f.sent(),this.remoteStore.listen(o),f.label=5;case 5:return n++,[3,1];case 6:a=function(t){var e;return s.__generator(this,function(n){switch(n.label){case 0:return(e=u.queryViewsByTarget[t])?[4,u.localStore.releaseQuery(e.query,!1).then(function(){d.remoteStore.unlisten(t),d.removeAndCleanupQuery(e)}).catch(hn)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})},u=this,l=0,c=e,f.label=7;case 7:return l<c.length?[5,a(h=c[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})},t.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},t.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},t.prototype.getRemoteKeysForTarget=function(t){var e=this.limboResolutionsByTarget[t];return e&&e.receivedDocument?jt().add(e.key):this.queryViewsByTarget[t]?this.queryViewsByTarget[t].view.syncedDocuments:jt()},t}(),ki=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t.UNAUTHENTICATED=new t(null),t.GOOGLE_CREDENTIALS=new t("google-credentials-uid"),t.FIRST_PARTY=new t("first-party-uid"),t}(),Di="SharedClientState",Ni="firestore_clients",Oi="firestore_mutations",xi="firestore_targets",Ri="firestore_online_state",Pi="firestore_sequence_number",Mi=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r,v(void 0!==r==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return t.fromWebStorageEntry=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new E(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(m(Di,"Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Li=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n,v(void 0!==n==("rejected"===e),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return t.fromWebStorageEntry=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new E(r.error.code,r.error.message)),i?new t(e,r.state,o):(m(Di,"Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Vi=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.fromWebStorageEntry=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Ut(),s=0;i&&s<r.activeTargetIds.length;++s)i=sr(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(m(Di,"Failed to parse client data for instance '"+e+"': "+n),null)},t}(),ji=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.fromWebStorageEntry=function(e){var n=JSON.parse(e);return"object"==typeof n&&n.onlineState in yr&&"string"==typeof n.clientId?new t(n.clientId,yr[n.onlineState]):(m(Di,"Failed to parse online state: "+e),null)},t}(),Fi=function(){function t(){this.activeTargetIds=Ut()}return t.prototype.addQueryTarget=function(t){v(!this.activeTargetIds.has(t),"Target with ID '"+t+"' already active."),this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.removeQueryTarget=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.toWebStorageJSON=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Ui=function(){function t(e,n,r,i,o){if(this.queue=e,this.platform=n,this.persistenceKey=r,this.localClientId=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!t.isAvailable(this.platform))throw new E(_.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=o,this.localClientStorageKey=this.toWebStorageClientStateKey(this.localClientId),this.sequenceNumberKey=Pi+"_"+r,this.activeClients[this.localClientId]=new Fi,this.clientStateKeyRe=new RegExp("^"+Ni+"_"+s+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+Oi+"_"+s+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+xi+"_"+s+"_(\\d+)$"),this.onlineStateKey=Ri+"_"+r,this.platform.window.addEventListener("storage",this.storageListener)}return t.isAvailable=function(t){return!(!t.window||null==t.window.localStorage)},t.prototype.start=function(){return s.__awaiter(this,void 0,void 0,function(){var t,e,n,r,i,o,a,u,l,c,h=this;return s.__generator(this,function(s){switch(s.label){case 0:return v(!this.started,"WebStorageSharedClientState already started"),v(null!==this.syncEngine,"syncEngine property must be set before calling start()"),v(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(t=s.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.localClientId&&(i=this.getItem(this.toWebStorageClientStateKey(r)))&&(o=Vi.fromWebStorageEntry(r,i))&&(this.activeClients[o.clientId]=o);for(this.persistClientState(),(a=this.storage.getItem(this.onlineStateKey))&&(u=this.fromWebStorageOnlineState(a))&&this.handleOnlineStateEvent(u),l=0,c=this.earlyEvents;l<c.length;l++)this.handleWebStorageEvent(c[l]);return this.earlyEvents=[],this.platform.window.addEventListener("unload",function(){return h.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.sequenceNumberKey,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){var t=Ut();return A(this.activeClients,function(e,n){t=t.unionWith(n.activeTargetIds)}),t},t.prototype.isActiveQueryTarget=function(t){for(var e in this.activeClients)if(this.activeClients.hasOwnProperty(e)&&this.activeClients[e].activeTargetIds.has(t))return!0;return!1},t.prototype.addPendingMutation=function(t){this.persistMutationState(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.persistMutationState(t,e,n),this.removeMutationState(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(this.toWebStorageQueryTargetMetadataKey(t));if(n){var r=Li.fromWebStorageEntry(t,n);r&&(e=r.state)}}return this.localClientState.addQueryTarget(t),this.persistClientState(),e},t.prototype.removeLocalQueryTarget=function(t){this.localClientState.removeQueryTarget(t),this.persistClientState()},t.prototype.isLocalQueryTarget=function(t){return this.localClientState.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(this.toWebStorageQueryTargetMetadataKey(t))},t.prototype.updateQueryState=function(t,e,n){this.persistQueryTargetState(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.removeMutationState(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.persistOnlineState(t)},t.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return p(Di,"READ",t,e),e},t.prototype.setItem=function(t,e){p(Di,"SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){p(Di,"REMOVE",t),this.storage.removeItem(t)},t.prototype.handleWebStorageEvent=function(t){var e=this;if(t.storageArea===this.storage){if(p(Di,"EVENT",t.key,t.newValue),t.key===this.localClientStorageKey)return void m("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget(function(){return s.__awaiter(e,void 0,void 0,function(){var e,n,r,i,o,a;return s.__generator(this,function(s){if(!this.started)return this.earlyEvents.push(t),[2];if(null===t.key)return[2];if(this.clientStateKeyRe.test(t.key)){if(null==t.newValue)return n=this.fromWebStorageClientStateKey(t.key),[2,this.handleClientStateEvent(n,null)];if(e=this.fromWebStorageClientState(t.key,t.newValue))return[2,this.handleClientStateEvent(e.clientId,e)]}else if(this.mutationBatchKeyRe.test(t.key)){if(null!==t.newValue&&(r=this.fromWebStorageMutationMetadata(t.key,t.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(t.key)){if(null!==t.newValue&&(i=this.fromWebStorageQueryTargetMetadata(t.key,t.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(t.key===this.onlineStateKey){if(null!==t.newValue&&(o=this.fromWebStorageOnlineState(t.newValue)))return[2,this.handleOnlineStateEvent(o)]}else t.key===this.sequenceNumberKey&&(v(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(a=function(t){var e=it.INVALID;if(null!=t)try{var n=JSON.parse(t);v("number"==typeof n,"Found non-numeric sequence number"),e=n}catch(r){m(Di,"Failed to read sequence number from WebStorage",r)}return e}(t.newValue))!==it.INVALID&&this.sequenceNumberHandler(a));return[2]})})})}},Object.defineProperty(t.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),t.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},t.prototype.persistMutationState=function(t,e,n){var r=new Mi(this.currentUser,t,e,n),i=this.toWebStorageMutationBatchKey(t);this.setItem(i,r.toWebStorageJSON())},t.prototype.removeMutationState=function(t){var e=this.toWebStorageMutationBatchKey(t);this.removeItem(e)},t.prototype.persistOnlineState=function(t){this.storage.setItem(this.onlineStateKey,JSON.stringify({clientId:this.localClientId,onlineState:yr[t]}))},t.prototype.persistQueryTargetState=function(t,e,n){var r=this.toWebStorageQueryTargetMetadataKey(t),i=new Li(t,e,n);this.setItem(r,i.toWebStorageJSON())},t.prototype.toWebStorageClientStateKey=function(t){return v(-1===t.indexOf("_"),"Client key cannot contain '_', but was '"+t+"'"),Ni+"_"+this.persistenceKey+"_"+t},t.prototype.toWebStorageQueryTargetMetadataKey=function(t){return xi+"_"+this.persistenceKey+"_"+t},t.prototype.toWebStorageMutationBatchKey=function(t){var e=Oi+"_"+this.persistenceKey+"_"+t;return this.currentUser.isAuthenticated()&&(e+="_"+this.currentUser.uid),e},t.prototype.fromWebStorageClientStateKey=function(t){var e=this.clientStateKeyRe.exec(t);return e?e[1]:null},t.prototype.fromWebStorageClientState=function(t,e){var n=this.fromWebStorageClientStateKey(t);return v(null!==n,"Cannot parse client state key '"+t+"'"),Vi.fromWebStorageEntry(n,e)},t.prototype.fromWebStorageMutationMetadata=function(t,e){var n=this.mutationBatchKeyRe.exec(t);v(null!==n,"Cannot parse mutation batch key '"+t+"'");var r=Number(n[1]);return Mi.fromWebStorageEntry(new ki(void 0!==n[2]?n[2]:null),r,e)},t.prototype.fromWebStorageQueryTargetMetadata=function(t,e){var n=this.queryTargetKeyRe.exec(t);v(null!==n,"Cannot parse query target key '"+t+"'");var r=Number(n[1]);return Li.fromWebStorageEntry(r,e)},t.prototype.fromWebStorageOnlineState=function(t){return ji.fromWebStorageEntry(t)},t.prototype.handleMutationBatchEvent=function(t){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){return t.user.uid!==this.currentUser.uid?(p(Di,"Ignoring mutation for non-active user "+t.user.uid),[2]):[2,this.syncEngine.applyBatchState(t.batchId,t.state,t.error)]})})},t.prototype.handleQueryTargetEvent=function(t){return this.syncEngine.applyTargetState(t.targetId,t.state,t.error)},t.prototype.handleClientStateEvent=function(t,e){var n=this,r=this.getAllActiveQueryTargets();e?this.activeClients[t]=e:delete this.activeClients[t];var i=this.getAllActiveQueryTargets(),o=[],a=[];return i.forEach(function(t){return s.__awaiter(n,void 0,void 0,function(){return s.__generator(this,function(e){return r.has(t)||o.push(t),[2]})})}),r.forEach(function(t){return s.__awaiter(n,void 0,void 0,function(){return s.__generator(this,function(e){return i.has(t)||a.push(t),[2]})})}),this.syncEngine.applyActiveTargetsChange(o,a)},t.prototype.handleOnlineStateEvent=function(t){this.activeClients[t.clientId]&&this.onlineStateHandler(t.onlineState)},t}(),qi=function(){function t(){this.localState=new Fi,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.localState.addQueryTarget(t),this.queryState[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.queryState[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.localState.removeQueryTarget(t)},t.prototype.isLocalQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.queryState[t]},t.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},t.prototype.start=function(){return this.localState=new Fi,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t}(),Bi=function(){function t(t,e){this.cacheSizeBytes=t,this.synchronizeTabs=e}return t.prototype.lruParams=function(){return en.withCacheSize(this.cacheSizeBytes)},t}(),Gi=function(){return function(){}}(),zi=function(){function t(t,e,n,r){this.platform=t,this.databaseInfo=e,this.credentials=n,this.asyncQueue=r,this.clientId=K.newId()}return t.prototype.start=function(t){var e=this;this.verifyNotTerminated();var n=new ct,r=new ct,i=!1;return this.credentials.setChangeListener(function(o){i?e.asyncQueue.enqueueAndForget(function(){return e.handleCredentialChange(o)}):(i=!0,e.initializePersistence(t,r,o).then(function(t){return e.initializeRest(o,t)}).then(n.resolve,n.reject))}),this.asyncQueue.enqueueAndForget(function(){return n.promise}),r.promise},t.prototype.enableNetwork=function(){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return t.syncEngine.enableNetwork()})},t.prototype.initializePersistence=function(t,e,n){var r=this;return t instanceof Bi?this.startIndexedDbPersistence(n,t).then(function(t){return e.resolve(),t}).catch(function(t){if(e.reject(t),!r.canFallback(t))throw t;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+t),r.startMemoryPersistence()}):(e.resolve(),this.startMemoryPersistence())},t.prototype.canFallback=function(t){return t instanceof E?t.code===_.FAILED_PRECONDITION||t.code===_.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new E(_.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.startIndexedDbPersistence=function(t,e){var n=this,r=cn.buildStoragePrefix(this.databaseInfo),i=new mi(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then(function(){return s.__awaiter(n,void 0,void 0,function(){var n,o;return s.__generator(this,function(s){switch(s.label){case 0:if(e.synchronizeTabs&&!Ui.isAvailable(this.platform))throw new E(_.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return o=e.lruParams(),e.synchronizeTabs?(this.sharedClientState=new Ui(this.asyncQueue,this.platform,r,this.clientId,t),[4,cn.createMultiClientIndexedDbPersistence(r,this.clientId,this.platform,this.asyncQueue,i,o,{sequenceNumberSyncer:this.sharedClientState})]):[3,2];case 1:return n=s.sent(),[3,4];case 2:return this.sharedClientState=new qi,[4,cn.createIndexedDbPersistence(r,this.clientId,this.platform,this.asyncQueue,i,o)];case 3:n=s.sent(),s.label=4;case 4:return this.persistence=n,[2,n.referenceDelegate.garbageCollector]}})})})},t.prototype.startMemoryPersistence=function(){return this.persistence=Jn.createEagerPersistence(this.clientId),this.sharedClientState=new qi,Promise.resolve(null)},t.prototype.initializeRest=function(t,e){var n=this;return p("FirestoreClient","Initializing. user=",t.uid),this.platform.loadConnection(this.databaseInfo).then(function(r){return s.__awaiter(n,void 0,void 0,function(){var n,i,o,a,u=this;return s.__generator(this,function(l){switch(l.label){case 0:return this.localStore=new Kn(this.persistence,t),e&&(this.lruScheduler=new nn(e,this.asyncQueue,this.localStore)),n=this.platform.newConnectivityMonitor(),i=this.platform.newSerializer(this.databaseInfo.databaseId),o=new mr(this.asyncQueue,r,this.credentials,i),a=function(t){return u.syncEngine.applyOnlineStateChange(t,vr.SharedClientState)},this.remoteStore=new Ur(this.localStore,o,this.asyncQueue,function(t){return u.syncEngine.applyOnlineStateChange(t,vr.RemoteStore)},n),this.syncEngine=new Ai(this.localStore,this.remoteStore,this.sharedClientState,t),this.sharedClientState.onlineStateHandler=a,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new yi(this.syncEngine),[4,this.sharedClientState.start()];case 1:return l.sent(),[4,this.remoteStore.start()];case 2:return l.sent(),[4,this.persistence.setPrimaryStateListener(function(t){return s.__awaiter(u,void 0,void 0,function(){return s.__generator(this,function(e){switch(e.label){case 0:return[4,this.syncEngine.applyPrimaryState(t)];case 1:return e.sent(),this.lruScheduler&&(t&&!this.lruScheduler.started?this.lruScheduler.start():t||this.lruScheduler.stop()),[2]}})})})];case 3:return l.sent(),[4,this.persistence.setDatabaseDeletedListener(function(){return s.__awaiter(u,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}})})})];case 4:return l.sent(),[2]}})})})},t.prototype.handleCredentialChange=function(t){return this.asyncQueue.verifyOperationInProgress(),p("FirestoreClient","Credential Changed. Current user: "+t.uid),this.syncEngine.handleCredentialChange(t)},t.prototype.disableNetwork=function(){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return t.syncEngine.disableNetwork()})},t.prototype.terminate=function(){var t=this;return this.asyncQueue.enqueueAndInitiateShutdown(function(){return s.__awaiter(t,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return t.sent(),[4,this.sharedClientState.shutdown()];case 2:return t.sent(),[4,this.persistence.shutdown()];case 3:return t.sent(),this.credentials.removeChangeListener(),[2]}})})})},t.prototype.waitForPendingWrites=function(){var t=this;this.verifyNotTerminated();var e=new ct;return this.asyncQueue.enqueueAndForget(function(){return t.syncEngine.registerPendingWritesCallback(e)}),e.promise},t.prototype.listen=function(t,e,n){var r=this;this.verifyNotTerminated();var i=new vi(t,e,n);return this.asyncQueue.enqueueAndForget(function(){return r.eventMgr.listen(i)}),i},t.prototype.unlisten=function(t){var e=this;this.clientTerminated||this.asyncQueue.enqueueAndForget(function(){return e.eventMgr.unlisten(t)})},t.prototype.getDocumentFromLocalCache=function(t){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return e.localStore.readDocument(t)}).then(function(t){if(t instanceof pe)return t;if(t instanceof me)return null;throw new E(_.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")})},t.prototype.getDocumentsFromLocalCache=function(t){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return e.localStore.executeQuery(t)}).then(function(e){var n=jt(),r=new Ei(t,n),i=r.computeDocChanges(e);return r.applyChanges(i,!1).snapshot})},t.prototype.write=function(t){var e=this;this.verifyNotTerminated();var n=new ct;return this.asyncQueue.enqueueAndForget(function(){return e.syncEngine.write(t,n)}),n.promise},t.prototype.databaseId=function(){return this.databaseInfo.databaseId},Object.defineProperty(t.prototype,"clientTerminated",{get:function(){return this.asyncQueue.isShuttingDown},enumerable:!0,configurable:!0}),t.prototype.transaction=function(t){var e=this;this.verifyNotTerminated();var n=new ct;return this.asyncQueue.enqueueAndForget(function(){return e.syncEngine.runTransaction(e.asyncQueue,t,n),Promise.resolve()}),n.promise},t}(),Hi=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.scheduleEvent(this.observer.next,t)},t.prototype.error=function(t){this.scheduleEvent(this.observer.error,t)},t.prototype.mute=function(){this.muted=!0},t.prototype.scheduleEvent=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Wi=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(e,n,r,i){if(!(t instanceof Array)||t.length<1)throw new E(_.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+W(1,"element")+".")}();for(var n=0;n<t.length;++n)if(R("FieldPath","string",n,t[n]),0===t[n].length)throw new E(_.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ut(t)}return t.documentId=function(){return t._DOCUMENT_ID},t.prototype.isEqual=function(e){if(!(e instanceof t))throw z("isEqual","FieldPath",1,e);return this._internalPath.isEqual(e._internalPath)},t._DOCUMENT_ID=new t(ut.keyField().canonicalString()),t}(),Ki=new RegExp("[~\\*/\\[\\]]"),Qi=function(){return function(t,e){this.user=e,this.type="OAuth",this.authHeaders={Authorization:"Bearer "+t}}}(),$i=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){v(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=t,t(ki.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){v(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},t}(),Yi=function(){function t(t){var e=this;this.app=t,this.tokenListener=null,this.currentUser=ki.UNAUTHENTICATED,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){e.tokenCounter++,e.currentUser=e.getUser(),e.changeListener&&e.changeListener(e.currentUser)},this.tokenCounter=0,this.app.INTERNAL.addAuthTokenListener(this.tokenListener)}return t.prototype.getToken=function(){var t=this;v(null!=this.tokenListener,"getToken cannot be called after listener removed.");var e=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.app.INTERNAL.getToken(n).then(function(n){if(t.tokenCounter!==e)throw new E(_.ABORTED,"getToken aborted due to token change.");return n?(v("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new Qi(n.accessToken,t.currentUser)):null})},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){v(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=t,this.currentUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){v(null!=this.tokenListener,"removeChangeListener() called twice"),v(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.app.INTERNAL.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},t.prototype.getUser=function(){var t=this.app.INTERNAL.getUid();return v(null===t||"string"==typeof t,"Received invalid UID: "+t),new ki(t)},t}(),Ji=function(){function t(t,e){this.gapi=t,this.sessionIndex=e,this.type="FirstParty",this.user=ki.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.sessionIndex},e=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!0,configurable:!0}),t}(),Xi=function(){function t(t,e){this.gapi=t,this.sessionIndex=e}return t.prototype.getToken=function(){return Promise.resolve(new Ji(this.gapi,this.sessionIndex))},t.prototype.setChangeListener=function(t){t(ki.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Zi(t){if(!t)return new $i;switch(t.type){case"gapi":var e=t.client;return v(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new Xi(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new E(_.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}function to(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var eo=function(){function t(t){this._methodName=t}return t.delete=function(){return D("FieldValue.delete",arguments),no.instance},t.serverTimestamp=function(){return D("FieldValue.serverTimestamp",arguments),ro.instance},t.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return O("FieldValue.arrayUnion",arguments,1),new io(t)},t.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return O("FieldValue.arrayRemove",arguments,1),new oo(t)},t.increment=function(t){return R("FieldValue.increment","number",1,t),N("FieldValue.increment",arguments,1),new so(t)},t.prototype.isEqual=function(t){return this===t},t}(),no=function(t){function e(){return t.call(this,"FieldValue.delete")||this}return s.__extends(e,t),e.instance=new e,e}(eo),ro=function(t){function e(){return t.call(this,"FieldValue.serverTimestamp")||this}return s.__extends(e,t),e.instance=new e,e}(eo),io=function(t){function e(e){var n=t.call(this,"FieldValue.arrayUnion")||this;return n._elements=e,n}return s.__extends(e,t),e}(eo),oo=function(t){function e(e){var n=t.call(this,"FieldValue.arrayRemove")||this;return n._elements=e,n}return s.__extends(e,t),e}(eo),so=function(t){function e(e){var n=t.call(this,"FieldValue.increment")||this;return n._operand=e,n}return s.__extends(e,t),e}(eo),ao=S(eo,"Use FieldValue.<field>() instead."),uo=/^__.*__$/,lo=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[];return n.push(null!==this.fieldMask?new qn(t,this.data,this.fieldMask,e):new Un(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new Bn(t,this.fieldTransforms)),n},t}(),co=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[new qn(t,this.data,this.fieldMask,e)];return this.fieldTransforms.length>0&&n.push(new Bn(t,this.fieldTransforms)),n},t}(),ho=function(t){return t[t.Set=0]="Set",t[t.Update=1]="Update",t[t.MergeSet=2]="MergeSet",t[t.Argument=3]="Argument",t}({});function fo(t){switch(t){case ho.Set:case ho.MergeSet:case ho.Update:return!0;case ho.Argument:return!1;default:throw y("Unexpected case for UserDataSource: "+t)}}var po=function(){function t(t,e,n,r,i,o){this.dataSource=t,this.methodName=e,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}return t.prototype.childContextForField=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePathSegment(e),r},t.prototype.childContextForFieldPath=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePath(),r},t.prototype.childContextForArray=function(e){return new t(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},t.prototype.createError=function(t){var e=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new E(_.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+t+e)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.validatePath=function(){if(null!==this.path)for(var t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))},t.prototype.validatePathSegment=function(t){if(fo(this.dataSource)&&uo.test(t))throw this.createError("Document fields cannot begin and end with __")},t}(),mo=function(){return function(t,e){this.databaseId=t,this.key=e}}(),go=function(){function t(t){this.preConverter=t}return t.prototype.parseSetData=function(t,e){var n=new po(ho.Set,t,ut.EMPTY_PATH);vo("Data must be an object, but it was:",n,e);var r=this.parseData(e,n);return new lo(r,null,n.fieldTransforms)},t.prototype.parseMergeData=function(t,e,n){var r=new po(ho.MergeSet,t,ut.EMPTY_PATH);vo("Data must be an object, but it was:",r,e);var i,o,s=this.parseData(e,r);if(n){for(var a=new kt(ut.comparator),u=0,l=n;u<l.length;u++){var c=l[u],h=void 0;if(c instanceof Wi)h=c._internalPath;else{if("string"!=typeof c)throw y("Expected stringOrFieldPath to be a string or a FieldPath");h=wo(t,c)}if(!r.contains(h))throw new E(_.INVALID_ARGUMENT,"Field '"+h+"' is specified in your field mask but missing from your input data.");a=a.add(h)}i=Pn.fromSet(a),o=r.fieldTransforms.filter(function(t){return i.covers(t.field)})}else i=Pn.fromArray(r.fieldMask),o=r.fieldTransforms;return new lo(s,i,o)},t.prototype.parseUpdateData=function(t,e){var n=this,r=new po(ho.Update,t,ut.EMPTY_PATH);vo("Data must be an object, but it was:",r,e);var i=new kt(ut.comparator),o=xn.EMPTY;A(e,function(e,s){var a=wo(t,e),u=r.childContextForFieldPath(a);if((s=n.runPreConverter(s,u))instanceof no)i=i.add(a);else{var l=n.parseData(s,u);null!=l&&(i=i.add(a),o=o.set(a,l))}});var s=Pn.fromSet(i);return new co(o,s,r.fieldTransforms)},t.prototype.parseUpdateVarargs=function(t,e,n,r){var i=new po(ho.Update,t,ut.EMPTY_PATH),o=[bo(t,e)],s=[n];if(r.length%2!=0)throw new E(_.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var a=0;a<r.length;a+=2)o.push(bo(t,r[a])),s.push(r[a+1]);var u=new kt(ut.comparator),l=xn.EMPTY;for(a=0;a<o.length;++a){var c=o[a],h=i.childContextForFieldPath(c),d=this.runPreConverter(s[a],h);if(d instanceof no)u=u.add(c);else{var f=this.parseData(d,h);null!=f&&(u=u.add(c),l=l.set(c,f))}}var p=Pn.fromSet(u);return new co(l,p,i.fieldTransforms)},t.prototype.parseQueryValue=function(t,e){var n=new po(ho.Argument,t,ut.EMPTY_PATH),r=this.parseData(e,n);return v(null!=r,"Parsed data should not be null."),v(0===n.fieldTransforms.length,"Field transforms should have been disallowed."),r},t.prototype.runPreConverter=function(t,e){try{return this.preConverter(t)}catch(r){var n=_o(r);throw e.createError(n)}},t.prototype.parseData=function(t,e){if(yo(t=this.runPreConverter(t,e)))return vo("Unsupported field value:",e,t),this.parseObject(t,e);if(t instanceof eo)return this.parseSentinelFieldValue(t,e),null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.arrayElement)throw e.createError("Nested arrays are not supported");return this.parseArray(t,e)}return this.parseScalarValue(t,e)},t.prototype.parseObject=function(t,e){var n=this,r=new Ct(Q);return k(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):A(t,function(t,i){var o=n.parseData(i,e.childContextForField(t));null!=o&&(r=r.insert(t,o))}),new xn(r)},t.prototype.parseArray=function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=this.parseData(o[i],e.childContextForArray(r));null==s&&(s=wn.INSTANCE),n.push(s),r++}return new Rn(n)},t.prototype.parseSentinelFieldValue=function(t,e){if(!fo(e.dataSource))throw e.createError(t._methodName+"() can only be used with update() and set()");if(null===e.path)throw e.createError(t._methodName+"() is not currently supported inside arrays");if(t instanceof no){if(e.dataSource!==ho.MergeSet)throw e.dataSource===ho.Update?(v(e.path.length>0,"FieldValue.delete() at the top level should have already been handled."),e.createError("FieldValue.delete() can only appear at the top level of your update data")):e.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");e.fieldMask.push(e.path)}else if(t instanceof ro)e.fieldTransforms.push(new Mn(e.path,ni.instance));else if(t instanceof io){var n=this.parseArrayTransformElements(t._methodName,t._elements),r=new ri(n);e.fieldTransforms.push(new Mn(e.path,r))}else if(t instanceof oo){n=this.parseArrayTransformElements(t._methodName,t._elements);var i=new ii(n);e.fieldTransforms.push(new Mn(e.path,i))}else if(t instanceof so){var o=this.parseQueryValue("FieldValue.increment",t._operand),s=new oi(o);e.fieldTransforms.push(new Mn(e.path,s))}else y("Unknown FieldValue type: "+t)},t.prototype.parseScalarValue=function(t,e){if(null===t)return wn.INSTANCE;if("number"==typeof t)return sr(t)?new Cn(t):new Tn(t);if("boolean"==typeof t)return _n.of(t);if("string"==typeof t)return new In(t);if(t instanceof Date)return new An(Et.fromDate(t));if(t instanceof Et)return new An(new Et(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)));if(t instanceof qr)return new On(t);if(t instanceof Z)return new Dn(t);if(t instanceof mo)return new Nn(t.databaseId,t.key);throw e.createError("Unsupported field value: "+q(t))},t.prototype.parseArrayTransformElements=function(t,e){var n=this;return e.map(function(e,r){var i=new po(ho.Argument,t,ut.EMPTY_PATH);return n.parseData(e,i.childContextForArray(r))})},t}();function yo(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Et||t instanceof qr||t instanceof Z||t instanceof mo||t instanceof eo)}function vo(t,e,n){if(!yo(n)||!U(n)){var r=q(n);throw e.createError("an object"===r?t+" a custom object":t+" "+r)}}function bo(t,e){if(e instanceof Wi)return e._internalPath;if("string"==typeof e)return wo(t,e);throw new E(_.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function wo(t,e){try{return function(t){if(t.search(Ki)>=0)throw new E(_.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Wi.bind.apply(Wi,[void 0].concat(t.split("."))))}catch(e){throw new E(_.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e)._internalPath}catch(r){var n=_o(r);throw new E(_.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}}function _o(t){return t instanceof Error?t.message:t.toString()}var Eo="firestore.googleapis.com",So=!0,Co=!0,To=!1,Io=en.COLLECTION_DISABLED,Ao=function(){function t(t){if(void 0===t.host){if(void 0!==t.ssl)throw new E(_.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Eo,this.ssl=So}else M("settings","non-empty string","host",t.host),this.host=t.host,L("settings","boolean","ssl",t.ssl),this.ssl=T(t.ssl,So);if(G("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),L("settings","object","credentials",t.credentials),this.credentials=t.credentials,L("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),!0===t.timestampsInSnapshots?m("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===t.timestampsInSnapshots&&m("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=T(t.timestampsInSnapshots,Co),L("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=en.DEFAULT_CACHE_SIZE_BYTES;else{if(t.cacheSizeBytes!==Io&&t.cacheSizeBytes<en.MINIMUM_CACHE_SIZE_BYTES)throw new E(_.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+en.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=t.cacheSizeBytes}L("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=void 0===t.experimentalForceLongPolling?To:t.experimentalForceLongPolling}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling},t}(),ko=function(){function t(e){var n=this;if(this._firebaseApp=null,this._queue=new ft,this.INTERNAL={delete:function(){return s.__awaiter(n,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return this.ensureClientConfigured(),[4,this._firestoreClient.terminate()];case 1:return t.sent(),[2]}})})}},"object"==typeof e.options){var r=e;this._firebaseApp=r,this._databaseId=t.databaseIdFromApp(r),this._persistenceKey=r.name,this._credentials=new Yi(r)}else{var i=e;if(!i.projectId)throw new E(_.INVALID_ARGUMENT,"Must provide projectId");this._databaseId=new rt(i.projectId,i.database),this._persistenceKey="[DEFAULT]",this._credentials=new $i}this._settings=new Ao({}),this._dataConverter=this.createDataConverter(this._databaseId)}return t.prototype.settings=function(t){if(N("Firestore.settings",arguments,1),R("Firestore.settings","object",1,t),C(t,"persistence"))throw new E(_.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var e=new Ao(t);if(this._firestoreClient&&!this._settings.isEqual(e))throw new E(_.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this._settings=e,void 0!==e.credentials&&(this._credentials=Zi(e.credentials))},t.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},t.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},t.prototype.enablePersistence=function(t){if(this._firestoreClient)throw new E(_.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var e=!1;return t&&(void 0!==t.experimentalTabSynchronization&&m("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),e=T(void 0!==t.synchronizeTabs?t.synchronizeTabs:t.experimentalTabSynchronization,!1)),this.configureClient(new Bi(this._settings.cacheSizeBytes,e))},t.prototype.clearPersistence=function(){var t=this,e=cn.buildStoragePrefix(this.makeDatabaseInfo()),n=new ct;return this._queue.enqueueAndForgetEvenAfterShutdown(function(){return s.__awaiter(t,void 0,void 0,function(){var t;return s.__generator(this,function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),void 0!==this._firestoreClient&&!this._firestoreClient.clientTerminated)throw new E(_.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,cn.clearPersistence(e)];case 1:return r.sent(),n.resolve(),[3,3];case 2:return t=r.sent(),n.reject(t),[3,3];case 3:return[2]}})})}),n.promise},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"_isTerminated",{get:function(){return this.ensureClientConfigured(),this._firestoreClient.clientTerminated},enumerable:!0,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.ensureClientConfigured(),this._firestoreClient.waitForPendingWrites()},t.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new Gi),this._firestoreClient},t.prototype.makeDatabaseInfo=function(){return new et(this._databaseId,this._persistenceKey,this._settings.host,this._settings.ssl,this._settings.forceLongPolling)},t.prototype.configureClient=function(t){v(!!this._settings.host,"FirestoreSettings.host is not set"),v(!this._firestoreClient,"configureClient() called multiple times");var e=this.makeDatabaseInfo();return this._firestoreClient=new zi(b.getPlatform(),e,this._credentials,this._queue),this._firestoreClient.start(t)},t.prototype.createDataConverter=function(t){return new go(function(e){if(e instanceof Oo){var n=t,r=e.firestore._databaseId;if(!r.isEqual(n))throw new E(_.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new mo(t,e._key)}return e})},t.databaseIdFromApp=function(t){var e=t.options;if(!C(e,"projectId"))throw new E(_.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=e.projectId;if(!n||"string"!=typeof n)throw new E(_.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new rt(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this._firebaseApp)throw new E(_.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._firebaseApp},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){return N("Firestore.collection",arguments,1),R("Firestore.collection","non-empty string",1,t),this.ensureClientConfigured(),new Vo(st.fromString(t),this)},t.prototype.doc=function(t){return N("Firestore.doc",arguments,1),R("Firestore.doc","non-empty string",1,t),this.ensureClientConfigured(),Oo.forPath(st.fromString(t),this)},t.prototype.collectionGroup=function(t){if(N("Firestore.collectionGroup",arguments,1),R("Firestore.collectionGroup","non-empty string",1,t),t.indexOf("/")>=0)throw new E(_.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new Mo(new Br(st.EMPTY_PATH,t),this)},t.prototype.runTransaction=function(t){var e=this;return N("Firestore.runTransaction",arguments,1),R("Firestore.runTransaction","function",1,t),this.ensureClientConfigured().transaction(function(n){return t(new Do(e,n))})},t.prototype.batch=function(){return this.ensureClientConfigured(),new No(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(d()){case h.DEBUG:return"debug";case h.ERROR:return"error";case h.SILENT:return"silent";default:return y("Unknown log level: "+d())}},enumerable:!0,configurable:!0}),t.setLogLevel=function(t){switch(N("Firestore.setLogLevel",arguments,1),R("Firestore.setLogLevel","non-empty string",1,t),t){case"debug":f(h.DEBUG);break;case"error":f(h.ERROR);break;case"silent":f(h.SILENT);break;default:throw new E(_.INVALID_ARGUMENT,"Invalid log level: "+t)}},t.prototype._areTimestampsInSnapshotsEnabled=function(){return this._settings.timestampsInSnapshots},t}(),Do=function(){function t(t,e){this._firestore=t,this._transaction=e}return t.prototype.get=function(t){var e=this;N("Transaction.get",arguments,1);var n=qo("Transaction.get",t,this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return y("Mismatch in docs returned from document lookup.");var r=t[0];if(r instanceof me)return new Ro(e._firestore,n._key,null,!1,!1);if(r instanceof pe)return new Ro(e._firestore,n._key,r,!1,!1);throw y("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)})},t.prototype.set=function(t,e,n){x("Transaction.set",arguments,2,3);var r=qo("Transaction.set",t,this._firestore),i=(n=jo("Transaction.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("Transaction.set",e,n.mergeFields):this._firestore._dataConverter.parseSetData("Transaction.set",e);return this._transaction.set(r._key,i),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return"string"==typeof e||e instanceof Wi?(O("Transaction.update",arguments,3),r=qo("Transaction.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",e,n,o)):(N("Transaction.update",arguments,2),r=qo("Transaction.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateData("Transaction.update",e)),this._transaction.update(r._key,i),this},t.prototype.delete=function(t){N("Transaction.delete",arguments,1);var e=qo("Transaction.delete",t,this._firestore);return this._transaction.delete(e._key),this},t}(),No=function(){function t(t){this._firestore=t,this._mutations=[],this._committed=!1}return t.prototype.set=function(t,e,n){x("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=qo("WriteBatch.set",t,this._firestore),i=(n=jo("WriteBatch.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("WriteBatch.set",e,n.mergeFields):this._firestore._dataConverter.parseSetData("WriteBatch.set",e);return this._mutations=this._mutations.concat(i.toMutations(r._key,jn.NONE)),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.verifyNotCommitted(),"string"==typeof e||e instanceof Wi?(O("WriteBatch.update",arguments,3),r=qo("WriteBatch.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",e,n,o)):(N("WriteBatch.update",arguments,2),r=qo("WriteBatch.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateData("WriteBatch.update",e)),this._mutations=this._mutations.concat(i.toMutations(r._key,jn.exists(!0))),this},t.prototype.delete=function(t){N("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var e=qo("WriteBatch.delete",t,this._firestore);return this._mutations=this._mutations.concat(new Gn(e._key,jn.NONE)),this},t.prototype.commit=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]})})},t.prototype.verifyNotCommitted=function(){if(this._committed)throw new E(_.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),Oo=function(){function t(t,e){this._key=t,this.firestore=e,this._firestoreClient=this.firestore.ensureClientConfigured()}return t.forPath=function(e,n){if(e.length%2!=0)throw new E(_.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(new lt(e),n)},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Vo(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){if(N("DocumentReference.collection",arguments,1),R("DocumentReference.collection","non-empty string",1,t),!t)throw new E(_.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=st.fromString(t);return new Vo(this._key.path.child(e),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw z("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this._key.isEqual(e._key)},t.prototype.set=function(t,e){x("DocumentReference.set",arguments,1,2);var n=(e=jo("DocumentReference.set",e)).merge||e.mergeFields?this.firestore._dataConverter.parseMergeData("DocumentReference.set",t,e.mergeFields):this.firestore._dataConverter.parseSetData("DocumentReference.set",t);return this._firestoreClient.write(n.toMutations(this._key,jn.NONE))},t.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof t||t instanceof Wi?(O("DocumentReference.update",arguments,2),n=this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",t,e,r)):(N("DocumentReference.update",arguments,1),n=this.firestore._dataConverter.parseUpdateData("DocumentReference.update",t)),this._firestoreClient.write(n.toMutations(this._key,jn.exists(!0)))},t.prototype.delete=function(){return N("DocumentReference.delete",arguments,0),this._firestoreClient.write([new Gn(this._key,jn.NONE)])},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];x("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof t[i]||to(t[i])||(G("DocumentReference.onSnapshot",r=t[i],["includeMetadataChanges"]),L("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return to(t[i])?n=t[i]:(R("DocumentReference.onSnapshot","function",i,t[i]),P("DocumentReference.onSnapshot","function",i+1,t[i+1]),P("DocumentReference.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(o,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new Hi({next:function(t){if(e.next){v(t.docs.size<=1,"Too many documents returned on a document query");var r=t.docs.get(n._key);e.next(new Ro(n.firestore,n._key,r,t.fromCache,t.hasPendingWrites))}},error:r}),o=this._firestoreClient.listen(Br.atPath(this._key.path),i,t);return function(){i.mute(),n._firestoreClient.unlisten(o)}},t.prototype.get=function(t){var e=this;return x("DocumentReference.get",arguments,0,1),Uo("DocumentReference.get",t),new Promise(function(n,r){t&&"cache"===t.source?e.firestore.ensureClientConfigured().getDocumentFromLocalCache(e._key).then(function(t){n(new Ro(e.firestore,e._key,t,!0,t instanceof pe&&t.hasLocalMutations))},r):e.getViaSnapshotListener(n,r,t)})},t.prototype.getViaSnapshotListener=function(t,e,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?e(new E(_.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?e(new E(_.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):t(i)},error:e})},t}(),xo=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Ro=function(){function t(t,e,n,r,i){this._firestore=t,this._key=e,this._document=n,this._fromCache=r,this._hasPendingWrites=i}return t.prototype.data=function(t){return x("DocumentSnapshot.data",arguments,0,1),t=Fo("DocumentSnapshot.data",t),this._document?this.convertObject(this._document.data,vn.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled())):void 0},t.prototype.get=function(t,e){if(x("DocumentSnapshot.get",arguments,1,2),e=Fo("DocumentSnapshot.get",e),this._document){var n=this._document.data.field(bo("DocumentSnapshot.get",t));if(null!==n)return this.convertValue(n,vn.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Oo(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new xo(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw z("isEqual","DocumentSnapshot",1,e);return this._firestore===e._firestore&&this._fromCache===e._fromCache&&this._key.isEqual(e._key)&&(null===this._document?null===e._document:this._document.isEqual(e._document))},t.prototype.convertObject=function(t,e){var n=this,r={};return t.forEach(function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertValue=function(t,e){if(t instanceof xn)return this.convertObject(t,e);if(t instanceof Rn)return this.convertArray(t,e);if(t instanceof Nn){var n=t.value(e),r=this._firestore.ensureClientConfigured().databaseId();return t.databaseId.isEqual(r)||m("Document "+this._key.path+" contains a document reference within a different database ("+t.databaseId.projectId+"/"+t.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new Oo(n,this._firestore)}return t.value(e)},t.prototype.convertArray=function(t,e){var n=this;return t.internalValue.map(function(t){return n.convertValue(t,e)})},t}(),Po=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s.__extends(e,t),e.prototype.data=function(e){var n=t.prototype.data.call(this,e);return v("object"==typeof n,"Document in a QueryDocumentSnapshot should exist"),n},e}(Ro),Mo=function(){function t(t,e){this._query=t,this.firestore=e}return t.prototype.where=function(e,n,r){if(N("Query.where",arguments,3),B("Query.where",3,r),"in"!==n&&"array-contains-any"!==n){var i=["<","<=","==",">=",">","array-contains"];j("Query.where",i,2,n)}var o,s=bo("Query.where",e),a=zr.fromString(n);if(s.isKeyField()){if(a===zr.ARRAY_CONTAINS||a===zr.ARRAY_CONTAINS_ANY)throw new E(_.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+a.toString()+"' queries on FieldPath.documentId().");if(a===zr.IN){this.validateDisjunctiveFilterElements(r,a);for(var u=[],l=0,c=r;l<c.length;l++){var h=c[l];u.push(this.parseDocumentIdValue(h))}o=new Rn(u)}else o=this.parseDocumentIdValue(r)}else a!==zr.IN&&a!==zr.ARRAY_CONTAINS_ANY||this.validateDisjunctiveFilterElements(r,a),o=this.firestore._dataConverter.parseQueryValue("Query.where",r);var d=Hr.create(s,a,o);return this.validateNewFilter(d),new t(this._query.addFilter(d),this.firestore)},t.prototype.orderBy=function(e,n){var r;if(x("Query.orderBy",arguments,1,2),P("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r=Jr.ASCENDING;else{if("desc"!==n)throw new E(_.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=Jr.DESCENDING}if(null!==this._query.startAt)throw new E(_.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new E(_.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=bo("Query.orderBy",e),o=new Zr(i,r);return this.validateNewOrderBy(o),new t(this._query.addOrderBy(o),this.firestore)},t.prototype.limit=function(e){if(N("Query.limit",arguments,1),R("Query.limit","number",1,e),e<=0)throw new E(_.INVALID_ARGUMENT,"Invalid Query. Query limit ("+e+") is invalid. Limit must be positive.");return new t(this._query.withLimit(e),this.firestore)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];O("Query.startAt",arguments,1);var i=this.boundFromDocOrFields("Query.startAt",e,n,!0);return new t(this._query.withStartAt(i),this.firestore)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];O("Query.startAfter",arguments,1);var i=this.boundFromDocOrFields("Query.startAfter",e,n,!1);return new t(this._query.withStartAt(i),this.firestore)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];O("Query.endBefore",arguments,1);var i=this.boundFromDocOrFields("Query.endBefore",e,n,!0);return new t(this._query.withEndAt(i),this.firestore)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];O("Query.endAt",arguments,1);var i=this.boundFromDocOrFields("Query.endAt",e,n,!1);return new t(this._query.withEndAt(i),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw z("isEqual","Query",1,e);return this.firestore===e.firestore&&this._query.isEqual(e._query)},t.prototype.boundFromDocOrFields=function(t,e,n,r){if(B(t,1,e),e instanceof Ro){if(n.length>0)throw new E(_.INVALID_ARGUMENT,"Too many arguments provided to "+t+"().");var i=e;if(!i.exists)throw new E(_.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");return this.boundFromDocument(t,i._document,r)}var o=[e].concat(n);return this.boundFromFields(t,o,r)},t.prototype.boundFromDocument=function(t,e,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var s=o[i];if(s.field.isKeyField())r.push(new Nn(this.firestore._databaseId,e.key));else{var a=e.field(s.field);if(a instanceof kn)throw new E(_.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===a){var u=s.field.canonicalString();throw new E(_.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(a)}}return new Xr(r,n)},t.prototype.boundFromFields=function(t,e,n){var r=this._query.explicitOrderBy;if(e.length>r.length)throw new E(_.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var s=e[o];if(r[o].field.isKeyField()){if("string"!=typeof s)throw new E(_.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof s);if(!this._query.isCollectionGroupQuery()&&-1!==s.indexOf("/"))throw new E(_.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+s+"' contains a slash.");var a=this._query.path.child(st.fromString(s));if(!lt.isDocumentKey(a))throw new E(_.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+a+"' is not because it contains an odd number of segments.");var u=new lt(a);i.push(new Nn(this.firestore._databaseId,u))}else{var l=this.firestore._dataConverter.parseQueryValue(t,s);i.push(l)}}return new Xr(i,n)},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];x("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof t[i]||to(t[i])||(G("Query.onSnapshot",r=t[i],["includeMetadataChanges"]),L("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),to(t[i])?n=t[i]:(R("Query.onSnapshot","function",i,t[i]),P("Query.onSnapshot","function",i+1,t[i+1]),P("Query.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(r,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new Hi({next:function(t){e.next&&e.next(new Lo(n.firestore,n._query,t))},error:r}),o=this.firestore.ensureClientConfigured(),s=o.listen(this._query,i,t);return function(){i.mute(),o.unlisten(s)}},t.prototype.get=function(t){var e=this;return x("Query.get",arguments,0,1),Uo("Query.get",t),new Promise(function(n,r){t&&"cache"===t.source?e.firestore.ensureClientConfigured().getDocumentsFromLocalCache(e._query).then(function(t){n(new Lo(e.firestore,e._query,t))},r):e.getViaSnapshotListener(n,r,t)})},t.prototype.getViaSnapshotListener=function(t,e,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?e(new E(_.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):t(i)},error:e})},t.prototype.parseDocumentIdValue=function(t){if("string"==typeof t){if(""===t)throw new E(_.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==t.indexOf("/"))throw new E(_.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var e=this._query.path.child(st.fromString(t));if(!lt.isDocumentKey(e))throw new E(_.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return new Nn(this.firestore._databaseId,new lt(e))}if(t instanceof Oo)return new Nn(this.firestore._databaseId,t._key);throw new E(_.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+q(t)+".")},t.prototype.validateDisjunctiveFilterElements=function(t,e){if(!Array.isArray(t)||0===t.length)throw new E(_.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new E(_.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(t.indexOf(null)>=0)throw new E(_.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(t.filter(function(t){return Number.isNaN(t)}).length>0)throw new E(_.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")},t.prototype.validateNewFilter=function(t){if(t instanceof Hr){var e=[zr.ARRAY_CONTAINS,zr.ARRAY_CONTAINS_ANY],n=[zr.IN,zr.ARRAY_CONTAINS_ANY],r=e.indexOf(t.op)>=0,i=n.indexOf(t.op)>=0;if(t.isInequality()){var o=this._query.getInequalityFilterField();if(null!==o&&!o.isEqual(t.field))throw new E(_.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+t.field.toString()+"'");var s=this._query.getFirstOrderByField();null!==s&&this.validateOrderByAndInequalityMatch(t.field,s)}else if(i||r){var a=null;if(i&&(a=this._query.findFilterOperator(n)),null===a&&r&&(a=this._query.findFilterOperator(e)),null!=a)throw new E(_.INVALID_ARGUMENT,a===t.op?"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter.":"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+a.toString()+"' filters.")}}},t.prototype.validateNewOrderBy=function(t){if(null===this._query.getFirstOrderByField()){var e=this._query.getInequalityFilterField();null!==e&&this.validateOrderByAndInequalityMatch(e,t.field)}},t.prototype.validateOrderByAndInequalityMatch=function(t,e){if(!e.isEqual(t))throw new E(_.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},t}(),Lo=function(){function t(t,e,n){this._firestore=t,this._originalQuery=e,this._snapshot=n,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new xo(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;x("QuerySnapshot.forEach",arguments,1,2),R("QuerySnapshot.forEach","function",1,t),this._snapshot.docs.forEach(function(r){t.call(e,n.convertToDocumentImpl(r))})},Object.defineProperty(t.prototype,"query",{get:function(){return new Mo(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),t.prototype.docChanges=function(t){t&&(G("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),L("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this._snapshot.excludesMetadataChanges)throw new E(_.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e,n){if(n.oldDocs.isEmpty()){var r,i=0;return n.docChanges.map(function(e){var o=new Po(t,e.doc.key,e.doc,n.fromCache,n.mutatedKeys.has(e.doc.key));return v(e.type===Tr.Added,"Invalid event type for first snapshot"),v(!r||n.query.docComparator(r,e.doc)<0,"Got added events in wrong order"),r=e.doc,{type:"added",doc:o,oldIndex:-1,newIndex:i++}})}var o=n.oldDocs;return n.docChanges.filter(function(t){return e||t.type!==Tr.Metadata}).map(function(e){var r=new Po(t,e.doc.key,e.doc,n.fromCache,n.mutatedKeys.has(e.doc.key)),i=-1,s=-1;return e.type!==Tr.Added&&(v((i=o.indexOf(e.doc.key))>=0,"Index for document not found"),o=o.delete(e.doc.key)),e.type!==Tr.Removed&&(s=(o=o.add(e.doc)).indexOf(e.doc.key)),{type:Bo(e.type),doc:r,oldIndex:i,newIndex:s}})}(this._firestore,e,this._snapshot),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t.prototype.isEqual=function(e){if(!(e instanceof t))throw z("isEqual","QuerySnapshot",1,e);return this._firestore===e._firestore&&this._originalQuery.isEqual(e._originalQuery)&&this._snapshot.isEqual(e._snapshot)},t.prototype.convertToDocumentImpl=function(t){return new Po(this._firestore,t.key,t,this.metadata.fromCache,this._snapshot.mutatedKeys.has(t.key))},t}();["length","forEach","map"].concat("undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach(function(t){try{Object.defineProperty(Lo.prototype.docChanges,t,{get:function(){return function(){throw new E(_.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(e){}});var Vo=function(t){function e(e,n){var r=t.call(this,Br.atPath(e),n)||this;if(e.length%2!=1)throw new E(_.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.canonicalString()+" has "+e.length);return r}return s.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._query.path.popLast();return t.isEmpty()?null:new Oo(new lt(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.doc=function(t){if(x("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=K.newId()),R("CollectionReference.doc","non-empty string",1,t),""===t)throw new E(_.INVALID_ARGUMENT,"Document path must be a non-empty string");var e=st.fromString(t);return Oo.forPath(this._query.path.child(e),this.firestore)},e.prototype.add=function(t){N("CollectionReference.add",arguments,1),R("CollectionReference.add","object",1,t);var e=this.doc();return e.set(t).then(function(){return e})},e}(Mo);function jo(t,e){if(void 0===e)return{merge:!1};if(G(t,e,["merge","mergeFields"]),L(t,"boolean","merge",e.merge),"mergeFields","a string or a FieldPath",void 0!==(n=e.mergeFields)&&function(t,e,n,r,i){if(!(r instanceof Array))throw new E(_.INVALID_ARGUMENT,"Function "+t+"() requires its mergeFields option to be an array, but it was: "+q(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new E(_.INVALID_ARGUMENT,"Function "+t+"() requires all mergeFields elements to be a string or a FieldPath, but the value at index "+o+" was: "+q(r[o]))}(t,0,0,n,function(t){return"string"==typeof t||t instanceof Wi}),void 0!==e.mergeFields&&void 0!==e.merge)throw new E(_.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');var n;return e}function Fo(t,e){return void 0===e?{}:(G(t,e,["serverTimestamps"]),V(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function Uo(t,e){P(t,"object",1,e),e&&(G(t,e,["source"]),V(t,0,"source",e.source,["default","server","cache"]))}function qo(t,e,n){if(e instanceof Oo){if(e.firestore!==n)throw new E(_.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw z(t,"DocumentReference",1,e)}function Bo(t){switch(t){case Tr.Added:return"added";case Tr.Modified:case Tr.Metadata:return"modified";case Tr.Removed:return"removed";default:return y("Unknown change type: "+t)}}var Go=S(ko,"Use firebase.firestore() instead."),zo=S(Do,"Use firebase.firestore().runTransaction() instead."),Ho=S(No,"Use firebase.firestore().batch() instead."),Wo=S(Oo,"Use firebase.firestore().doc() instead."),Ko=S(Ro),Qo=S(Po),$o=S(Mo),Yo=S(Lo),Jo=S(Vo,"Use firebase.firestore().collection() instead."),Xo={Firestore:Go,GeoPoint:qr,Timestamp:Et,Blob:tt,Transaction:zo,WriteBatch:Ho,DocumentReference:Wo,DocumentSnapshot:Ko,Query:$o,QueryDocumentSnapshot:Qo,QuerySnapshot:Yo,CollectionReference:Jo,FieldPath:Wi,FieldValue:ao,setLogLevel:ko.setLogLevel,CACHE_SIZE_UNLIMITED:Io},Zo=function(){function t(){}return t.prototype.addCallback=function(t){},t.prototype.shutdown=function(){},t}(),ts=function(){function t(){var t=this;this.networkAvailableListener=function(){return t.onNetworkAvailable()},this.networkUnavailableListener=function(){return t.onNetworkUnavailable()},this.callbacks=[],this.configureNetworkMonitoring()}return t.prototype.addCallback=function(t){this.callbacks.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.networkAvailableListener),window.removeEventListener("offline",this.networkUnavailableListener)},t.prototype.configureNetworkMonitoring=function(){window.addEventListener("online",this.networkAvailableListener),window.addEventListener("offline",this.networkUnavailableListener)},t.prototype.onNetworkAvailable=function(){p("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.callbacks;t<e.length;t++)(0,e[t])(0)},t.prototype.onNetworkUnavailable=function(){p("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.callbacks;t<e.length;t++)(0,e[t])(1)},t.isAvailable=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),es=function(){function t(t){this.sendFn=t.sendFn,this.closeFn=t.closeFn}return t.prototype.onOpen=function(t){v(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=t},t.prototype.onClose=function(t){v(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=t},t.prototype.onMessage=function(t){v(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=t},t.prototype.close=function(){this.closeFn()},t.prototype.send=function(t){this.sendFn(t)},t.prototype.callOnOpen=function(){v(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},t.prototype.callOnClose=function(t){v(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(t)},t.prototype.callOnMessage=function(t){v(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(t)},t}(),ns="Connection",rs={BatchGetDocuments:"batchGet",Commit:"commit"},is="gl-js/ fire/"+l,os=function(){function t(t){this.databaseId=t.databaseId,this.baseUrl=(t.ssl?"https":"http")+"://"+t.host,this.forceLongPolling=t.forceLongPolling}return t.prototype.modifyHeadersForRequest=function(t,e){if(e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n]);t["X-Goog-Api-Client"]=is},t.prototype.invokeRPC=function(t,e,n){var r=this,i=this.makeUrl(t);return new Promise(function(o,s){var a=new u.XhrIo;a.listenOnce(u.EventType.COMPLETE,function(){try{switch(a.getLastErrorCode()){case u.ErrorCode.NO_ERROR:var e=a.getResponseJson();p(ns,"XHR received:",JSON.stringify(e)),o(e);break;case u.ErrorCode.TIMEOUT:p(ns,'RPC "'+t+'" timed out'),s(new E(_.DEADLINE_EXCEEDED,"Request time out"));break;case u.ErrorCode.HTTP_ERROR:var n=a.getStatus();if(p(ns,'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var i=(l=r.status.toLowerCase().replace("_","-"),Object.values(_).indexOf(l)>=0?l:_.UNKNOWN);s(new E(i,r.message))}else s(new E(_.UNKNOWN,"Server responded with status "+a.getStatus()))}else p(ns,'RPC "'+t+'" failed'),s(new E(_.UNAVAILABLE,"Connection failed."));break;default:y('RPC "'+t+'" failed with unanticipated webchannel error '+a.getLastErrorCode()+": "+a.getLastError()+", giving up.")}}finally{p(ns,'RPC "'+t+'" completed.')}var l});var l=JSON.stringify(e);p(ns,"XHR sending: ",i+" "+l);var c={"Content-Type":"text/plain"};r.modifyHeadersForRequest(c,n),a.send(i,"POST",l,c,15)})},t.prototype.invokeStreamingRPC=function(t,e,n){return this.invokeRPC(t,e,n)},t.prototype.openStream=function(t,e){var n=[this.baseUrl,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=u.createWebChannelTransport(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.modifyHeadersForRequest(i.initMessageHeaders,e),a.isReactNative()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");p(ns,"Creating WebChannel: "+o+" "+i);var s=r.createWebChannel(o,i),l=!1,c=!1,h=new es({sendFn:function(t){c?p(ns,"Not sending because WebChannel is closed:",t):(l||(p(ns,"Opening WebChannel transport."),s.open(),l=!0),p(ns,"WebChannel sending:",t),s.send(t))},closeFn:function(){return s.close()}}),d=function(t,e){s.listen(t,function(t){try{e(t)}catch(n){setTimeout(function(){throw n},0)}})};return d(u.WebChannel.EventType.OPEN,function(){c||p(ns,"WebChannel transport opened.")}),d(u.WebChannel.EventType.CLOSE,function(){c||(c=!0,p(ns,"WebChannel transport closed"),h.callOnClose())}),d(u.WebChannel.EventType.ERROR,function(t){c||(c=!0,p(ns,"WebChannel transport errored:",t),h.callOnClose(new E(_.UNAVAILABLE,"The operation could not be completed")))}),d(u.WebChannel.EventType.MESSAGE,function(t){if(!c){var e=t.data[0];v(!!e,"Got a webchannel message without data.");var n=e.error||e[0]&&e[0].error;if(n){p(ns,"WebChannel received error:",n);var r=n.status,i=function(t){var e=wr[r];if(void 0!==e)return Er(e)}(),o=n.message;void 0===i&&(i=_.INTERNAL,o="Unknown error status: "+r+" with message "+n.message),c=!0,h.callOnClose(new E(i,o)),s.close()}else p(ns,"WebChannel received:",e),h.callOnMessage(e)}}),setTimeout(function(){h.callOnOpen()},0),h},t.prototype.makeUrl=function(t){var e=rs[t];v(void 0!==e,"Unknown REST mapping for: "+t);var n=[this.baseUrl,"/","v1"];return n.push("/projects/"),n.push(this.databaseId.projectId),n.push("/databases/"),n.push(this.databaseId.database),n.push("/documents"),n.push(":"),n.push(e),n.join("")},t}();function ss(t){t.INTERNAL.registerService("firestore",function(t){return new ko(t)},function(t){v(t&&"object"==typeof t,"shallowCopy() expects object parameter.");var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}(Xo))}b.setPlatform(new(function(){function t(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}return Object.defineProperty(t.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),t.prototype.loadConnection=function(t){return Promise.resolve(new os(t))},t.prototype.newConnectivityMonitor=function(){return ts.isAvailable()?new ts:new Zo},t.prototype.newSerializer=function(t){return new mi(t,{useProto3Json:!0})},t.prototype.formatJSON=function(t){return JSON.stringify(t)},t.prototype.atob=function(t){return atob(t)},t.prototype.btoa=function(t){return btoa(t)},t}())),ss(i),e.registerFirestore=ss},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class l extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof l?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new c(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new c(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new l(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parent:t,_parents:e}=this;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this}}class c extends l{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"8OjO":function(t,e,n){"use strict";var r=n("Cfvw"),i=n("HDdC"),o=n("lJxs"),s=n("SxV6"),a=n("5+tZ"),u=n("JIr8"),l=n("8Y7J"),c=n("Xr7G");n.d(e,"a",function(){return h});let h=(()=>{class t{constructor(t){this.afs=t}queryByField$(t,e,n){return this.afs.collection(t,t=>t.where(e,"==",n)).snapshotChanges().pipe(Object(o.a)(t=>t.map(t=>{const e=t.payload.doc.data();return e.id=t.payload.doc.id,e})),Object(s.a)())}getAllRecords$(t,e=""){let n;return(n=e?this.afs.collection(t,t=>t.orderBy(e)):this.afs.collection(t)).snapshotChanges().pipe(Object(o.a)(t=>t.map(t=>{const e=t.payload.doc.data();return e.id=t.payload.doc.id,e})),Object(s.a)())}getRecord$(t,e){return"competencias"===t&&console.log("get record competencia Id",e),this.afs.doc(`${t}/${e}`).valueChanges().pipe(Object(s.a)())}getRecordByField$(t,e,n){return this.afs.collection(t,t=>t.where(e,"==",n)).valueChanges().pipe(Object(a.a)(t=>t),Object(s.a)())}addRecord$(t,e){const n=this.afs.collection(t);return Object(r.a)(n.add(e))}updateRecord$(t,e,n){return Object(r.a)(this.afs.doc(`${t}/${e}`).update(n)).pipe(Object(u.a)(this.handleError))}deleteRecord$(t,e){return Object(r.a)(this.afs.doc(`${t}/${e}`).delete())}handleError(t){let e;return console.log("handleError"),console.error(t),e=t.error instanceof ErrorEvent?`An error occurred: ${t.error.message}`:`Backend returned code ${t.status}: ${t.body.error}`,console.error(t),n=e,new i.a(t=>t.error(n));var n}}return t.ngInjectableDef=l.Mb({factory:function(){return new t(l.Nb(c.a))},token:t,providedIn:"root"}),t})()},"8Y7J":function(t,e,n){"use strict";n.d(e,"hb",function(){return Gs}),n.d(e,"ib",function(){return zs}),n.d(e,"jb",function(){return Hs}),n.d(e,"kb",function(){return Ws}),n.d(e,"gb",function(){return Vo}),n.d(e,"fb",function(){return _o}),n.d(e,"g",function(){return As}),n.d(e,"P",function(){return Ss}),n.d(e,"w",function(){return Es}),n.d(e,"Q",function(){return fe}),n.d(e,"T",function(){return de}),n.d(e,"c",function(){return Lo}),n.d(e,"A",function(){return Fo}),n.d(e,"z",function(){return Uo}),n.d(e,"b",function(){return qo}),n.d(e,"d",function(){return Po}),n.d(e,"e",function(){return Mo}),n.d(e,"S",function(){return Us}),n.d(e,"K",function(){return fs}),n.d(e,"V",function(){return gs}),n.d(e,"s",function(){return Go}),n.d(e,"f",function(){return Ks}),n.d(e,"m",function(){return Oo}),n.d(e,"l",function(){return le}),n.d(e,"E",function(){return Ve}),n.d(e,"F",function(){return Le}),n.d(e,"a",function(){return Sn}),n.d(e,"N",function(){return Q}),n.d(e,"L",function(){return ur}),n.d(e,"Mb",function(){return g}),n.d(e,"R",function(){return _}),n.d(e,"p",function(){return pn}),n.d(e,"Nb",function(){return U}),n.d(e,"o",function(){return k}),n.d(e,"n",function(){return c}),n.d(e,"y",function(){return h}),n.d(e,"G",function(){return f}),n.d(e,"x",function(){return ss}),n.d(e,"B",function(){return sr}),n.d(e,"C",function(){return ir}),n.d(e,"D",function(){return or}),n.d(e,"i",function(){return Yo}),n.d(e,"j",function(){return Jn}),n.d(e,"k",function(){return er}),n.d(e,"t",function(){return z}),n.d(e,"v",function(){return G}),n.d(e,"u",function(){return Ds}),n.d(e,"H",function(){return Ps}),n.d(e,"I",function(){return xs}),n.d(e,"J",function(){return Tr}),n.d(e,"M",function(){return Ar}),n.d(e,"h",function(){return cn}),n.d(e,"q",function(){return wr}),n.d(e,"r",function(){return _r}),n.d(e,"O",function(){return Dn}),n.d(e,"U",function(){return Bs}),n.d(e,"ub",function(){return Nn}),n.d(e,"Y",function(){return Bo}),n.d(e,"W",function(){return dn}),n.d(e,"X",function(){return Xn}),n.d(e,"bb",function(){return Pe}),n.d(e,"cb",function(){return Ue}),n.d(e,"db",function(){return ye}),n.d(e,"sb",function(){return A}),n.d(e,"xb",function(){return An}),n.d(e,"Fb",function(){return b}),n.d(e,"vb",function(){return zn}),n.d(e,"wb",function(){return Gn}),n.d(e,"rb",function(){return Io}),n.d(e,"qb",function(){return Ao}),n.d(e,"Z",function(){return Eo}),n.d(e,"ab",function(){return So}),n.d(e,"Lb",function(){return it}),n.d(e,"Jb",function(){return Cn}),n.d(e,"Pb",function(){return xn}),n.d(e,"Ob",function(){return Rn}),n.d(e,"Kb",function(){return Pn}),n.d(e,"Qb",function(){return Vn}),n.d(e,"eb",function(){return Qs}),n.d(e,"lb",function(){return Ri}),n.d(e,"mb",function(){return mu}),n.d(e,"nb",function(){return Wr}),n.d(e,"ob",function(){return ro}),n.d(e,"pb",function(){return $s}),n.d(e,"tb",function(){return bi}),n.d(e,"yb",function(){return Ii}),n.d(e,"zb",function(){return Ti}),n.d(e,"Ab",function(){return zi}),n.d(e,"Bb",function(){return io}),n.d(e,"Db",function(){return oo}),n.d(e,"Cb",function(){return sa}),n.d(e,"Eb",function(){return ta}),n.d(e,"Gb",function(){return aa}),n.d(e,"Hb",function(){return Gr}),n.d(e,"Ib",function(){return ca});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("w1tV");const u="__parameters__";function l(t,e,n){const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(u)?t[u]:Object.defineProperty(t,u,{value:[]})[u];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i}const c=l("Inject",t=>({token:t})),h=l("Optional"),d=l("Self"),f=l("SkipSelf");var p=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function m(t){for(let e in t)if(t[e]===m)return e;throw Error("Could not find renamed property on target object.")}function g(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function y(t){const e=t[v];return e&&e.token===t?e:null}const v=m({ngInjectableDef:m});function b(t){if("string"==typeof t)return t;if(t instanceof Array)return"["+t.map(b).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}const w=m({__forward_ref__:m});function _(t){return t.__forward_ref__=_,t.toString=function(){return b(this())},t}function E(t){const e=t;return"function"==typeof e&&e.hasOwnProperty(w)&&e.__forward_ref__===_?e():t}const S="undefined"!=typeof globalThis&&globalThis,C="undefined"!=typeof window&&window,T="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,I="undefined"!=typeof global&&global,A=S||I||C||T;class k{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.ngInjectableDef=g({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const D=new k("INJECTOR",-1),N=new Object,O="ngTempTokenPath",x="ngTokenPath",R=/\n/gm,P="\u0275",M="__source",L=m({provide:String,useValue:m});let V,j=void 0;function F(t){const e=j;return j=t,e}function U(t,e=p.Default){return(V||function(t,e=p.Default){if(void 0===j)throw new Error("inject() must be called from an injection context");return null===j?function(t,e,n){const r=y(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&p.Optional)return null;throw new Error(`Injector: NOT_FOUND [${b(t)}]`)}(t,0,e):j.get(t,e&p.Optional?null:void 0,e)})(t,e)}class q{get(t,e=N){if(e===N){const e=new Error(`NullInjectorError: No provider for ${b(t)}!`);throw e.name="NullInjectorError",e}return e}}function B(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&t.charAt(1)==P?t.substr(2):t;let i=b(e);if(e instanceof Array)i=e.map(b).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):b(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(R,"\n  ")}`}class G{}class z{}function H(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function W(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}const K=function(){var t={OnPush:0,Default:1};return t[t.OnPush]="OnPush",t[t.Default]="Default",t}(),Q=function(){var t={Emulated:0,Native:1,None:2,ShadowDom:3};return t[t.Emulated]="Emulated",t[t.Native]="Native",t[t.None]="None",t[t.ShadowDom]="ShadowDom",t}(),$={},Y=[],J=m({ngComponentDef:m}),X=m({ngDirectiveDef:m}),Z=m({ngPipeDef:m});let tt=0;function et(t){return function(t){return t[J]||null}(t)||function(t){return t[X]||null}(t)}function nt(t){return function(t){return t[Z]||null}(t)}function rt(t,e){if(null==t)return $;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const it=function(t){const e=t.type,n=e.prototype,r={},i={type:e,providersResolver:null,consts:t.consts,vars:t.vars,factory:t.factory,template:t.template||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:t.exportAs||null,onChanges:null,onInit:n.ngOnInit||null,doCheck:n.ngDoCheck||null,afterContentInit:n.ngAfterContentInit||null,afterContentChecked:n.ngAfterContentChecked||null,afterViewInit:n.ngAfterViewInit||null,afterViewChecked:n.ngAfterViewChecked||null,onDestroy:n.ngOnDestroy||null,onPush:t.changeDetection===K.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Q.Emulated,id:"c",styles:t.styles||Y,_:null,setInput:null,schemas:t.schemas||null,tView:null};return i._=""+{toString:()=>{const n=t.directives,o=t.features,s=t.pipes;i.id+=tt++,i.inputs=rt(t.inputs,r),i.outputs=rt(t.outputs),o&&o.forEach(t=>t(i)),i.directiveDefs=n?()=>("function"==typeof n?n():n).map(et):null,i.pipeDefs=s?()=>("function"==typeof s?s():s).map(nt):null,e.hasOwnProperty(v)||(e[v]=g({token:e,factory:t.factory}))}},i},ot=0,st=1,at=7,ut=12,lt=19;let ct=null;const ht=new Map;let dt=null;const ft=1,pt=0;function mt(t,e){return dt&&t===dt||(dt=t,e&&(ct=ht.get(t)||null),ct=ct||{classesBitMask:pt,classesIndex:ft,stylesBitMask:pt,stylesIndex:ft}),ct}function gt(t,e){return function(t){for(;Array.isArray(t);)t=t[ot];return t}(e[t.index])}function yt(t,e){return e[st].data[t+lt]}let vt=null;function bt(){return _t}let wt,_t,Et,St=1,Ct=0,Tt=0,It=-1;function At(){return It}function kt(){return Et}const Dt=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(A))(),Nt="--MAP--",Ot=0;function xt(t,e){e===Ot?t[2]>Ot&&function(t){Pt(t,2|Rt(t))}(t):t[2]=e}function Rt(t){return t[1]}function Pt(t,e){t[1]=e}function Mt(t,e){return t[e+2]}function Lt(t,e){return 1&t[e+0]}function Vt(t,e){return(1&Lt(t,e))>0}function jt(t,e){return t[e+0]>>1}function Ft(t,e,n){const r=Lt(t,e);t[e+0]=r|n<<1}function Ut(t,e){return t[e+1]}function qt(t,e,n){return t[e+3+n]}function Bt(t,e){return!(!t||e!==t[2])}function Gt(t){return(1&Rt(t))>0}function zt(t){return(2&Rt(t))>0}function Ht(t){return 6+t[4]}function Wt(t,e){let n=Array.isArray(t)?t[0]:t,r=Array.isArray(e)?e[0]:e;return n instanceof String&&(n=n.toString()),r instanceof String&&(r=r.toString()),!(n!=n&&r!=r)&&n!==r}function Kt(t){return null!=t&&""!==t}function Qt(t,e,n=" "){return t+(e.length&&t.length?n:"")+e}function $t(t){return t.replace(/[a-z][A-Z]/g,t=>t.charAt(0)+"-"+t.charAt(1)).toLowerCase()}function Yt(t){return Jt(t)?t[0]:t}function Jt(t){return Array.isArray(t)&&t.length>=6&&"string"!=typeof t[1]}function Xt(t,e){return t[e+0]}function Zt(t,e,n){t[e+1]=n}function te(t,e){return t[e+1]}const ee=function(){var t={Important:1,DashCase:2};return t[t.Important]="Important",t[t.DashCase]="DashCase",t}();function ne(t){return!!t.listen}const re="ngDebugContext",ie="ngOriginalError",oe="ngErrorLogger";function se(t){return t[re]}function ae(t){return t[ie]}function ue(t,...e){t.error(...e)}class le{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t[oe]||ue}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?se(t)?se(t):this._findContext(ae(t)):null}_findOriginalError(t){let e=ae(t);for(;e&&ae(e);)e=ae(e);return e}}let ce=!0,he=!1;function de(){return he=!0,ce}function fe(){if(he)throw new Error("Cannot enable prod mode after platform setup.");ce=!1}class pe{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t),this.inertBodyElement=this.inertDocument.createElement("body"),t.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(t){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}getInertBodyElement_XHR(t){t="<body><remove></remove>"+t+"</body>";try{t=encodeURI(t)}catch(r){return null}const e=new XMLHttpRequest;e.responseType="document",e.open("GET","data:text/html;charset=utf-8,"+t,!1),e.send(void 0);const n=e.response.body;return n.removeChild(n.firstChild),n}getInertBodyElement_DOMParser(t){t="<body><remove></remove>"+t+"</body>";try{const n=(new window.DOMParser).parseFromString(t,"text/html").body;return n.removeChild(n.firstChild),n}catch(e){return null}}getInertBodyElement_InertDocument(t){const e=this.inertDocument.createElement("template");return"content"in e?(e.innerHTML=t,e):(this.inertBodyElement.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const me=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:\/?#]*(?:[\/?#]|$))/gi,ge=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function ye(t){return(t=String(t)).match(me)||t.match(ge)?t:(de()&&console.warn(`WARNING: sanitizing unsafe URL value ${t} (see http://g.co/ng/security#xss)`),"unsafe:"+t)}function ve(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function be(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const we=ve("area,br,col,hr,img,wbr"),_e=ve("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ee=ve("rp,rt"),Se=be(Ee,_e),Ce=be(we,be(_e,ve("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),be(Ee,ve("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Se),Te=ve("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ie=ve("srcset"),Ae=be(Te,Ie,ve("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ve("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ke=ve("script,style,template");class De{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Ce.hasOwnProperty(e))return this.sanitizedSomething=!0,!ke.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!Ae.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;Te[o]&&(s=ye(s)),Ie[o]&&(r=s,s=(r=String(r)).split(",").map(t=>ye(t.trim())).join(", ")),this.buf.push(" ",e,'="',xe(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Ce.hasOwnProperty(e)&&!we.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(xe(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const Ne=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Oe=/([^\#-~ |!])/g;function xe(t){return t.replace(/&/g,"&amp;").replace(Ne,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(Oe,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Re;function Pe(t,e){let n=null;try{Re=Re||new pe(t);let r=e?String(e):"";n=Re.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Re.getInertBodyElement(r)}while(r!==o);const s=new De,a=s.sanitizeChildren(Me(n)||n);return de()&&s.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),a}finally{if(n){const t=Me(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function Me(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}const Le=function(){var t={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return t[t.NONE]="NONE",t[t.HTML]="HTML",t[t.STYLE]="STYLE",t[t.SCRIPT]="SCRIPT",t[t.URL]="URL",t[t.RESOURCE_URL]="RESOURCE_URL",t}();class Ve{}const je=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|Z|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),Fe=/^url\(([^)]+)\)$/;function Ue(t){if(!(t=String(t).trim()))return"";const e=t.match(Fe);return e&&ye(e[1])===e[1]||t.match(je)&&function(t){let e=!0,n=!0;for(let r=0;r<t.length;r++){const i=t.charAt(r);"'"===i&&n?e=!e:'"'===i&&e&&(n=!n)}return e&&n}(t)?t:(de()&&console.warn(`WARNING: sanitizing unsafe style value ${t} (see http://g.co/ng/security#xss).`),"unsafe")}const qe=/([A-Z])/g;function Be(t){try{return null!=t?t.toString().slice(0,30):t}catch(e){return"[ERROR] Exception while trying to serialize the value"}}const Ge=1,ze=0,He=null,We=1;let Ke=[];function Qe(t,e,n,r,i,o,s,a,u){Gt(t)||(s?function(t,e,n,r,i){Ke.unshift(t,e,n,r,i)}(t,n,r,i,u):(Ke.length&&$e(),Ye(t,n,r,i,u)));const l=a||Wt(e[i],o);return l&&(e[i]=o),l}function $e(){let t=0;for(;t<Ke.length;)Ye(Ke[t++],Ke[t++],Ke[t++],Ke[t++],Ke[t++]);Ke.length=0}function Ye(t,e,n,r,i){let o=!1;if(n){let s=!1,a=Ht(t);for(;a<t.length;){const o=Ut(t,a),u=Mt(t,a);if(s=n<=u){n<u&&Je(t,a,n,i),Xe(t,!1,a,r,e);break}a+=3+o}s||(Je(t,t.length,n,i),Xe(t,!1,a,r,e),o=!0)}else Xe(t,!0,3,r,e),o=!0;return o}function Je(t,e,n,r){t.splice(e,0,r?1:0,We,n,He),Ft(t,e,Ge)}function Xe(t,e,n,r,i){const o=n+3;let s=o+Ut(t,n);if(e||s--,"number"==typeof r){for(let e=o;e<=s;e++)if(t[e]===r)return;t.splice(s,0,r),t[n+1]++,Ft(t,n,jt(t,n)|1<<i)}else null!==r&&null==t[s]&&(t[s]=r)}function Ze(t,e,n,r,i,o,s,a){return i&&r&&(function(t){if(!Gt(t)){const e=Yt(t);e&&function(t,e){for(let n=1;n<e.length;n+=2){const r=te(e,n);r&&Ye(t,-1,Xt(e,n),r,!1)}}(t,e),function(t){Pt(t,1|Rt(t))}(t)}}(r),function(t,e){return t&&e>pt}(r,o))?(function(t,e,n,r,i,o,s){const a=!0===(u=i)?-1:!1===u?0:u;var u;const l=tn,c=(a&jt(t,3))>0?1:0;let h=Ht(t);for(;h<t.length;){const i=Ut(t,h);if(a&jt(t,h)){let a=!1;const u=Mt(t,h),d=i-1,f=qt(t,h,d);for(let i=0;i<d;i++){const l=qt(t,h,i),c=r[l];if(Kt(c)){o(e,n,u,s&&Vt(t,h)?s(u,c,2):c,l),a=!0;break}}if(l){const i=l(t,e,n,r,o,s,c|(a?4:2),u,f);a=a||i}a||o(e,n,u,f)}h+=3+i}l&&l(t,e,n,r,o,s,c)}(r,t,e,n,o,s,a),!0):i}let tn=null;const en=(t,e,n,r)=>{const i=e.style;r?(r=r.toString(),t&&ne(t)?t.setStyle(e,n,r,ee.DashCase):i&&i.setProperty(n,r)):t&&ne(t)?t.removeStyle(e,n,ee.DashCase):i&&i.removeProperty(n)},nn=(t,e,n,r)=>{if(""!==n){const i=e.classList;r?t&&ne(t)?t.addClass(e,n):i&&i.add(n):t&&ne(t)?t.removeClass(e,n):i&&i.remove(n)}},rn={},on=(t,e,n,r,i,o,s,a,u)=>{let l=!1;if(Ut(t,3)){let c=!0;const h=!a;h&&-2&s&&(c=!1,l=!0),c&&(l=function t(e,n,r,i,o,s,a,u,l,c){let h=!1;if(l<Ut(e,3)){const d=qt(e,3,l),f=i[d];let p=function(t){return t>=un.length&&un.push(1),un[t]}(l);for(;p<f.length;){const m=Xt(f,p),g=u&&m>u,y=!g&&m===u,v=te(f,p),b=Kt(v);let w=t(e,n,r,i,o,s,g?a:sn(a,b,y),g?u:m,l+1,c);if(g){h||(h=w);break}if(!w&&an(a,y)){const t=y&&!b,e=t?c:v,i=t?d:null;o(n,r,m,s?s(m,e,3):e,i),w=!0}h=w&&y,p+=2}if(un[l]=p,1===f.length||!u)return t(e,n,r,i,o,s,a,u,l+1,c)}return h}(t,e,n,r,i,o,s,a||null,0,u||null)),h&&function(){for(let t=0;t<un.length;t++)un[t]=1}()}return l};function sn(t,e,n){let r=t;return e||4&t||!(n||1&t)?(r|=4,r&=-3):(r|=2,r&=-5),r}function an(t,e){let n=(1&t)>0;return n?4&t&&e&&(n=!1):2&t&&(n=e),n}const un=[];function ln(t,e,n,r){for(let i=1;i<t.length;i+=2){const o=Xt(t,i);if(e<=o){let s=!1;if(o===e){const e=t[i];!r&&Kt(e)||(s=!0,Zt(t,i,n))}else s=!0,t.splice(i,0,e,n);return s}}return t.push(e,n),!0}let cn=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>hn(),t})();const hn=(...t)=>{},dn=new k("The presence of this token marks an injector as being the root injector."),fn=function(t,e,n){return new wn(t,e,n)};let pn=(()=>{class t{static create(t,e){return Array.isArray(t)?fn(t,e,""):fn(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=N,t.NULL=new q,t.ngInjectableDef=g({token:t,providedIn:"any",factory:()=>U(D)}),t.__NG_ELEMENT_ID__=-1,t})();const mn=function(t){return t},gn=[],yn=mn,vn=function(){return Array.prototype.slice.call(arguments)},bn="\u0275";class wn{constructor(t,e=pn.NULL,n=null){this.parent=e,this.source=n;const r=this._records=new Map;r.set(pn,{token:pn,fn:mn,deps:gn,value:this,useNew:!1}),r.set(D,{token:D,fn:mn,deps:gn,value:this,useNew:!1}),function t(e,n){if(n)if((n=E(n))instanceof Array)for(let r=0;r<n.length;r++)t(e,n[r]);else{if("function"==typeof n)throw En("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw En("Unexpected provider",n);{let t=E(n.provide);const r=function(t){const e=function(t){let e=gn;const n=t.deps;if(n&&n.length){e=[];for(let t=0;t<n.length;t++){let r=6,i=E(n[t]);if(i instanceof Array)for(let t=0,e=i;t<e.length;t++){const n=e[t];n instanceof h||n==h?r|=1:n instanceof f||n==f?r&=-3:n instanceof d||n==d?r&=-5:i=n instanceof c?n.token:E(n)}e.push({token:i,options:r})}}else if(t.useExisting)e=[{token:E(t.useExisting),options:6}];else if(!(n||L in t))throw En("'deps' required",t);return e}(t);let n=mn,r=gn,i=!1,o=E(t.provide);if(L in t)r=t.useValue;else if(t.useFactory)n=t.useFactory;else if(t.useExisting);else if(t.useClass)i=!0,n=E(t.useClass);else{if("function"!=typeof o)throw En("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",t);i=!0,n=o}return{deps:e,fn:n,useNew:i,value:r}}(n);if(!0===n.multi){let r=e.get(t);if(r){if(r.fn!==vn)throw _n(t)}else e.set(t,r={token:n.provide,deps:[],useNew:!1,fn:vn,value:gn});r.deps.push({token:t=n,options:6})}const i=e.get(t);if(i&&i.fn==vn)throw _n(t);e.set(t,r)}}}(r,t)}get(t,e,n=p.Default){const r=this._records.get(t);try{return function t(e,n,r,i,o,s){try{return function(e,n,r,i,o,s){let a;if(!n||s&p.SkipSelf)s&p.Self||(a=i.get(e,o,p.Default));else{if((a=n.value)==yn)throw Error(bn+"Circular dependency");if(a===gn){n.value=yn;let e=void 0,o=n.useNew,s=n.fn,u=n.deps,l=gn;if(u.length){l=[];for(let e=0;e<u.length;e++){const n=u[e],o=n.options,s=2&o?r.get(n.token):void 0;l.push(t(n.token,s,r,s||4&o?i:pn.NULL,1&o?null:pn.THROW_IF_NOT_FOUND,p.Default))}}n.value=a=o?new s(...l):s.apply(e,l)}}return a}(e,n,r,i,o,s)}catch(a){throw a instanceof Error||(a=new Error(a)),(a[O]=a[O]||[]).unshift(e),n&&n.value==yn&&(n.value=gn),a}}(t,r,this._records,this.parent,e,n)}catch(i){return function(t,e,n,r){const i=t[O];throw e[M]&&i.unshift(e[M]),t.message=B("\n"+t.message,i,"StaticInjectorError",r),t[x]=i,t[O]=null,t}(i,t,0,this.source)}}toString(){const t=[];return this._records.forEach((e,n)=>t.push(b(n))),`StaticInjector[${t.join(", ")}]`}}function _n(t){return En("Cannot mix multi providers and regular providers",t)}function En(t,e){return new Error(B(t,e,"StaticInjectorError"))}const Sn=new k("AnalyzeForEntryComponents");function Cn(t){const e=bt(),n=e[st];n.firstTemplatePass&&(function(t,e,n){const r=t.expandoInstructions,i=r.length;i>=2&&r[i-2]===e.hostBindings?r[i-1]=r[i-1]+n:r.push(e.hostBindings,n)}(n,vt,t),function(t,e,n){for(let r=0;r<n;r++)e.push(rn),t.blueprint.push(rn),t.data.push(null)}(n,e,t))}let Tn=null;function In(){if(!Tn){const t=A.Symbol;if(t&&t.iterator)Tn=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Tn=n)}}}return Tn}function An(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}function kn(t,e){const n=Nn(t),r=Nn(e);if(n&&r)return function(t,e,n){const r=t[In()](),i=e[In()]();for(;;){const t=r.next(),e=i.next();if(t.done&&e.done)return!0;if(t.done||e.done)return!1;if(!n(t.value,e.value))return!1}}(t,e,kn);{const i=t&&("object"==typeof t||"function"==typeof t),o=e&&("object"==typeof e||"function"==typeof e);return!(n||!i||r||!o)||An(t,e)}}class Dn{constructor(t){this.wrapped=t}static wrap(t){return new Dn(t)}static unwrap(t){return Dn.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Dn}}function Nn(t){return!!On(t)&&(Array.isArray(t)||!(t instanceof Map)&&In()in t)}function On(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function xn(){var t,e;bt()[st].firstTemplatePass&&(t=wt,e=jn(),xt(Un(t),e),xt(Fn(t),e))}function Rn(t){const e=At(),n=bt(),r=yt(e,n),i=Fn(r),o=jn(),s=n[at]++;!o&&function(t){return 0!=(16&t.flags)}(r)&&t!==rn&&(Ln(i,n,r,s,t,!1),t=rn),Mn(e,i,s,t,!1,Bn())}function Pn(t){!function(t,e){const n=bt(),r=yt(t,n),i=Un(r),o=jn(),s=n[at]++;!o&&function(t){return 0!=(8&t.flags)}(r)&&e!==rn&&(Ln(i,n,r,s,e,!0),e=rn),Mn(t,i,s,e,!0,Bn())}(At(),t)}function Mn(t,e,n,r,i,o){tn=on;const s=bt();let a=!1;if(r!==rn){const u=gt(yt(t,s),s),l=s[n];a=Wt(l,r);const c=function(t,e,n){const r=Array.isArray(t)?t:[null];r[0]=e||null;for(let a=1;a<r.length;a+=2)Zt(r,a,null);let i,o=null,s=!1;if("string"==typeof e?e.length&&(o=e.split(/\s+/),s=!0):(o=e?Object.keys(e):null,i=e),o)for(let a=0;a<o.length;a++){const t=o[a];ln(r,n?$t(t):t,!!s||i[t],!0)}return r}(l,r,!i);i?function(t,e,n,r,i,o,s,a){const l=mt(u,zt(t)),c=ze;!Qe(t,e,c,null,i,o,s,a,!1)&&!a||(l.classesBitMask|=1<<c)}(e,s,0,0,n,c,o,a):function(t,e,n,r,i,o,s,a,u){const l=mt(n,zt(t)),c=ze;!Qe(t,e,c,null,i,o,a,u,!0)&&!u||(l.stylesBitMask|=1<<c)}(e,s,u,0,n,c,kt(),o,a)}return a}function Ln(t,e,n,r,i,o){e[r]!==i&&((i||Gt(t))&&function(t,e,n){const r=t[st];for(let i=0;i<e.length;){const o=e[i++],s=e[i++],a=e[i++],u=t[o],l=r.data[o];l.setInput?l.setInput(u,n,s,a):u[a]=n}}(e,n.inputs[o?"class":"style"],function(t,e,n){let r=e;var i;return t.length>0&&(r=n?Qt(t,((i=e)&&"string"!=typeof i&&(i=Object.keys(i).join(" ")),i||"")):Qt(t,function(t){let e="";if(t){const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];e=Qt(e,`${i}:${t[i]}`,";")}}return e}(e),";")),r}(function(t){const e=Yt(t);return e&&e[0]||""}(t),i,o)),e[r]=i)}function Vn(){const t=At(),e=bt(),n=yt(t,e),r=function(t,e){return 3===t.type?e[ut]:null}(n,e),i=gt(n,e),o=jn(),s=kt();(function(t,e,n,r,i,o,s){const a=n?zt(n):!!r&&zt(r),u=Bt(n,o),l=Bt(r,o);Ke.length&&(u||l)&&$e();const c=mt(i,a),h=Ze(t,i,e,n,u,c.classesBitMask,nn,null),d=Ze(t,i,e,r,l,c.stylesBitMask,en,s);h&&d?(ct=null,dt=null,a&&function(t){ht.delete(t)}(i)):a&&function(t,e){ht.set(t,e)}(i,c)})(r,e,Un(n),Fn(n),i,o,s),Et=null}function jn(){return St+Ct}function Fn(t){return qn(t,!1)}function Un(t){return qn(t,!0)}function qn(t,e){let n=e?t.classes:t.styles;return Jt(n)||(n=[n||[""],0,Ot,1,0,Nt],e?t.classes=n:t.styles=n),n}function Bn(){return Tt>0}function Gn(t){return!!t&&"function"==typeof t.then}function zn(t){return!!t&&"function"==typeof t.subscribe}class Hn{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}class Wn{}class Kn{}function Qn(t){const e=Error(`No component factory found for ${b(t)}. Did you add it to @NgModule.entryComponents?`);return e[$n]=t,e}const $n="ngComponent";class Yn{resolveComponentFactory(t){throw Qn(t)}}let Jn=(()=>{class t{}return t.NULL=new Yn,t})();class Xn{constructor(t,e,n){this._parent=e,this._ngModule=n,this._factories=new Map;for(let r=0;r<t.length;r++){const e=t[r];this._factories.set(e.componentType,e)}}resolveComponentFactory(t){let e=this._factories.get(t);if(!e&&this._parent&&(e=this._parent.resolveComponentFactory(t)),!e)throw Qn(t);return new Zn(e,this._ngModule)}}class Zn extends Kn{constructor(t,e){super(),this.factory=t,this.ngModule=e,this.selector=t.selector,this.componentType=t.componentType,this.ngContentSelectors=t.ngContentSelectors,this.inputs=t.inputs,this.outputs=t.outputs}create(t,e,n,r){return this.factory.create(t,e,n,r||this.ngModule)}}function tr(...t){}let er=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=()=>nr(t),t})();const nr=tr;class rr{}class ir{}const or=function(){var t={Important:1,DashCase:2};return t[t.Important]="Important",t[t.DashCase]="DashCase",t}();let sr=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>ar(),t})();const ar=tr;class ur{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const lr=new ur("8.2.4");class cr{constructor(){}supports(t){return Nn(t)}create(t){return new dr(t)}}const hr=(t,e)=>e;class dr{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||hr}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<gr(n,r,i)?e:n,s=gr(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Nn(t))throw new Error(`Error trying to diff '${b(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)r=this._trackByFn(e,n=t[e]),null!==i&&An(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),An(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[In()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&An(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),An(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t,e;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(An(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(An(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new fr(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new mr),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e?t:(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t,t)}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new mr),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class fr{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class pr{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&An(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class mr{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new pr,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function gr(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class yr{constructor(){}supports(t){return t instanceof Map||On(t)}create(){return new vr}}class vr{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||On(t)))throw new Error(`Error trying to diff '${b(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new br(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){An(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class br{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let wr=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new f,new h]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.ngInjectableDef=g({token:t,providedIn:"root",factory:()=>new t([new cr])}),t})(),_r=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new f,new h]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.ngInjectableDef=g({token:t,providedIn:"root",factory:()=>new t([new yr])}),t})();const Er=[new yr],Sr=new wr([new cr]),Cr=new _r(Er);let Tr=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ir(t,er),t})();const Ir=tr;let Ar=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>kr(t,er),t})();const kr=tr;function Dr(t,e,n,r){let i=`ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '${e}'. Current value: '${n}'.`;return r&&(i+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(t,e){const n=new Error(t);return Nr(n,e),n}(i,t)}function Nr(t,e){t[re]=e,t[oe]=e.logError.bind(e)}function Or(t){return new Error(`ViewDestroyedError: Attempt to use a destroyed view: ${t}`)}function xr(t,e,n){const r=t.state,i=1792&r;return i===e?(t.state=-1793&r|n,t.initIndex=-1,!0):i===n}function Rr(t,e,n){return(1792&t.state)===e&&t.initIndex<=n&&(t.initIndex=n+1,!0)}function Pr(t,e){return t.nodes[e]}function Mr(t,e){return t.nodes[e]}function Lr(t,e){return t.nodes[e]}function Vr(t,e){return t.nodes[e]}function jr(t,e){return t.nodes[e]}const Fr={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0},Ur=()=>{},qr=new Map;function Br(t){let e=qr.get(t);return e||(e=b(t)+"_"+qr.size,qr.set(t,e)),e}function Gr(t,e,n,r){if(Dn.isWrapped(r)){r=Dn.unwrap(r);const i=t.def.nodes[e].bindingIndex+n,o=Dn.unwrap(t.oldValues[i]);t.oldValues[i]=new Dn(o)}return r}const zr="$$undefined",Hr="$$empty";function Wr(t){return{id:zr,styles:t.styles,encapsulation:t.encapsulation,data:t.data}}let Kr=0;function Qr(t,e,n,r){return!(!(2&t.state)&&An(t.oldValues[e.bindingIndex+n],r))}function $r(t,e,n,r){return!!Qr(t,e,n,r)&&(t.oldValues[e.bindingIndex+n]=r,!0)}function Yr(t,e,n,r){const i=t.oldValues[e.bindingIndex+n];if(1&t.state||!kn(i,r)){const o=e.bindings[n].name;throw Dr(Fr.createDebugContext(t,e.nodeIndex),`${o}: ${i}`,`${o}: ${r}`,0!=(1&t.state))}}function Jr(t){let e=t;for(;e;)2&e.def.flags&&(e.state|=8),e=e.viewContainerParent||e.parent}function Xr(t,e){let n=t;for(;n&&n!==e;)n.state|=64,n=n.viewContainerParent||n.parent}function Zr(t,e,n,r){try{return Jr(33554432&t.def.nodes[e].flags?Mr(t,e).componentView:t),Fr.handleEvent(t,e,n,r)}catch(i){t.root.errorHandler.handleError(i)}}function ti(t){return t.parent?Mr(t.parent,t.parentNodeDef.nodeIndex):null}function ei(t){return t.parent?t.parentNodeDef.parent:null}function ni(t,e){switch(201347067&e.flags){case 1:return Mr(t,e.nodeIndex).renderElement;case 2:return Pr(t,e.nodeIndex).renderText}}function ri(t){return!!t.parent&&!!(32768&t.parentNodeDef.flags)}function ii(t){return!(!t.parent||32768&t.parentNodeDef.flags)}function oi(t){return 1<<t%32}function si(t){const e={};let n=0;const r={};return t&&t.forEach(([t,i])=>{"number"==typeof t?(e[t]=i,n|=oi(t)):r[t]=i}),{matchedQueries:e,references:r,matchedQueryIds:n}}function ai(t,e){return t.map(t=>{let n,r;return Array.isArray(t)?[r,n]=t:(r=0,n=t),n&&("function"==typeof n||"object"==typeof n)&&e&&Object.defineProperty(n,M,{value:e,configurable:!0}),{flags:r,token:n,tokenKey:Br(n)}})}function ui(t,e,n){let r=n.renderParent;return r?0==(1&r.flags)||0==(33554432&r.flags)||r.element.componentRendererType&&r.element.componentRendererType.encapsulation===Q.Native?Mr(t,n.renderParent.nodeIndex).renderElement:void 0:e}const li=new WeakMap;function ci(t){let e=li.get(t);return e||((e=t(()=>Ur)).factory=t,li.set(t,e)),e}function hi(t,e,n,r,i){3===e&&(n=t.renderer.parentNode(ni(t,t.def.lastRenderRootNode))),di(t,e,0,t.def.nodes.length-1,n,r,i)}function di(t,e,n,r,i,o,s){for(let a=n;a<=r;a++){const n=t.def.nodes[a];11&n.flags&&pi(t,n,e,i,o,s),a+=n.childCount}}function fi(t,e,n,r,i,o){let s=t;for(;s&&!ri(s);)s=s.parent;const a=s.parent,u=ei(s),l=u.nodeIndex+u.childCount;for(let c=u.nodeIndex+1;c<=l;c++){const t=a.def.nodes[c];t.ngContentIndex===e&&pi(a,t,n,r,i,o),c+=t.childCount}if(!a.parent){const s=t.root.projectableNodes[e];if(s)for(let e=0;e<s.length;e++)mi(t,s[e],n,r,i,o)}}function pi(t,e,n,r,i,o){if(8&e.flags)fi(t,e.ngContent.index,n,r,i,o);else{const s=ni(t,e);if(3===n&&33554432&e.flags&&48&e.bindingFlags?(16&e.bindingFlags&&mi(t,s,n,r,i,o),32&e.bindingFlags&&mi(Mr(t,e.nodeIndex).componentView,s,n,r,i,o)):mi(t,s,n,r,i,o),16777216&e.flags){const s=Mr(t,e.nodeIndex).viewContainer._embeddedViews;for(let t=0;t<s.length;t++)hi(s[t],n,r,i,o)}1&e.flags&&!e.element.name&&di(t,n,e.nodeIndex+1,e.nodeIndex+e.childCount,r,i,o)}}function mi(t,e,n,r,i,o){const s=t.renderer;switch(n){case 1:s.appendChild(r,e);break;case 2:s.insertBefore(r,e,i);break;case 3:s.removeChild(r,e);break;case 0:o.push(e)}}const gi=/^:([^:]+):(.+)$/;function yi(t){if(":"===t[0]){const e=t.match(gi);return[e[1],e[2]]}return["",t]}function vi(t){let e=0;for(let n=0;n<t.length;n++)e|=t[n].flags;return e}function bi(t,e,n,r,i,o,s,a,u,l,c,h,d,f,p,m,g,y,v,b){switch(t){case 1:return e+wi(n)+r;case 2:return e+wi(n)+r+wi(i)+o;case 3:return e+wi(n)+r+wi(i)+o+wi(s)+a;case 4:return e+wi(n)+r+wi(i)+o+wi(s)+a+wi(u)+l;case 5:return e+wi(n)+r+wi(i)+o+wi(s)+a+wi(u)+l+wi(c)+h;case 6:return e+wi(n)+r+wi(i)+o+wi(s)+a+wi(u)+l+wi(c)+h+wi(d)+f;case 7:return e+wi(n)+r+wi(i)+o+wi(s)+a+wi(u)+l+wi(c)+h+wi(d)+f+wi(p)+m;case 8:return e+wi(n)+r+wi(i)+o+wi(s)+a+wi(u)+l+wi(c)+h+wi(d)+f+wi(p)+m+wi(g)+y;case 9:return e+wi(n)+r+wi(i)+o+wi(s)+a+wi(u)+l+wi(c)+h+wi(d)+f+wi(p)+m+wi(g)+y+wi(v)+b;default:throw new Error("Does not support more than 9 expressions")}}function wi(t){return null!=t?t.toString():""}const _i=new Object,Ei=Br(pn),Si=Br(D),Ci=Br(G);function Ti(t,e,n,r){return n=E(n),{index:-1,deps:ai(r,b(e)),flags:t,token:e,value:n}}function Ii(t){const e={},n=[];let r=!1;for(let i=0;i<t.length;i++){const o=t[i];o.token===dn&&!0===o.value&&(r=!0),1073741824&o.flags&&n.push(o.token),o.index=i,e[Br(o.token)]=o}return{factory:null,providersByKey:e,providers:t,modules:n,isRoot:r}}function Ai(t,e,n=pn.THROW_IF_NOT_FOUND){const r=F(t);try{if(8&e.flags)return e.token;if(2&e.flags&&(n=null),1&e.flags)return t._parent.get(e.token,n);const s=e.tokenKey;switch(s){case Ei:case Si:case Ci:return t}const a=t._def.providersByKey[s];let u;if(a){let e=t._providers[a.index];return void 0===e&&(e=t._providers[a.index]=ki(t,a)),e===_i?void 0:e}if((u=y(e.token))&&(i=t,null!=(o=u).providedIn&&(function(t,e){return t._def.modules.indexOf(o.providedIn)>-1}(i)||"root"===o.providedIn&&i._def.isRoot))){const n=t._providers.length;return t._def.providers[n]=t._def.providersByKey[e.tokenKey]={flags:5120,value:u.factory,deps:[],index:n,token:e.token},t._providers[n]=_i,t._providers[n]=ki(t,t._def.providersByKey[e.tokenKey])}return 4&e.flags?n:t._parent.get(e.token,n)}finally{F(r)}var i,o}function ki(t,e){let n;switch(201347067&e.flags){case 512:n=function(t,e,n){const r=n.length;switch(r){case 0:return new e;case 1:return new e(Ai(t,n[0]));case 2:return new e(Ai(t,n[0]),Ai(t,n[1]));case 3:return new e(Ai(t,n[0]),Ai(t,n[1]),Ai(t,n[2]));default:const i=new Array(r);for(let e=0;e<r;e++)i[e]=Ai(t,n[e]);return new e(...i)}}(t,e.value,e.deps);break;case 1024:n=function(t,e,n){const r=n.length;switch(r){case 0:return e();case 1:return e(Ai(t,n[0]));case 2:return e(Ai(t,n[0]),Ai(t,n[1]));case 3:return e(Ai(t,n[0]),Ai(t,n[1]),Ai(t,n[2]));default:const i=Array(r);for(let e=0;e<r;e++)i[e]=Ai(t,n[e]);return e(...i)}}(t,e.value,e.deps);break;case 2048:n=Ai(t,e.deps[0]);break;case 256:n=e.value}return n===_i||null===n||"object"!=typeof n||131072&e.flags||"function"!=typeof n.ngOnDestroy||(e.flags|=131072),void 0===n?_i:n}function Di(t,e){const n=t.viewContainer._embeddedViews;if((null==e||e>=n.length)&&(e=n.length-1),e<0)return null;const r=n[e];return r.viewContainerParent=null,W(n,e),Fr.dirtyParentQueries(r),Oi(r),r}function Ni(t,e,n){const r=e?ni(e,e.def.lastRenderRootNode):t.renderElement,i=n.renderer.parentNode(r),o=n.renderer.nextSibling(r);hi(n,2,i,o,void 0)}function Oi(t){hi(t,3,null,null,void 0)}const xi=new Object;function Ri(t,e,n,r,i,o){return new Pi(t,e,n,r,i,o)}class Pi extends Kn{constructor(t,e,n,r,i,o){super(),this.selector=t,this.componentType=e,this._inputs=r,this._outputs=i,this.ngContentSelectors=o,this.viewDefFactory=n}get inputs(){const t=[],e=this._inputs;for(let n in e)t.push({propName:n,templateName:e[n]});return t}get outputs(){const t=[];for(let e in this._outputs)t.push({propName:e,templateName:this._outputs[e]});return t}create(t,e,n,r){if(!r)throw new Error("ngModule should be provided");const i=ci(this.viewDefFactory),o=i.nodes[0].element.componentProvider.nodeIndex,s=Fr.createRootView(t,e||[],n,i,r,xi),a=Lr(s,o).instance;return n&&s.renderer.setAttribute(Mr(s,0).renderElement,"ng-version",lr.full),new Mi(s,new Fi(s),a)}}class Mi extends Wn{constructor(t,e,n){super(),this._view=t,this._viewRef=e,this._component=n,this._elDef=this._view.def.nodes[0],this.hostView=e,this.changeDetectorRef=e,this.instance=n}get location(){return new er(Mr(this._view,this._elDef.nodeIndex).renderElement)}get injector(){return new Gi(this._view,this._elDef)}get componentType(){return this._component.constructor}destroy(){this._viewRef.destroy()}onDestroy(t){this._viewRef.onDestroy(t)}}function Li(t,e,n){return new Vi(t,e,n)}class Vi{constructor(t,e,n){this._view=t,this._elDef=e,this._data=n,this._embeddedViews=[]}get element(){return new er(this._data.renderElement)}get injector(){return new Gi(this._view,this._elDef)}get parentInjector(){let t=this._view,e=this._elDef.parent;for(;!e&&t;)e=ei(t),t=t.parent;return t?new Gi(t,e):new Gi(this._view,null)}clear(){for(let t=this._embeddedViews.length-1;t>=0;t--){const e=Di(this._data,t);Fr.destroyView(e)}}get(t){const e=this._embeddedViews[t];if(e){const t=new Fi(e);return t.attachToViewContainerRef(this),t}return null}get length(){return this._embeddedViews.length}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;i||t instanceof Zn||(i=o.get(G));const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");const n=t;return function(t,e,n,r){let i=e.viewContainer._embeddedViews;null==n&&(n=i.length),r.viewContainerParent=t,H(i,n,r),function(t,e){const n=ti(e);if(!n||n===t||16&e.state)return;e.state|=16;let r=n.template._projectedViews;r||(r=n.template._projectedViews=[]),r.push(e),function(t,n){if(4&n.flags)return;e.parent.def.nodeFlags|=4,n.flags|=4;let r=n.parent;for(;r;)r.childFlags|=4,r=r.parent}(0,e.parentNodeDef)}(e,r),Fr.dirtyParentQueries(r),Ni(e,n>0?i[n-1]:null,r)}(this._view,this._data,e,n._view),n.attachToViewContainerRef(this),t}move(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");const n=this._embeddedViews.indexOf(t._view);return function(t,e,r){const i=t.viewContainer._embeddedViews,o=i[n];W(i,n),null==r&&(r=i.length),H(i,r,o),Fr.dirtyParentQueries(o),Oi(o),Ni(t,r>0?i[r-1]:null,o)}(this._data,0,e),t}indexOf(t){return this._embeddedViews.indexOf(t._view)}remove(t){const e=Di(this._data,t);e&&Fr.destroyView(e)}detach(t){const e=Di(this._data,t);return e?new Fi(e):null}}function ji(t){return new Fi(t)}class Fi{constructor(t){this._view=t,this._viewContainerRef=null,this._appRef=null}get rootNodes(){return function(t){const e=[];return hi(t,0,void 0,void 0,e),e}(this._view)}get context(){return this._view.context}get destroyed(){return 0!=(128&this._view.state)}markForCheck(){Jr(this._view)}detach(){this._view.state&=-5}detectChanges(){const t=this._view.root.rendererFactory;t.begin&&t.begin();try{Fr.checkAndUpdateView(this._view)}finally{t.end&&t.end()}}checkNoChanges(){Fr.checkNoChangesView(this._view)}reattach(){this._view.state|=4}onDestroy(t){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(t)}destroy(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),Fr.destroyView(this._view)}detachFromAppRef(){this._appRef=null,Oi(this._view),Fr.dirtyParentQueries(this._view)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}}function Ui(t,e){return new qi(t,e)}class qi extends Tr{constructor(t,e){super(),this._parentView=t,this._def=e}createEmbeddedView(t){return new Fi(Fr.createEmbeddedView(this._parentView,this._def,this._def.element.template,t))}get elementRef(){return new er(Mr(this._parentView,this._def.nodeIndex).renderElement)}}function Bi(t,e){return new Gi(t,e)}class Gi{constructor(t,e){this.view=t,this.elDef=e}get(t,e=pn.THROW_IF_NOT_FOUND){return Fr.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:t,tokenKey:Br(t)},e)}}function zi(t,e){const n=t.def.nodes[e];if(1&n.flags){const e=Mr(t,n.nodeIndex);return n.element.template?e.template:e.renderElement}if(2&n.flags)return Pr(t,n.nodeIndex).renderText;if(20240&n.flags)return Lr(t,n.nodeIndex).instance;throw new Error(`Illegal state: read nodeValue for node index ${e}`)}function Hi(t){return new Wi(t.renderer)}class Wi{constructor(t){this.delegate=t}selectRootElement(t){return this.delegate.selectRootElement(t)}createElement(t,e){const[n,r]=yi(e),i=this.delegate.createElement(r,n);return t&&this.delegate.appendChild(t,i),i}createViewRoot(t){return t}createTemplateAnchor(t){const e=this.delegate.createComment("");return t&&this.delegate.appendChild(t,e),e}createText(t,e){const n=this.delegate.createText(e);return t&&this.delegate.appendChild(t,n),n}projectNodes(t,e){for(let n=0;n<e.length;n++)this.delegate.appendChild(t,e[n])}attachViewAfter(t,e){const n=this.delegate.parentNode(t),r=this.delegate.nextSibling(t);for(let i=0;i<e.length;i++)this.delegate.insertBefore(n,e[i],r)}detachView(t){for(let e=0;e<t.length;e++){const n=t[e],r=this.delegate.parentNode(n);this.delegate.removeChild(r,n)}}destroyView(t,e){for(let n=0;n<e.length;n++)this.delegate.destroyNode(e[n])}listen(t,e,n){return this.delegate.listen(t,e,n)}listenGlobal(t,e,n){return this.delegate.listen(t,e,n)}setElementProperty(t,e,n){this.delegate.setProperty(t,e,n)}setElementAttribute(t,e,n){const[r,i]=yi(e);null!=n?this.delegate.setAttribute(t,i,n,r):this.delegate.removeAttribute(t,i,r)}setBindingDebugInfo(t,e,n){}setElementClass(t,e,n){n?this.delegate.addClass(t,e):this.delegate.removeClass(t,e)}setElementStyle(t,e,n){null!=n?this.delegate.setStyle(t,e,n):this.delegate.removeStyle(t,e)}invokeElementMethod(t,e,n){t[e].apply(t,n)}setText(t,e){this.delegate.setValue(t,e)}animate(){throw new Error("Renderer.animate is no longer supported!")}}function Ki(t,e,n,r){return new Qi(t,e,n,r)}class Qi{constructor(t,e,n,r){this._moduleType=t,this._parent=e,this._bootstrapComponents=n,this._def=r,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(t){const e=t._def,n=t._providers=new Array(e.providers.length);for(let r=0;r<e.providers.length;r++){const i=e.providers[r];4096&i.flags||void 0===n[r]&&(n[r]=ki(t,i))}}(this)}get(t,e=pn.THROW_IF_NOT_FOUND,n=p.Default){let r=0;return n&p.SkipSelf?r|=1:n&p.Self&&(r|=4),Ai(this,{token:t,tokenKey:Br(t),flags:r},e)}get instance(){return this.get(this._moduleType)}get componentFactoryResolver(){return this.get(Jn)}destroy(){if(this._destroyed)throw new Error(`The ng module ${b(this.instance.constructor)} has already been destroyed.`);this._destroyed=!0,function(t,e){const n=t._def,r=new Set;for(let i=0;i<n.providers.length;i++)if(131072&n.providers[i].flags){const e=t._providers[i];if(e&&e!==_i){const t=e.ngOnDestroy;"function"!=typeof t||r.has(e)||(t.apply(e),r.add(e))}}}(this),this._destroyListeners.forEach(t=>t())}onDestroy(t){this._destroyListeners.push(t)}}const $i=Br(rr),Yi=Br(sr),Ji=Br(er),Xi=Br(Ar),Zi=Br(Tr),to=Br(cn),eo=Br(pn),no=Br(D);function ro(t,e,n,r,i,o,s,a){const u=[];if(s)for(let c in s){const[t,e]=s[c];u[t]={flags:8,name:c,nonMinifiedName:e,ns:null,securityContext:null,suffix:null}}const l=[];if(a)for(let c in a)l.push({type:1,propName:c,target:null,eventName:a[c]});return so(t,e|=16384,n,r,i,i,o,u,l)}function io(t,e,n){return so(-1,t|=16,null,0,e,e,n)}function oo(t,e,n,r,i){return so(-1,t,e,0,n,r,i)}function so(t,e,n,r,i,o,s,a,u){const{matchedQueries:l,references:c,matchedQueryIds:h}=si(n);u||(u=[]),a||(a=[]),o=E(o);const d=ai(s,b(i));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:l,matchedQueryIds:h,references:c,ngContentIndex:-1,childCount:r,bindings:a,bindingFlags:vi(a),outputs:u,element:null,provider:{token:i,value:o,deps:d},text:null,query:null,ngContent:null}}function ao(t,e){return ho(t,e)}function uo(t,e){let n=t;for(;n.parent&&!ri(n);)n=n.parent;return fo(n.parent,ei(n),!0,e.provider.value,e.provider.deps)}function lo(t,e){const n=fo(t,e.parent,(32768&e.flags)>0,e.provider.value,e.provider.deps);if(e.outputs.length)for(let r=0;r<e.outputs.length;r++){const i=e.outputs[r],o=n[i.propName];if(!zn(o))throw new Error(`@Output ${i.propName} not initialized in '${n.constructor.name}'.`);{const n=o.subscribe(co(t,e.parent.nodeIndex,i.eventName));t.disposables[e.outputIndex+r]=n.unsubscribe.bind(n)}}return n}function co(t,e,n){return r=>Zr(t,e,n,r)}function ho(t,e){const n=(8192&e.flags)>0,r=e.provider;switch(201347067&e.flags){case 512:return fo(t,e.parent,n,r.value,r.deps);case 1024:return function(t,e,n,r,i){const o=i.length;switch(o){case 0:return r();case 1:return r(mo(t,e,n,i[0]));case 2:return r(mo(t,e,n,i[0]),mo(t,e,n,i[1]));case 3:return r(mo(t,e,n,i[0]),mo(t,e,n,i[1]),mo(t,e,n,i[2]));default:const s=Array(o);for(let r=0;r<o;r++)s[r]=mo(t,e,n,i[r]);return r(...s)}}(t,e.parent,n,r.value,r.deps);case 2048:return mo(t,e.parent,n,r.deps[0]);case 256:return r.value}}function fo(t,e,n,r,i){const o=i.length;switch(o){case 0:return new r;case 1:return new r(mo(t,e,n,i[0]));case 2:return new r(mo(t,e,n,i[0]),mo(t,e,n,i[1]));case 3:return new r(mo(t,e,n,i[0]),mo(t,e,n,i[1]),mo(t,e,n,i[2]));default:const s=new Array(o);for(let r=0;r<o;r++)s[r]=mo(t,e,n,i[r]);return new r(...s)}}const po={};function mo(t,e,n,r,i=pn.THROW_IF_NOT_FOUND){if(8&r.flags)return r.token;const o=t;2&r.flags&&(i=null);const s=r.tokenKey;s===to&&(n=!(!e||!e.element.componentView)),e&&1&r.flags&&(n=!1,e=e.parent);let a=t;for(;a;){if(e)switch(s){case $i:return Hi(go(a,e,n));case Yi:return go(a,e,n).renderer;case Ji:return new er(Mr(a,e.nodeIndex).renderElement);case Xi:return Mr(a,e.nodeIndex).viewContainer;case Zi:if(e.element.template)return Mr(a,e.nodeIndex).template;break;case to:return ji(go(a,e,n));case eo:case no:return Bi(a,e);default:const t=(n?e.element.allProviders:e.element.publicProviders)[s];if(t){let e=Lr(a,t.nodeIndex);return e||(e={instance:ho(a,t)},a.nodes[t.nodeIndex]=e),e.instance}}n=ri(a),e=ei(a),a=a.parent,4&r.flags&&(a=null)}const u=o.root.injector.get(r.token,po);return u!==po||i===po?u:o.root.ngModule.injector.get(r.token,i)}function go(t,e,n){let r;if(n)r=Mr(t,e.nodeIndex).componentView;else for(r=t;r.parent&&!ri(r);)r=r.parent;return r}function yo(t,e,n,r,i,o){if(32768&n.flags){const e=Mr(t,n.parent.nodeIndex).componentView;2&e.def.flags&&(e.state|=8)}if(e.instance[n.bindings[r].name]=i,524288&n.flags){o=o||{};const e=Dn.unwrap(t.oldValues[n.bindingIndex+r]);o[n.bindings[r].nonMinifiedName]=new Hn(e,i,0!=(2&t.state))}return t.oldValues[n.bindingIndex+r]=i,o}function vo(t,e){if(!(t.def.nodeFlags&e))return;const n=t.def.nodes;let r=0;for(let i=0;i<n.length;i++){const o=n[i];let s=o.parent;for(!s&&o.flags&e&&wo(t,i,o.flags&e,r++),0==(o.childFlags&e)&&(i+=o.childCount);s&&1&s.flags&&i===s.nodeIndex+s.childCount;)s.directChildFlags&e&&(r=bo(t,s,e,r)),s=s.parent}}function bo(t,e,n,r){for(let i=e.nodeIndex+1;i<=e.nodeIndex+e.childCount;i++){const e=t.def.nodes[i];e.flags&n&&wo(t,i,e.flags&n,r++),i+=e.childCount}return r}function wo(t,e,n,r){const i=Lr(t,e);if(!i)return;const o=i.instance;o&&(Fr.setCurrentNode(t,e),1048576&n&&Rr(t,512,r)&&o.ngAfterContentInit(),2097152&n&&o.ngAfterContentChecked(),4194304&n&&Rr(t,768,r)&&o.ngAfterViewInit(),8388608&n&&o.ngAfterViewChecked(),131072&n&&o.ngOnDestroy())}const _o=new k("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Dt}),Eo={},So=function(){var t={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencySymbol:15,CurrencyName:16,Currencies:17,PluralCase:18,ExtraData:19};return t[t.LocaleId]="LocaleId",t[t.DayPeriodsFormat]="DayPeriodsFormat",t[t.DayPeriodsStandalone]="DayPeriodsStandalone",t[t.DaysFormat]="DaysFormat",t[t.DaysStandalone]="DaysStandalone",t[t.MonthsFormat]="MonthsFormat",t[t.MonthsStandalone]="MonthsStandalone",t[t.Eras]="Eras",t[t.FirstDayOfWeek]="FirstDayOfWeek",t[t.WeekendRange]="WeekendRange",t[t.DateFormat]="DateFormat",t[t.TimeFormat]="TimeFormat",t[t.DateTimeFormat]="DateTimeFormat",t[t.NumberSymbols]="NumberSymbols",t[t.NumberFormats]="NumberFormats",t[t.CurrencySymbol]="CurrencySymbol",t[t.CurrencyName]="CurrencyName",t[t.Currencies]="Currencies",t[t.PluralCase]="PluralCase",t[t.ExtraData]="ExtraData",t}(),Co=void 0;var To=["en",[["a","p"],["AM","PM"],Co],[["AM","PM"],Co,Co],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Co,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Co,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Co,"{1} 'at' {0}",Co],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];function Io(t){return Ao(t)[So.PluralCase]}function Ao(t){const e=t.toLowerCase().replace(/_/g,"-");let n=Eo[e];if(n)return n;const r=e.split("-")[0];if(n=Eo[r])return n;if("en"===r)return To;throw new Error(`Missing locale data for the locale "${t}".`)}const ko="en-US";let Do=ko;function No(t){var e;e="Expected localeId to be defined",null==t&&function(t){throw new Error(`ASSERTION ERROR: ${t}`)}(e),"string"==typeof t&&(Do=t.toLowerCase().replace(/_/g,"-"))}class Oo extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}}function xo(){return this._results[In()]()}class Ro{constructor(){this.dirty=!0,this._results=[],this.changes=new Oo,this.length=0;const t=In(),e=Ro.prototype;e[t]||(e[t]=xo)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=function t(e,n){void 0===n&&(n=e);for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?(n===e&&(n=e.slice(0,r)),t(i,n)):n!==e&&n.push(i)}return n}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}const Po=new k("Application Initializer");class Mo{constructor(t){this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Gn(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}const Lo=new k("AppId");function Vo(){return`${jo()}${jo()}${jo()}`}function jo(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Fo=new k("Platform Initializer"),Uo=new k("Platform ID"),qo=new k("appBootstrapListener");class Bo{log(t){console.log(t)}warn(t){console.warn(t)}}const Go=new k("LocaleId"),zo=!1;function Ho(){throw new Error("Runtime compiler is not loaded")}const Wo=Ho,Ko=Ho,Qo=Ho,$o=Ho;class Yo{constructor(){this.compileModuleSync=Wo,this.compileModuleAsync=Ko,this.compileModuleAndAllComponentsSync=Qo,this.compileModuleAndAllComponentsAsync=$o}clearCache(){}clearCacheFor(t){}getModuleId(t){}}class Jo{}let Xo,Zo;function ts(){const t=A.wtf;return!(!t||!(Xo=t.trace)||(Zo=Xo.events,0))}const es=ts(),ns=es?function(t,e=null){return Zo.createScope(t,e)}:(t,e)=>(function(t,e){return null}),rs=es?function(t,e){return Xo.leaveScope(t,e),e}:(t,e)=>e,is=(()=>Promise.resolve(0))();function os(t){"undefined"==typeof Zone?is.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class ss{constructor({enableLongStackTrace:t=!1}){if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Oo(!1),this.onMicrotaskEmpty=new Oo(!1),this.onStable=new Oo(!1),this.onError=new Oo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");var e;Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(e=this)._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,n,r,i,o,s)=>{try{return cs(e),t.invokeTask(r,i,o,s)}finally{hs(e)}},onInvoke:(t,n,r,i,o,s,a)=>{try{return cs(e),t.invoke(r,i,o,s,a)}finally{hs(e)}},onHasTask:(t,n,r,i)=>{t.hasTask(r,i),n===r&&("microTask"==i.change?(e.hasPendingMicrotasks=i.microTask,ls(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:(t,n,r,i)=>(t.handleError(r,i),e.runOutsideAngular(()=>e.onError.emit(i)),!1)})}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ss.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ss.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,us,as,as);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}function as(){}const us={};function ls(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function cs(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function hs(t){t._nesting--,ls(t)}class ds{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Oo,this.onMicrotaskEmpty=new Oo,this.onStable=new Oo,this.onError=new Oo}run(t){return t()}runGuarded(t){return t()}runOutsideAngular(t){return t()}runTask(t){return t()}}class fs{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ss.assertNotInAngularZone(),os(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())os(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}class ps{constructor(){this._applications=new Map,vs.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return vs.findTestabilityInTree(this,t,e)}}class ms{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function gs(t){vs=t}let ys,vs=new ms,bs=function(t,e,n){return t.get(Jo).createCompiler([e]).compileModuleAsync(n)},ws=function(t){return t instanceof Zn};const _s=new k("AllowMultipleToken");class Es{constructor(t,e){this.name=t,this.token=e}}function Ss(t,e,n=[]){const r=`Platform: ${e}`,i=new k(r);return(e=[])=>{let o=Cs();if(!o||o.injector.get(_s,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0});!function(t){if(ys&&!ys.destroyed&&!ys.injector.get(_s,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ys=t.get(Ts);const e=t.get(Fo,null);e&&e.forEach(t=>t())}(pn.create({providers:t,name:r}))}return function(t){const e=Cs();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Cs(){return ys&&!ys.destroyed?ys:null}class Ts{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n="noop"===(i=e?e.ngZone:void 0)?new ds:("zone.js"===i?void 0:i)||new ss({enableLongStackTrace:de()}),r=[{provide:ss,useValue:n}];var i;return n.run(()=>{const e=pn.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(le,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return zo&&No(i.injector.get(Go,ko)||ko),i.onDestroy(()=>ks(this._modules,i)),n.runOutsideAngular(()=>n.onError.subscribe({next:t=>{o.handleError(t)}})),function(t,e,n){try{const i=n();return Gn(i)?i.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):i}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Mo);return t.runInitializers(),t.donePromise.then(()=>(this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Is({},e);return bs(this.injector,n,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(As);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${b(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. `+"Please define one of these.");t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}function Is(t,e){return Array.isArray(e)?e.reduce(Is,t):Object.assign({},t,e)}let As=(()=>{class t{constructor(t,e,n,r,i,u){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=u,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=de(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const l=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),c=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{ss.assertNotInAngularZone(),os(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{ss.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(l,c.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Kn?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=ws(n)?null:this._injector.get(G),i=n.create(pn.NULL,[],e||n.selector,r);i.onDestroy(()=>{this._unloadComponent(i)});const o=i.injector.get(fs,null);return o&&i.injector.get(ps).registerApplication(i.location.nativeElement,o),this._loadComponent(i),de()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");const e=t._tickScope();try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1,rs(e)}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;ks(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(qo,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),ks(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}return t._tickScope=ns("ApplicationRef#tick()"),t})();function ks(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Ds{}const Ns="#",Os="NgFactory";class xs{}const Rs={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};class Ps{constructor(t,e){this._compiler=t,this._config=e||Rs}load(t){return!zo&&this._compiler instanceof Yo?this.loadFactory(t):this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split(Ns);return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Ms(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split(Ns),i=Os;return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Ms(t,e,r))}}function Ms(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}class Ls{constructor(t,e){this.name=t,this.callback=e}}class Vs{constructor(t,e,n){this.listeners=[],this.parent=null,this._debugContext=n,this.nativeNode=t,e&&e instanceof js&&e.addChild(this)}get injector(){return this._debugContext.injector}get componentInstance(){return this._debugContext.component}get context(){return this._debugContext.context}get references(){return this._debugContext.references}get providerTokens(){return this._debugContext.providerTokens}}class js extends Vs{constructor(t,e,n){super(t,e,n),this.properties={},this.attributes={},this.classes={},this.styles={},this.childNodes=[],this.nativeElement=t}addChild(t){t&&(this.childNodes.push(t),t.parent=this)}removeChild(t){const e=this.childNodes.indexOf(t);-1!==e&&(t.parent=null,this.childNodes.splice(e,1))}insertChildrenAfter(t,e){const n=this.childNodes.indexOf(t);-1!==n&&(this.childNodes.splice(n+1,0,...e),e.forEach(e=>{e.parent&&e.parent.removeChild(e),t.parent=this}))}insertBefore(t,e){const n=this.childNodes.indexOf(t);-1===n?this.addChild(e):(e.parent&&e.parent.removeChild(e),e.parent=this,this.childNodes.splice(n,0,e))}query(t){return this.queryAll(t)[0]||null}queryAll(t){const e=[];return function t(e,n,r){e.childNodes.forEach(e=>{e instanceof js&&(n(e)&&r.push(e),t(e,n,r))})}(this,t,e),e}queryAllNodes(t){const e=[];return function t(e,n,r){e instanceof js&&e.childNodes.forEach(e=>{n(e)&&r.push(e),e instanceof js&&t(e,n,r)})}(this,t,e),e}get children(){return this.childNodes.filter(t=>t instanceof js)}triggerEventHandler(t,e){this.listeners.forEach(n=>{n.name==t&&n.callback(e)})}}const Fs=new Map,Us=function(t){return Fs.get(t)||null};function qs(t){Fs.set(t.nativeNode,t)}const Bs=Ss(null,"core",[{provide:Uo,useValue:"unknown"},{provide:Ts,deps:[pn]},{provide:ps,deps:[]},{provide:Bo,deps:[]}]);function Gs(){return Sr}function zs(){return Cr}function Hs(t){return t?(zo&&No(t),t):ko}function Ws(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}class Ks{constructor(t){}}function Qs(t,e,n,r,i,o){t|=1;const{matchedQueries:s,references:a,matchedQueryIds:u}=si(e);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:t,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:s,matchedQueryIds:u,references:a,ngContentIndex:n,childCount:r,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:o?ci(o):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:i||Ur},provider:null,text:null,query:null,ngContent:null}}function $s(t,e,n,r,i,o,s=[],a,u,l,c,h){l||(l=Ur);const{matchedQueries:d,references:f,matchedQueryIds:p}=si(n);let m=null,g=null;o&&([m,g]=yi(o)),a=a||[];const y=new Array(a.length);for(let w=0;w<a.length;w++){const[t,e,n]=a[w],[r,i]=yi(e);let o=void 0,s=void 0;switch(15&t){case 4:s=n;break;case 1:case 8:o=n}y[w]={flags:t,ns:r,name:i,nonMinifiedName:i,securityContext:o,suffix:s}}u=u||[];const v=new Array(u.length);for(let w=0;w<u.length;w++){const[t,e]=u[w];v[w]={type:0,target:t,eventName:e,propName:null}}const b=(s=s||[]).map(([t,e])=>{const[n,r]=yi(t);return[n,r,e]});return h=function(t){if(t&&t.id===zr){const e=null!=t.encapsulation&&t.encapsulation!==Q.None||t.styles.length||Object.keys(t.data).length;t.id=e?`c${Kr++}`:Hr}return t&&t.id===Hr&&(t=null),t||null}(h),c&&(e|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:d,matchedQueryIds:p,references:f,ngContentIndex:r,childCount:i,bindings:y,bindingFlags:vi(y),outputs:v,element:{ns:m,name:g,attrs:b,template:null,componentProvider:null,componentView:c||null,componentRendererType:h,publicProviders:null,allProviders:null,handleEvent:l||Ur},provider:null,text:null,query:null,ngContent:null}}function Ys(t,e,n){const r=n.element,i=t.root.selectorOrNode,o=t.renderer;let s;if(t.parent||!i){s=r.name?o.createElement(r.name,r.ns):o.createComment("");const i=ui(t,e,n);i&&o.appendChild(i,s)}else s=o.selectRootElement(i,!!r.componentRendererType&&r.componentRendererType.encapsulation===Q.ShadowDom);if(r.attrs)for(let a=0;a<r.attrs.length;a++){const[t,e,n]=r.attrs[a];o.setAttribute(s,e,n,t)}return s}function Js(t,e,n,r){for(let s=0;s<n.outputs.length;s++){const a=n.outputs[s],u=Xs(t,n.nodeIndex,(o=a.eventName,(i=a.target)?`${i}:${o}`:o));let l=a.target,c=t;"component"===a.target&&(l=null,c=e);const h=c.renderer.listen(l||r,a.eventName,u);t.disposables[n.outputIndex+s]=h}var i,o}function Xs(t,e,n){return r=>Zr(t,e,n,r)}function Zs(t,e,n,r){if(!$r(t,e,n,r))return!1;const i=e.bindings[n],o=Mr(t,e.nodeIndex),s=o.renderElement,a=i.name;switch(15&i.flags){case 1:!function(t,e,n,r,i,o){const s=e.securityContext;let a=s?t.root.sanitizer.sanitize(s,o):o;a=null!=a?a.toString():null;const u=t.renderer;null!=o?u.setAttribute(n,i,a,r):u.removeAttribute(n,i,r)}(t,i,s,i.ns,a,r);break;case 2:!function(t,e,n,r){const i=t.renderer;r?i.addClass(e,n):i.removeClass(e,n)}(t,s,a,r);break;case 4:!function(t,e,n,r,i){let o=t.root.sanitizer.sanitize(Le.STYLE,i);if(null!=o){o=o.toString();const t=e.suffix;null!=t&&(o+=t)}else o=null;const s=t.renderer;null!=o?s.setStyle(n,r,o):s.removeStyle(n,r)}(t,i,s,a,r);break;case 8:!function(t,e,n,r,i){const o=e.securityContext;let s=o?t.root.sanitizer.sanitize(o,i):i;t.renderer.setProperty(n,r,s)}(33554432&e.flags&&32&i.flags?o.componentView:t,i,s,a,r)}return!0}function ta(t,e,n){let r=[];for(let i in n)r.push({propName:i,bindingType:n[i]});return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:e,filterId:oi(e),bindings:r},ngContent:null}}function ea(t){const e=t.def.nodeMatchedQueries;for(;t.parent&&ii(t);){let n=t.parentNodeDef;t=t.parent;const r=n.nodeIndex+n.childCount;for(let i=0;i<=r;i++){const r=t.def.nodes[i];67108864&r.flags&&536870912&r.flags&&(r.query.filterId&e)===r.query.filterId&&jr(t,i).setDirty(),!(1&r.flags&&i+r.childCount<n.nodeIndex)&&67108864&r.childFlags&&536870912&r.childFlags||(i+=r.childCount)}}if(134217728&t.def.nodeFlags)for(let n=0;n<t.def.nodes.length;n++){const e=t.def.nodes[n];134217728&e.flags&&536870912&e.flags&&jr(t,n).setDirty(),n+=e.childCount}}function na(t,e){const n=jr(t,e.nodeIndex);if(!n.dirty)return;let r,i=void 0;if(67108864&e.flags){const n=e.parent.parent;i=ra(t,n.nodeIndex,n.nodeIndex+n.childCount,e.query,[]),r=Lr(t,e.parent.nodeIndex).instance}else 134217728&e.flags&&(i=ra(t,0,t.def.nodes.length-1,e.query,[]),r=t.component);n.reset(i);const o=e.query.bindings;let s=!1;for(let a=0;a<o.length;a++){const t=o[a];let e;switch(t.bindingType){case 0:e=n.first;break;case 1:e=n,s=!0}r[t.propName]=e}s&&n.notifyOnChanges()}function ra(t,e,n,r,i){for(let o=e;o<=n;o++){const e=t.def.nodes[o],n=e.matchedQueries[r.id];if(null!=n&&i.push(ia(t,e,n)),1&e.flags&&e.element.template&&(e.element.template.nodeMatchedQueries&r.filterId)===r.filterId){const n=Mr(t,o);if((e.childMatchedQueries&r.filterId)===r.filterId&&(ra(t,o+1,o+e.childCount,r,i),o+=e.childCount),16777216&e.flags){const t=n.viewContainer._embeddedViews;for(let e=0;e<t.length;e++){const o=t[e],s=ti(o);s&&s===n&&ra(o,0,o.def.nodes.length-1,r,i)}}const s=n.template._projectedViews;if(s)for(let t=0;t<s.length;t++){const e=s[t];ra(e,0,e.def.nodes.length-1,r,i)}}(e.childMatchedQueries&r.filterId)!==r.filterId&&(o+=e.childCount)}return i}function ia(t,e,n){if(null!=n)switch(n){case 1:return Mr(t,e.nodeIndex).renderElement;case 0:return new er(Mr(t,e.nodeIndex).renderElement);case 2:return Mr(t,e.nodeIndex).template;case 3:return Mr(t,e.nodeIndex).viewContainer;case 4:return Lr(t,e.nodeIndex).instance}}function oa(t,e,n){const r=ui(t,e,n);r&&fi(t,n.ngContent.index,1,r,null,void 0)}function sa(t,e){return function(t,e,n){const r=new Array(n.length);for(let i=0;i<n.length;i++){const t=n[i];r[i]={flags:8,name:t,ns:null,nonMinifiedName:t,securityContext:null,suffix:null}}return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:128,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:-1,childCount:0,bindings:r,bindingFlags:vi(r),outputs:[],element:null,provider:null,text:null,query:null,ngContent:null}}(0,t,new Array(e+1))}function aa(t,e,n){const r=new Array(n.length-1);for(let i=1;i<n.length;i++)r[i-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[i]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:r,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function ua(t,e,n){let r;const i=t.renderer;r=i.createText(n.text.prefix);const o=ui(t,e,n);return o&&i.appendChild(o,r),{renderText:r}}function la(t,e){return(null!=t?t.toString():"")+e.suffix}function ca(t,e,n,r){let i=0,o=0,s=0,a=0,u=0,l=null,c=null,h=!1,d=!1,f=null;for(let p=0;p<e.length;p++){const t=e[p];if(t.nodeIndex=p,t.parent=l,t.bindingIndex=i,t.outputIndex=o,t.renderParent=c,s|=t.flags,u|=t.matchedQueryIds,t.element){const e=t.element;e.publicProviders=l?l.element.publicProviders:Object.create(null),e.allProviders=e.publicProviders,h=!1,d=!1,t.element.template&&(u|=t.element.template.nodeMatchedQueries)}if(da(l,t,e.length),i+=t.bindings.length,o+=t.outputs.length,!c&&3&t.flags&&(f=t),20224&t.flags){h||(h=!0,l.element.publicProviders=Object.create(l.element.publicProviders),l.element.allProviders=l.element.publicProviders);const e=0!=(32768&t.flags);0==(8192&t.flags)||e?l.element.publicProviders[Br(t.provider.token)]=t:(d||(d=!0,l.element.allProviders=Object.create(l.element.publicProviders)),l.element.allProviders[Br(t.provider.token)]=t),e&&(l.element.componentProvider=t)}if(l?(l.childFlags|=t.flags,l.directChildFlags|=t.flags,l.childMatchedQueries|=t.matchedQueryIds,t.element&&t.element.template&&(l.childMatchedQueries|=t.element.template.nodeMatchedQueries)):a|=t.flags,t.childCount>0)l=t,ha(t)||(c=t);else for(;l&&p===l.nodeIndex+l.childCount;){const t=l.parent;t&&(t.childFlags|=l.childFlags,t.childMatchedQueries|=l.childMatchedQueries),c=(l=t)&&ha(l)?l.renderParent:l}}return{factory:null,nodeFlags:s,rootNodeFlags:a,nodeMatchedQueries:u,flags:t,nodes:e,updateDirectives:n||Ur,updateRenderer:r||Ur,handleEvent:(t,n,r,i)=>e[n].element.handleEvent(t,r,i),bindingCount:i,outputCount:o,lastRenderRootNode:f}}function ha(t){return 0!=(1&t.flags)&&null===t.element.name}function da(t,e,n){const r=e.element&&e.element.template;if(r){if(!r.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(r.lastRenderRootNode&&16777216&r.lastRenderRootNode.flags)throw new Error(`Illegal State: Last root node of a template can't have embedded views, at index ${e.nodeIndex}!`)}if(20224&e.flags&&0==(1&(t?t.flags:0)))throw new Error(`Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index ${e.nodeIndex}!`);if(e.query){if(67108864&e.flags&&(!t||0==(16384&t.flags)))throw new Error(`Illegal State: Content Query nodes need to be children of directives, at index ${e.nodeIndex}!`);if(134217728&e.flags&&t)throw new Error(`Illegal State: View Query nodes have to be top level nodes, at index ${e.nodeIndex}!`)}if(e.childCount){const r=t?t.nodeIndex+t.childCount:n-1;if(e.nodeIndex<=r&&e.nodeIndex+e.childCount>r)throw new Error(`Illegal State: childCount of node leads outside of parent, at index ${e.nodeIndex}!`)}}function fa(t,e,n,r){const i=ga(t.root,t.renderer,t,e,n);return ya(i,t.component,r),va(i),i}function pa(t,e,n){const r=ga(t,t.renderer,null,null,e);return ya(r,n,n),va(r),r}function ma(t,e,n,r){const i=e.element.componentRendererType;let o;return o=i?t.root.rendererFactory.createRenderer(r,i):t.root.renderer,ga(t.root,o,t,e.element.componentProvider,n)}function ga(t,e,n,r,i){const o=new Array(i.nodes.length),s=i.outputCount?new Array(i.outputCount):null;return{def:i,parent:n,viewContainerParent:null,parentNodeDef:r,context:null,component:null,nodes:o,state:13,root:t,renderer:e,oldValues:new Array(i.bindingCount),disposables:s,initIndex:-1}}function ya(t,e,n){t.component=e,t.context=n}function va(t){let e;ri(t)&&(e=Mr(t.parent,t.parentNodeDef.parent.nodeIndex).renderElement);const n=t.def,r=t.nodes;for(let i=0;i<n.nodes.length;i++){const o=n.nodes[i];let s;switch(Fr.setCurrentNode(t,i),201347067&o.flags){case 1:const n=Ys(t,e,o);let a=void 0;if(33554432&o.flags){const e=ci(o.element.componentView);a=Fr.createComponentView(t,o,e,n)}Js(t,a,o,n),s={renderElement:n,componentView:a,viewContainer:null,template:o.element.template?Ui(t,o):void 0},16777216&o.flags&&(s.viewContainer=Li(t,o,s));break;case 2:s=ua(t,e,o);break;case 512:case 1024:case 2048:case 256:(s=r[i])||4096&o.flags||(s={instance:ao(t,o)});break;case 16:s={instance:uo(t,o)};break;case 16384:(s=r[i])||(s={instance:lo(t,o)}),32768&o.flags&&ya(Mr(t,o.parent.nodeIndex).componentView,s.instance,s.instance);break;case 32:case 64:case 128:s={value:void 0};break;case 67108864:case 134217728:s=new Ro;break;case 8:oa(t,e,o),s=void 0}r[i]=s}Aa(t,Ia.CreateViewNodes),Oa(t,201326592,268435456,0)}function ba(t){Ea(t),Fr.updateDirectives(t,1),ka(t,Ia.CheckNoChanges),Fr.updateRenderer(t,1),Aa(t,Ia.CheckNoChanges),t.state&=-97}function wa(t){1&t.state?(t.state&=-2,t.state|=2):t.state&=-3,xr(t,0,256),Ea(t),Fr.updateDirectives(t,0),ka(t,Ia.CheckAndUpdate),Oa(t,67108864,536870912,0);let e=xr(t,256,512);vo(t,2097152|(e?1048576:0)),Fr.updateRenderer(t,0),Aa(t,Ia.CheckAndUpdate),Oa(t,134217728,536870912,0),vo(t,8388608|((e=xr(t,512,768))?4194304:0)),2&t.def.flags&&(t.state&=-9),t.state&=-97,xr(t,768,1024)}function _a(t,e,n,r,i,o,s,a,u,l,c,h,d){return 0===n?function(t,e,n,r,i,o,s,a,u,l,c,h){switch(201347067&e.flags){case 1:return function(t,e,n,r,i,o,s,a,u,l,c,h){const d=e.bindings.length;let f=!1;return d>0&&Zs(t,e,0,n)&&(f=!0),d>1&&Zs(t,e,1,r)&&(f=!0),d>2&&Zs(t,e,2,i)&&(f=!0),d>3&&Zs(t,e,3,o)&&(f=!0),d>4&&Zs(t,e,4,s)&&(f=!0),d>5&&Zs(t,e,5,a)&&(f=!0),d>6&&Zs(t,e,6,u)&&(f=!0),d>7&&Zs(t,e,7,l)&&(f=!0),d>8&&Zs(t,e,8,c)&&(f=!0),d>9&&Zs(t,e,9,h)&&(f=!0),f}(t,e,n,r,i,o,s,a,u,l,c,h);case 2:return function(t,e,n,r,i,o,s,a,u,l,c,h){let d=!1;const f=e.bindings,p=f.length;if(p>0&&$r(t,e,0,n)&&(d=!0),p>1&&$r(t,e,1,r)&&(d=!0),p>2&&$r(t,e,2,i)&&(d=!0),p>3&&$r(t,e,3,o)&&(d=!0),p>4&&$r(t,e,4,s)&&(d=!0),p>5&&$r(t,e,5,a)&&(d=!0),p>6&&$r(t,e,6,u)&&(d=!0),p>7&&$r(t,e,7,l)&&(d=!0),p>8&&$r(t,e,8,c)&&(d=!0),p>9&&$r(t,e,9,h)&&(d=!0),d){let d=e.text.prefix;p>0&&(d+=la(n,f[0])),p>1&&(d+=la(r,f[1])),p>2&&(d+=la(i,f[2])),p>3&&(d+=la(o,f[3])),p>4&&(d+=la(s,f[4])),p>5&&(d+=la(a,f[5])),p>6&&(d+=la(u,f[6])),p>7&&(d+=la(l,f[7])),p>8&&(d+=la(c,f[8])),p>9&&(d+=la(h,f[9]));const m=Pr(t,e.nodeIndex).renderText;t.renderer.setValue(m,d)}return d}(t,e,n,r,i,o,s,a,u,l,c,h);case 16384:return function(t,e,n,r,i,o,s,a,u,l,c,h){const d=Lr(t,e.nodeIndex),f=d.instance;let p=!1,m=void 0;const g=e.bindings.length;return g>0&&Qr(t,e,0,n)&&(p=!0,m=yo(t,d,e,0,n,m)),g>1&&Qr(t,e,1,r)&&(p=!0,m=yo(t,d,e,1,r,m)),g>2&&Qr(t,e,2,i)&&(p=!0,m=yo(t,d,e,2,i,m)),g>3&&Qr(t,e,3,o)&&(p=!0,m=yo(t,d,e,3,o,m)),g>4&&Qr(t,e,4,s)&&(p=!0,m=yo(t,d,e,4,s,m)),g>5&&Qr(t,e,5,a)&&(p=!0,m=yo(t,d,e,5,a,m)),g>6&&Qr(t,e,6,u)&&(p=!0,m=yo(t,d,e,6,u,m)),g>7&&Qr(t,e,7,l)&&(p=!0,m=yo(t,d,e,7,l,m)),g>8&&Qr(t,e,8,c)&&(p=!0,m=yo(t,d,e,8,c,m)),g>9&&Qr(t,e,9,h)&&(p=!0,m=yo(t,d,e,9,h,m)),m&&f.ngOnChanges(m),65536&e.flags&&Rr(t,256,e.nodeIndex)&&f.ngOnInit(),262144&e.flags&&f.ngDoCheck(),p}(t,e,n,r,i,o,s,a,u,l,c,h);case 32:case 64:case 128:return function(t,e,n,r,i,o,s,a,u,l,c,h){const d=e.bindings;let f=!1;const p=d.length;if(p>0&&$r(t,e,0,n)&&(f=!0),p>1&&$r(t,e,1,r)&&(f=!0),p>2&&$r(t,e,2,i)&&(f=!0),p>3&&$r(t,e,3,o)&&(f=!0),p>4&&$r(t,e,4,s)&&(f=!0),p>5&&$r(t,e,5,a)&&(f=!0),p>6&&$r(t,e,6,u)&&(f=!0),p>7&&$r(t,e,7,l)&&(f=!0),p>8&&$r(t,e,8,c)&&(f=!0),p>9&&$r(t,e,9,h)&&(f=!0),f){const f=Vr(t,e.nodeIndex);let m;switch(201347067&e.flags){case 32:m=new Array(d.length),p>0&&(m[0]=n),p>1&&(m[1]=r),p>2&&(m[2]=i),p>3&&(m[3]=o),p>4&&(m[4]=s),p>5&&(m[5]=a),p>6&&(m[6]=u),p>7&&(m[7]=l),p>8&&(m[8]=c),p>9&&(m[9]=h);break;case 64:m={},p>0&&(m[d[0].name]=n),p>1&&(m[d[1].name]=r),p>2&&(m[d[2].name]=i),p>3&&(m[d[3].name]=o),p>4&&(m[d[4].name]=s),p>5&&(m[d[5].name]=a),p>6&&(m[d[6].name]=u),p>7&&(m[d[7].name]=l),p>8&&(m[d[8].name]=c),p>9&&(m[d[9].name]=h);break;case 128:const t=n;switch(p){case 1:m=t.transform(n);break;case 2:m=t.transform(r);break;case 3:m=t.transform(r,i);break;case 4:m=t.transform(r,i,o);break;case 5:m=t.transform(r,i,o,s);break;case 6:m=t.transform(r,i,o,s,a);break;case 7:m=t.transform(r,i,o,s,a,u);break;case 8:m=t.transform(r,i,o,s,a,u,l);break;case 9:m=t.transform(r,i,o,s,a,u,l,c);break;case 10:m=t.transform(r,i,o,s,a,u,l,c,h)}}f.value=m}return f}(t,e,n,r,i,o,s,a,u,l,c,h);default:throw"unreachable"}}(t,e,r,i,o,s,a,u,l,c,h,d):function(t,e,n){switch(201347067&e.flags){case 1:return function(t,e,n){let r=!1;for(let i=0;i<n.length;i++)Zs(t,e,i,n[i])&&(r=!0);return r}(t,e,n);case 2:return function(t,e,n){const r=e.bindings;let i=!1;for(let o=0;o<n.length;o++)$r(t,e,o,n[o])&&(i=!0);if(i){let i="";for(let t=0;t<n.length;t++)i+=la(n[t],r[t]);i=e.text.prefix+i;const o=Pr(t,e.nodeIndex).renderText;t.renderer.setValue(o,i)}return i}(t,e,n);case 16384:return function(t,e,n){const r=Lr(t,e.nodeIndex),i=r.instance;let o=!1,s=void 0;for(let a=0;a<n.length;a++)Qr(t,e,a,n[a])&&(o=!0,s=yo(t,r,e,a,n[a],s));return s&&i.ngOnChanges(s),65536&e.flags&&Rr(t,256,e.nodeIndex)&&i.ngOnInit(),262144&e.flags&&i.ngDoCheck(),o}(t,e,n);case 32:case 64:case 128:return function(t,e,n){const r=e.bindings;let i=!1;for(let o=0;o<n.length;o++)$r(t,e,o,n[o])&&(i=!0);if(i){const i=Vr(t,e.nodeIndex);let o;switch(201347067&e.flags){case 32:o=n;break;case 64:o={};for(let e=0;e<n.length;e++)o[r[e].name]=n[e];break;case 128:const t=n[0],i=n.slice(1);o=t.transform(...i)}i.value=o}return i}(t,e,n);default:throw"unreachable"}}(t,e,r)}function Ea(t){const e=t.def;if(4&e.nodeFlags)for(let n=0;n<e.nodes.length;n++){const r=e.nodes[n];if(4&r.flags){const e=Mr(t,n).template._projectedViews;if(e)for(let n=0;n<e.length;n++){const r=e[n];r.state|=32,Xr(r,t)}}else 0==(4&r.childFlags)&&(n+=r.childCount)}}function Sa(t,e,n,r,i,o,s,a,u,l,c,h,d){return 0===n?function(t,e,n,r,i,o,s,a,u,l,c,h){const d=e.bindings.length;d>0&&Yr(t,e,0,n),d>1&&Yr(t,e,1,r),d>2&&Yr(t,e,2,i),d>3&&Yr(t,e,3,o),d>4&&Yr(t,e,4,s),d>5&&Yr(t,e,5,a),d>6&&Yr(t,e,6,u),d>7&&Yr(t,e,7,l),d>8&&Yr(t,e,8,c),d>9&&Yr(t,e,9,h)}(t,e,r,i,o,s,a,u,l,c,h,d):function(t,e,n){for(let r=0;r<n.length;r++)Yr(t,e,r,n[r])}(t,e,r),!1}function Ca(t,e){if(jr(t,e.nodeIndex).dirty)throw Dr(Fr.createDebugContext(t,e.nodeIndex),`Query ${e.query.id} not dirty`,`Query ${e.query.id} dirty`,0!=(1&t.state))}function Ta(t){if(!(128&t.state)){if(ka(t,Ia.Destroy),Aa(t,Ia.Destroy),vo(t,131072),t.disposables)for(let e=0;e<t.disposables.length;e++)t.disposables[e]();!function(t){if(!(16&t.state))return;const e=ti(t);if(e){const n=e.template._projectedViews;n&&(W(n,n.indexOf(t)),Fr.dirtyParentQueries(t))}}(t),t.renderer.destroyNode&&function(t){const e=t.def.nodes.length;for(let n=0;n<e;n++){const e=t.def.nodes[n];1&e.flags?t.renderer.destroyNode(Mr(t,n).renderElement):2&e.flags?t.renderer.destroyNode(Pr(t,n).renderText):(67108864&e.flags||134217728&e.flags)&&jr(t,n).destroy()}}(t),ri(t)&&t.renderer.destroy(),t.state|=128}}const Ia=function(){var t={CreateViewNodes:0,CheckNoChanges:1,CheckNoChangesProjectedViews:2,CheckAndUpdate:3,CheckAndUpdateProjectedViews:4,Destroy:5};return t[t.CreateViewNodes]="CreateViewNodes",t[t.CheckNoChanges]="CheckNoChanges",t[t.CheckNoChangesProjectedViews]="CheckNoChangesProjectedViews",t[t.CheckAndUpdate]="CheckAndUpdate",t[t.CheckAndUpdateProjectedViews]="CheckAndUpdateProjectedViews",t[t.Destroy]="Destroy",t}();function Aa(t,e){const n=t.def;if(33554432&n.nodeFlags)for(let r=0;r<n.nodes.length;r++){const i=n.nodes[r];33554432&i.flags?Da(Mr(t,r).componentView,e):0==(33554432&i.childFlags)&&(r+=i.childCount)}}function ka(t,e){const n=t.def;if(16777216&n.nodeFlags)for(let r=0;r<n.nodes.length;r++){const i=n.nodes[r];if(16777216&i.flags){const n=Mr(t,r).viewContainer._embeddedViews;for(let t=0;t<n.length;t++)Da(n[t],e)}else 0==(16777216&i.childFlags)&&(r+=i.childCount)}}function Da(t,e){const n=t.state;switch(e){case Ia.CheckNoChanges:0==(128&n)&&(12==(12&n)?ba(t):64&n&&Na(t,Ia.CheckNoChangesProjectedViews));break;case Ia.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?ba(t):64&n&&Na(t,e));break;case Ia.CheckAndUpdate:0==(128&n)&&(12==(12&n)?wa(t):64&n&&Na(t,Ia.CheckAndUpdateProjectedViews));break;case Ia.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?wa(t):64&n&&Na(t,e));break;case Ia.Destroy:Ta(t);break;case Ia.CreateViewNodes:va(t)}}function Na(t,e){ka(t,e),Aa(t,e)}function Oa(t,e,n,r){if(!(t.def.nodeFlags&e&&t.def.nodeFlags&n))return;const i=t.def.nodes.length;for(let o=0;o<i;o++){const i=t.def.nodes[o];if(i.flags&e&&i.flags&n)switch(Fr.setCurrentNode(t,i.nodeIndex),r){case 0:na(t,i);break;case 1:Ca(t,i)}i.childFlags&e&&i.childFlags&n||(o+=i.childCount)}}let xa=!1;function Ra(t,e,n,r,i,o){const s=i.injector.get(ir);return pa(Ma(t,i,s,e,n),r,o)}function Pa(t,e,n,r,i,o){const s=i.injector.get(ir),a=Ma(t,i,new fu(s),e,n),u=Ha(r);return hu(Ja.create,pa,null,[a,u,o])}function Ma(t,e,n,r,i){const o=e.injector.get(Ve),s=e.injector.get(le),a=n.createRenderer(null,null);return{ngModule:e,injector:t,projectableNodes:r,selectorOrNode:i,sanitizer:o,rendererFactory:n,renderer:a,errorHandler:s}}function La(t,e,n,r){const i=Ha(n);return hu(Ja.create,fa,null,[t,e,i,r])}function Va(t,e,n,r){return n=qa.get(e.element.componentProvider.provider.token)||Ha(n),hu(Ja.create,ma,null,[t,e,n,r])}function ja(t,e,n,r){return Ki(t,e,n,function(t){const{hasOverrides:e,hasDeprecatedOverrides:n}=function(t){let e=!1,n=!1;return 0===Fa.size?{hasOverrides:e,hasDeprecatedOverrides:n}:(t.providers.forEach(t=>{const r=Fa.get(t.token);3840&t.flags&&r&&(e=!0,n=n||r.deprecatedBehavior)}),t.modules.forEach(t=>{Ua.forEach((r,i)=>{y(i).providedIn===t&&(e=!0,n=n||r.deprecatedBehavior)})}),{hasOverrides:e,hasDeprecatedOverrides:n})}(t);return e?(function(t){for(let e=0;e<t.providers.length;e++){const r=t.providers[e];n&&(r.flags|=4096);const i=Fa.get(r.token);i&&(r.flags=-3841&r.flags|i.flags,r.deps=ai(i.deps),r.value=i.value)}if(Ua.size>0){let e=new Set(t.modules);Ua.forEach((r,i)=>{if(e.has(y(i).providedIn)){let e={token:i,flags:r.flags|(n?4096:0),deps:ai(r.deps),value:r.value,index:t.providers.length};t.providers.push(e),t.providersByKey[Br(i)]=e}})}}(t=t.factory(()=>Ur)),t):t}(r))}const Fa=new Map,Ua=new Map,qa=new Map;function Ba(t){let e;Fa.set(t.token,t),"function"==typeof t.token&&(e=y(t.token))&&"function"==typeof e.providedIn&&Ua.set(t.token,t)}function Ga(t,e){const n=ci(e.viewDefFactory),r=ci(n.nodes[0].element.componentView);qa.set(t,r)}function za(){Fa.clear(),Ua.clear(),qa.clear()}function Ha(t){if(0===Fa.size)return t;const e=function(t){const e=[];let n=null;for(let r=0;r<t.nodes.length;r++){const i=t.nodes[r];1&i.flags&&(n=i),n&&3840&i.flags&&Fa.has(i.provider.token)&&(e.push(n.nodeIndex),n=null)}return e}(t);if(0===e.length)return t;t=t.factory(()=>Ur);for(let r=0;r<e.length;r++)n(t,e[r]);return t;function n(t,e){for(let n=e+1;n<t.nodes.length;n++){const e=t.nodes[n];if(1&e.flags)return;if(3840&e.flags){const t=e.provider,n=Fa.get(t.token);n&&(e.flags=-3841&e.flags|n.flags,t.deps=ai(n.deps),t.value=n.value)}}}}function Wa(t,e,n,r,i,o,s,a,u,l,c,h,d){const f=t.def.nodes[e];return _a(t,f,n,r,i,o,s,a,u,l,c,h,d),224&f.flags?Vr(t,e).value:void 0}function Ka(t,e,n,r,i,o,s,a,u,l,c,h,d){const f=t.def.nodes[e];return Sa(t,f,n,r,i,o,s,a,u,l,c,h,d),224&f.flags?Vr(t,e).value:void 0}function Qa(t){return hu(Ja.detectChanges,wa,null,[t])}function $a(t){return hu(Ja.checkNoChanges,ba,null,[t])}function Ya(t){return hu(Ja.destroy,Ta,null,[t])}const Ja=function(){var t={create:0,detectChanges:1,checkNoChanges:2,destroy:3,handleEvent:4};return t[t.create]="create",t[t.detectChanges]="detectChanges",t[t.checkNoChanges]="checkNoChanges",t[t.destroy]="destroy",t[t.handleEvent]="handleEvent",t}();let Xa,Za,tu;function eu(t,e){Za=t,tu=e}function nu(t,e,n,r){return eu(t,e),hu(Ja.handleEvent,t.def.handleEvent,null,[t,e,n,r])}function ru(t,e){if(128&t.state)throw Or(Ja[Xa]);return eu(t,au(t,0)),t.def.updateDirectives(function(t,n,r,...i){const o=t.def.nodes[n];return 0===e?ou(t,o,r,i):su(t,o,r,i),16384&o.flags&&eu(t,au(t,n)),224&o.flags?Vr(t,o.nodeIndex).value:void 0},t)}function iu(t,e){if(128&t.state)throw Or(Ja[Xa]);return eu(t,uu(t,0)),t.def.updateRenderer(function(t,n,r,...i){const o=t.def.nodes[n];return 0===e?ou(t,o,r,i):su(t,o,r,i),3&o.flags&&eu(t,uu(t,n)),224&o.flags?Vr(t,o.nodeIndex).value:void 0},t)}function ou(t,e,n,r){if(_a(t,e,n,...r)){const s=1===n?r[0]:r;if(16384&e.flags){const n={};for(let t=0;t<e.bindings.length;t++){const r=e.bindings[t],a=s[t];8&r.flags&&(n[(i=r.nonMinifiedName,o=void 0,o=i.replace(/[$@]/g,"_"),`ng-reflect-${i=o.replace(qe,(...t)=>"-"+t[1].toLowerCase())}`)]=Be(a))}const r=e.parent,a=Mr(t,r.nodeIndex).renderElement;if(r.element.name)for(let e in n){const r=n[e];null!=r?t.renderer.setAttribute(a,e,r):t.renderer.removeAttribute(a,e)}else t.renderer.setValue(a,`bindings=${JSON.stringify(n,null,2)}`)}}var i,o}function su(t,e,n,r){Sa(t,e,n,...r)}function au(t,e){for(let n=e;n<t.def.nodes.length;n++){const e=t.def.nodes[n];if(16384&e.flags&&e.bindings&&e.bindings.length)return n}return null}function uu(t,e){for(let n=e;n<t.def.nodes.length;n++){const e=t.def.nodes[n];if(3&e.flags&&e.bindings&&e.bindings.length)return n}return null}class lu{constructor(t,e){this.view=t,this.nodeIndex=e,null==e&&(this.nodeIndex=e=0),this.nodeDef=t.def.nodes[e];let n=this.nodeDef,r=t;for(;n&&0==(1&n.flags);)n=n.parent;if(!n)for(;!n&&r;)n=ei(r),r=r.parent;this.elDef=n,this.elView=r}get elOrCompView(){return Mr(this.elView,this.elDef.nodeIndex).componentView||this.view}get injector(){return Bi(this.elView,this.elDef)}get component(){return this.elOrCompView.component}get context(){return this.elOrCompView.context}get providerTokens(){const t=[];if(this.elDef)for(let e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){const n=this.elView.def.nodes[e];20224&n.flags&&t.push(n.provider.token),e+=n.childCount}return t}get references(){const t={};if(this.elDef){cu(this.elView,this.elDef,t);for(let e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){const n=this.elView.def.nodes[e];20224&n.flags&&cu(this.elView,n,t),e+=n.childCount}}return t}get componentRenderElement(){const t=function(t){for(;t&&!ri(t);)t=t.parent;return t.parent?Mr(t.parent,ei(t).nodeIndex):null}(this.elOrCompView);return t?t.renderElement:void 0}get renderNode(){return 2&this.nodeDef.flags?ni(this.view,this.nodeDef):ni(this.elView,this.elDef)}logError(t,...e){let n,r;2&this.nodeDef.flags?(n=this.view.def,r=this.nodeDef.nodeIndex):(n=this.elView.def,r=this.elDef.nodeIndex);const i=function(t,e){let n=-1;for(let r=0;r<=e;r++)3&t.nodes[r].flags&&n++;return n}(n,r);let o=-1;n.factory(()=>++o===i?t.error.bind(t,...e):Ur),o<i&&(t.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),t.error(...e))}}function cu(t,e,n){for(let r in e.references)n[r]=ia(t,e,e.references[r])}function hu(t,e,n,r){const i=Xa,o=Za,s=tu;try{Xa=t;const u=e.apply(n,r);return Za=o,tu=s,Xa=i,u}catch(a){if(se(a)||!Za)throw a;throw function(t,e){return t instanceof Error||(t=new Error(t.toString())),Nr(t,e),t}(a,du())}}function du(){return Za?new lu(Za,tu):null}class fu{constructor(t){this.delegate=t}createRenderer(t,e){return new pu(this.delegate.createRenderer(t,e))}begin(){this.delegate.begin&&this.delegate.begin()}end(){this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)}}class pu{constructor(t){this.delegate=t,this.debugContextFactory=du,this.data=this.delegate.data}createDebugContext(t){return this.debugContextFactory(t)}destroyNode(t){const e=Us(t);Fs.delete(e.nativeNode),e instanceof Vs&&(e.listeners.length=0),this.delegate.destroyNode&&this.delegate.destroyNode(t)}destroy(){this.delegate.destroy()}createElement(t,e){const n=this.delegate.createElement(t,e),r=this.createDebugContext(n);if(r){const e=new js(n,null,r);e.name=t,qs(e)}return n}createComment(t){const e=this.delegate.createComment(t),n=this.createDebugContext(e);return n&&qs(new Vs(e,null,n)),e}createText(t){const e=this.delegate.createText(t),n=this.createDebugContext(e);return n&&qs(new Vs(e,null,n)),e}appendChild(t,e){const n=Us(t),r=Us(e);n&&r&&n instanceof js&&n.addChild(r),this.delegate.appendChild(t,e)}insertBefore(t,e,n){const r=Us(t),i=Us(e),o=Us(n);r&&i&&r instanceof js&&r.insertBefore(o,i),this.delegate.insertBefore(t,e,n)}removeChild(t,e){const n=Us(t),r=Us(e);n&&r&&n instanceof js&&n.removeChild(r),this.delegate.removeChild(t,e)}selectRootElement(t,e){const n=this.delegate.selectRootElement(t,e),r=du();return r&&qs(new js(n,null,r)),n}setAttribute(t,e,n,r){const i=Us(t);i&&i instanceof js&&(i.attributes[r?r+":"+e:e]=n),this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){const r=Us(t);r&&r instanceof js&&(r.attributes[n?n+":"+e:e]=null),this.delegate.removeAttribute(t,e,n)}addClass(t,e){const n=Us(t);n&&n instanceof js&&(n.classes[e]=!0),this.delegate.addClass(t,e)}removeClass(t,e){const n=Us(t);n&&n instanceof js&&(n.classes[e]=!1),this.delegate.removeClass(t,e)}setStyle(t,e,n,r){const i=Us(t);i&&i instanceof js&&(i.styles[e]=n),this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){const r=Us(t);r&&r instanceof js&&(r.styles[e]=null),this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){const r=Us(t);r&&r instanceof js&&(r.properties[e]=n),this.delegate.setProperty(t,e,n)}listen(t,e,n){if("string"!=typeof t){const r=Us(t);r&&r.listeners.push(new Ls(e,n))}return this.delegate.listen(t,e,n)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setValue(t,e){return this.delegate.setValue(t,e)}}function mu(t,e,n){return new gu(t,e,n)}class gu extends z{constructor(t,e,n){super(),this.moduleType=t,this._bootstrapComponents=e,this._ngModuleDefFactory=n}create(t){!function(){if(xa)return;xa=!0;const t=de()?{setCurrentNode:eu,createRootView:Pa,createEmbeddedView:La,createComponentView:Va,createNgModuleRef:ja,overrideProvider:Ba,overrideComponentView:Ga,clearOverrides:za,checkAndUpdateView:Qa,checkNoChangesView:$a,destroyView:Ya,createDebugContext:(t,e)=>new lu(t,e),handleEvent:nu,updateDirectives:ru,updateRenderer:iu}:{setCurrentNode:()=>{},createRootView:Ra,createEmbeddedView:fa,createComponentView:ma,createNgModuleRef:Ki,overrideProvider:Ur,overrideComponentView:Ur,clearOverrides:Ur,checkAndUpdateView:wa,checkNoChangesView:ba,destroyView:Ta,createDebugContext:(t,e)=>new lu(t,e),handleEvent:(t,e,n,r)=>t.def.handleEvent(t,e,n,r),updateDirectives:(t,e)=>t.def.updateDirectives(0===e?Wa:Ka,t),updateRenderer:(t,e)=>t.def.updateRenderer(0===e?Wa:Ka,t)};Fr.setCurrentNode=t.setCurrentNode,Fr.createRootView=t.createRootView,Fr.createEmbeddedView=t.createEmbeddedView,Fr.createComponentView=t.createComponentView,Fr.createNgModuleRef=t.createNgModuleRef,Fr.overrideProvider=t.overrideProvider,Fr.overrideComponentView=t.overrideComponentView,Fr.clearOverrides=t.clearOverrides,Fr.checkAndUpdateView=t.checkAndUpdateView,Fr.checkNoChangesView=t.checkNoChangesView,Fr.destroyView=t.destroyView,Fr.resolveDep=mo,Fr.createDebugContext=t.createDebugContext,Fr.handleEvent=t.handleEvent,Fr.updateDirectives=t.updateDirectives,Fr.updateRenderer=t.updateRenderer,Fr.dirtyParentQueries=ea}();const e=function(t){const e=Array.from(t.providers),n=Array.from(t.modules),r={};for(const i in t.providersByKey)r[i]=t.providersByKey[i];return{factory:t.factory,isRoot:t.isRoot,providers:e,modules:n,providersByKey:r}}(ci(this._ngModuleDefFactory));return Fr.createNgModuleRef(this.moduleType,t||pn.NULL,this._bootstrapComponents,e)}}},"9ppp":function(t,e,n){"use strict";function r(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}n.d(e,"a",function(){return i}),r.prototype=Object.create(Error.prototype);const i=r},CRDf:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("kJWO");const i=t=>e=>{const n=t[r.a]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)}},Cfvw:function(t,e,n){"use strict";var r=n("HDdC"),i=n("c2HN"),o=n("I55L"),s=n("kJWO"),a=n("Lhse"),u=n("yCtX"),l=n("quSY"),c=n("a7t3"),h=n("pLzU"),d=n("CRDf"),f=n("SeVD");function p(t,e){if(!e)return t instanceof r.a?t:new r.a(Object(f.a)(t));if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(e?n=>{const r=new l.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r}:Object(d.a)(t))}(t,e);if(Object(i.a)(t))return function(t,e){return new r.a(e?n=>{const r=new l.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r}:Object(c.a)(t))}(t,e);if(Object(o.a)(t))return Object(u.a)(t,e);if(function(t){return t&&"function"==typeof t[a.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(e?n=>{const r=new l.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[a.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const o=i.next();t=o.value,e=o.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r}:Object(h.a)(t))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}n.d(e,"a",function(){return p})},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=Array.isArray||(t=>t&&"number"==typeof t.length)},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("mCNh"),u=n("2fFW");n.d(e,"a",function(){return l});let l=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=c(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:Object(a.b)(t)(this)}toPromise(t){return new(t=c(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function c(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IzEk:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q"),i=n("4I5i"),o=n("EY2u");function s(t){return e=>0===t?Object(o.b)():e.lift(new a(t))}class a{constructor(t){if(this.total=t,this.total<0)throw new i.a}call(t,e){return e.subscribe(new u(t,this.total))}}class u extends r.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}},JIr8:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("l7GE"),i=n("51Dv"),o=n("ZUHj");function s(t){return function(e){const n=new a(t),r=e.lift(n);return n.caught=r}}class a{constructor(t){this.selector=t}call(t,e){return e.subscribe(new u(t,this.selector,this.caught))}}class u extends r.a{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new i.a(this,void 0,void 0);this.add(r),Object(o.a)(this,n,void 0,void 0,r)}}}},Kqap:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new o(t,e,n))}}class o{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new s(t,this.accumulator,this.seed,this.hasSeed))}}class s extends r.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}},KqfI:function(t,e,n){"use strict";function r(){}n.d(e,"a",function(){return r})},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("z+Ro"),i=n("yCtX"),o=n("EY2u"),s=n("XUOw");function a(...t){let e=t[t.length-1];switch(Object(r.a)(e)?t.pop():e=void 0,t.length){case 0:return Object(o.b)(e);case 1:return e?Object(i.a)(t,e):Object(s.a)(t[0]);default:return Object(i.a)(t,e)}}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t})}n.d(e,"a",function(){return r})},SVse:function(t,e,n){"use strict";n.d(e,"x",function(){return B}),n.d(e,"m",function(){return z}),n.d(e,"n",function(){return G}),n.d(e,"y",function(){return H}),n.d(e,"c",function(){return dt}),n.d(e,"j",function(){return $}),n.d(e,"k",function(){return J}),n.d(e,"l",function(){return Z}),n.d(e,"o",function(){return rt}),n.d(e,"p",function(){return it}),n.d(e,"d",function(){return ft}),n.d(e,"b",function(){return ct}),n.d(e,"e",function(){return ht}),n.d(e,"w",function(){return pt}),n.d(e,"t",function(){return gt}),n.d(e,"s",function(){return yt}),n.d(e,"v",function(){return K}),n.d(e,"u",function(){return W}),n.d(e,"r",function(){return i}),n.d(e,"g",function(){return o}),n.d(e,"i",function(){return s}),n.d(e,"a",function(){return a}),n.d(e,"f",function(){return c}),n.d(e,"q",function(){return h}),n.d(e,"h",function(){return u});var r=n("8Y7J");class i{}const o=new r.o("Location Initialized");class s{}const a=new r.o("appBaseHref");class u{constructor(t,e){this._subject=new r.m,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=u.stripTrailingSlash(l(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+u.normalizeQueryParams(e))}normalize(t){return u.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,l(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+u.normalizeQueryParams(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+u.normalizeQueryParams(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)})}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}static normalizeQueryParams(t){return t&&"?"!==t[0]?"?"+t:t}static joinWithSlash(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}static stripTrailingSlash(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}}function l(t){return t.replace(/\/index.html$/,"")}class c extends s{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=u.joinWithSlash(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+u.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+u.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}class h extends s{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return u.joinWithSlash(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+u.normalizeQueryParams(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+u.normalizeQueryParams(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+u.normalizeQueryParams(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}const d=function(){var t={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return t[t.Zero]="Zero",t[t.One]="One",t[t.Two]="Two",t[t.Few]="Few",t[t.Many]="Many",t[t.Other]="Other",t}(),f=function(){var t={Format:0,Standalone:1};return t[t.Format]="Format",t[t.Standalone]="Standalone",t}(),p=function(){var t={Narrow:0,Abbreviated:1,Wide:2,Short:3};return t[t.Narrow]="Narrow",t[t.Abbreviated]="Abbreviated",t[t.Wide]="Wide",t[t.Short]="Short",t}(),m=function(){var t={Short:0,Medium:1,Long:2,Full:3};return t[t.Short]="Short",t[t.Medium]="Medium",t[t.Long]="Long",t[t.Full]="Full",t}(),g=function(){var t={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};return t[t.Decimal]="Decimal",t[t.Group]="Group",t[t.List]="List",t[t.PercentSign]="PercentSign",t[t.PlusSign]="PlusSign",t[t.MinusSign]="MinusSign",t[t.Exponential]="Exponential",t[t.SuperscriptingExponent]="SuperscriptingExponent",t[t.PerMille]="PerMille",t[t.Infinity]="Infinity",t[t.NaN]="NaN",t[t.TimeSeparator]="TimeSeparator",t[t.CurrencyDecimal]="CurrencyDecimal",t[t.CurrencyGroup]="CurrencyGroup",t}();function y(t,e){return S(Object(r.qb)(t)[r.ab.DateFormat],e)}function v(t,e){return S(Object(r.qb)(t)[r.ab.TimeFormat],e)}function b(t,e){return S(Object(r.qb)(t)[r.ab.DateTimeFormat],e)}function w(t,e){const n=Object(r.qb)(t),i=n[r.ab.NumberSymbols][e];if(void 0===i){if(e===g.CurrencyDecimal)return n[r.ab.NumberSymbols][g.Decimal];if(e===g.CurrencyGroup)return n[r.ab.NumberSymbols][g.Group]}return i}const _=r.rb;function E(t){if(!t[r.ab.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[r.ab.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function S(t,e){for(let n=e;n>-1;n--)if(void 0!==t[n])return t[n];throw new Error("Locale data API: locale data undefined")}function C(t){const[e,n]=t.split(":");return{hours:+e,minutes:+n}}const T=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,I={},A=/((?:[^GyMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,k=function(){var t={Short:0,ShortGMT:1,Long:2,Extended:3};return t[t.Short]="Short",t[t.ShortGMT]="ShortGMT",t[t.Long]="Long",t[t.Extended]="Extended",t}(),D=function(){var t={FullYear:0,Month:1,Date:2,Hours:3,Minutes:4,Seconds:5,FractionalSeconds:6,Day:7};return t[t.FullYear]="FullYear",t[t.Month]="Month",t[t.Date]="Date",t[t.Hours]="Hours",t[t.Minutes]="Minutes",t[t.Seconds]="Seconds",t[t.FractionalSeconds]="FractionalSeconds",t[t.Day]="Day",t}(),N=function(){var t={DayPeriods:0,Days:1,Months:2,Eras:3};return t[t.DayPeriods]="DayPeriods",t[t.Days]="Days",t[t.Months]="Months",t[t.Eras]="Eras",t}();function O(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(t,n){return null!=e&&n in e?e[n]:t})),t}function x(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=1-t:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.substr(s.length-e)),o+s}function R(t,e,n=0,r=!1,i=!1){return function(o,s){let a=function(t,e){switch(t){case D.FullYear:return e.getFullYear();case D.Month:return e.getMonth();case D.Date:return e.getDate();case D.Hours:return e.getHours();case D.Minutes:return e.getMinutes();case D.Seconds:return e.getSeconds();case D.FractionalSeconds:return e.getMilliseconds();case D.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,o);if((n>0||a>-n)&&(a+=n),t===D.Hours)0===a&&-12===n&&(a=12);else if(t===D.FractionalSeconds)return u=e,x(a,3).substr(0,u);var u;const l=w(s,g.MinusSign);return x(a,e,l,r,i)}}function P(t,e,n=f.Format,i=!1){return function(o,s){return function(t,e,n,i,o,s){switch(n){case N.Months:return function(t,e,n){const i=Object(r.qb)(t),o=S([i[r.ab.MonthsFormat],i[r.ab.MonthsStandalone]],e);return S(o,n)}(e,o,i)[t.getMonth()];case N.Days:return function(t,e,n){const i=Object(r.qb)(t),o=S([i[r.ab.DaysFormat],i[r.ab.DaysStandalone]],e);return S(o,n)}(e,o,i)[t.getDay()];case N.DayPeriods:const a=t.getHours(),u=t.getMinutes();if(s){const t=function(t){const e=Object(r.qb)(t);return E(e),(e[r.ab.ExtraData][2]||[]).map(t=>"string"==typeof t?C(t):[C(t[0]),C(t[1])])}(e),n=function(t,e,n){const i=Object(r.qb)(t);E(i);const o=S([i[r.ab.ExtraData][0],i[r.ab.ExtraData][1]],e)||[];return S(o,n)||[]}(e,o,i);let s;if(t.forEach((t,e)=>{if(Array.isArray(t)){const{hours:r,minutes:i}=t[0],{hours:o,minutes:l}=t[1];a>=r&&u>=i&&(a<o||a===o&&u<l)&&(s=n[e])}else{const{hours:r,minutes:i}=t;r===a&&i===u&&(s=n[e])}}),s)return s}return function(t,e,n){const i=Object(r.qb)(t),o=S([i[r.ab.DayPeriodsFormat],i[r.ab.DayPeriodsStandalone]],e);return S(o,n)}(e,o,i)[a<12?0:1];case N.Eras:return function(t,e){return S(Object(r.qb)(t)[r.ab.Eras],e)}(e,i)[t.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${n}`)}}(o,s,t,e,n,i)}}function M(t){return function(e,n,r){const i=-1*r,o=w(n,g.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case k.Short:return(i>=0?"+":"")+x(s,2,o)+x(Math.abs(i%60),2,o);case k.ShortGMT:return"GMT"+(i>=0?"+":"")+x(s,1,o);case k.Long:return"GMT"+(i>=0?"+":"")+x(s,2,o)+":"+x(Math.abs(i%60),2,o);case k.Extended:return 0===r?"Z":(i>=0?"+":"")+x(s,2,o)+":"+x(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${t}"`)}}}const L=0,V=4;function j(t,e=!1){return function(n,r){let i;if(e){const t=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,e=n.getDate();i=1+Math.floor((e+t)/7)}else{const t=function(t){const e=new Date(t,L,1).getDay();return new Date(t,0,1+(e<=V?V:V+7)-e)}(n.getFullYear()),e=(o=n,new Date(o.getFullYear(),o.getMonth(),o.getDate()+(V-o.getDay()))).getTime()-t.getTime();i=1+Math.round(e/6048e5)}var o;return x(i,t,w(r,g.MinusSign))}}const F={};function U(t,e){t=t.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function q(t){return t instanceof Date&&!isNaN(t.valueOf())}const B=new r.o("UseV4Plurals");class G{}class z extends G{constructor(t,e){super(),this.locale=t,this.deprecatedPluralFn=e}getPluralCategory(t,e){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(e||this.locale,t):_(e||this.locale)(t)){case d.Zero:return"zero";case d.One:return"one";case d.Two:return"two";case d.Few:return"few";case d.Many:return"many";default:return"other"}}}function H(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}class W{}class K{constructor(t,e,n,r){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=r,this._initialClasses=[]}getValue(){return null}setClass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}setNgClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Object(r.ub)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}applyChanges(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Object(r.Fb)(t.item)}`);this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}let Q=(()=>{class t{constructor(t){this._delegate=t}getValue(){return this._delegate.getValue()}}return t.ngDirectiveDef=void 0,t})();class $ extends Q{constructor(t){super(t)}set klass(t){this._delegate.setClass(t)}set ngClass(t){this._delegate.setNgClass(t)}ngDoCheck(){this._delegate.applyChanges()}}class Y{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}class J{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){Object(r.T)()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(t)}. `+"See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new Y(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new X(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new X(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}class X{constructor(t,e){this.record=t,this.view=e}}class Z{constructor(t,e){this._viewContainer=t,this._context=new tt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){et("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){et("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}}class tt{constructor(){this.$implicit=null,this.ngIf=null}}function et(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.Fb)(e)}'.`)}class nt{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}class rt{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const e=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||e,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),e}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let e=0;e<this._defaultViews.length;e++)this._defaultViews[e].enforceState(t)}}}class it{constructor(t,e,n){this.ngSwitch=n,n._addCase(),this._view=new nt(t,e)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}function ot(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${Object(r.Fb)(t)}'`)}class st{createSubscription(t,e){return t.subscribe({next:e,error:t=>{throw t}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class at{createSubscription(t,e){return t.then(e,t=>{throw t})}dispose(t){}onDestroy(t){}}const ut=new at,lt=new st;class ct{constructor(t){this._ref=t,this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):Object(r.xb)(this._latestValue,this._latestReturnedValue)?this._latestReturnedValue:(this._latestReturnedValue=this._latestValue,r.O.wrap(this._latestValue)):(t&&this._subscribe(t),this._latestReturnedValue=this._latestValue,this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,e=>this._updateLatestValue(t,e))}_selectStrategy(t){if(Object(r.wb)(t))return ut;if(Object(r.vb)(t))return lt;throw ot(ct,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())}}class ht{constructor(t){this.locale=t}transform(t,e="mediumDate",n,i){if(null==t||""===t||t!=t)return null;try{return function(t,e,n,i){let o=function(t){if(q(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){t=t.trim();const e=parseFloat(t);if(!isNaN(t-e))return new Date(e);if(/^(\d{4}-\d{1,2}-\d{1,2})$/.test(t)){const[e,n,r]=t.split("-").map(t=>+t);return new Date(e,n-1,r)}let n;if(n=t.match(T))return function(t){const e=new Date(0);let n=0,r=0;const i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));const s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,u=Number(t[6]||0),l=Math.round(1e3*parseFloat("0."+(t[7]||0)));return o.call(e,s,a,u,l),e}(n)}const e=new Date(t);if(!q(e))throw new Error(`Unable to convert "${t}" into a date`);return e}(t);e=function t(e,n){const i=function(t){return Object(r.qb)(t)[r.ab.LocaleId]}(e);if(I[i]=I[i]||{},I[i][n])return I[i][n];let o="";switch(n){case"shortDate":o=y(e,m.Short);break;case"mediumDate":o=y(e,m.Medium);break;case"longDate":o=y(e,m.Long);break;case"fullDate":o=y(e,m.Full);break;case"shortTime":o=v(e,m.Short);break;case"mediumTime":o=v(e,m.Medium);break;case"longTime":o=v(e,m.Long);break;case"fullTime":o=v(e,m.Full);break;case"short":const r=t(e,"shortTime"),i=t(e,"shortDate");o=O(b(e,m.Short),[r,i]);break;case"medium":const s=t(e,"mediumTime"),a=t(e,"mediumDate");o=O(b(e,m.Medium),[s,a]);break;case"long":const u=t(e,"longTime"),l=t(e,"longDate");o=O(b(e,m.Long),[u,l]);break;case"full":const c=t(e,"fullTime"),h=t(e,"fullDate");o=O(b(e,m.Full),[c,h])}return o&&(I[i][n]=o),o}(n,e)||e;let s,a=[];for(;e;){if(!(s=A.exec(e))){a.push(e);break}{const t=(a=a.concat(s.slice(1))).pop();if(!t)break;e=t}}let u=o.getTimezoneOffset();i&&(u=U(i,u),o=function(t,e,n){const r=t.getTimezoneOffset();return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,-1*(U(e,r)-r))}(o,i));let l="";return a.forEach(t=>{const e=function(t){if(F[t])return F[t];let e;switch(t){case"G":case"GG":case"GGG":e=P(N.Eras,p.Abbreviated);break;case"GGGG":e=P(N.Eras,p.Wide);break;case"GGGGG":e=P(N.Eras,p.Narrow);break;case"y":e=R(D.FullYear,1,0,!1,!0);break;case"yy":e=R(D.FullYear,2,0,!0,!0);break;case"yyy":e=R(D.FullYear,3,0,!1,!0);break;case"yyyy":e=R(D.FullYear,4,0,!1,!0);break;case"M":case"L":e=R(D.Month,1,1);break;case"MM":case"LL":e=R(D.Month,2,1);break;case"MMM":e=P(N.Months,p.Abbreviated);break;case"MMMM":e=P(N.Months,p.Wide);break;case"MMMMM":e=P(N.Months,p.Narrow);break;case"LLL":e=P(N.Months,p.Abbreviated,f.Standalone);break;case"LLLL":e=P(N.Months,p.Wide,f.Standalone);break;case"LLLLL":e=P(N.Months,p.Narrow,f.Standalone);break;case"w":e=j(1);break;case"ww":e=j(2);break;case"W":e=j(1,!0);break;case"d":e=R(D.Date,1);break;case"dd":e=R(D.Date,2);break;case"E":case"EE":case"EEE":e=P(N.Days,p.Abbreviated);break;case"EEEE":e=P(N.Days,p.Wide);break;case"EEEEE":e=P(N.Days,p.Narrow);break;case"EEEEEE":e=P(N.Days,p.Short);break;case"a":case"aa":case"aaa":e=P(N.DayPeriods,p.Abbreviated);break;case"aaaa":e=P(N.DayPeriods,p.Wide);break;case"aaaaa":e=P(N.DayPeriods,p.Narrow);break;case"b":case"bb":case"bbb":e=P(N.DayPeriods,p.Abbreviated,f.Standalone,!0);break;case"bbbb":e=P(N.DayPeriods,p.Wide,f.Standalone,!0);break;case"bbbbb":e=P(N.DayPeriods,p.Narrow,f.Standalone,!0);break;case"B":case"BB":case"BBB":e=P(N.DayPeriods,p.Abbreviated,f.Format,!0);break;case"BBBB":e=P(N.DayPeriods,p.Wide,f.Format,!0);break;case"BBBBB":e=P(N.DayPeriods,p.Narrow,f.Format,!0);break;case"h":e=R(D.Hours,1,-12);break;case"hh":e=R(D.Hours,2,-12);break;case"H":e=R(D.Hours,1);break;case"HH":e=R(D.Hours,2);break;case"m":e=R(D.Minutes,1);break;case"mm":e=R(D.Minutes,2);break;case"s":e=R(D.Seconds,1);break;case"ss":e=R(D.Seconds,2);break;case"S":e=R(D.FractionalSeconds,1);break;case"SS":e=R(D.FractionalSeconds,2);break;case"SSS":e=R(D.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=M(k.Short);break;case"ZZZZZ":e=M(k.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=M(k.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=M(k.Long);break;default:return null}return F[t]=e,e}(t);l+=e?e(o,n,u):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}(t,e,i||this.locale,n)}catch(o){throw ot(ht,o.message)}}}class dt{}const ft=new r.o("DocumentToken"),pt="browser",mt="server";function gt(t){return t===mt}let yt=(()=>{class t{}return t.ngInjectableDef=Object(r.Mb)({token:t,providedIn:"root",factory:()=>new vt(Object(r.Nb)(ft),window,Object(r.Nb)(r.l))}),t})();class vt{constructor(t,e,n){this.document=t,this.window=e,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(t){this.supportScrollRestoration()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(this.supportScrollRestoration()){t=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(t):t.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{const n=this.document.querySelector(`#${t}`);if(n)return void this.scrollToElement(n);const r=this.document.querySelector(`[name='${t}']`);if(r)return void this.scrollToElement(r)}catch(e){this.errorHandler.handleError(e)}}}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}supportScrollRestoration(){try{return!!this.window&&!!this.window.scrollTo}catch(t){return!1}}}},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return f});var r=n("HDdC"),i=n("ngJS"),o=n("a7t3"),s=n("pLzU"),a=n("CRDf"),u=n("I55L"),l=n("c2HN"),c=n("XoHu"),h=n("Lhse"),d=n("kJWO");const f=t=>{if(t instanceof r.a)return e=>t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e);if(t&&"function"==typeof t[d.a])return Object(a.a)(t);if(Object(u.a)(t))return Object(i.a)(t);if(Object(l.a)(t))return Object(o.a)(t);if(t&&"function"==typeof t[h.a])return Object(s.a)(t);{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected.`+" You can provide an Observable, Promise, Array, or Iterable.")}}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},SxV6:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("sVev"),i=n("pLZG"),o=n("IzEk"),s=n("xbPD"),a=n("XDbj"),u=n("SpAZ");function l(t,e){const n=arguments.length>=2;return l=>l.pipe(t?Object(i.a)((e,n)=>t(e,n,l)):u.a,Object(o.a)(1),n?Object(s.a)(e):Object(a.a)(()=>new r.a))}},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},Wcq6:function(t,e,n){"use strict";var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r;t.exports=i},XDbj:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("vkgz"),i=n("sVev");const o=(t=function(){return new i.a})=>Object(r.a)({hasValue:!1,next(){this.hasValue=!0},complete(){if(!this.hasValue)throw t()}})},XNiG:function(t,e,n){"use strict";var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp");class a extends o.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}var u=n("2QA8");n.d(e,"b",function(){return l}),n.d(e,"a",function(){return c});class l extends i.a{constructor(t){super(t),this.destination=t}}let c=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new l(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends c{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XUOw:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("HDdC");function i(t){const e=new r.a(e=>{e.next(t),e.complete()});return e._isScalar=!0,e.value=t,e}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Xr7G:function(t,e,n){"use strict";n("mrSG");var r=n("8Y7J"),i=n("Cfvw"),o=n("LRne"),s=n("HDdC"),a=n("w1tV"),u=n("lJxs");function l(t){return function(t){return new s.a(e=>({unsubscribe:t.onSnapshot(e)}))}(t).pipe(Object(a.a)())}function c(t){return l(t).pipe(Object(u.a)(t=>({payload:t,type:"query"})))}var h=n("pLZG"),d=n("Kqap");function f(t){return c(t).pipe(Object(u.a)(t=>t.payload.docChanges().map(t=>({type:t.type,payload:t}))))}function p(t,e){return c(t).pipe(Object(u.a)(t=>t.payload.docChanges()),Object(d.a)((t,n)=>(function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)||t.splice(e.newIndex,0,e);break;case"modified":(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))&&(e.oldIndex!==e.newIndex?(t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e)):t.splice(e.newIndex,1,e));break;case"removed":t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref)&&t.splice(e.oldIndex,1)}return t}(t,e))}),t})(t,n,e),[]),Object(u.a)(t=>t.map(t=>({type:t.type,payload:t}))))}var m=n("1XSQ");function g(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}class y{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){return t&&0!==t.length?this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(f(this.query))).pipe(Object(u.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Object(h.a)(t=>t.length>0)):this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(f(this.query)))}auditTrail(t){return this.stateChanges(t).pipe(Object(d.a)((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=g(t),n=p(this.query,e),r=this.afs.scheduler.runOutsideAngular(n);return this.afs.scheduler.keepUnstableUntilFirst(r)}valueChanges(t={}){const e=c(this.query),n=this.afs.scheduler.runOutsideAngular(e);return this.afs.scheduler.keepUnstableUntilFirst(n).pipe(Object(u.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({},e.data(),{[t.idField]:e.id}):e.data())))}get(t){return Object(i.a)(this.query.get(t)).pipe(Object(m.b)(this.afs.scheduler.zone))}add(t){return this.ref.add(t)}doc(t){return new v(this.ref.doc(t),this.afs)}}class v{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=D(n,e);return new y(r,i,this.afs)}snapshotChanges(){const t=l(this.ref).pipe(Object(u.a)(t=>({payload:t,type:"value"}))),e=this.afs.scheduler.runOutsideAngular(t);return this.afs.scheduler.keepUnstableUntilFirst(e)}valueChanges(){return this.snapshotChanges().pipe(Object(u.a)(t=>t.payload.data()))}get(t){return Object(i.a)(this.ref.get(t)).pipe(Object(m.b)(this.afs.scheduler.zone))}}class b{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(f(this.query))).pipe(Object(u.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Object(h.a)(t=>t.length>0)):this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(f(this.query)))}auditTrail(t){return this.stateChanges(t).pipe(Object(d.a)((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=g(t),n=p(this.query,e),r=this.afs.scheduler.runOutsideAngular(n);return this.afs.scheduler.keepUnstableUntilFirst(r)}valueChanges(){const t=c(this.query),e=this.afs.scheduler.runOutsideAngular(t);return this.afs.scheduler.keepUnstableUntilFirst(e).pipe(Object(u.a)(t=>t.payload.docs.map(t=>t.data())))}get(t){return Object(i.a)(this.query.get(t)).pipe(Object(m.b)(this.afs.scheduler.zone))}}var w=n("yA/v"),_=n("SVse"),E=n("Wcq6"),S=n.n(E);n.d(e,"b",function(){return C}),n.d(e,"d",function(){return T}),n.d(e,"c",function(){return I}),n.d(e,"e",function(){return D}),n.d(e,"a",function(){return N});const C=new r.o("angularfire2.enableFirestorePersistence"),T=new r.o("angularfire2.firestore.persistenceSettings"),I=new r.o("angularfire2.firestore.settings"),A=parseInt(S.a.SDK_VERSION.split(".")[0]),k=A<5||5==A&&parseInt(S.a.SDK_VERSION.split(".")[1])<8?{timestampsInSnapshots:!0}:{};function D(t,e=(t=>t)){return{query:e(t),ref:t}}let N=class{constructor(t,e,n,r,s,a,u){this.scheduler=new m.a(a,s),this.firestore=a.runOutsideAngular(()=>{const n=Object(w.e)(t,e).firestore();return n.settings(r||k),n}),this.persistenceEnabled$=n&&!Object(_.t)(s)?a.runOutsideAngular(()=>{try{return Object(i.a)(this.firestore.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(t){return Object(o.a)(!1)}}):Object(o.a)(!1)}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=D(n,e);return new y(r,i,this)}collectionGroup(t,e){if(A<6)throw"collection group queries require Firebase JS SDK >= 6.0";const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new b(n(r),this)}doc(t){let e;return e="string"==typeof t?this.firestore.doc(t):t,new v(e,this)}createId(){return this.firestore.collection("_").doc().id}}},ZUHj:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("51Dv"),i=n("SeVD");function o(t,e,n,o,s=new r.a(t,n,o)){if(!s.closed)return Object(i.a)(e)(s)}},a7t3:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("NJ4a");const i=t=>e=>(t.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,r.a),e)},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},cUpR:function(t,e,n){"use strict";n.d(e,"p",function(){return Et}),n.d(e,"q",function(){return I}),n.d(e,"a",function(){return St}),n.d(e,"h",function(){return _t}),n.d(e,"c",function(){return A}),n.d(e,"d",function(){return k}),n.d(e,"e",function(){return ot}),n.d(e,"f",function(){return st}),n.d(e,"g",function(){return at}),n.d(e,"b",function(){return dt}),n.d(e,"r",function(){return s}),n.d(e,"j",function(){return j}),n.d(e,"i",function(){return rt}),n.d(e,"m",function(){return ut}),n.d(e,"n",function(){return ht}),n.d(e,"l",function(){return O}),n.d(e,"o",function(){return N}),n.d(e,"k",function(){return ft});var r=n("SVse"),i=n("8Y7J");let o=null;function s(){return o}class a{constructor(){this.resourceLoaderType=null}get attrToPropMap(){return this._attrToPropMap}set attrToPropMap(t){this._attrToPropMap=t}}class u extends a{constructor(){super(),this._animationPrefix=null,this._transitionEnd=null;try{const e=this.createElement("div",document);if(null!=this.getStyle(e,"animationName"))this._animationPrefix="";else{const t=["Webkit","Moz","O","ms"];for(let n=0;n<t.length;n++)if(null!=this.getStyle(e,t[n]+"AnimationName")){this._animationPrefix="-"+t[n].toLowerCase()+"-";break}}const n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(n).forEach(t=>{null!=this.getStyle(e,t)&&(this._transitionEnd=n[t])})}catch(t){this._animationPrefix=null,this._transitionEnd=null}}getDistributedNodes(t){return t.getDistributedNodes()}resolveAndSetHref(t,e,n){t.href=null==n?e:e+"/../"+n}supportsDOMEvents(){return!0}supportsNativeShadowDOM(){return"function"==typeof document.body.createShadowRoot}getAnimationPrefix(){return this._animationPrefix?this._animationPrefix:""}getTransitionEnd(){return this._transitionEnd?this._transitionEnd:""}supportsAnimation(){return null!=this._animationPrefix&&null!=this._transitionEnd}}const l={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},c=3,h={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},d={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},f=(()=>{if(i.sb.Node)return i.sb.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))}})();class p extends u{parse(t){throw new Error("parse not implemented")}static makeCurrent(){var t;t=new p,o||(o=t)}hasProperty(t,e){return e in t}setProperty(t,e,n){t[e]=n}getProperty(t,e){return t[e]}invoke(t,e,n){t[e](...n)}logError(t){window.console&&(console.error?console.error(t):console.log(t))}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}get attrToPropMap(){return l}contains(t,e){return f.call(t,e)}querySelector(t,e){return t.querySelector(e)}querySelectorAll(t,e){return t.querySelectorAll(e)}on(t,e,n){t.addEventListener(e,n,!1)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}createMouseEvent(t){const e=this.getDefaultDocument().createEvent("MouseEvent");return e.initEvent(t,!0,!0),e}createEvent(t){const e=this.getDefaultDocument().createEvent("Event");return e.initEvent(t,!0,!0),e}preventDefault(t){t.preventDefault(),t.returnValue=!1}isPrevented(t){return t.defaultPrevented||null!=t.returnValue&&!t.returnValue}getInnerHTML(t){return t.innerHTML}getTemplateContent(t){return"content"in t&&this.isTemplateElement(t)?t.content:null}getOuterHTML(t){return t.outerHTML}nodeName(t){return t.nodeName}nodeValue(t){return t.nodeValue}type(t){return t.type}content(t){return this.hasProperty(t,"content")?t.content:t}firstChild(t){return t.firstChild}nextSibling(t){return t.nextSibling}parentElement(t){return t.parentNode}childNodes(t){return t.childNodes}childNodesAsList(t){const e=t.childNodes,n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=e[r];return n}clearNodes(t){for(;t.firstChild;)t.removeChild(t.firstChild)}appendChild(t,e){t.appendChild(e)}removeChild(t,e){t.removeChild(e)}replaceChild(t,e,n){t.replaceChild(e,n)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}insertBefore(t,e,n){t.insertBefore(n,e)}insertAllBefore(t,e,n){n.forEach(n=>t.insertBefore(n,e))}insertAfter(t,e,n){t.insertBefore(n,e.nextSibling)}setInnerHTML(t,e){t.innerHTML=e}getText(t){return t.textContent}setText(t,e){t.textContent=e}getValue(t){return t.value}setValue(t,e){t.value=e}getChecked(t){return t.checked}setChecked(t,e){t.checked=e}createComment(t){return this.getDefaultDocument().createComment(t)}createTemplate(t){const e=this.getDefaultDocument().createElement("template");return e.innerHTML=t,e}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createElementNS(t,e,n){return(n=n||this.getDefaultDocument()).createElementNS(t,e)}createTextNode(t,e){return(e=e||this.getDefaultDocument()).createTextNode(t)}createScriptTag(t,e,n){const r=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return r.setAttribute(t,e),r}createStyleElement(t,e){const n=(e=e||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(t,e)),n}createShadowRoot(t){return t.createShadowRoot()}getShadowRoot(t){return t.shadowRoot}getHost(t){return t.host}clone(t){return t.cloneNode(!0)}getElementsByClassName(t,e){return t.getElementsByClassName(e)}getElementsByTagName(t,e){return t.getElementsByTagName(e)}classList(t){return Array.prototype.slice.call(t.classList,0)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}hasClass(t,e){return t.classList.contains(e)}setStyle(t,e,n){t.style[e]=n}removeStyle(t,e){t.style[e]=""}getStyle(t,e){return t.style[e]}hasStyle(t,e,n){const r=this.getStyle(t,e)||"";return n?r==n:r.length>0}tagName(t){return t.tagName}attributeMap(t){const e=new Map,n=t.attributes;for(let r=0;r<n.length;r++){const t=n.item(r);e.set(t.name,t.value)}return e}hasAttribute(t,e){return t.hasAttribute(e)}hasAttributeNS(t,e,n){return t.hasAttributeNS(e,n)}getAttribute(t,e){return t.getAttribute(e)}getAttributeNS(t,e,n){return t.getAttributeNS(e,n)}setAttribute(t,e,n){t.setAttribute(e,n)}setAttributeNS(t,e,n,r){t.setAttributeNS(e,n,r)}removeAttribute(t,e){t.removeAttribute(e)}removeAttributeNS(t,e,n){t.removeAttributeNS(e,n)}templateAwareRoot(t){return this.isTemplateElement(t)?this.content(t):t}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}getBoundingClientRect(t){try{return t.getBoundingClientRect()}catch(e){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}}getTitle(t){return t.title}setTitle(t,e){t.title=e||""}elementMatches(t,e){return!!this.isElementNode(t)&&(t.matches&&t.matches(e)||t.msMatchesSelector&&t.msMatchesSelector(e)||t.webkitMatchesSelector&&t.webkitMatchesSelector(e))}isTemplateElement(t){return this.isElementNode(t)&&"TEMPLATE"===t.nodeName}isTextNode(t){return t.nodeType===Node.TEXT_NODE}isCommentNode(t){return t.nodeType===Node.COMMENT_NODE}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}hasShadowRoot(t){return null!=t.shadowRoot&&t instanceof HTMLElement}isShadowRoot(t){return t instanceof DocumentFragment}importIntoDoc(t){return document.importNode(this.templateAwareRoot(t),!0)}adoptNode(t){return document.adoptNode(t)}getHref(t){return t.getAttribute("href")}getEventKey(t){let e=t.key;if(null==e){if(null==(e=t.keyIdentifier))return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),t.location===c&&d.hasOwnProperty(e)&&(e=d[e]))}return h[e]||e}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=g||(g=document.querySelector("base"))?g.getAttribute("href"):null;return null==e?null:(n=e,m||(m=document.createElement("a")),m.setAttribute("href",n),"/"===m.pathname.charAt(0)?m.pathname:"/"+m.pathname);var n}resetBaseElement(){g=null}getUserAgent(){return window.navigator.userAgent}setData(t,e,n){this.setAttribute(t,"data-"+e,n)}getData(t,e){return this.getAttribute(t,"data-"+e)}getComputedStyle(t){return getComputedStyle(t)}supportsWebAnimation(){return"function"==typeof Element.prototype.animate}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return Object(r.y)(document.cookie,t)}setCookie(t,e){document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)}}let m,g=null;function y(){return!!window.history.pushState}const v=new i.o("TRANSITION_ID"),b=[{provide:i.d,useFactory:function(t,e,n){return()=>{n.get(i.e).donePromise.then(()=>{const n=s();Array.prototype.slice.apply(n.querySelectorAll(e,"style[ng-transition]")).filter(e=>n.getAttribute(e,"ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[v,r.d,i.p],multi:!0}];class w{static init(){Object(i.V)(new w)}addToWindow(t){i.sb.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},i.sb.getAllAngularTestabilities=()=>t.getAllTestabilities(),i.sb.getAllAngularRootElements=()=>t.getAllRootElements(),i.sb.frameworkStabilizers||(i.sb.frameworkStabilizers=[]),i.sb.frameworkStabilizers.push(t=>{const e=i.sb.getAllAngularTestabilities();let n=e.length,r=!1;const o=function(e){r=r||e,0==--n&&t(r)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?s().isShadowRoot(e)?this.findTestabilityInTree(t,s().getHost(e),!0):this.findTestabilityInTree(t,s().parentElement(e),!0):null}}function _(t,e){"undefined"!=typeof COMPILED&&COMPILED||((i.sb.ng=i.sb.ng||{})[t]=e)}const E=(()=>({ApplicationRef:i.g,NgZone:i.x}))(),S="probe",C="coreTokens";function T(t){return Object(i.S)(t)}function I(t){return _(S,T),_(C,Object.assign({},E,(t||[]).reduce((t,e)=>(t[e.name]=e.token,t),{}))),()=>T}const A=new i.o("EventManagerPlugins");class k{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}class D{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=s().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}class N{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}class O extends N{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>s().remove(t))}}const x={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},R=/%COMP%/g,P="_nghost-%COMP%",M="_ngcontent-%COMP%";function L(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?L(t,i,n):(i=i.replace(R,t),n.push(i))}return n}function V(t){return e=>{!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}class j{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new F(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case i.N.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new B(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case i.N.Native:case i.N.ShadowDom:return new G(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=L(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}class F{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(x[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=x[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=x[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&i.D.DashCase?t.style.setProperty(e,n,r&i.D.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&i.D.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){q(e,"property"),t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return q(e,"listener"),"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,V(n)):this.eventManager.addEventListener(t,e,V(n))}}const U=(()=>"@".charCodeAt(0))();function q(t,e){if(t.charCodeAt(0)===U)throw new Error(`Found the synthetic ${e} ${t}. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.`)}class B extends F{constructor(t,e,n,r){super(t),this.component=n;const i=L(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr=M.replace(R,r+"-"+n.id),this.hostAttr=P.replace(R,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class G extends F{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.component=r,this.shadowRoot=r.encapsulation===i.N.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const o=L(r.id,r.styles,[]);for(let i=0;i<o.length;i++){const t=document.createElement("style");t.textContent=o[i],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}const z=(()=>"undefined"!=typeof Zone&&Zone.__symbol__||function(t){return"__zone_symbol__"+t})(),H=z("addEventListener"),W=z("removeEventListener"),K={},Q="FALSE",$="ANGULAR",Y="addEventListener",J="removeEventListener",X="__zone_symbol__propagationStopped",Z="__zone_symbol__stopImmediatePropagation",tt=(()=>{const t="undefined"!=typeof Zone&&Zone[z("BLACK_LISTED_EVENTS")];if(t){const e={};return t.forEach(t=>{e[t]=t}),e}})(),et=function(t){return!!tt&&tt.hasOwnProperty(t)},nt=function(t){const e=K[t.type];if(!e)return;const n=this[e];if(!n)return;const r=[t];if(1===n.length){const t=n[0];return t.zone!==Zone.current?t.zone.run(t.handler,this,r):t.handler.apply(this,r)}{const e=n.slice();for(let n=0;n<e.length&&!0!==t[X];n++){const t=e[n];t.zone!==Zone.current?t.zone.run(t.handler,this,r):t.handler.apply(this,r)}}};class rt extends D{constructor(t,e,n){super(t),this.ngZone=e,n&&Object(r.t)(n)||this.patchEvent()}patchEvent(){if("undefined"==typeof Event||!Event||!Event.prototype)return;if(Event.prototype[Z])return;const t=Event.prototype[Z]=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[X]=!0),t&&t.apply(this,arguments)}}supports(t){return!0}addEventListener(t,e,n){let r=n;if(!t[H]||i.x.isInAngularZone()&&!et(e))t[Y](e,r,!1);else{let n=K[e];n||(n=K[e]=z($+e+Q));let i=t[n];const o=i&&i.length>0;i||(i=t[n]=[]);const s=et(e)?Zone.root:Zone.current;if(0===i.length)i.push({zone:s,handler:r});else{let t=!1;for(let e=0;e<i.length;e++)if(i[e].handler===r){t=!0;break}t||i.push({zone:s,handler:r})}o||t[H](e,nt,!1)}return()=>this.removeEventListener(t,e,r)}removeEventListener(t,e,n){let r=t[W];if(!r)return t[J].apply(t,[e,n,!1]);let i=K[e],o=i&&t[i];if(!o)return t[J].apply(t,[e,n,!1]);let s=!1;for(let a=0;a<o.length;a++)if(o[a].handler===n){s=!0,o.splice(a,1);break}s?0===o.length&&r.apply(t,[e,nt,!1]):t[J].apply(t,[e,n,!1])}}const it={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},ot=new i.o("HammerGestureConfig"),st=new i.o("HammerLoader");class at{constructor(){this.events=[],this.overrides={}}buildHammer(t){const e=new Hammer(t,this.options);e.get("pinch").set({enable:!0}),e.get("rotate").set({enable:!0});for(const n in this.overrides)e.get(n).set(this.overrides[n]);return e}}class ut extends D{constructor(t,e,n,r){super(t),this._config=e,this.console=n,this.loader=r}supports(t){return!(!it.hasOwnProperty(t.toLowerCase())&&!this.isCustomEvent(t)||!window.Hammer&&!this.loader&&(this.console.warn(`The "${t}" event cannot be bound because Hammer.JS is not `+"loaded and no custom loader has been specified."),1))}addEventListener(t,e,n){const r=this.manager.getZone();if(e=e.toLowerCase(),!window.Hammer&&this.loader){let r=!1,i=()=>{r=!0};return this.loader().then(()=>{if(!window.Hammer)return this.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(i=()=>{});r||(i=this.addEventListener(t,e,n))}).catch(()=>{this.console.warn(`The "${e}" event cannot be bound because the custom `+"Hammer.JS loader failed."),i=()=>{}}),()=>{i()}}return r.runOutsideAngular(()=>{const i=this._config.buildHammer(t),o=function(t){r.runGuarded(function(){n(t)})};return i.on(e,o),()=>{i.off(e,o),"function"==typeof i.destroy&&i.destroy()}})}isCustomEvent(t){return this._config.events.indexOf(t)>-1}}const lt=["alt","control","meta","shift"],ct={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};class ht extends D{constructor(t){super(t)}supports(t){return null!=ht.parseEventName(t)}addEventListener(t,e,n){const r=ht.parseEventName(e),i=ht.eventCallback(r.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>s().onAndCancel(t,r.domEventName,i))}static parseEventName(t){const e=t.toLowerCase().split("."),n=e.shift();if(0===e.length||"keydown"!==n&&"keyup"!==n)return null;const r=ht._normalizeKey(e.pop());let i="";if(lt.forEach(t=>{const n=e.indexOf(t);n>-1&&(e.splice(n,1),i+=t+".")}),i+=r,0!=e.length||0===r.length)return null;const o={};return o.domEventName=n,o.fullKey=i,o}static getEventFullKey(t){let e="",n=s().getEventKey(t);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),lt.forEach(r=>{r!=n&&(0,ct[r])(t)&&(e+=r+".")}),e+=n}static eventCallback(t,e,n){return r=>{ht.getEventFullKey(r)===t&&n.runGuarded(()=>e(r))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}class dt{}class ft extends dt{constructor(t){super(),this._doc=t}sanitize(t,e){if(null==e)return null;switch(t){case i.F.NONE:return e;case i.F.HTML:return e instanceof mt?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"HTML"),Object(i.bb)(this._doc,String(e)));case i.F.STYLE:return e instanceof gt?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"Style"),Object(i.cb)(e));case i.F.SCRIPT:if(e instanceof yt)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"Script"),new Error("unsafe value used in a script context");case i.F.URL:return e instanceof bt||e instanceof vt?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"URL"),Object(i.db)(String(e)));case i.F.RESOURCE_URL:if(e instanceof bt)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see http://g.co/ng/security#xss)`)}}checkNotSafeValue(t,e){if(t instanceof pt)throw new Error(`Required a safe ${e}, got a ${t.getTypeName()} `+"(see http://g.co/ng/security#xss)")}bypassSecurityTrustHtml(t){return new mt(t)}bypassSecurityTrustStyle(t){return new gt(t)}bypassSecurityTrustScript(t){return new yt(t)}bypassSecurityTrustUrl(t){return new vt(t)}bypassSecurityTrustResourceUrl(t){return new bt(t)}}class pt{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity}`+" (see http://g.co/ng/security#xss)"}}class mt extends pt{getTypeName(){return"HTML"}}class gt extends pt{getTypeName(){return"Style"}}class yt extends pt{getTypeName(){return"Script"}}class vt extends pt{getTypeName(){return"URL"}}class bt extends pt{getTypeName(){return"ResourceURL"}}const wt=[{provide:i.z,useValue:r.w},{provide:i.A,useValue:function(){p.makeCurrent(),w.init()},multi:!0},{provide:r.r,useClass:class extends r.r{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=s().getLocation(),this._history=s().getHistory()}getBaseHrefFromDOM(){return s().getBaseHref(this._doc)}onPopState(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){y()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){y()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}},deps:[r.d]},{provide:r.d,useFactory:function(){return document},deps:[]}],_t=Object(i.P)(i.U,"browser",wt);function Et(){return new i.l}class St{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:St,providers:[{provide:i.c,useValue:t.appId},{provide:v,useExisting:i.c},b]}}}"undefined"!=typeof window&&window},cp0P:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("DH7j"),o=n("EY2u"),s=n("ZUHj"),a=n("l7GE"),u=n("lJxs");function l(...t){let e;return"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(i.a)(t[0])&&(t=t[0]),0===t.length?o.a:e?l(t).pipe(Object(u.a)(t=>e(...t))):new r.a(e=>new c(e,t))}class c extends a.a{constructor(t,e){super(t),this.sources=e,this.completed=0,this.haveValues=0;const n=e.length;this.values=new Array(n);for(let r=0;r<n;r++){const t=e[r],n=Object(s.a)(this,t,null,r);n&&this.add(n)}}notifyNext(t,e,n,r,i){this.values[n]=e,i._hasValue||(i._hasValue=!0,this.haveValues++)}notifyComplete(t){const{destination:e,haveValues:n,values:r}=this,i=r.length;t._hasValue?(this.completed++,this.completed===i&&(n===i&&e.next(r),e.complete())):e.complete()}}},eIep:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n("l7GE"),i=n("51Dv"),o=n("ZUHj"),s=n("lJxs"),a=n("Cfvw");function u(t,e){return"function"==typeof e?n=>n.pipe(u((n,r)=>Object(a.a)(t(n,r)).pipe(Object(s.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new l(t))}class l{constructor(t){this.project=t}call(t,e){return e.subscribe(new c(t,this.project))}}class c extends r.a{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e,t,n)}_innerSub(t,e,n){const r=this.innerSubscription;r&&r.unsubscribe();const s=new i.a(this,void 0,void 0);this.destination.add(s),this.innerSubscription=Object(o.a)(this,t,e,n,s)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(t){this.destination.remove(t),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(t,e,n,r,i){this.destination.next(e)}}},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},iInd:function(t,e,n){"use strict";var r=n("SVse"),i=n("8Y7J"),o=n("LRne"),s=n("Cfvw"),a=n("2Vo4"),u=n("HDdC"),l=n("sVev"),c=n("itXk"),h=n("EY2u");function d(t){return new u.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(s.a)(n):Object(h.b)()).subscribe(e)})}var f=n("XNiG"),p=n("lJxs"),m=n("bHdf");function g(){return Object(m.a)(1)}var y=n("pLZG"),v=n("7o/Q"),b=n("4I5i");function w(t){return function(e){return 0===t?Object(h.b)():e.lift(new _(t))}}class _{constructor(t){if(this.total=t,this.total<0)throw new b.a}call(t,e){return e.subscribe(new E(t,this.total))}}class E extends v.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}var S=n("XDbj"),C=n("xbPD"),T=n("SpAZ");function I(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Object(y.a)((e,n)=>t(e,n,r)):T.a,w(1),n?Object(C.a)(e):Object(S.a)(()=>new l.a))}var A=n("JIr8"),k=n("SxV6"),D=n("5+tZ");class N{constructor(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}call(t,e){return e.subscribe(new O(t,this.predicate,this.thisArg,this.source))}}class O extends v.a{constructor(t,e,n,r){super(t),this.predicate=e,this.thisArg=n,this.source=r,this.index=0,this.thisArg=n||this}notifyComplete(t){this.destination.next(t),this.destination.complete()}_next(t){let e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}var x=n("eIep"),R=n("IzEk"),P=n("yCtX"),M=n("XUOw"),L=n("z+Ro"),V=n("Kqap");function j(t,e){return Object(D.a)(t,e,1)}var F=n("mCNh"),U=n("vkgz"),q=n("quSY");class B{constructor(t){this.callback=t}call(t,e){return e.subscribe(new G(t,this.callback))}}class G extends v.a{constructor(t,e){super(t),this.add(new q.a(e))}}var z=n("cUpR");n.d(e,"H",function(){return ut}),n.d(e,"x",function(){return In}),n.d(e,"E",function(){return Ln}),n.d(e,"z",function(){return Nn}),n.d(e,"F",function(){return Vn}),n.d(e,"G",function(){return jn}),n.d(e,"B",function(){return xn}),n.d(e,"A",function(){return On}),n.d(e,"D",function(){return Mn}),n.d(e,"y",function(){return kn}),n.d(e,"C",function(){return Pn}),n.d(e,"I",function(){return Cn}),n.d(e,"p",function(){return dn}),n.d(e,"r",function(){return fn}),n.d(e,"q",function(){return mn}),n.d(e,"t",function(){return vn}),n.d(e,"d",function(){return Q}),n.d(e,"e",function(){return K}),n.d(e,"f",function(){return $}),n.d(e,"g",function(){return W}),n.d(e,"n",function(){return en}),n.d(e,"o",function(){return hn}),n.d(e,"m",function(){return rn}),n.d(e,"k",function(){return Tn}),n.d(e,"l",function(){return Fn}),n.d(e,"s",function(){return Dn}),n.d(e,"b",function(){return yn}),n.d(e,"h",function(){return En}),n.d(e,"i",function(){return _n}),n.d(e,"j",function(){return wn}),n.d(e,"u",function(){return Sn}),n.d(e,"a",function(){return Zt}),n.d(e,"v",function(){return sn}),n.d(e,"c",function(){return xt}),n.d(e,"w",function(){return Ot});class H{constructor(t,e){this.id=t,this.url=e}}class W extends H{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class K extends H{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Q extends H{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class $ extends H{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Y extends H{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class J extends H{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class X extends H{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Z extends H{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tt extends H{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class et{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class nt{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class rt{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class it{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ot{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class st{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class at{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class ut{}const lt="primary";class ct{constructor(t){this.params=t||{}}has(t){return this.params.hasOwnProperty(t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function ht(t){return new ct(t)}const dt="ngNavigationCancelingError";function ft(t){const e=Error("NavigationCancelingError: "+t);return e[dt]=!0,e}function pt(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}class mt{constructor(t,e){this.routes=t,this.module=e}}function gt(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];yt(r,vt(e,r))}}function yt(t,e){if(!t)throw new Error(`\n      Invalid configuration of route '${e}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(t))throw new Error(`Invalid configuration of route '${e}': Array cannot be specified`);if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&t.outlet!==lt)throw new Error(`Invalid configuration of route '${e}': a componentless route without children or loadChildren cannot have a named outlet set`);if(t.redirectTo&&t.children)throw new Error(`Invalid configuration of route '${e}': redirectTo and children cannot be used together`);if(t.redirectTo&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': redirectTo and loadChildren cannot be used together`);if(t.children&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': children and loadChildren cannot be used together`);if(t.redirectTo&&t.component)throw new Error(`Invalid configuration of route '${e}': redirectTo and component cannot be used together`);if(t.path&&t.matcher)throw new Error(`Invalid configuration of route '${e}': path and matcher cannot be used together`);if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error(`Invalid configuration of route '${e}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===t.path&&void 0===t.matcher)throw new Error(`Invalid configuration of route '${e}': routes must have either a path or a matcher specified`);if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error(`Invalid configuration of route '${e}': path cannot start with a slash`);if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error(`Invalid configuration of route '{path: "${e}", redirectTo: "${t.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error(`Invalid configuration of route '${e}': pathMatch can only be set to 'prefix' or 'full'`);t.children&&gt(t.children,e)}function vt(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function bt(t){const e=t.children&&t.children.map(bt),n=e?Object.assign({},t,{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==lt&&(n.component=ut),n}function wt(t,e){const n=Object.keys(t),r=Object.keys(e);if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(t[i=n[o]]!==e[i])return!1;return!0}function _t(t){return Array.prototype.concat.apply([],t)}function Et(t){return t.length>0?t[t.length-1]:null}function St(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Ct(t){return Object(i.vb)(t)?t:Object(i.wb)(t)?Object(s.a)(Promise.resolve(t)):Object(o.a)(t)}function Tt(t,e,n){return n?function(t,e){return wt(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!Dt(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>e[n]===t[n])}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,i){if(n.segments.length>i.length){return!!Dt(n.segments.slice(0,i.length),i)&&!r.hasChildren()}if(n.segments.length===i.length){if(!Dt(n.segments,i))return!1;for(const e in r.children){if(!n.children[e])return!1;if(!t(n.children[e],r.children[e]))return!1}return!0}{const t=i.slice(0,n.segments.length),o=i.slice(n.segments.length);return!!Dt(n.segments,t)&&!!n.children[lt]&&e(n.children[lt],r,o)}}(e,n,n.segments)}(t.root,e.root)}class It{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ht(this.queryParams)),this._queryParamMap}toString(){return Rt.serialize(this)}}class At{constructor(t,e){this.segments=t,this.children=e,this.parent=null,St(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Pt(this)}}class kt{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=ht(this.parameters)),this._parameterMap}toString(){return Ut(this)}}function Dt(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}function Nt(t,e){let n=[];return St(t.children,(t,r)=>{r===lt&&(n=n.concat(e(t,r)))}),St(t.children,(t,r)=>{r!==lt&&(n=n.concat(e(t,r)))}),n}class Ot{}class xt{parse(t){const e=new Ht(t);return new It(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`${`/${function t(e,n){if(!e.hasChildren())return Pt(e);if(n){const n=e.children[lt]?t(e.children[lt],!1):"",r=[];return St(e.children,(e,n)=>{n!==lt&&r.push(`${n}:${t(e,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=Nt(e,(n,r)=>r===lt?[t(e.children[lt],!1)]:[`${r}:${t(n,!1)}`]);return`${Pt(e)}/(${n.join("//")})`}}(t.root,!0)}`}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Lt(e)}=${Lt(t)}`).join("&"):`${Lt(e)}=${Lt(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const Rt=new xt;function Pt(t){return t.segments.map(t=>Ut(t)).join("/")}function Mt(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Lt(t){return Mt(t).replace(/%3B/gi,";")}function Vt(t){return Mt(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function jt(t){return decodeURIComponent(t)}function Ft(t){return jt(t.replace(/\+/g,"%20"))}function Ut(t){return`${Vt(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Vt(t)}=${Vt(e[t])}`).join("")}`;var e}const qt=/^[^\/()?;=#]+/;function Bt(t){const e=t.match(qt);return e?e[0]:""}const Gt=/^[^=?&#]+/,zt=/^[^?&#]+/;class Ht{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new At([],{}):new At([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[lt]=new At(t,e)),n}parseSegment(){const t=Bt(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new kt(jt(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Bt(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Bt(this.remaining);t&&this.capture(n=t)}t[jt(e)]=jt(n)}parseQueryParam(t){const e=function(t){const e=t.match(Gt);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(zt);return e?e[0]:""}(this.remaining);t&&this.capture(n=t)}const r=Ft(e),i=Ft(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(t[r]=e=[e]),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Bt(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=lt);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o[lt]:new At([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Wt{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Kt(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Kt(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Qt(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Qt(t,this._root).map(t=>t.value)}}function Kt(t,e){if(t===e.value)return e;for(const n of e.children){const e=Kt(t,n);if(e)return e}return null}function Qt(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Qt(t,n);if(r.length)return r.unshift(e),r}return[]}class $t{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Yt(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Jt extends Wt{constructor(t,e){super(t),this.snapshot=e,re(this,t)}toString(){return this.snapshot.toString()}}function Xt(t,e){const n=function(t,e){const n=new ee([],{},{},"",{},lt,e,null,t.root,-1,{});return new ne("",new $t(n,[]))}(t,e),r=new a.a([new kt("",{})]),i=new a.a({}),o=new a.a({}),s=new a.a({}),u=new a.a(""),l=new Zt(r,i,s,u,o,lt,e,n.root);return l.snapshot=n.root,new Jt(new $t(l,[]),n)}class Zt{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(p.a)(t=>ht(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(p.a)(t=>ht(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function te(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign({},t.params,e.params),data:Object.assign({},t.data,e.data),resolve:Object.assign({},t.resolve,e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class ee{constructor(t,e,n,r,i,o,s,a,u,l,c){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ht(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ht(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ne extends Wt{constructor(t,e){super(e),this.url=t,re(this,e)}toString(){return ie(this._root)}}function re(t,e){e.value._routerState=t,e.children.forEach(e=>re(t,e))}function ie(t){const e=t.children.length>0?` { ${t.children.map(ie).join(", ")} } `:"";return`${t.value}${e}`}function oe(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,wt(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),wt(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!wt(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),wt(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function se(t,e){var n,r;return wt(t.params,e.params)&&Dt(n=t.url,r=e.url)&&n.every((t,e)=>wt(t.parameters,r[e].parameters))&&!(!t.parent!=!e.parent)&&(!t.parent||se(t.parent,e.parent))}function ae(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function ue(t,e,n,r,i){let o={};return r&&St(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new It(n.root===t?e:function t(e,n,r){const i={};return St(e.children,(e,o)=>{i[o]=e===n?r:t(e,n,r)}),new At(e.segments,i)}(n.root,t,e),o,i)}class le{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&ae(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(t=>"object"==typeof t&&null!=t&&t.outlets);if(r&&r!==Et(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ce{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function he(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets[lt]:`${t}`}function de(t,e,n){if(t||(t=new At([],{})),0===t.segments.length&&t.hasChildren())return fe(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=he(n[r]),a=r<n.length-1?n[r+1]:null;if(i>0&&void 0===s)break;if(s&&a&&"object"==typeof a&&void 0===a.outlets){if(!ye(s,a,e))return o;r+=2}else{if(!ye(s,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new At(t.segments.slice(0,r.pathIndex),{});return e.children[lt]=new At(t.segments.slice(r.pathIndex),t.children),fe(e,0,i)}return r.match&&0===i.length?new At(t.segments,{}):r.match&&!t.hasChildren()?pe(t,e,n):r.match?fe(t,0,i):pe(t,e,n)}function fe(t,e,n){if(0===n.length)return new At(t.segments,{});{const r=function(t){return"object"!=typeof t[0]?{[lt]:t}:void 0===t[0].outlets?{[lt]:t}:t[0].outlets}(n),i={};return St(r,(n,r)=>{null!==n&&(i[r]=de(t.children[r],e,n))}),St(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new At(t.segments,i)}}function pe(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){if("object"==typeof n[i]&&void 0!==n[i].outlets){const t=me(n[i].outlets);return new At(r,t)}if(0===i&&ae(n[0])){r.push(new kt(t.segments[e].path,n[0])),i++;continue}const o=he(n[i]),s=i<n.length-1?n[i+1]:null;o&&s&&ae(s)?(r.push(new kt(o,ge(s))),i+=2):(r.push(new kt(o,{})),i++)}return new At(r,{})}function me(t){const e={};return St(t,(t,n)=>{null!==t&&(e[n]=pe(new At([],{}),0,t))}),e}function ge(t){const e={};return St(t,(t,n)=>e[n]=`${t}`),e}function ye(t,e,n){return t==n.path&&wt(e,n.parameters)}const ve=(t,e,n)=>Object(p.a)(r=>(new be(e,r.targetRouterState,r.currentRouterState,n).activate(t),r));class be{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),oe(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Yt(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),St(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet);if(n){const r=Yt(t),i=t.value.component?n.children:e;St(r,(t,e)=>this.deactivateRouteAndItsChildren(t,i)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(t,e,n){const r=Yt(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new st(t.value.snapshot))}),t.children.length&&this.forwardEvent(new it(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(oe(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),we(t.route)}else{const n=function(t){for(let e=r.snapshot.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function we(t){oe(t.value),t.children.forEach(we)}function _e(t){return"function"==typeof t}function Ee(t){return t instanceof It}class Se{constructor(t){this.segmentGroup=t||null}}class Ce{constructor(t){this.urlTree=t}}function Te(t){return new u.a(e=>e.error(new Se(t)))}function Ie(t){return new u.a(e=>e.error(new Ce(t)))}function Ae(t){return new u.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class ke{constructor(t,e,n,r,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(i.v)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,lt).pipe(Object(p.a)(t=>this.createUrlTree(t,this.urlTree.queryParams,this.urlTree.fragment))).pipe(Object(A.a)(t=>{if(t instanceof Ce)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof Se)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,lt).pipe(Object(p.a)(e=>this.createUrlTree(e,t.queryParams,t.fragment))).pipe(Object(A.a)(t=>{if(t instanceof Se)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new At([],{[lt]:t}):t;return new It(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(p.a)(t=>new At([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){return function(t,e){if(0===Object.keys(t).length)return Object(o.a)({});const n=[],r=[],i={};return St(t,(t,o)=>{const s=e(o,t).pipe(Object(p.a)(t=>i[o]=t));o===lt?n.push(s):r.push(s)}),o.a.apply(null,n.concat(r)).pipe(g(),I(),Object(p.a)(()=>i))}(n.children,(n,r)=>this.expandSegmentGroup(t,e,r,n))}expandSegment(t,e,n,r,i,s){return Object(o.a)(...n).pipe(Object(p.a)(a=>this.expandSegmentAgainstRoute(t,e,n,a,r,i,s).pipe(Object(A.a)(t=>{if(t instanceof Se)return Object(o.a)(null);throw t}))),g(),Object(k.a)(t=>!!t),Object(A.a)((t,n)=>{if(t instanceof l.a||"EmptyError"===t.name){if(this.noLeftoversInUrl(e,r,i))return Object(o.a)(new At([],{}));throw new Se(e)}throw t}))}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return xe(r)!==o?Te(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):Te(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Ie(i):this.lineralizeSegments(n,i).pipe(Object(D.a)(n=>{const i=new At(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:l}=De(e,r,i);if(!s)return Te(e);const c=this.applyRedirectCommands(a,r.redirectTo,l);return r.redirectTo.startsWith("/")?Ie(c):this.lineralizeSegments(r,c).pipe(Object(D.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(Object(p.a)(t=>(n._loadedConfig=t,new At(r,{})))):Object(o.a)(new At(r,{}));const{matched:i,consumedSegments:s,lastChild:a}=De(e,n,r);if(!i)return Te(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe(Object(D.a)(t=>{const n=t.module,r=t.routes,{segmentGroup:i,slicedSegments:a}=function(t,e,n,r){return n.length>0&&function(t,e,n){return r.some(n=>Oe(t,e,n)&&xe(n)!==lt)}(t,n)?{segmentGroup:Ne(new At(e,function(t,e){const n={};n[lt]=e;for(const r of t)""===r.path&&xe(r)!==lt&&(n[xe(r)]=new At([],{}));return n}(r,new At(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return r.some(n=>Oe(t,e,n))}(t,n)?{segmentGroup:Ne(new At(t.segments,function(t,e,n,r){const i={};for(const o of n)Oe(t,e,o)&&!r[xe(o)]&&(i[xe(o)]=new At([],{}));return Object.assign({},r,i)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,s,u,r);return 0===a.length&&i.hasChildren()?this.expandChildren(n,r,i).pipe(Object(p.a)(t=>new At(s,t))):0===r.length&&0===a.length?Object(o.a)(new At(s,{})):this.expandSegment(n,i,r,a,lt,!0).pipe(Object(p.a)(t=>new At(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(o.a)(new mt(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(o.a)(e._loadedConfig):function(t,e,n){const r=e.canLoad;return r&&0!==r.length?Object(s.a)(r).pipe(Object(p.a)(r=>{const i=t.get(r);let o;if(function(t){return t&&_e(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!_e(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return Ct(o)})).pipe(g(),(i=t=>!0===t,t=>t.lift(new N(i,void 0,t)))):Object(o.a)(!0);var i}(t.injector,e,n).pipe(Object(D.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(p.a)(t=>(e._loadedConfig=t,t))):function(t){return new u.a(e=>e.error(ft(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(o.a)(new mt([],t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(o.a)(n);if(r.numberOfChildren>1||!r.children[lt])return Ae(t.redirectTo);r=r.children[lt]}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new It(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return St(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return St(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new At(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function De(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(e.matcher||pt)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function Ne(t){if(1===t.numberOfChildren&&t.children[lt]){const e=t.children[lt];return new At(t.segments.concat(e.segments),e.children)}return t}function Oe(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function xe(t){return t.outlet||lt}class Re{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Pe{constructor(t,e){this.component=t,this.route=e}}function Me(t,e,n){const r=t._root;return function t(e,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=Yt(n);return e.children.forEach(e=>{!function(e,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,a=n?n.value:null,u=r?r.getContext(e.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const l=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Dt(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Dt(t.url,e.url)||!wt(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!se(t,e)||!wt(t.queryParams,e.queryParams);case"paramsChange":default:return!se(t,e)}}(a,s,s.routeConfig.runGuardsAndResolvers);l?o.canActivateChecks.push(new Re(i)):(s.data=a.data,s._resolvedData=a._resolvedData),t(e,n,s.component?u?u.children:null:r,i,o),l&&o.canDeactivateChecks.push(new Pe(u&&u.outlet&&u.outlet.component||null,a))}else a&&Ve(n,u,o),o.canActivateChecks.push(new Re(i)),t(e,null,s.component?u?u.children:null:r,i,o)}(e,s[e.value.outlet],r,i.concat([e.value]),o),delete s[e.value.outlet]}),St(s,(t,e)=>Ve(t,r.getContext(e),o)),o}(r,e?e._root:null,n,[r.value])}function Le(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Ve(t,e,n){const r=Yt(t),i=t.value;St(r,(t,r)=>{Ve(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Pe(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}const je=Symbol("INITIAL_VALUE");function Fe(){return Object(x.a)(t=>Object(c.a)(...t.map(t=>t.pipe(Object(R.a)(1),function(...t){return e=>{let n=t[t.length-1];Object(L.a)(n)?t.pop():n=null;const r=t.length;return function(...t){return g()(Object(o.a)(...t))}(1!==r||n?r>0?Object(P.a)(t,n):Object(h.b)(n):Object(M.a)(t[0]),e)}}(je)))).pipe(Object(V.a)((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==je)return t;if(r===je&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||Ee(r))return r}return t},t)},je),Object(y.a)(t=>t!==je),Object(p.a)(t=>Ee(t)?t:!0===t),Object(R.a)(1)))}function Ue(t,e){return null!==t&&e&&e(new ot(t)),Object(o.a)(!0)}function qe(t,e){return null!==t&&e&&e(new rt(t)),Object(o.a)(!0)}function Be(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(o.a)(!0);const i=r.map(r=>d(()=>{const i=Le(r,e,n);let o;if(function(t){return t&&_e(t.canActivate)}(i))o=Ct(i.canActivate(e,t));else{if(!_e(i))throw new Error("Invalid CanActivate guard");o=Ct(i(e,t))}return o.pipe(Object(k.a)())}));return Object(o.a)(i).pipe(Fe())}function Ge(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>(function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null})(t)).filter(t=>null!==t).map(e=>d(()=>{const i=e.guards.map(i=>{const o=Le(i,e.node,n);let s;if(function(t){return t&&_e(t.canActivateChild)}(o))s=Ct(o.canActivateChild(r,t));else{if(!_e(o))throw new Error("Invalid CanActivateChild guard");s=Ct(o(r,t))}return s.pipe(Object(k.a)())});return Object(o.a)(i).pipe(Fe())}));return Object(o.a)(i).pipe(Fe())}class ze{}class He{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){try{const e=Qe(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,n=this.processSegmentGroup(this.config,e,lt),r=new ee([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},lt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new $t(r,n),s=new ne(this.url,i);return this.inheritParamsAndData(s._root),Object(o.a)(s)}catch(t){return new u.a(e=>e.error(t))}}inheritParamsAndData(t){const e=t.value,n=te(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=Nt(e,(e,n)=>this.processSegmentGroup(t,e,n));return function(t){const e={};n.forEach(t=>{const n=e[t.value.outlet];if(n){const e=n.url.map(t=>t.toString()).join("/"),r=t.value.url.map(t=>t.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${e}' and '${r}'.`)}e[t.value.outlet]=t.value})}(),n.sort((t,e)=>t.value.outlet===lt?-1:e.value.outlet===lt?1:t.value.outlet.localeCompare(e.value.outlet)),n}processSegment(t,e,n,r){for(const o of t)try{return this.processSegmentAgainstRoute(o,e,n,r)}catch(i){if(!(i instanceof ze))throw i}if(this.noLeftoversInUrl(e,n,r))return[];throw new ze}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo)throw new ze;if((t.outlet||lt)!==r)throw new ze;let i,o=[],s=[];if("**"===t.path){const o=n.length>0?Et(n).parameters:{};i=new ee(n,o,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Je(t),r,t.component,t,We(e),Ke(e)+n.length,Xe(t))}else{const a=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new ze;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(e.matcher||pt)(n,t,e);if(!r)throw new ze;const i={};St(r.posParams,(t,e)=>{i[e]=t.path});const o=r.consumed.length>0?Object.assign({},i,r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o}}(e,t,n);o=a.consumedSegments,s=n.slice(a.lastChild),i=new ee(o,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Je(t),r,t.component,t,We(e),Ke(e)+o.length,Xe(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:l}=Qe(e,o,s,a,this.relativeLinkResolution);if(0===l.length&&u.hasChildren()){const t=this.processChildren(a,u);return[new $t(i,t)]}if(0===a.length&&0===l.length)return[new $t(i,[])];const c=this.processSegment(a,u,l,lt);return[new $t(i,c)]}}function We(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Ke(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)n+=(e=e._sourceSegment)._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Qe(t,e,n,r,i){if(n.length>0&&function(t,e,n){return r.some(n=>$e(t,e,n)&&Ye(n)!==lt)}(t,n)){const i=new At(e,function(t,e,n,r){const i={};i[lt]=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&Ye(o)!==lt){const n=new At([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[Ye(o)]=n}return i}(t,e,r,new At(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return r.some(n=>$e(t,e,n))}(t,n)){const o=new At(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if($e(t,n,a)&&!i[Ye(a)]){const n=new At([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[Ye(a)]=n}return Object.assign({},i,s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new At(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function $e(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function Ye(t){return t.outlet||lt}function Je(t){return t.data||{}}function Xe(t){return t.resolve||{}}function Ze(t,e,n,r){const i=Le(t,e,r);return Ct(i.resolve?i.resolve(e,n):i(e,n))}function tn(t){return function(e){return e.pipe(Object(x.a)(e=>{const n=t(e);return n?Object(s.a)(n).pipe(Object(p.a)(()=>e)):Object(s.a)([e])}))}}class en{}class nn{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}const rn=new i.o("ROUTES");class on{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(Object(p.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new mt(_t(r.injector.get(rn)).map(bt),r)}))}loadModuleFactory(t){return"string"==typeof t?Object(s.a)(this.loader.load(t)):Ct(t()).pipe(Object(D.a)(t=>t instanceof i.t?Object(o.a)(t):Object(s.a)(this.compiler.compileModuleAsync(t))))}}class sn{}class an{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function un(t){throw t}function ln(t,e,n){return e.parse("/")}function cn(t,e){return Object(o.a)(null)}class hn{constructor(t,e,n,r,o,s,u,l){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=r,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new f.a,this.errorHandler=un,this.malformedUriErrorHandler=ln,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:cn,afterPreactivation:cn},this.urlHandlingStrategy=new an,this.routeReuseStrategy=new nn,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=o.get(i.v),this.console=o.get(i.Y);const c=o.get(i.x);this.isNgZoneEnabled=c instanceof i.x,this.resetConfig(l),this.currentUrlTree=new It(new At([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new on(s,u,t=>this.triggerEvent(new et(t)),t=>this.triggerEvent(new nt(t))),this.routerState=Xt(this.currentUrlTree,this.rootComponentType),this.transitions=new a.a({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Object(y.a)(t=>0!==t.id),Object(p.a)(t=>Object.assign({},t,{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Object(x.a)(t=>{let n=!1,r=!1;return Object(o.a)(t).pipe(Object(U.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign({},this.lastSuccessfulNavigation,{previousNavigation:null}):null}}),Object(x.a)(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(o.a)(t).pipe(Object(x.a)(t=>{const n=this.transitions.getValue();return e.next(new W(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?h.a:[t]}),Object(x.a)(t=>Promise.resolve(t)),function(t,e,n,r){return function(i){return i.pipe(Object(x.a)(i=>(function(t,e,n,r,o){return new ke(t,e,n,i.extractedUrl,o).apply()})(t,e,n,0,r).pipe(Object(p.a)(t=>Object.assign({},i,{urlAfterRedirects:t})))))}}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Object(U.a)(t=>{this.currentNavigation=Object.assign({},this.currentNavigation,{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return function(o){return o.pipe(Object(D.a)(o=>(function(t,e,n,r,i="emptyOnly",o="legacy"){return new He(t,e,n,r,i,o).recognize()})(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(p.a)(t=>Object.assign({},o,{targetSnapshot:t})))))}}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(U.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),Object(U.a)(t=>{const n=new Y(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:s,extras:a}=t,u=new W(n,this.serializeUrl(r),i,s);e.next(u);const l=Xt(r,this.rootComponentType).snapshot;return Object(o.a)(Object.assign({},t,{targetSnapshot:l,urlAfterRedirects:r,extras:Object.assign({},a,{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),h.a}),tn(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(U.a)(t=>{const e=new J(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(p.a)(t=>Object.assign({},t,{guards:Me(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return function(n){return n.pipe(Object(D.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:u}}=n;return 0===u.length&&0===a.length?Object(o.a)(Object.assign({},n,{guardsResult:!0})):function(t,e,n,r){return Object(s.a)(t).pipe(Object(D.a)(t=>(function(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||0===s.length)return Object(o.a)(!0);const a=s.map(o=>{const s=Le(o,e,i);let a;if(function(t){return t&&_e(t.canDeactivate)}(s))a=Ct(s.canDeactivate(t,e,n,r));else{if(!_e(s))throw new Error("Invalid CanDeactivate guard");a=Ct(s(t,e,n,r))}return a.pipe(Object(k.a)())});return Object(o.a)(a).pipe(Fe())})(t.component,t.route,n,e,r)),Object(k.a)(t=>!0!==t,!0))}(u,r,i,t).pipe(Object(D.a)(n=>n&&function(t){return"boolean"==typeof n}()?function(t,e,n,r){return Object(s.a)(e).pipe(j(e=>Object(s.a)([qe(e.route.parent,r),Ue(e.route,r),Ge(t,e.path,n),Be(t,e.route,n)]).pipe(g(),Object(k.a)(t=>!0!==t,!0))),Object(k.a)(t=>!0!==t,!0))}(r,a,t,e):Object(o.a)(n)),Object(p.a)(t=>Object.assign({},n,{guardsResult:t})))}))}}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(U.a)(t=>{if(Ee(t.guardsResult)){const e=ft(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}}),Object(U.a)(t=>{const e=new X(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Object(y.a)(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Q(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),tn(t=>{if(t.guards.canActivateChecks.length)return Object(o.a)(t).pipe(Object(U.a)(t=>{const e=new Z(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),function(t,e){return function(n){return n.pipe(Object(D.a)(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;return i.length?Object(s.a)(i).pipe(j(n=>(function(t,e,n,i){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(o.a)({});if(1===i.length){const o=i[0];return Ze(t[o],e,n,r).pipe(Object(p.a)(t=>({[o]:t})))}const a={};return Object(s.a)(i).pipe(Object(D.a)(i=>Ze(t[i],e,n,r).pipe(Object(p.a)(t=>(a[i]=t,t))))).pipe(I(),Object(p.a)(()=>a))}(t._resolve,t,r,i).pipe(Object(p.a)(e=>(t._resolvedData=e,t.data=Object.assign({},t.data,te(t,n).resolve),null)))})(n.route,0,t,e)),function(t,e){return arguments.length>=2?function(n){return Object(F.a)(Object(V.a)(t,e),w(1),Object(C.a)(e))(n)}:function(e){return Object(F.a)(Object(V.a)((e,n,r)=>t(e,n,r+1)),w(1))(e)}}((t,e)=>t),Object(p.a)(t=>n)):Object(o.a)(n)}))}}(this.paramsInheritanceStrategy,this.ngModule.injector),Object(U.a)(t=>{const e=new tt(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),tn(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(p.a)(t=>{const e=function(t,e,n){const r=function t(e,n,r){if(r&&e.shouldReuseRoute(n.value,r.value.snapshot)){const i=r.value;i._futureSnapshot=n.value;const o=function(e,n,r){return n.children.map(n=>{for(const i of r.children)if(e.shouldReuseRoute(i.value.snapshot,n.value))return t(e,n,i);return t(e,n)})}(e,n,r);return new $t(i,o)}{const r=e.retrieve(n.value);if(r){const t=r.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(let r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(n,t),t}{const r=new Zt(new a.a((i=n.value).url),new a.a(i.params),new a.a(i.queryParams),new a.a(i.fragment),new a.a(i.data),i.outlet,i.component,i),o=n.children.map(n=>t(e,n));return new $t(r,o)}}var i}(t,e._root,n?n._root:void 0);return new Jt(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign({},t,{targetRouterState:e})}),Object(U.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),ve(this.rootContexts,this.routeReuseStrategy,t=>this.triggerEvent(t)),Object(U.a)({next(){n=!0},complete(){n=!0}}),function(t){return e=>e.lift(new B(t))}(()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new Q(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null}),Object(A.a)(n=>{if(r=!0,function(t){return n&&n[dt]}()){const r=Ee(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Q(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),t.resolve(!1),r&&this.navigateByUrl(n.url)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new $(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(i){t.reject(i)}}return h.a}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign({},this.getTransition(),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{let e=this.parseUrl(t.url);const n="popstate"===t.type?"popstate":"hashchange",r=t.state&&t.state.navigationId?t.state:null;setTimeout(()=>{this.scheduleNavigation(e,n,r,{replaceUrl:!0})},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){gt(t),this.config=t.map(bt),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:o,preserveQueryParams:s,queryParamsHandling:a,preserveFragment:u}=e;Object(i.T)()&&s&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const l=n||this.routerState.root,c=u?this.currentUrlTree.fragment:o;let h=null;if(a)switch(a){case"merge":h=Object.assign({},this.currentUrlTree.queryParams,r);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=r||null}else h=s?this.currentUrlTree.queryParams:r||null;return null!==h&&(h=this.removeEmptyProps(h)),function(t,e,n,r,i){if(0===n.length)return ue(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new le(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return St(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new le(n,e,r)}(n);if(o.toRoot())return ue(e.root,new At([],{}),e,r,i);const s=function(t,n,r){if(t.isAbsolute)return new ce(e.root,!0,0);if(-1===r.snapshot._lastPathIndex)return new ce(r.snapshot._urlSegment,!0,0);const i=ae(t.commands[0])?0:1;return function(e,n,o){let s=r.snapshot._urlSegment,a=r.snapshot._lastPathIndex+i,u=t.numberOfDoubleDots;for(;u>a;){if(u-=a,!(s=s.parent))throw new Error("Invalid number of '../'");a=s.segments.length}return new ce(s,!1,a-u)}()}(o,0,t),a=s.processChildren?fe(s.segmentGroup,s.index,o.commands):de(s.segmentGroup,s.index,o.commands);return ue(s.segmentGroup,a,e,r,i)}(l,this.currentUrlTree,t,h,c)}navigateByUrl(t,e={skipLocationChange:!1}){Object(i.T)()&&this.isNgZoneEnabled&&!i.x.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=Ee(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}isActive(t,e){if(Ee(t))return Tt(this.currentUrlTree,t,e);const n=this.parseUrl(t);return Tt(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new K(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r){const i=this.getTransition();if(i&&"imperative"!==e&&"imperative"===i.source&&i.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(i&&"hashchange"==e&&"popstate"===i.source&&i.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(i&&"popstate"==e&&"hashchange"===i.source&&i.rawUrl.toString()===t.toString())return Promise.resolve(!0);let o=null,s=null;const a=new Promise((t,e)=>{o=t,s=e}),u=++this.navigationId;return this.setTransition({id:u,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:o,reject:s,promise:a,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),a.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign({},r,{navigationId:n})):this.location.go(i,"",Object.assign({},r,{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}class dn{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}set preserveQueryParams(t){Object(i.T)()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated!, use queryParamsHandling instead."),this.preserve=t}onClick(){const t={skipLocationChange:pn(this.skipLocationChange),replaceUrl:pn(this.replaceUrl)};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:pn(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:pn(this.preserveFragment)})}}class fn{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.subscription=t.events.subscribe(t=>{t instanceof K&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}set preserveQueryParams(t){Object(i.T)()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=t}ngOnChanges(t){this.updateTargetUrlAndHref()}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r){if(0!==t||e||n||r)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const i={skipLocationChange:pn(this.skipLocationChange),replaceUrl:pn(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,i),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:pn(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:pn(this.preserveFragment)})}}function pn(t){return""===t||!!t}class mn{constructor(t,e,n,r,i){this.router=t,this.element=e,this.renderer=n,this.link=r,this.linkWithHref=i,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.subscription=t.events.subscribe(t=>{t instanceof K&&this.update()})}ngAfterContentInit(){this.links.changes.subscribe(t=>this.update()),this.linksWithHrefs.changes.subscribe(t=>this.update()),this.update()}set routerLinkActive(t){const e=Array.isArray(t)?t:t.split(" ");this.classes=e.filter(t=>!!t)}ngOnChanges(t){this.update()}ngOnDestroy(){this.subscription.unsubscribe()}update(){this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.classes.forEach(e=>{t?this.renderer.addClass(this.element.nativeElement,e):this.renderer.removeClass(this.element.nativeElement,e)}))})}isLinkActive(t){return e=>t.isActive(e.urlTree,this.routerLinkActiveOptions.exact)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}class gn{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new yn,this.attachRef=null}}class yn{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new gn,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class vn{constructor(t,e,n,r,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new i.m,this.deactivateEvents=new i.m,this.name=r||lt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new bn(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}class bn{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Zt?this.route:t===yn?this.childContexts:this.parent.get(t,e)}}class wn{}class _n{preload(t,e){return e().pipe(Object(A.a)(()=>Object(o.a)(null)))}}class En{preload(t,e){return Object(o.a)(null)}}class Sn{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new on(e,n,e=>t.triggerEvent(new et(e)),e=>t.triggerEvent(new nt(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Object(y.a)(t=>t instanceof K),j(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(i.v);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(s.a)(n).pipe(Object(m.a)(),Object(p.a)(t=>void 0))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(Object(D.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}class Cn{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof W?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof K&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof at&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new at(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}const Tn=new i.o("ROUTER_CONFIGURATION"),In=new i.o("ROUTER_FORROOT_GUARD"),An=[r.h,{provide:Ot,useClass:xt},{provide:hn,useFactory:Pn,deps:[i.g,Ot,yn,r.h,i.p,i.u,i.i,rn,Tn,[sn,new i.y],[en,new i.y]]},yn,{provide:Zt,useFactory:Mn,deps:[hn]},{provide:i.u,useClass:i.H},Sn,En,_n,{provide:Tn,useValue:{enableTracing:!1}}];function kn(){return new i.w("Router",hn)}class Dn{constructor(t,e){}static forRoot(t,e){return{ngModule:Dn,providers:[An,Rn(t),{provide:In,useFactory:xn,deps:[[hn,new i.y,new i.G]]},{provide:Tn,useValue:e||{}},{provide:r.i,useFactory:On,deps:[r.r,[new i.n(r.a),new i.y],Tn]},{provide:Cn,useFactory:Nn,deps:[hn,r.s,Tn]},{provide:wn,useExisting:e&&e.preloadingStrategy?e.preloadingStrategy:En},{provide:i.w,multi:!0,useFactory:kn},[Ln,{provide:i.d,multi:!0,useFactory:Vn,deps:[Ln]},{provide:Fn,useFactory:jn,deps:[Ln]},{provide:i.b,multi:!0,useExisting:Fn}]]}}static forChild(t){return{ngModule:Dn,providers:[Rn(t)]}}}function Nn(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Cn(t,e,n)}function On(t,e,n={}){return n.useHash?new r.f(t,e):new r.q(t,e)}function xn(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Rn(t){return[{provide:i.a,multi:!0,useValue:t},{provide:rn,multi:!0,useValue:t}]}function Pn(t,e,n,r,i,o,s,a,u={},l,c){const h=new hn(null,e,n,r,i,o,s,_t(a));if(l&&(h.urlHandlingStrategy=l),c&&(h.routeReuseStrategy=c),u.errorHandler&&(h.errorHandler=u.errorHandler),u.malformedUriErrorHandler&&(h.malformedUriErrorHandler=u.malformedUriErrorHandler),u.enableTracing){const t=Object(z.r)();h.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return u.onSameUrlNavigation&&(h.onSameUrlNavigation=u.onSameUrlNavigation),u.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=u.paramsInheritanceStrategy),u.urlUpdateStrategy&&(h.urlUpdateStrategy=u.urlUpdateStrategy),u.relativeLinkResolution&&(h.relativeLinkResolution=u.relativeLinkResolution),h}function Mn(t){return t.routerState.root}class Ln{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new f.a}appInitializer(){return this.injector.get(r.g,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(hn),r=this.injector.get(Tn);if(this.isLegacyDisabled(r)||this.isLegacyEnabled(r))t(!0);else if("disabled"===r.initialNavigation)n.setUpLocationChangeListener(),t(!0);else{if("enabled"!==r.initialNavigation)throw new Error(`Invalid initialNavigation options: '${r.initialNavigation}'`);n.hooks.afterPreactivation=()=>this.initNavigation?Object(o.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()}return e})}bootstrapListener(t){const e=this.injector.get(Tn),n=this.injector.get(Sn),r=this.injector.get(Cn),o=this.injector.get(hn),s=this.injector.get(i.g);t===s.components[0]&&(this.isLegacyEnabled(e)?o.initialNavigation():this.isLegacyDisabled(e)&&o.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}isLegacyDisabled(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}}function Vn(t){return t.appInitializer.bind(t)}function jn(t){return t.bootstrapListener.bind(t)}const Fn=new i.o("Router Initializer")},irV9:function(t,e,n){"use strict";n.d(e,"a",function(){return l}),n("mrSG");var r=n("HDdC"),i=n("Cfvw"),o=n("LRne"),s=n("eIep"),a=n("1XSQ"),u=n("yA/v");let l=class{constructor(t,e,n,l){this.zone=l;const c=new a.a(l,n);this.auth=l.runOutsideAngular(()=>Object(u.e)(t,e).auth()),this.authState=c.keepUnstableUntilFirst(c.runOutsideAngular(new r.a(t=>({unsubscribe:this.auth.onAuthStateChanged(t)})))),this.user=c.keepUnstableUntilFirst(c.runOutsideAngular(new r.a(t=>({unsubscribe:this.auth.onIdTokenChanged(t)})))),this.idToken=this.user.pipe(Object(s.a)(t=>t?Object(i.a)(t.getIdToken()):Object(o.a)(null))),this.idTokenResult=this.user.pipe(Object(s.a)(t=>t?Object(i.a)(t.getIdTokenResult()):Object(o.a)(null)))}}},itXk:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("z+Ro"),i=n("DH7j"),o=n("l7GE"),s=n("ZUHj"),a=n("yCtX");const u={};function l(...t){let e=null,n=null;return Object(r.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(i.a)(t[0])&&(t=t[0]),Object(a.a)(t,n).lift(new c(e))}class c{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new h(t,this.resultSelector))}}class h extends o.a{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(u),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++){const e=t[n];this.add(Object(s.a)(this,e,e,n))}}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n,r,i){const o=this.values,s=this.toRespond?o[n]===u?--this.toRespond:this.toRespond:0;o[n]=e,0===s&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r="function"==typeof Symbol&&Symbol.observable||"@@observable"},l7GE:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");class i extends r.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}},lGQG:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("2Vo4"),i=n("Cfvw"),o=n("itXk"),s=n("lJxs"),a=n("vkgz"),u=n("8Y7J"),l=n("irV9"),c=n("8OjO");let h=(()=>{class t{constructor(t,e){this.afAuth=t,this.crudService=e,this.subjectUsuario=new r.a(this.getUser())}getUser(){return JSON.parse(sessionStorage.getItem("currentUser"))}getUser$(){return this.subjectUsuario.asObservable()}sendUser(t){this.subjectUsuario.next(t)}login$(t,e){const n=Object(i.a)(this.afAuth.auth.signInWithEmailAndPassword(t,e)).pipe(Object(s.a)(t=>t.user.email)),r=this.crudService.getRecordByField$("users","email",t);return Object(o.a)(n,r).pipe(Object(s.a)(t=>t[1]),Object(a.a)(t=>this.setAndSendUsuario(t)))}logoutUser(){return this.setAndSendUsuario(null),this.afAuth.auth.signOut()}setAndSendUsuario(t){sessionStorage.setItem("currentUser",JSON.stringify(t)),this.sendUser(t)}}return t.ngInjectableDef=u.Mb({factory:function(){return new t(u.Nb(l.a),u.Nb(c.a))},token:t,providedIn:"root"}),t})()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mCNh:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("KqfI");function i(...t){return o(t)}function o(t){return t?1===t.length?t[0]:function(e){return t.reduce((t,e)=>e(t),e)}:r.a}},mrSG:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",function(){return i}),n.d(e,"__assign",function(){return o}),n.d(e,"__rest",function(){return s}),n.d(e,"__decorate",function(){return a}),n.d(e,"__param",function(){return u}),n.d(e,"__metadata",function(){return l}),n.d(e,"__awaiter",function(){return c}),n.d(e,"__generator",function(){return h}),n.d(e,"__exportStar",function(){return d}),n.d(e,"__values",function(){return f}),n.d(e,"__read",function(){return p}),n.d(e,"__spread",function(){return m}),n.d(e,"__spreadArrays",function(){return g}),n.d(e,"__await",function(){return y}),n.d(e,"__asyncGenerator",function(){return v}),n.d(e,"__asyncDelegator",function(){return b}),n.d(e,"__asyncValues",function(){return w}),n.d(e,"__makeTemplateObject",function(){return _}),n.d(e,"__importStar",function(){return E}),n.d(e,"__importDefault",function(){return S});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function a(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function u(t,e){return function(n,r){e(n,r,t)}}function l(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function c(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e||[])).next())})}function h(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function d(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function f(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function p(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function m(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(p(arguments[e]));return t}function g(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function y(t){return this instanceof y?(this.v=t,this):new y(t)}function v(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(t){i[t]&&(r[t]=function(e){return new Promise(function(n,r){o.push([t,e,n,r])>1||a(t,e)})})}function a(t,e){try{(n=i[t](e)).value instanceof y?Promise.resolve(n.value.v).then(u,l):c(o[0][2],n)}catch(r){c(o[0][3],r)}var n}function u(t){a("next",t)}function l(t){a("throw",t)}function c(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}}function b(t){var e,n;return e={},r("next"),r("throw",function(t){throw t}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:y(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function w(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=f(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise(function(r,i){!function(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n})},e)}(r,i,(e=t[n](e)).done,e.value)})}}}function _(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function E(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function S(t){return t&&t.__esModule?t:{default:t}}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.closed||e.complete()}},pLZG:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){return n.lift(new o(t,e))}}class o{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.predicate,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}},pLzU:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("Lhse");const i=t=>e=>{const n=t[r.a]();for(;;){const t=n.next();if(t.done){e.complete();break}if(e.next(t.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e}},pMnS:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n("8Y7J"),i=n("iInd"),o=r.nb({encapsulation:2,styles:[],data:{}});function s(t){return r.Ib(0,[(t()(),r.pb(0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),r.ob(1,212992,null,0,i.t,[i.b,r.M,r.j,[8,null],r.h],null,null)],function(t,e){t(e,1,0)},null)}function a(t){return r.Ib(0,[(t()(),r.pb(0,0,null,null,1,"ng-component",[],null,null,null,s,o)),r.ob(1,49152,null,0,i.H,[],null,null)],null,null)}var u=r.lb("ng-component",i.H,a,{},{},[])},"q/0M":function(t,e,n){"use strict";n.r(e),n.d(e,"LogLevel",function(){return i}),n.d(e,"Logger",function(){return a}),n.d(e,"setLogLevel",function(){return u});var r=[],i=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),o=i.INFO,s=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var o=(new Date).toISOString();switch(e){case i.DEBUG:case i.VERBOSE:console.log.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case i.INFO:console.info.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case i.WARN:console.warn.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case i.ERROR:console.error.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}},a=function(){function t(t){this.name=t,this._logLevel=o,this._logHandler=s,r.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in i))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.DEBUG].concat(t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.VERBOSE].concat(t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.INFO].concat(t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.WARN].concat(t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.ERROR].concat(t))},t}();function u(t){r.forEach(function(e){e.logLevel=t})}},quSY:function(t,e,n){"use strict";var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");function s(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}s.prototype=Object.create(Error.prototype);const a=s;n.d(e,"a",function(){return u});let u=(()=>{class t{constructor(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}unsubscribe(){let t,e=!1;if(this.closed)return;let{_parent:n,_parents:s,_unsubscribe:u,_subscriptions:c}=this;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;let h=-1,d=s?s.length:0;for(;n;)n.remove(this),n=++h<d&&s[h]||null;if(Object(o.a)(u))try{u.call(this)}catch(f){e=!0,t=f instanceof a?l(f.errors):[f]}if(Object(r.a)(c))for(h=-1,d=c.length;++h<d;){const n=c[h];if(Object(i.a)(n))try{n.unsubscribe()}catch(f){e=!0,t=t||[],f instanceof a?t=t.concat(l(f.errors)):t.push(f)}}if(e)throw new a(t)}add(e){let n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;(n=new t)._subscriptions=[e]}break;default:if(!e)return t.EMPTY;throw new Error("unrecognized teardown "+e+" added to Subscription.")}if(n._addParent(this)){const t=this._subscriptions;t?t.push(n):this._subscriptions=[n]}return n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}_addParent(t){let{_parent:e,_parents:n}=this;return e!==t&&(e?n?-1===n.indexOf(t)&&(n.push(t),!0):(this._parents=[t],!0):(this._parent=t,!0))}}return t.EMPTY=function(t){return t.closed=!0,t}(new t),t})();function l(t){return t.reduce((t,e)=>t.concat(e instanceof a?e.errors:e),[])}},s7LF:function(t,e,n){"use strict";n.d(e,"y",function(){return It}),n.d(e,"C",function(){return mt}),n.d(e,"z",function(){return k}),n.d(e,"A",function(){return gt}),n.d(e,"B",function(){return L}),n.d(e,"b",function(){return d}),n.d(e,"k",function(){return u}),n.d(e,"a",function(){return l}),n.d(e,"c",function(){return c}),n.d(e,"l",function(){return p}),n.d(e,"m",function(){return g}),n.d(e,"n",function(){return y}),n.d(e,"o",function(){return ut}),n.d(e,"p",function(){return pt}),n.d(e,"r",function(){return A}),n.d(e,"e",function(){return _t}),n.d(e,"f",function(){return yt}),n.d(e,"q",function(){return R}),n.d(e,"v",function(){return x}),n.d(e,"w",function(){return M}),n.d(e,"h",function(){return Ct}),n.d(e,"i",function(){return St}),n.d(e,"s",function(){return Tt}),n.d(e,"u",function(){return Et}),n.d(e,"d",function(){return At}),n.d(e,"j",function(){return b}),n.d(e,"x",function(){return _}),n.d(e,"g",function(){return kt}),n.d(e,"t",function(){return Dt});var r=n("8Y7J"),i=n("cUpR"),o=n("cp0P"),s=n("Cfvw"),a=n("lJxs");const u=new r.o("NgValueAccessor"),l=new r.o("CompositionEventMode");class c{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=Object(i.r)()?Object(i.r)().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}class h{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class d extends h{get formDirective(){return null}get path(){return null}}function f(){throw new Error("unimplemented")}class p extends h{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){return f()}get asyncValidator(){return f()}}class m{constructor(t){this._cd=t}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}class g extends m{constructor(t){super(t)}}class y extends m{constructor(t){super(t)}}function v(t){return null==t||0===t.length}const b=new r.o("NgValidators"),w=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/;class _{static min(t){return e=>{if(v(e.value)||v(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(v(e.value)||v(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return v(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return v(t.value)?null:w.test(t.value)?null:{email:!0}}static minLength(t){return e=>{if(v(e.value))return null;const n=e.value?e.value.length:0;return n<t?{minlength:{requiredLength:t,actualLength:n}}:null}}static maxLength(t){return e=>{const n=e.value?e.value.length:0;return n>t?{maxlength:{requiredLength:t,actualLength:n}}:null}}static pattern(t){if(!t)return _.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(v(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(E);return 0==e.length?null:function(t){return C(function(t,n){return e.map(e=>e(t))}(t))}}static composeAsync(t){if(!t)return null;const e=t.filter(E);return 0==e.length?null:function(t){const n=function(t,n){return e.map(e=>e(t))}(t).map(S);return Object(o.a)(n).pipe(Object(a.a)(C))}}}function E(t){return null!=t}function S(t){const e=Object(r.wb)(t)?Object(s.a)(t):t;if(!Object(r.vb)(e))throw new Error("Expected validator to return Promise or Observable.");return e}function C(t){const e=t.reduce((t,e)=>null!=e?Object.assign({},t,e):t,{});return 0===Object.keys(e).length?null:e}function T(t){return t.validate?e=>t.validate(e):t}function I(t){return t.validate?e=>t.validate(e):t}class A{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}class k{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}const D={formControlName:'\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',formGroupName:'\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',formArrayName:'\n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });',ngModelGroup:'\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',ngModelWithFormGroup:'\n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  '};class N{static controlParentException(){throw new Error(`formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ${D.formControlName}`)}static ngModelGroupException(){throw new Error(`formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        ${D.formGroupName}\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        ${D.ngModelGroup}`)}static missingFormException(){throw new Error(`formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       ${D.formControlName}`)}static groupParentException(){throw new Error(`formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ${D.formGroupName}`)}static arrayParentException(){throw new Error(`formArrayName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        ${D.formArrayName}`)}static disabledAttrWarning(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")}static ngModelWarning(t){console.warn(`\n    It looks like you're using ngModel on the same form field as ${t}. \n    Support for using the ngModel input property and ngModelChange event with \n    reactive form directives has been deprecated in Angular v6 and will be removed \n    in Angular v7.\n    \n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/${"formControl"===t?"FormControlDirective":"FormControlName"}#use-with-ngmodel\n    `)}}function O(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}class x{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=r.xb}set compareWith(t){if("function"!=typeof t)throw new Error(`compareWith must be a function, but received ${JSON.stringify(t)}`);this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=O(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}class R{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(O(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}function P(t,e){return null==t?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}class M{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=r.xb}set compareWith(t){if("function"!=typeof t)throw new Error(`compareWith must be a function, but received ${JSON.stringify(t)}`);this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(e.hasOwnProperty("selectedOptions")){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}class L{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(P(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(P(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}function V(t,e){return[...e.path,t]}function j(t,e){t||B(e,"Cannot find control with"),e.valueAccessor||B(e,"No value accessor for form control with"),t.validator=_.compose([t.validator,e.validator]),t.asyncValidator=_.composeAsync([t.asyncValidator,e.asyncValidator]),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&F(t,e)})}(t,e),function(t,e){t.registerOnChange((t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&F(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),e.valueAccessor.setDisabledState&&t.registerOnDisabledChange(t=>{e.valueAccessor.setDisabledState(t)}),e._rawValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())}),e._rawAsyncValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())})}function F(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function U(t,e){null==t&&B(e,"Cannot find control with"),t.validator=_.compose([t.validator,e.validator]),t.asyncValidator=_.composeAsync([t.asyncValidator,e.asyncValidator])}function q(t){return B(t,"There is no FormControl instance attached to form control element with")}function B(t,e){let n;throw n=t.path.length>1?`path: '${t.path.join(" -> ")}'`:t.path[0]?`name: '${t.path}'`:"unspecified name attribute",new Error(`${e} ${n}`)}function G(t){return null!=t?_.compose(t.map(T)):null}function z(t){return null!=t?_.composeAsync(t.map(I)):null}function H(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object(r.xb)(e,n.currentValue)}const W=[class{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},class{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},A,x,M,class{constructor(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(p),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}_throwNameError(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}];function K(t,e){t._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)})}function Q(t,e){if(!e)return null;Array.isArray(e)||B(t,"Value accessor was not provided as an array for form control with");let n=void 0,r=void 0,i=void 0;return e.forEach(e=>{e.constructor===c?n=e:function(t){return W.some(e=>t.constructor===e)}(e)?(r&&B(t,"More than one built-in value accessor matches form control with"),r=e):(i&&B(t,"More than one custom value accessor matches form control with"),i=e)}),i||r||n||(B(t,"No valid value accessor for form control with"),null)}function $(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Y="VALID",J="INVALID",X="PENDING",Z="DISABLED";function tt(t){const e=nt(t)?t.validators:t;return Array.isArray(e)?G(e):e||null}function et(t,e){const n=nt(e)?e.asyncValidators:t;return Array.isArray(n)?z(n):n||null}function nt(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class rt{constructor(t,e){this.validator=t,this.asyncValidator=e,this._onCollectionChange=()=>{},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}get parent(){return this._parent}get valid(){return this.status===Y}get invalid(){return this.status===J}get pending(){return this.status==X}get disabled(){return this.status===Z}get enabled(){return this.status!==Z}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this.validator=tt(t)}setAsyncValidators(t){this.asyncValidator=et(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=X,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Z,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign({},t,{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign({},t,{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Y,this._forEachChild(e=>{e.enable(Object.assign({},t,{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign({},t,{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==Y&&this.status!==X||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Z:Y}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=X;const e=S(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>this.setErrors(e,{emitEvent:t}))}}_cancelExistingSubscription(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){return null==e?null:(e instanceof Array||(e=e.split(".")),e instanceof Array&&0===e.length?null:e.reduce((t,e)=>t instanceof ot?t.controls.hasOwnProperty(e)?t.controls[e]:null:t instanceof st&&t.at(e)||null,t))}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.m,this.statusChanges=new r.m}_calculateStatus(){return this._allControlsDisabled()?Z:this.errors?J:this._anyControlsHaveStatus(X)?X:this._anyControlsHaveStatus(J)?J:Y}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){nt(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class it extends rt{constructor(t=null,e,n){super(tt(e),et(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class ot extends rt{constructor(t,e,n){super(tt(e),et(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof it?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>t(this.controls[e],e))}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){let e=!1;return this._forEachChild((n,r)=>{e=e||this.contains(r)&&t(n)}),e}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class st extends rt{constructor(t,e,n){super(tt(e),et(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof it?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const at=(()=>Promise.resolve(null))();class ut extends d{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new r.m,this.form=new ot({},G(t),z(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){at.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),j(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){at.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),$(this._directives,t)})}addFormGroup(t){at.then(()=>{const e=this._findContainer(t.path),n=new ot({});U(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){at.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){at.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,K(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}class lt{static modelParentException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup's partner directive "formControlName" instead.  Example:\n\n      ${D.formControlName}\n\n      Or, if you'd like to avoid registering this form control, indicate that it's standalone in ngModelOptions:\n\n      Example:\n\n      ${D.ngModelWithFormGroup}`)}static formGroupNameException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      ${D.formGroupName}\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      ${D.ngModelGroup}`)}static missingNameException(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')}static modelGroupParentException(){throw new Error(`\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      ${D.formGroupName}\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      ${D.ngModelGroup}`)}static ngFormWarning(){console.warn("\n    It looks like you're using 'ngForm'.\n\n    Support for using the 'ngForm' element selector has been deprecated in Angular v6 and will be removed\n    in Angular v9.\n\n    Use 'ng-form' instead.\n\n    Before:\n    <ngForm #myForm=\"ngForm\">\n\n    After:\n    <ng-form #myForm=\"ngForm\">\n    ")}}const ct=new r.o("NgFormSelectorWarning");class ht extends d{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return V(this.name,this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return G(this._validators)}get asyncValidator(){return z(this._asyncValidators)}_checkParentType(){}}class dt extends ht{constructor(t,e,n){super(),this._parent=t,this._validators=e,this._asyncValidators=n}_checkParentType(){this._parent instanceof dt||this._parent instanceof ut||lt.modelGroupParentException()}}const ft=(()=>Promise.resolve(null))();class pt extends p{constructor(t,e,n,i){super(),this.control=new it,this._registered=!1,this.update=new r.m,this._parent=t,this._rawValidators=e||[],this._rawAsyncValidators=n||[],this.valueAccessor=Q(this,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),H(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?V(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return G(this._rawValidators)}get asyncValidator(){return z(this._rawAsyncValidators)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){j(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){!(this._parent instanceof dt)&&this._parent instanceof ht?lt.formGroupNameException():this._parent instanceof dt||this._parent instanceof ut||lt.modelParentException()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||lt.missingNameException()}_updateValue(t){ft.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;ft.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}class mt{}const gt=new r.o("NgModelWithFormControlWarning");class yt extends d{constructor(t,e){super(),this._validators=t,this._asyncValidators=e,this.submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new r.m}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return j(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){$(this.directives,t)}addFormGroup(t){const e=this.form.get(t.path);U(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormGroup(t){}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){const e=this.form.get(t.path);U(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormArray(t){}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,K(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=this.form.get(t.path);t.control!==e&&(function(t,e){e.valueAccessor.registerOnChange(()=>q(e)),e.valueAccessor.registerOnTouched(()=>q(e)),e._rawValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),e._rawAsyncValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),t&&t._clearChangeFns()}(t.control,t),e&&j(e,t),t.control=e)}),this.form._updateTreeValidity({emitEvent:!1})}_updateRegistrations(){this.form._registerOnCollectionChange(()=>this._updateDomValue()),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{}),this._oldForm=this.form}_updateValidators(){const t=G(this._validators);this.form.validator=_.compose([this.form.validator,t]);const e=z(this._asyncValidators);this.form.asyncValidator=_.composeAsync([this.form.asyncValidator,e])}_checkFormPresent(){this.form||N.missingFormException()}}class vt extends ht{constructor(t,e,n){super(),this._parent=t,this._validators=e,this._asyncValidators=n}_checkParentType(){wt(this._parent)&&N.groupParentException()}}class bt extends d{constructor(t,e,n){super(),this._parent=t,this._validators=e,this._asyncValidators=n}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return V(this.name,this._parent)}get validator(){return G(this._validators)}get asyncValidator(){return z(this._asyncValidators)}_checkParentType(){wt(this._parent)&&N.arrayParentException()}}function wt(t){return!(t instanceof vt||t instanceof yt||t instanceof bt)}let _t=(()=>{class t extends p{constructor(t,e,n,i,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new r.m,this._ngModelWarningSent=!1,this._parent=t,this._rawValidators=e||[],this._rawAsyncValidators=n||[],this.valueAccessor=Q(this,i)}set isDisabled(t){N.disabledAttrWarning()}ngOnChanges(e){var n,i;this._added||this._setUpControl(),H(e,this.viewModel)&&("formControlName",n=t,this,i=this._ngModelWarningConfig,Object(r.T)()&&"never"!==i&&((null!==i&&"once"!==i||n._ngModelWarningSentOnce)&&("always"!==i||this._ngModelWarningSent)||(N.ngModelWarning("formControlName"),n._ngModelWarningSentOnce=!0,this._ngModelWarningSent=!0)),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return V(this.name,this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return G(this._rawValidators)}get asyncValidator(){return z(this._rawAsyncValidators)}_checkParentType(){!(this._parent instanceof vt)&&this._parent instanceof ht?N.ngModelGroupException():this._parent instanceof vt||this._parent instanceof yt||this._parent instanceof bt||N.controlParentException()}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t._ngModelWarningSentOnce=!1,t})();class Et{get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!==`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?_.required(t):null}registerOnValidatorChange(t){this._onChange=t}}class St{ngOnChanges(t){"minlength"in t&&(this._createValidator(),this._onChange&&this._onChange())}validate(t){return null==this.minlength?null:this._validator(t)}registerOnValidatorChange(t){this._onChange=t}_createValidator(){this._validator=_.minLength(parseInt(this.minlength,10))}}class Ct{ngOnChanges(t){"maxlength"in t&&(this._createValidator(),this._onChange&&this._onChange())}validate(t){return null!=this.maxlength?this._validator(t):null}registerOnValidatorChange(t){this._onChange=t}_createValidator(){this._validator=_.maxLength(parseInt(this.maxlength,10))}}class Tt{ngOnChanges(t){"pattern"in t&&(this._createValidator(),this._onChange&&this._onChange())}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}_createValidator(){this._validator=_.pattern(this.pattern)}}class It{}class At{group(t,e=null){const n=this._reduceControls(t);let r=null,i=null,o=void 0;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(r=null!=e.validators?e.validators:null,i=null!=e.asyncValidators?e.asyncValidators:null,o=null!=e.updateOn?e.updateOn:void 0):(r=null!=e.validator?e.validator:null,i=null!=e.asyncValidator?e.asyncValidator:null)),new ot(n,{asyncValidators:i,updateOn:o,validators:r})}control(t,e,n){return new it(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new st(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof it||t instanceof ot||t instanceof st?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}class kt{static withConfig(t){return{ngModule:kt,providers:[{provide:ct,useValue:t.warnOnDeprecatedNgFormSelector}]}}}class Dt{static withConfig(t){return{ngModule:Dt,providers:[{provide:gt,useValue:t.warnOnNgModelWithFormControl}]}}}},sVev:function(t,e,n){"use strict";function r(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}n.d(e,"a",function(){return i}),r.prototype=Object.create(Error.prototype);const i=r},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q"),i=n("KqfI"),o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i.a,this._tapError=i.a,this._tapComplete=i.a,this._tapError=n||i.a,this._tapComplete=r||i.a,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i.a,this._tapError=e.error||i.a,this._tapComplete=e.complete||i.a)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},w1tV:function(t,e,n){"use strict";var r=n("XNiG"),i=n("HDdC"),o=n("7o/Q"),s=n("quSY");function a(){return function(t){return t.lift(new u(t))}}class u{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new l(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class l extends o.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}const c=class extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new s.a).add(this.source.subscribe(new d(this.getSubject(),this))),t.closed?(this._connection=null,t=s.a.EMPTY):this._connection=t),t}refCount(){return a()(this)}}.prototype,h={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:c._subscribe},_isComplete:{value:c._isComplete,writable:!0},getSubject:{value:c.getSubject},connect:{value:c.connect},refCount:{value:c.refCount}};class d extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function f(){return new r.a}function p(){return t=>a()(function(t,e){return function(e){let n;n="function"==typeof t?t:function(){return t};const r=Object.create(e,h);return r.source=e,r.subjectFactory=n,r}}(f)(t))}n.d(e,"a",function(){return p})},wj3C:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n("mrSG"),o=n("zVF4"),s=n("q/0M"),a=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r),u=new o.ErrorFactory("app","Firebase",a),l="[DEFAULT]",c=[],h=function(){function t(t,e,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=o.deepCopy(t),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(t){c.push(t),setTimeout(function(){return t(null)},0)},removeAuthTokenListener:function(t){c=c.filter(function(e){return e!==t})}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){t.firebase_.INTERNAL.removeApp(t.name_);for(var e=[],n=0,r=Object.keys(t.services_);n<r.length;n++)for(var i=r[n],o=0,s=Object.keys(t.services_[i]);o<s.length;o++)e.push(t.services_[i][s[o]]);return Promise.all(e.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))}).then(function(){t.isDeleted_=!0,t.services_={}})},t.prototype._getService=function(t,e){if(void 0===e&&(e=l),this.checkDestroyed_(),this.services_[t]||(this.services_[t]={}),!this.services_[t][e]){var n=e!==l?e:void 0,r=this.firebase_.INTERNAL.factories[t](this,this.extendApp.bind(this),n);this.services_[t][e]=r}return this.services_[t][e]},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=l),this.services_[t]&&this.services_[t][e]&&delete this.services_[t][e]},t.prototype.extendApp=function(t){var e=this;o.deepExtend(this,t),t.INTERNAL&&t.INTERNAL.addAuthTokenListener&&(c.forEach(function(t){e.INTERNAL.addAuthTokenListener(t)}),c=[])},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw u.create("app-deleted",{appName:this.name_})},t}();h.prototype.name&&h.prototype.options||h.prototype.delete||console.log("dc");var d=new s.Logger("@firebase/app");if(o.isBrowser()&&void 0!==self.firebase){d.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var f=self.firebase.SDK_VERSION;f&&f.indexOf("LITE")>=0&&d.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var p=function t(){var e=function(t){var e={},n={},r={},i={__esModule:!0,initializeApp:function(n,r){void 0===r&&(r={}),"object"==typeof r&&null!==r||(r={name:r});var s=r;void 0===s.name&&(s.name=l);var a=s.name;if("string"!=typeof a||!a)throw u.create("bad-app-name",{appName:String(a)});if(o.contains(e,a))throw u.create("duplicate-app",{appName:a});var h=new t(n,s,i);return e[a]=h,c(h,"create"),h},app:s,apps:null,SDK_VERSION:"6.4.1",INTERNAL:{registerService:function(e,l,c,h,f){if(void 0===f&&(f=!1),n[e])return d.debug("There were multiple attempts to register service "+e+"."),i[e];function p(t){if(void 0===t&&(t=s()),"function"!=typeof t[e])throw u.create("invalid-app-argument",{appName:e});return t[e]()}return n[e]=l,h&&(r[e]=h,a().forEach(function(t){h("create",t)})),void 0!==c&&o.deepExtend(p,c),i[e]=p,t.prototype[e]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this._getService.bind(this,e);return r.apply(this,f?t:[])},p},removeApp:function(t){c(e[t],"delete"),delete e[t]},factories:n,useAsService:h}};function s(t){if(!o.contains(e,t=t||l))throw u.create("no-app",{appName:t});return e[t]}function a(){return Object.keys(e).map(function(t){return e[t]})}function c(t,e){for(var i=0,o=Object.keys(n);i<o.length;i++){var s=h(0,o[i]);if(null===s)return;r[s]&&r[s](e,t)}}function h(t,e){return"serverAuth"===e?null:e}return i.default=i,Object.defineProperty(i,"apps",{get:a}),s.App=t,i}(h);return e.INTERNAL=i.__assign({},e.INTERNAL,{createFirebaseNamespace:t,extendNamespace:function(t){o.deepExtend(e,t)},createSubscribe:o.createSubscribe,ErrorFactory:o.ErrorFactory,deepExtend:o.deepExtend}),e}(),m=p.initializeApp;p.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o.isNode()&&d.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),m.apply(void 0,t)};var g=p;e.default=g,e.firebase=g},x7I3:function(t,e,n){"use strict";n.r(e),n.d(e,"ErrorCode",function(){return ar}),n.d(e,"EventType",function(){return ur}),n.d(e,"WebChannel",function(){return lr}),n.d(e,"XhrIo",function(){return cr}),n.d(e,"createWebChannelTransport",function(){return sr});var r,i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},o=o||{},s=i;function a(t){return"string"==typeof t}function u(t){return"number"==typeof t}function l(t,e){t=t.split("."),e=e||s;for(var n=0;n<t.length;n++)if(null==(e=e[t[n]]))return null;return e}function c(){}function h(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function d(t){return"array"==h(t)}function f(t){var e=h(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var m="closure_uid_"+(1e9*Math.random()>>>0),g=0;function y(t,e,n){return t.call.apply(t.bind,arguments)}function v(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function b(t,e,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:v).apply(null,arguments)}function w(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var _=Date.now||function(){return+new Date};function E(t,e){function n(){}n.prototype=e.prototype,t.N=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.yb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function S(){this.j=this.j,this.i=this.i}S.prototype.j=!1,S.prototype.la=function(){!this.j&&(this.j=!0,this.G(),0)&&(this[m]||(this[m]=++g))},S.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var C=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(a(t))return a(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},T=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=a(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function I(t){return Array.prototype.concat.apply([],arguments)}function A(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function k(t){return/^[\s\xa0]*$/.test(t)}var D,N=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function O(t,e){return-1!=t.indexOf(e)}function x(t,e){return t<e?-1:t>e?1:0}t:{var R=s.navigator;if(R){var P=R.userAgent;if(P){D=P;break t}}D=""}function M(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function L(t){var e,n={};for(e in t)n[e]=t[e];return n}var V="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<V.length;o++)n=V[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function F(t){return F[" "](t),t}F[" "]=c;var U,q,B=O(D,"Opera"),G=O(D,"Trident")||O(D,"MSIE"),z=O(D,"Edge"),H=z||G,W=O(D,"Gecko")&&!(O(D.toLowerCase(),"webkit")&&!O(D,"Edge"))&&!(O(D,"Trident")||O(D,"MSIE"))&&!O(D,"Edge"),K=O(D.toLowerCase(),"webkit")&&!O(D,"Edge");function Q(){var t=s.document;return t?t.documentMode:void 0}t:{var $="",Y=(q=D,W?/rv:([^\);]+)(\)|;)/.exec(q):z?/Edge\/([\d\.]+)/.exec(q):G?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(q):K?/WebKit\/(\S+)/.exec(q):B?/(?:Version)[ \/]?(\S+)/.exec(q):void 0);if(Y&&($=Y?Y[1]:""),G){var J=Q();if(null!=J&&J>parseFloat($)){U=String(J);break t}}U=$}var X,Z={};function tt(t){return function(t,e){var n=Z;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=N(String(U)).split("."),r=N(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=x(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||x(0==s[2].length,0==a[2].length)||x(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var et=s.document;X=et&&G?Q()||("CSS1Compat"==et.compatMode?parseInt(U,10):5):void 0;var nt=!G||9<=Number(X),rt=G&&!tt("9"),it=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{s.addEventListener("test",c,e),s.removeEventListener("test",c,e)}catch(n){}return t}();function ot(t,e){this.type=t,this.a=this.target=e,this.Ja=!0}function st(t,e){if(ot.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(W){t:{try{F(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=a(t.pointerType)?t.pointerType:at[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}ot.prototype.b=function(){this.Ja=!1},E(st,ot);var at={2:"touch",3:"pen",4:"mouse"};st.prototype.b=function(){st.N.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,rt)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var ut="closure_listenable_"+(1e6*Math.random()|0),lt=0;function ct(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.da=i,this.key=++lt,this.X=this.Z=!1}function ht(t){t.X=!0,t.listener=null,t.proxy=null,t.src=null,t.da=null}function dt(t){this.src=t,this.a={},this.b=0}function ft(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=C(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ht(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function pt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.X&&o.listener==e&&o.capture==!!n&&o.da==r)return i}return-1}dt.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=pt(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new ct(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var mt="closure_lm_"+(1e6*Math.random()|0),gt={};function yt(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(d(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=Ct(r),e&&e[ut]?e.Ba(n,r,p(i)?!!i.capture:!!i,o):vt(e,n,r,!0,i,o)}(t,e,n,r,i);if(d(e)){for(var o=0;o<e.length;o++)yt(t,e[o],n,r,i);return null}return n=Ct(n),t&&t[ut]?t.Aa(e,n,p(r)?!!r.capture:!!r,i):vt(t,e,n,!1,r,i)}function vt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=p(i)?!!i.capture:!!i;if(s&&!nt)return null;var a=Et(t);if(a||(t[mt]=a=new dt(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=_t,e=nt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)it||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(wt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function bt(t){if(!u(t)&&t&&!t.X){var e=t.src;if(e&&e[ut])ft(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(wt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Et(e))?(ft(n,t),0==n.b&&(n.src=null,e[mt]=null)):ht(t)}}}function wt(t){return t in gt?gt[t]:gt[t]="on"+t}function _t(t,e){return!!t.X||function(t,e){var n=t.listener,r=t.da||t.src;return t.Z&&bt(t),n.call(r,e)}(t,nt?new st(e,this):e=new st(e||l("window.event"),this))}function Et(t){return(t=t[mt])instanceof dt?t:null}var St="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ct(t){return"function"==h(t)?t:(t[St]||(t[St]=function(e){return t.handleEvent(e)}),t[St])}function Tt(){S.call(this),this.c=new dt(this),this.J=this,this.B=null}function It(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.X&&s.capture==n){var a=s.listener,u=s.da||s.src;s.Z&&ft(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&0!=r.Ja}E(Tt,S),Tt.prototype[ut]=!0,(r=Tt.prototype).addEventListener=function(t,e,n,r){yt(this,t,e,n,r)},r.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(d(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=p(i)?!!i.capture:!!i,r=Ct(r),e&&e[ut]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=pt(s=e.a[n],r,i,o))&&(ht(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):e&&(e=Et(e))&&(n=e.a[n.toString()],e=-1,n&&(e=pt(n,r,i,o)),(r=-1<e?n[e]:null)&&bt(r))}(this,t,e,n,r)},r.dispatchEvent=function(t){var e,n=this.B;if(n)for(e=[];n;n=n.B)e.push(n);n=this.J;var r=t.type||t;if(a(t))t=new ot(t,n);else if(t instanceof ot)t.target=t.target||n;else{var i=t;j(t=new ot(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.a=e[o];i=It(s,r,!0,t)&&i}if(i=It(s=t.a=n,r,!0,t)&&i,i=It(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=It(s=t.a=e[o],r,!1,t)&&i;return i},r.G=function(){if(Tt.N.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ht(n[r]);delete e.a[t],e.b--}}this.B=null},r.Aa=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},r.Ba=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var At=s.JSON.stringify;function kt(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function Dt(){this.b=this.a=null}kt.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var Nt,Ot=new kt(function(){return new Rt},function(t){t.reset()});function xt(){var t=Vt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Rt(){this.next=this.b=this.a=null}function Pt(t){s.setTimeout(function(){throw t},0)}function Mt(t,e){Nt||function(){var t=s.Promise.resolve(void 0);Nt=function(){t.then(jt)}}(),Lt||(Nt(),Lt=!0),Vt.add(t,e)}Dt.prototype.add=function(t,e){var n=Ot.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Rt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Rt.prototype.reset=function(){this.next=this.b=this.a=null};var Lt=!1,Vt=new Dt;function jt(){for(var t;t=xt();){try{t.a.call(t.b)}catch(n){Pt(n)}var e=Ot;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Lt=!1}function Ft(t,e){Tt.call(this),this.b=t||1,this.a=e||s,this.f=b(this.gb,this),this.g=_()}function Ut(t){t.ba=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function qt(t,e,n){if("function"==h(t))n&&(t=b(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=b(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function Bt(t,e,n){S.call(this),this.f=null!=n?b(t,n):t,this.c=e,this.b=b(this.ab,this),this.a=[]}function Gt(t){t.U=qt(t.b,t.c),t.f.apply(null,t.a)}function zt(t){S.call(this),this.b=t,this.a={}}E(Ft,Tt),(r=Ft.prototype).ba=!1,r.L=null,r.gb=function(){if(this.ba){var t=_()-this.g;0<t&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(Ut(this),this.start()))}},r.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=_())},r.G=function(){Ft.N.G.call(this),Ut(this),delete this.a},E(Bt,S),(r=Bt.prototype).ea=!1,r.U=null,r.Ua=function(t){this.a=arguments,this.U?this.ea=!0:Gt(this)},r.G=function(){Bt.N.G.call(this),this.U&&(s.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},r.ab=function(){this.U=null,this.ea&&(this.ea=!1,Gt(this))},E(zt,S);var Ht=[];function Wt(t,e,n,r){d(n)||(n&&(Ht[0]=n.toString()),n=Ht);for(var i=0;i<n.length;i++){var o=yt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Kt(t){M(t.a,function(t,e){this.a.hasOwnProperty(e)&&bt(t)},t),t.a={}}function Qt(){}zt.prototype.G=function(){zt.N.G.call(this),Kt(this)},zt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $t=new Tt;function Yt(t){ot.call(this,"serverreachability",t)}function Jt(t){$t.dispatchEvent(new Yt($t,t))}function Xt(t){ot.call(this,"statevent",t)}function Zt(t){$t.dispatchEvent(new Xt($t,t))}function te(t){ot.call(this,"timingevent",t)}function ee(t,e){if("function"!=h(t))throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){t()},e)}E(Yt,ot),E(Xt,ot),E(te,ot);var ne={NO_ERROR:0,hb:1,ob:2,nb:3,kb:4,mb:5,pb:6,Ma:7,TIMEOUT:8,sb:9},re={jb:"complete",wb:"success",Na:"error",Ma:"abort",ub:"ready",vb:"readystatechange",TIMEOUT:"timeout",qb:"incrementaldata",tb:"progress",lb:"downloadprogress",xb:"uploadprogress"};function ie(){}function oe(){}ie.prototype.a=null;var se,ae={OPEN:"a",ib:"b",Na:"c",rb:"d"};function ue(){ot.call(this,"d")}function le(){ot.call(this,"c")}function ce(){}function he(t,e,n){this.g=t,this.W=e,this.V=n||1,this.I=new zt(this),this.O=de,this.P=new Ft(t=H?125:void 0),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}E(ue,ot),E(le,ot),E(ce,ie),se=new ce;var de=45e3,fe={},pe={};function me(t,e,n){t.F=1,t.f=Ue(Re(e)),t.l=n,t.H=!0,ye(t,null)}function ge(t,e,n,r){t.F=1,t.f=Ue(Re(e)),t.l=null,t.H=n,ye(t,r)}function ye(t,e){t.v=_(),we(t),t.D=Re(t.f),Fe(t.D,"t",t.V),t.A=0,t.a=t.g.$(t.g.Y()?e:null),0<t.J&&(t.B=new Bt(b(t.Ka,t,t.a),t.J)),Wt(t.I,t.a,"readystatechange",t.eb),e=t.h?L(t.h):{},t.l?(t.w||(t.w="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ca(t.D,t.w,t.l,e)):(t.w="GET",t.a.ca(t.D,t.w,null,e)),Jt(1)}function ve(t,e,n){for(var r=!0;!t.m&&t.A<n.length;){var i=be(t,n);if(i==pe){4==e&&(t.c=4,Zt(14),r=!1);break}if(i==fe){t.c=4,Zt(15),r=!1;break}Te(t,i)}4==e&&0==n.length&&(t.c=1,Zt(16),r=!1),t.b=t.b&&r,r||(Ce(t),Se(t))}function be(t,e){var n=t.A,r=e.indexOf("\n",n);return-1==r?pe:(n=Number(e.substring(n,r)),isNaN(n)?fe:(r+=1)+n>e.length?pe:(e=e.substr(r,n),t.A=r+n,e))}function we(t){t.R=_()+t.O,_e(t,t.O)}function _e(t,e){if(null!=t.i)throw Error("WatchDog timer not null");t.i=ee(b(t.bb,t),e)}function Ee(t){t.i&&(s.clearTimeout(t.i),t.i=null)}function Se(t){t.g.Da()||t.m||t.g.na(t)}function Ce(t){Ee(t);var e=t.B;e&&"function"==typeof e.la&&e.la(),t.B=null,Ut(t.P),Kt(t.I),t.a&&(e=t.a,t.a=null,e.abort(),e.la())}function Te(t,e){try{t.g.Ga(t,e),Jt(4)}catch(n){}}function Ie(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||a(t))T(t,e,void 0);else{if(t.K&&"function"==typeof t.K)var n=t.K();else if(t.C&&"function"==typeof t.C)n=void 0;else if(f(t)||a(t)){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.C&&"function"==typeof t.C)return t.C();if(a(t))return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Ae(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ae)for(n=t.K(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function ke(t,e){Ne(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&De(t))}function De(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Ne(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Ne(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Ne(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(r=he.prototype).setTimeout=function(t){this.O=t},r.eb=function(t){t=t.target;var e=this.B;e&&3==Rn(t)?e.Ua():this.Ka(t)},r.Ka=function(t){try{if(t==this.a)t:{var e=Rn(this.a),n=this.a.ya(),r=this.a.T();if(!(3>e||3==e&&!H&&!this.a.aa())){this.m||4!=e||7==n||Jt(8==n||0>=r?3:2),Ee(this);var i=this.a.T();this.o=i;var o=this.a.aa();if(this.b=200==i){if(this.S&&!this.s){e:{if(this.a){var s=Pn(this.a,"X-HTTP-Initial-Response");if(s&&!k(s)){var a=s;break e}}a=null}if(!a){this.b=!1,this.c=3,Zt(12),Ce(this),Se(this);break t}this.s=!0,Te(this,a)}this.H?(ve(this,e,o),H&&this.b&&3==e&&(Wt(this.I,this.P,"tick",this.cb),this.P.start())):Te(this,o),4==e&&Ce(this),this.b&&!this.m&&(4==e?this.g.na(this):(this.b=!1,we(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,Zt(12)):(this.c=0,Zt(13)),Ce(this),Se(this)}}}catch(u){}},r.cb=function(){if(this.a){var t=Rn(this.a),e=this.a.aa();this.A<e.length&&(Ee(this),ve(this,t,e),this.b&&4!=t&&we(this))}},r.cancel=function(){this.m=!0,Ce(this)},r.bb=function(){this.i=null;var t=_();0<=t-this.R?(2!=this.F&&(Jt(3),Zt(17)),Ce(this),this.c=2,Se(this)):_e(this,this.R-t)},(r=Ae.prototype).C=function(){De(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},r.K=function(){return De(this),this.a.concat()},r.get=function(t,e){return Ne(this.b,t)?this.b[t]:e},r.set=function(t,e){Ne(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},r.forEach=function(t,e){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Oe=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function xe(t,e){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,t instanceof xe?(this.h=void 0!==e?e:t.h,Pe(this,t.f),this.j=t.j,Me(this,t.b),Le(this,t.i),this.a=t.a,Ve(this,tn(t.c)),this.g=t.g):t&&(n=String(t).match(Oe))?(this.h=!!e,Pe(this,n[1]||"",!0),this.j=qe(n[2]||""),Me(this,n[3]||"",!0),Le(this,n[4]),this.a=qe(n[5]||"",!0),Ve(this,n[6]||"",!0),this.g=qe(n[7]||"")):(this.h=!!e,this.c=new $e(null,this.h))}function Re(t){return new xe(t)}function Pe(t,e,n){t.f=n?qe(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Me(t,e,n){t.b=n?qe(e,!0):e}function Le(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.i=e}else t.i=null}function Ve(t,e,n){e instanceof $e?(t.c=e,function(t,e){e&&!t.f&&(Ye(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Je(this,e),Ze(this,n,t))},t)),t.f=e}(t.c,t.h)):(n||(e=Be(e,Ke)),t.c=new $e(e,t.h))}function je(t,e,n){t.c.set(e,n)}function Fe(t,e,n){d(n)||(n=[String(n)]),Ze(t.c,e,n)}function Ue(t){return je(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^_()).toString(36)),t}function qe(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Be(t,e,n){return a(t)?(t=encodeURI(t).replace(e,Ge),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ge(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}xe.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Be(e,ze,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Be(e,ze,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&t.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(Be(n,"/"==n.charAt(0)?We:He,!0))),(n=this.c.toString())&&t.push("?",n),(n=this.g)&&t.push("#",Be(n,Qe)),t.join("")},xe.prototype.resolve=function(t){var e=Re(this),n=!!t.f;n?Pe(e,t.f):n=!!t.j,n?e.j=t.j:n=!!t.b,n?Me(e,t.b):n=null!=t.i;var r=t.a;if(n)Le(e,t.i);else if(n=!!t.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=e.a.lastIndexOf("/");-1!=i&&(r=e.a.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(O(i,"./")||O(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.a=r:n=""!==t.c.toString(),n?Ve(e,tn(t.c)):n=!!t.g,n&&(e.g=t.g),e};var ze=/[#\/\?@]/g,He=/[#\?:]/g,We=/[#\?]/g,Ke=/[#\?@]/g,Qe=/#/g;function $e(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Ye(t){t.a||(t.a=new Ae,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Je(t,e){Ye(t),e=en(t,e),Ne(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,ke(t.a,e))}function Xe(t,e){return Ye(t),e=en(t,e),Ne(t.a.b,e)}function Ze(t,e,n){Je(t,e),0<n.length&&(t.c=null,t.a.set(en(t,e),A(n)),t.b+=n.length)}function tn(t){var e=new $e;return e.c=t.c,t.a&&(e.a=new Ae(t.a),e.b=t.b),e}function en(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function nn(t){this.a=t,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function rn(t){var e=t.a.F.a;if(null!=e)Zt(4),e?(Zt(10),Wn(t.a,t,!1)):(Zt(11),Wn(t.a,t,!0));else{t.b=new he(t,void 0,void 0),t.b.h=t.h,e=Jn(e=t.a,e.Y()?t.f:null,t.i),Zt(4),Fe(e,"TYPE","xmlhttp");var n=t.a.j,r=t.a.I;n&&r&&je(e,n,r),ge(t.b,e,!1,t.f)}}function on(){this.a=this.b=null}function sn(){this.a=new Ae}function an(t){var e=typeof t;return"object"==e&&t||"function"==e?"o"+(t[m]||(t[m]=++g)):e.charAt(0)+t}function un(t,e){this.b=t,this.a=e}function ln(t){this.g=t||cn,t=s.PerformanceNavigationTiming?0<(t=s.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(s.ka&&s.ka.Ea&&s.ka.Ea()&&s.ka.Ea().zb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new sn),this.b=null,this.c=[]}(r=$e.prototype).add=function(t,e){Ye(this),this.c=null,t=en(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},r.forEach=function(t,e){Ye(this),this.a.forEach(function(n,r){T(n,function(n){t.call(e,n,r,this)},this)},this)},r.K=function(){Ye(this);for(var t=this.a.C(),e=this.a.K(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},r.C=function(t){Ye(this);var e=[];if(a(t))Xe(this,t)&&(e=I(e,this.a.get(en(this,t))));else{t=this.a.C();for(var n=0;n<t.length;n++)e=I(e,t[n])}return e},r.set=function(t,e){return Ye(this),this.c=null,Xe(this,t=en(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},r.get=function(t,e){return t&&0<(t=this.C(t)).length?String(t[0]):e},r.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.K(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")},E(function(){},function(){}),(r=nn.prototype).M=null,r.$=function(t){return this.a.$(t)},r.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},r.Da=function(){return!1},r.Ga=function(t,e){if(this.c=t.o,0==this.M){if(!this.a.o&&(t=t.a)){var n=Pn(t,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(t=Pn(t,"X-HTTP-Session-Id"))&&(this.a.I=t)}if(e){try{var r=this.a.ja.a.parse(e)}catch(i){return(e=this.a).m=this.c,void $n(e,2)}this.f=r[0]}else(e=this.a).m=this.c,$n(e,2)}else 1==this.M&&(this.g?Zt(6):"11111"==e?(Zt(5),this.g=!0,(!G||10<=Number(X))&&(this.c=200,this.b.cancel(),Zt(11),Wn(this.a,this,!0))):(Zt(7),this.g=!1))},r.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,rn(this)):1==this.M&&(this.g?(Zt(11),Wn(this.a,this,!0)):(Zt(10),Wn(this.a,this,!1)));else{0==this.M?Zt(8):1==this.M&&Zt(9);var t=this.a;t.m=this.c,$n(t,2)}},r.Y=function(){return this.a.Y()},r.ma=function(){return this.a.ma()},sn.prototype.add=function(t){this.a.set(an(t),t)},sn.prototype.C=function(){return this.a.C()};var cn=10;function hn(t,e){!t.a&&(O(e,"spdy")||O(e,"quic")||O(e,"h2"))&&(t.f=t.g,t.a=new sn,t.b&&(mn(t,t.b),t.b=null))}function dn(t){return!!t.b||!!t.a&&t.a.a.c>=t.f}function fn(t){return t.b?1:t.a?t.a.a.c:0}function pn(t,e){return t.b?t=t.b==e:t.a?(e=an(e),t=Ne(t.a.a.b,e)):t=!1,t}function mn(t,e){t.a?t.a.add(e):t.b=e}function gn(t,e){var n;t.b&&t.b==e?t.b=null:((n=t.a)&&(n=an(e),n=Ne(t.a.a.b,n)),n&&ke(t.a.a,an(e)))}function yn(t){if(null!=t.b)return t.c.concat(t.b.j);if(null!=t.a&&0!=t.a.a.c){var e=t.c;return T(t.a.C(),function(t){e=e.concat(t.j)}),e}return A(t.c)}function vn(){}function bn(){this.a=new vn}function wn(t,e,n){var r=n||"";try{Ie(t,function(t,n){var i=t;p(t)&&(i=At(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function _n(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}ln.prototype.cancel=function(){this.c=yn(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(T(this.a.C(),function(t){t.cancel()}),function(t){t.b={},t.a.length=0,t.c=0}(this.a.a))},vn.prototype.stringify=function(t){return s.JSON.stringify(t,void 0)},vn.prototype.parse=function(t){return s.JSON.parse(t,void 0)};var En=s.JSON.parse;function Sn(t){Tt.call(this),this.headers=new Ae,this.H=t||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=Cn,this.D=this.F=!1}E(Sn,Tt);var Cn="",Tn=/^https?$/i,In=["POST","PUT"];function An(t){return"content-type"==t.toLowerCase()}function kn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Dn(t),On(t)}function Dn(t){t.v||(t.v=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Nn(t){if(t.b&&void 0!==o&&(!t.s[1]||4!=Rn(t)||2!=t.T()))if(t.l&&4==Rn(t))qt(t.Fa,0,t);else if(t.dispatchEvent("readystatechange"),4==Rn(t)){t.b=!1;try{var e,n=t.T();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var a=String(t.A).match(Oe)[1]||null;if(!a&&s.self&&s.self.location){var u=s.self.location.protocol;a=u.substr(0,u.length-1)}i=!Tn.test(a?a.toLowerCase():"")}e=i}e?(t.dispatchEvent("complete"),t.dispatchEvent("success")):(t.h=6,t.f=t.za()+" ["+t.T()+"]",Dn(t))}finally{On(t)}}}function On(t,e){if(t.a){xn(t);var n=t.a,r=t.s[0]?c:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){}}}function xn(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(s.clearTimeout(t.m),t.m=null)}function Rn(t){return t.a?t.a.readyState:0}function Pn(t,e){return t.a?t.a.getResponseHeader(e):null}function Mn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}if(r)return t;if(n=function(t){var e="";return M(n,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(),a(t)){if(e=encodeURIComponent(String(e)),e+=n=null!=n?"="+encodeURIComponent(String(n)):""){if(0>(n=t.indexOf("#"))&&(n=t.length),0>(r=t.indexOf("?"))||r>n){r=n;var i=""}else i=t.substring(r+1,n);n=(t=[t.substr(0,r),i,t.substr(n)])[1],t[1]=e?n?n+"&"+e:e:n,t=t[0]+(t[1]?"?"+t[1]:"")+t[2]}return t}return je(t,e,n),t}function Ln(t){this.f=[],this.F=new on,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Ra=this.P=0,this.Pa=!!l("internalChannelParams.failFast",t),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Oa=l("internalChannelParams.baseRetryDelayMs",t)||5e3,this.Sa=l("internalChannelParams.retryDelaySeedMs",t)||1e4,this.Qa=l("internalChannelParams.forwardChannelMaxRetries",t)||2,this.qa=l("internalChannelParams.forwardChannelRequestTimeoutMs",t)||2e4,this.La=t&&t.Ab||void 0,this.D=void 0,this.R=t&&t.supportsCrossDomainXhr||!1,this.H="",this.b=new ln(t&&t.concurrentRequestLimit),this.ja=new bn,this.o=!t||void 0===t.backgroundChannelTest||t.backgroundChannelTest,(this.W=t&&t.fastHandshake||!1)&&!this.o&&(this.o=!0),t&&t.forceLongPolling&&(this.oa=!1),this.fa=void 0}function Vn(t){if(jn(t),3==t.u){var e=t.P++,n=Re(t.B);je(n,"SID",t.H),je(n,"RID",e),je(n,"TYPE","terminate"),Bn(t,n),(e=new he(t,e,void 0)).F=2,e.f=Ue(Re(n)),n=!1,s.navigator&&s.navigator.sendBeacon&&(n=s.navigator.sendBeacon(e.f.toString(),"")),!n&&s.Image&&((new Image).src=e.f,n=!0),n||(e.a=e.g.$(null),e.a.ca(e.f)),e.v=_(),we(e)}Yn(t)}function jn(t){t.w&&(t.w.abort(),t.w=null),t.a&&(t.a.cancel(),t.a=null),t.l&&(s.clearTimeout(t.l),t.l=null),Kn(t),t.b.cancel(),t.h&&(u(t.h)&&s.clearTimeout(t.h),t.h=null)}function Fn(t,e){t.f.push(new un(t.Ra++,e)),3==t.u&&Un(t)}function Un(t){dn(t.b)||t.h||(t.h=!0,Mt(t.Ia,t),t.A=0)}function qn(t,e){var n;n=e?e.W:t.P++;var r=Re(t.B);je(r,"SID",t.H),je(r,"RID",n),je(r,"AID",t.O),Bn(t,r),t.g&&t.i&&Mn(r,t.g,t.i),n=new he(t,n,t.A+1),null===t.g&&(n.h=t.i),e&&(t.f=e.j.concat(t.f)),e=Gn(t,n,1e3),n.setTimeout(Math.round(.5*t.qa)+Math.round(.5*t.qa*Math.random())),mn(t.b,n),me(n,r,e)}function Bn(t,e){t.c&&Ie({},function(t,n){je(e,n,t)})}function Gn(t,e,n){n=Math.min(t.f.length,n);var r=t.c?b(t.c.Ta,t.c,t):null;t:for(var i=t.f,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var l=i[u].b,c=i[u].a;if(0>(l-=o))o=Math.max(0,i[u].b-100),a=!1;else try{wn(c,s,"req"+l+"_")}catch(h){r&&r(c)}}if(a){r=s.join("&");break t}}return t=t.f.splice(0,n),e.j=t,r}function zn(t){t.a||t.l||(t.S=1,Mt(t.Ha,t),t.v=0)}function Hn(t){return!(t.a||t.l||3<=t.v||(t.S++,t.l=ee(b(t.Ha,t),Qn(t,t.v)),t.v++,0))}function Wn(t,e,n){var r=e.l;r&&hn(t.b,r),t.ia=t.oa&&n,t.m=e.c,t.B=Jn(t,null,t.ha),Un(t)}function Kn(t){null!=t.s&&(s.clearTimeout(t.s),t.s=null)}function Qn(t,e){var n=t.Oa+Math.floor(Math.random()*t.Sa);return t.ma()||(n*=2),n*e}function $n(t,e){if(2==e){var n=null;t.c&&(n=null);var r=b(t.fb,t);n||(n=new xe("//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||Pe(n,"https"),Ue(n)),function(t,e){var n=new Qt;if(s.Image){var r=new Image;r.onload=w(_n,n,r,"TestLoadImage: loaded",!0,e),r.onerror=w(_n,n,r,"TestLoadImage: error",!1,e),r.onabort=w(_n,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=w(_n,n,r,"TestLoadImage: timeout",!1,e),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Zt(2);t.u=0,t.c&&t.c.ta(e),Yn(t),jn(t)}function Yn(t){t.u=0,t.m=-1,t.c&&(0==yn(t.b).length&&0==t.f.length||(t.b.c.length=0,A(t.f),t.f.length=0),t.c.sa())}function Jn(t,e,n){var r=function(t){return t instanceof xe?Re(t):new xe(t,void 0)}(n);if(""!=r.b)e&&Me(r,e+"."+r.b),Le(r,r.i);else{var i=s.location;r=function(t,e,n,r){var i=new xe(null,void 0);return t&&Pe(i,t),e&&Me(i,e),n&&Le(i,n),r&&(i.a=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&M(t.V,function(t,e){je(r,e,t)}),n=t.I,(e=t.j)&&n&&je(r,e,n),je(r,"VER",t.wa),Bn(t,r),r}function Xn(){}function Zn(){if(G&&!(10<=Number(X)))throw Error("Environmental error: no available transport.")}function tr(t,e){Tt.call(this),this.a=new Ln(e),this.g=t,this.m=e&&e.testUrl?e.testUrl:function(t){for(var e=arguments[0],n=1;n<arguments.length;n++){var r,i=arguments[n];0==i.lastIndexOf("/",0)?e=i:((r=""==e)||(r=0<=(r=e.length-1)&&e.indexOf("/",r)==r),e+=r?i:"/"+i)}return e}(this.g,"test"),this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.i=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.xa&&(t?t["X-WebChannel-Client-Profile"]=e.xa:t={"X-WebChannel-Client-Profile":e.xa}),this.a.J=t,(t=e&&e.httpHeadersOverwriteParam)&&!k(t)&&(this.a.g=t),this.l=e&&e.supportsCrossDomainXhr||!1,this.h=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!k(e)&&(this.a.j=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new rr(this)}function er(t){ue.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function nr(){le.call(this),this.status=1}function rr(t){this.a=t}(r=Sn.prototype).ca=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+t);e=e?e.toUpperCase():"GET",this.A=t,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:se),this.a.onreadystatechange=b(this.Fa,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(o){return void kn(this,o)}t=n||"";var i=new Ae(this.headers);r&&Ie(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=An,n=t.length,r=a(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:a(t)?t.charAt(e):t[e]}(i.K()),n=s.FormData&&t instanceof s.FormData,!(0<=C(In,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{xn(this),0<this.o&&((this.D=function(t){return G&&tt(9)&&u(t.timeout)&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=b(this.Ca,this)):this.m=qt(this.Ca,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){kn(this,o)}},r.Ca=function(){void 0!==o&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},r.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),On(this))},r.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),On(this,!0)),Sn.N.G.call(this)},r.Fa=function(){this.j||(this.w||this.l||this.g?Nn(this):this.$a())},r.$a=function(){Nn(this)},r.T=function(){try{return 2<Rn(this)?this.a.status:-1}catch(q){return-1}},r.za=function(){try{return 2<Rn(this)?this.a.statusText:""}catch(q){return""}},r.aa=function(){try{return this.a?this.a.responseText:""}catch(q){return""}},r.Va=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),En(e)}},r.ya=function(){return this.h},r.Ya=function(){return a(this.f)?this.f:String(this.f)},(r=Ln.prototype).wa=8,r.u=1,r.Da=function(){return 0==this.u},r.Ia=function(t){if(this.h)if(this.h=null,1==this.u){if(!t){this.P=Math.floor(1e5*Math.random());var e,n=new he(this,t=this.P++,void 0),r=this.i;if(this.J&&(r?j(r=L(r),this.J):r=this.J),null===this.g&&(n.h=r),this.W)t:{for(var i=e=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&a(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.f.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Gn(this,n,e),je(i=Re(this.B),"RID",t),je(i,"CVER",22),this.o&&this.j&&je(i,"X-HTTP-Session-Id",this.j),Bn(this,i),this.g&&r&&Mn(i,this.g,r),mn(this.b,n),this.W?(je(i,"$req",e),je(i,"SID","null"),n.S=!0,me(n,i,null)):me(n,i,e),this.u=2}}else 3==this.u&&(t?qn(this,t):0==this.f.length||dn(this.b)||qn(this))},r.Ha=function(){this.l=null,this.a=new he(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var t=Re(this.pa);je(t,"RID","rpc"),je(t,"SID",this.H),je(t,"CI",this.ia?"0":"1"),je(t,"AID",this.O),Bn(this,t),je(t,"TYPE","xmlhttp"),this.g&&this.i&&Mn(t,this.g,this.i),this.D&&this.a.setTimeout(this.D),ge(this.a,t,!0,this.ga)},r.Ga=function(t,e){if(0!=this.u&&(this.a==t||pn(this.b,t)))if(this.m=t.o,!t.s&&pn(this.b,t)&&3==this.u){try{var n=this.ja.a.parse(e)}catch(o){n=null}if(d(n)&&3==n.length){if(0==(e=n)[0]){t:if(!this.l){if(this.a){if(!(this.a.v+3e3<t.v))break t;Kn(this),this.a.cancel(),this.a=null}Hn(this),Zt(18)}}else this.ra=e[1],0<this.ra-this.O&&37500>e[2]&&this.ia&&0==this.v&&!this.s&&(this.s=ee(b(this.Za,this),6e3));if(1>=fn(this.b)&&this.fa){try{this.fa()}catch(o){}this.fa=void 0}}else $n(this,11)}else if((t.s||this.a==t)&&Kn(this),!k(e))for(e=n=this.ja.a.parse(e),n=0;n<e.length;n++){var r=e[n];if(this.O=r[0],r=r[1],2==this.u)if("c"==r[0]){this.H=r[1],this.ga=r[2];var i=r[3];null!=i&&(this.wa=i),null!=(r=r[5])&&u(r)&&0<r&&(this.D=1.5*r),this.o&&(r=t.a)&&((i=Pn(r,"X-Client-Wire-Protocol"))&&hn(this.b,i),this.j&&(r=Pn(r,"X-HTTP-Session-Id")))&&(this.I=r,je(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=t,this.pa=Jn(this,this.Y()?this.ga:null,this.ha),r.s?(gn(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(Ee(r),we(r)),this.a=r):zn(this),0<this.f.length&&Un(this)}else"stop"!=r[0]&&"close"!=r[0]||$n(this,7);else 3==this.u&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?$n(this,7):Vn(this):"noop"!=r[0]&&this.c&&this.c.ua(r),this.v=0)}},r.Za=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,Hn(this),Zt(19))},r.na=function(t){var e=null;if(this.a==t){Kn(this),this.a=null;var n=2}else{if(!pn(this.b,t))return;e=t.j,gn(this.b,t),n=1}if(this.m=t.o,0!=this.u)if(t.b)1==n?(e=_()-t.v,$t.dispatchEvent(new te($t,t.l?t.l.length:0,e,this.A)),Un(this)):zn(this);else{var r=t.c;if(3==r||0==r&&0<this.m||!(1==n&&function(t,e){return!(fn(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.f=e.j.concat(t.f),0):1==t.u||2==t.u||t.A>=(t.Pa?0:t.Qa)||(t.h=ee(b(t.Ia,t,e),Qn(t,t.A)),t.A++,0)))}(this,t)||2==n&&Hn(this)))switch(e&&0<e.length&&(t=this.b,t.c=t.c.concat(e)),r){case 1:$n(this,5);break;case 4:$n(this,10);break;case 3:$n(this,6);break;default:$n(this,2)}}},r.fb=function(t){Zt(t?2:1)},r.$=function(t){if(t&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new Sn(this.La)).F=this.R,t},r.ma=function(){return!!this.c&&!0},r.Y=function(){return this.R},(r=Xn.prototype).va=function(){},r.ua=function(){},r.ta=function(){},r.sa=function(){},r.Ta=function(){},Zn.prototype.a=function(t,e){return new tr(t,e)},E(tr,Tt),(r=tr.prototype).addEventListener=function(t,e,n,r){tr.N.addEventListener.call(this,t,e,n,r)},r.removeEventListener=function(t,e,n,r){tr.N.removeEventListener.call(this,t,e,n,r)},r.Wa=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var t=this.a,e=this.m,n=this.g,r=this.b||void 0;Zt(0),t.ha=n,t.V=r||{},t.o&&(t.F.b=[],t.F.a=!1),t.w=new nn(t),null===t.g&&(t.w.h=t.i),n=e,t.g&&t.i&&(n=Mn(e,t.g,t.i)),(t=t.w).i=n,e=Jn(t.a,null,t.i),Zt(3),null!=(n=t.a.F.b)?(t.f=n[0],t.M=1,rn(t)):(Fe(e,"MODE","init"),!t.a.o&&t.a.j&&Fe(e,"X-HTTP-Session-Id",t.a.j),t.b=new he(t,void 0,void 0),t.b.h=t.h,ge(t.b,e,!1,null),t.M=0)},r.close=function(){Vn(this.a)},r.Xa=function(t){if(a(t)){var e={};e.__data__=t,Fn(this.a,e)}else this.h?((e={}).__data__=At(t),Fn(this.a,e)):Fn(this.a,t)},r.G=function(){this.a.c=null,delete this.f,Vn(this.a),delete this.a,tr.N.G.call(this)},E(er,ue),E(nr,le),E(rr,Xn),rr.prototype.va=function(){this.a.dispatchEvent("a")},rr.prototype.ua=function(t){this.a.dispatchEvent(new er(t))},rr.prototype.ta=function(t){this.a.dispatchEvent(new nr(t))},rr.prototype.sa=function(){this.a.dispatchEvent("b")};var ir=w(function(t,e){function n(){}n.prototype=t.prototype;var r=new n;return t.apply(r,Array.prototype.slice.call(arguments,1)),r},Zn);Zn.prototype.createWebChannel=Zn.prototype.a,tr.prototype.send=tr.prototype.Xa,tr.prototype.open=tr.prototype.Wa,tr.prototype.close=tr.prototype.close,ne.NO_ERROR=0,ne.TIMEOUT=8,ne.HTTP_ERROR=6,re.COMPLETE="complete",oe.EventType=ae,ae.OPEN="a",ae.CLOSE="b",ae.ERROR="c",ae.MESSAGE="d",Tt.prototype.listen=Tt.prototype.Aa,Sn.prototype.listenOnce=Sn.prototype.Ba,Sn.prototype.getLastError=Sn.prototype.Ya,Sn.prototype.getLastErrorCode=Sn.prototype.ya,Sn.prototype.getStatus=Sn.prototype.T,Sn.prototype.getStatusText=Sn.prototype.za,Sn.prototype.getResponseJson=Sn.prototype.Va,Sn.prototype.getResponseText=Sn.prototype.aa,Sn.prototype.send=Sn.prototype.ca;var or={createWebChannelTransport:ir,ErrorCode:ne,EventType:re,WebChannel:oe,XhrIo:Sn},sr=or.createWebChannelTransport,ar=or.ErrorCode,ur=or.EventType,lr=or.WebChannel,cr=or.XhrIo;e.default=or},xbPD:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t=null){return e=>e.lift(new o(t))}class o{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new s(t,this.defaultValue))}}class s extends r.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},"yA/v":function(t,e,n){"use strict";n.d(e,"d",function(){return a}),n.d(e,"c",function(){return u}),n.d(e,"b",function(){return l}),n.d(e,"e",function(){return c}),n.d(e,"a",function(){return h}),n("mrSG");var r,i=n("8Y7J"),o=n("Wcq6"),s=n.n(o);const a=new i.o("angularfire2.app.options"),u=new i.o("angularfire2.app.nameOrConfig");class l{}function c(t,e){const n="object"==typeof e&&e||{};return n.name=n.name||"string"==typeof e&&e||"[DEFAULT]",s.a.apps.filter(t=>t&&t.name===n.name)[0]||s.a.initializeApp(t,n)}let h=r=class{static initializeApp(t,e){return{ngModule:r,providers:[{provide:a,useValue:t},{provide:u,useValue:e}]}}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("quSY"),o=n("ngJS");function s(t,e){return new r.a(e?n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r}:Object(o.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("8Y7J");const i={production:!0,firebaseConfig:{apiKey:"AIzaSyBKM08A9WHEhTLXbY7CxF49gN5fl-hk8f8",authDomain:"febocak-02.firebaseapp.com",databaseURL:"https://febocak-02.firebaseio.com",projectId:"febocak-02",storageBucket:"",messagingSenderId:"850669499931",appId:"1:850669499931:web:53e8e8e339850d33"},modulo:"Administraci\xf3n"};class o{}class s{constructor(){this.title="inscripciones"}}var a=n("pMnS");class u{constructor(t){this.route=t}ngOnInit(){this.competencia=this.route.snapshot.data.competenciaData,this.strFecha=this.formatFecha(this.competencia.desde,this.competencia.hasta)}descripcionDelStatus(t){switch(t){case"Establecer pr\xf3xima competencia":return"Pr\xf3xima competencia";case"Abrir inscripciones":return"Inscripciones abiertas";case"Cerrar inscripciones":return"Inscripciones cerradas";case"Exportar datos":return"Inscripciones cerradas - Datos exportados";case"Abrir competencia":return"En competencia";case"Importar datos":return"Resultados de la competencia cargados";case"Cerrar competencia":return"Competencia guardada en el hist\xf3rico"}}formatFecha(t,e){return new Date(t).toLocaleDateString()+" hasta "+new Date(e).toLocaleDateString()}}var l=n("iInd"),c=r.nb({encapsulation:0,styles:[""],data:{}});function h(t){return r.Ib(0,[(t()(),r.pb(0,0,null,null,38,"div",[["class","jumbotron pt-5 vh-100"]],null,null,null,null,null)),(t()(),r.pb(1,0,null,null,2,"h2",[["class","text-left mb-0"]],null,null,null,null,null)),(t()(),r.pb(2,0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),r.Gb(-1,null,["SISRIRCO"])),(t()(),r.pb(4,0,null,null,1,"h4",[["class","text-left"]],null,null,null,null,null)),(t()(),r.Gb(-1,null,["Sistema de Registro de Inscripciones y Resultados de Competencias"])),(t()(),r.pb(6,0,null,null,0,"hr",[["class","my-4"]],null,null,null,null,null)),(t()(),r.pb(7,0,null,null,28,"div",[["class","container text-secondary"]],null,null,null,null,null)),(t()(),r.pb(8,0,null,null,6,"div",[["class","row"]],null,null,null,null,null)),(t()(),r.pb(9,0,null,null,2,"div",[["class","col-2"]],null,null,null,null,null)),(t()(),r.pb(10,0,null,null,1,"h5",[],null,null,null,null,null)),(t()(),r.Gb(-1,null,["Competencia:"])),(t()(),r.pb(12,0,null,null,2,"th",[["class","col-9"]],null,null,null,null,null)),(t()(),r.pb(13,0,null,null,1,"h5",[],null,null,null,null,null)),(t()(),r.Gb(14,null,["",""])),(t()(),r.pb(15,0,null,null,6,"div",[["class","row"]],null,null,null,null,null)),(t()(),r.pb(16,0,null,null,2,"div",[["class","col-2"]],null,null,null,null,null)),(t()(),r.pb(17,0,null,null,1,"h5",[],null,null,null,null,null)),(t()(),r.Gb(-1,null,["Fecha:"])),(t()(),r.pb(19,0,null,null,2,"th",[["class","col-9"]],null,null,null,null,null)),(t()(),r.pb(20,0,null,null,1,"h5",[],null,null,null,null,null)),(t()(),r.Gb(21,null,["",""])),(t()(),r.pb(22,0,null,null,6,"div",[["class","row"]],null,null,null,null,null)),(t()(),r.pb(23,0,null,null,2,"div",[["class","col-2"]],null,null,null,null,null)),(t()(),r.pb(24,0,null,null,1,"h5",[],null,null,null,null,null)),(t()(),r.Gb(-1,null,["Satus:"])),(t()(),r.pb(26,0,null,null,2,"th",[["class","col-9"]],null,null,null,null,null)),(t()(),r.pb(27,0,null,null,1,"h5",[],null,null,null,null,null)),(t()(),r.Gb(28,null,["",""])),(t()(),r.pb(29,0,null,null,6,"div",[["class","row"]],null,null,null,null,null)),(t()(),r.pb(30,0,null,null,2,"div",[["class","col-2"]],null,null,null,null,null)),(t()(),r.pb(31,0,null,null,1,"h5",[],null,null,null,null,null)),(t()(),r.Gb(-1,null,["Club anfitrion:"])),(t()(),r.pb(33,0,null,null,2,"th",[["class","col-9"]],null,null,null,null,null)),(t()(),r.pb(34,0,null,null,1,"h5",[],null,null,null,null,null)),(t()(),r.Gb(35,null,["",""])),(t()(),r.pb(36,0,null,null,0,"hr",[["class","my-4"]],null,null,null,null,null)),(t()(),r.pb(37,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.Gb(-1,null,["Bienvenidos a la web de inscripciones para los encuentros del Canotaje de la Provincia de Buenos Aires."]))],null,function(t,e){var n=e.component;t(e,14,0,n.competencia.competencia),t(e,21,0,n.strFecha),t(e,28,0,n.competencia.status),t(e,35,0,n.competencia.club)})}function d(t){return r.Ib(0,[(t()(),r.pb(0,0,null,null,1,"app-home",[],null,null,null,h,c)),r.ob(1,114688,null,0,u,[l.a],null,null)],function(t,e){t(e,1,0)},null)}var f=r.lb("app-home",u,d,{},{},[]);class p{constructor(){}ngOnInit(){}}var m=r.nb({encapsulation:2,styles:[],data:{}});function g(t){return r.Ib(0,[(t()(),r.pb(0,0,null,null,1,"h2",[["class","text-danger"]],null,null,null,null,null)),(t()(),r.Gb(-1,null,["Error"])),(t()(),r.pb(2,0,null,null,1,"p",[["class","text-danger"]],null,null,null,null,null)),(t()(),r.Gb(-1,null,[" An error has ocurred while processing your request"]))],null,null)}function y(t){return r.Ib(0,[(t()(),r.pb(0,0,null,null,1,"app-error",[],null,null,null,g,m)),r.ob(1,114688,null,0,p,[],null,null)],function(t,e){t(e,1,0)},null)}var v=r.lb("app-error",p,y,{},{},[]),b=n("s7LF");class w{constructor(t,e,n,r){this.authService=t,this.router=e,this.route=n,this.msgService=r,this.email="",this.password="",this.retornar=""}ngOnInit(){this.route.queryParams.subscribe(t=>this.retornar=t.retornar||"/home")}onLogin(){this.msgService.clearMessages(),this.authService.login$(this.email,this.password).subscribe(()=>this.router.navigate([this.retornar]),t=>this.msgService.error("Error: Ocurri\xf3 un error"+t+" verifique el email y la contrase\xf1a"))}}var _=n("lGQG"),E=n("2vqZ"),S=r.nb({encapsulation:2,styles:[],data:{}});function C(t){return r.Ib(0,[(t()(),r.pb(0,0,null,null,51,"div",[["class","row mt-3"]],null,null,null,null,null)),(t()(),r.pb(1,0,null,null,50,"div",[["class","col-sm-12 col-md-6 col-lg-4 mx-auto"]],null,null,null,null,null)),(t()(),r.pb(2,0,null,null,49,"div",[["class","card"]],null,null,null,null,null)),(t()(),r.pb(3,0,null,null,1,"div",[["class","card-header"]],null,null,null,null,null)),(t()(),r.Gb(-1,null,[" Login "])),(t()(),r.pb(5,0,null,null,46,"div",[["class","card-body"]],null,null,null,null,null)),(t()(),r.pb(6,0,null,null,45,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(t,e,n){var i=!0,o=t.component;return"submit"===e&&(i=!1!==r.Ab(t,8).onSubmit(n)&&i),"reset"===e&&(i=!1!==r.Ab(t,8).onReset()&&i),"submit"===e&&(i=!1!==o.onLogin()&&i),i},null,null)),r.ob(7,16384,null,0,b.C,[],null,null),r.ob(8,4210688,[["miForm",4]],0,b.o,[[8,null],[8,null]],null,null),r.Db(2048,null,b.b,null,[b.o]),r.ob(10,16384,null,0,b.n,[[4,b.b]],null,null),(t()(),r.pb(11,0,null,null,17,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),r.pb(12,0,null,null,12,"div",[["class","input-group mb-3"]],null,null,null,null,null)),(t()(),r.pb(13,0,null,null,2,"div",[["class","input-group-prepend"]],null,null,null,null,null)),(t()(),r.pb(14,0,null,null,1,"span",[["class","input-group-text"],["style","width:2rem"]],null,null,null,null,null)),(t()(),r.pb(15,0,null,null,0,"i",[["class","fa fa-envelope"]],null,null,null,null,null)),(t()(),r.pb(16,0,null,null,8,"input",[["class","form-control"],["name","email"],["pattern","[a-zA-Z0-9.-_]{1,}@[a-zA-Z.-]{2,}[.]{1}[a-zA-Z]{2,}"],["placeholder","email"],["required",""],["type","email"]],[[2,"is-invalid",null],[1,"required",0],[1,"pattern",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r.Ab(t,17)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.Ab(t,17).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.Ab(t,17)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.Ab(t,17)._compositionEnd(n.target.value)&&i),"ngModelChange"===e&&(i=!1!==(o.email=n)&&i),i},null,null)),r.ob(17,16384,null,0,b.c,[r.B,r.k,[2,b.a]],null,null),r.ob(18,16384,null,0,b.u,[],{required:[0,"required"]},null),r.ob(19,540672,null,0,b.s,[],{pattern:[0,"pattern"]},null),r.Db(1024,null,b.j,function(t,e){return[t,e]},[b.u,b.s]),r.Db(1024,null,b.k,function(t){return[t]},[b.c]),r.ob(22,671744,[["emailRef",4]],0,b.p,[[2,b.b],[6,b.j],[8,null],[6,b.k]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r.Db(2048,null,b.l,null,[b.p]),r.ob(24,16384,null,0,b.m,[[4,b.l]],null,null),(t()(),r.pb(25,0,null,null,1,"small",[["class","text-danger"]],[[2,"d-none",null]],null,null,null,null)),(t()(),r.Gb(-1,null,["El email es requerido"])),(t()(),r.pb(27,0,null,null,1,"small",[["class","text-danger"]],[[2,"d-none",null]],null,null,null,null)),(t()(),r.Gb(-1,null,["No es en un email valido"])),(t()(),r.pb(29,0,null,null,17,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),r.pb(30,0,null,null,12,"div",[["class","input-group mb-3"]],null,null,null,null,null)),(t()(),r.pb(31,0,null,null,2,"div",[["class","input-group-prepend"]],null,null,null,null,null)),(t()(),r.pb(32,0,null,null,1,"span",[["class","input-group-text"],["style","width:2rem"]],null,null,null,null,null)),(t()(),r.pb(33,0,null,null,0,"i",[["class","fa fa-lock"]],null,null,null,null,null)),(t()(),r.pb(34,0,null,null,8,"input",[["class","form-control"],["minlength","6"],["name","password"],["placeholder","Contrase\xf1a"],["required",""],["type","password"]],[[2,"is-invalid",null],[1,"required",0],[1,"minlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r.Ab(t,35)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.Ab(t,35).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.Ab(t,35)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.Ab(t,35)._compositionEnd(n.target.value)&&i),"ngModelChange"===e&&(i=!1!==(o.password=n)&&i),i},null,null)),r.ob(35,16384,null,0,b.c,[r.B,r.k,[2,b.a]],null,null),r.ob(36,16384,null,0,b.u,[],{required:[0,"required"]},null),r.ob(37,540672,null,0,b.i,[],{minlength:[0,"minlength"]},null),r.Db(1024,null,b.j,function(t,e){return[t,e]},[b.u,b.i]),r.Db(1024,null,b.k,function(t){return[t]},[b.c]),r.ob(40,671744,[["passwordRef",4]],0,b.p,[[2,b.b],[6,b.j],[8,null],[6,b.k]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r.Db(2048,null,b.l,null,[b.p]),r.ob(42,16384,null,0,b.m,[[4,b.l]],null,null),(t()(),r.pb(43,0,null,null,1,"small",[["class","text-danger"]],[[2,"d-none",null]],null,null,null,null)),(t()(),r.Gb(-1,null,["El password es requerido"])),(t()(),r.pb(45,0,null,null,1,"small",[["class","text-danger"]],[[2,"d-none",null]],null,null,null,null)),(t()(),r.Gb(-1,null,["La longitud m\xednima es 6 caracteres"])),(t()(),r.pb(47,0,null,null,4,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),r.pb(48,0,null,null,3,"button",[["class","btn btn-primary btn-block"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),(t()(),r.pb(49,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r.pb(50,0,null,null,0,"i",[["class","fa fa-check"]],null,null,null,null,null)),(t()(),r.Gb(-1,null,[" Aceptar "]))],function(t,e){var n=e.component;t(e,18,0,""),t(e,19,0,"[a-zA-Z0-9.-_]{1,}@[a-zA-Z.-]{2,}[.]{1}[a-zA-Z]{2,}"),t(e,22,0,"email",n.email),t(e,36,0,""),t(e,37,0,"6"),t(e,40,0,"password",n.password)},function(t,e){t(e,6,0,r.Ab(e,10).ngClassUntouched,r.Ab(e,10).ngClassTouched,r.Ab(e,10).ngClassPristine,r.Ab(e,10).ngClassDirty,r.Ab(e,10).ngClassValid,r.Ab(e,10).ngClassInvalid,r.Ab(e,10).ngClassPending),t(e,16,0,r.Ab(e,22).invalid&&r.Ab(e,22).touched,r.Ab(e,18).required?"":null,r.Ab(e,19).pattern?r.Ab(e,19).pattern:null,r.Ab(e,24).ngClassUntouched,r.Ab(e,24).ngClassTouched,r.Ab(e,24).ngClassPristine,r.Ab(e,24).ngClassDirty,r.Ab(e,24).ngClassValid,r.Ab(e,24).ngClassInvalid,r.Ab(e,24).ngClassPending),t(e,25,0,r.Ab(e,22).untouched||!r.Ab(e,22).hasError("required")),t(e,27,0,r.Ab(e,22).untouched||!r.Ab(e,22).hasError("pattern")),t(e,34,0,r.Ab(e,40).invalid&&r.Ab(e,40).touched,r.Ab(e,36).required?"":null,r.Ab(e,37).minlength?r.Ab(e,37).minlength:null,r.Ab(e,42).ngClassUntouched,r.Ab(e,42).ngClassTouched,r.Ab(e,42).ngClassPristine,r.Ab(e,42).ngClassDirty,r.Ab(e,42).ngClassValid,r.Ab(e,42).ngClassInvalid,r.Ab(e,42).ngClassPending),t(e,43,0,r.Ab(e,40).untouched||!r.Ab(e,40).hasError("required")),t(e,45,0,r.Ab(e,40).untouched||!r.Ab(e,40).hasError("minlength")),t(e,48,0,r.Ab(e,8).form.invalid)})}function T(t){return r.Ib(0,[(t()(),r.pb(0,0,null,null,1,"app-login",[],null,null,null,C,S)),r.ob(1,114688,null,0,w,[_.a,l.o,l.a,E.a],null,null)],function(t,e){t(e,1,0)},null)}var I=r.lb("app-login",w,T,{},{},[]),A=n("SVse");class k{constructor(){this.emitLogout=new r.m}ngOnInit(){}onLogout(){this.emitLogout.emit("salir")}}var D=r.nb({encapsulation:0,styles:[""],data:{}});function N(t){return r.Ib(0,[(t()(),r.pb(0,0,null,null,7,"li",[["class","nav-item"]],null,null,null,null,null)),(t()(),r.pb(1,0,null,null,6,"a",[["class","nav-link"],["routerLink","/login"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Ab(t,2).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r.ob(2,671744,[[2,4]],0,l.r,[l.o,l.a,A.i],{routerLink:[0,"routerLink"]},null),r.ob(3,1720320,null,2,l.q,[l.o,r.k,r.B,[2,l.p],[2,l.r]],{routerLinkActive:[0,"routerLinkActive"]},null),r.Eb(603979776,1,{links:1}),r.Eb(603979776,2,{linksWithHrefs:1}),(t()(),r.pb(6,0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),r.Gb(-1,null,["Ingresar"]))],function(t,e){t(e,2,0,"/login"),t(e,3,0,"active")},function(t,e){t(e,1,0,r.Ab(e,2).target,r.Ab(e,2).href)})}function O(t){return r.Ib(0,[(t()(),r.pb(0,0,null,null,6,"a",[["class","dropdown-item"],["routerLink","/usuarios"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Ab(t,1).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r.ob(1,671744,[[4,4]],0,l.r,[l.o,l.a,A.i],{routerLink:[0,"routerLink"]},null),r.ob(2,1720320,null,2,l.q,[l.o,r.k,r.B,[2,l.p],[2,l.r]],{routerLinkActive:[0,"routerLinkActive"]},null),r.Eb(603979776,3,{links:1}),r.Eb(603979776,4,{linksWithHrefs:1}),(t()(),r.pb(5,0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),r.Gb(-1,null,["Usuarios"]))],function(t,e){t(e,1,0,"/usuarios"),t(e,2,0,"active")},function(t,e){t(e,0,0,r.Ab(e,1).target,r.Ab(e,1).href)})}function x(t){return r.Ib(0,[(t()(),r.pb(0,0,null,null,6,"a",[["class","dropdown-item"],["routerLink","/clubes"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Ab(t,1).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r.ob(1,671744,[[6,4]],0,l.r,[l.o,l.a,A.i],{routerLink:[0,"routerLink"]},null),r.ob(2,1720320,null,2,l.q,[l.o,r.k,r.B,[2,l.p],[2,l.r]],{routerLinkActive:[0,"routerLinkActive"]},null),r.Eb(603979776,5,{links:1}),r.Eb(603979776,6,{linksWithHrefs:1}),(t()(),r.pb(5,0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),r.Gb(-1,null,["Clubes"]))],function(t,e){t(e,1,0,"/clubes"),t(e,2,0,"active")},function(t,e){t(e,0,0,r.Ab(e,1).target,r.Ab(e,1).href)})}function R(t){return r.Ib(0,[(t()(),r.pb(0,0,null,null,6,"a",[["class","dropdown-item"],["routerLink","/categorias"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Ab(t,1).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r.ob(1,671744,[[8,4]],0,l.r,[l.o,l.a,A.i],{routerLink:[0,"routerLink"]},null),r.ob(2,1720320,null,2,l.q,[l.o,r.k,r.B,[2,l.p],[2,l.r]],{routerLinkActive:[0,"routerLinkActive"]},null),r.Eb(603979776,7,{links:1}),r.Eb(603979776,8,{linksWithHrefs:1}),(t()(),r.pb(5,0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),r.Gb(-1,null,["Categor\xedas"]))],function(t,e){t(e,1,0,"/categorias"),t(e,2,0,"active")},function(t,e){t(e,0,0,r.Ab(e,1).target,r.Ab(e,1).href)})}function P(t){return r.Ib(0,[(t()(),r.pb(0,0,null,null,6,"a",[["class","dropdown-item"],["routerLink","/competencias"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Ab(t,1).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r.ob(1,671744,[[10,4]],0,l.r,[l.o,l.a,A.i],{routerLink:[0,"routerLink"]},null),r.ob(2,1720320,null,2,l.q,[l.o,r.k,r.B,[2,l.p],[2,l.r]],{routerLinkActive:[0,"routerLinkActive"]},null),r.Eb(603979776,9,{links:1}),r.Eb(603979776,10,{linksWithHrefs:1}),(t()(),r.pb(5,0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),r.Gb(-1,null,["Competencias"]))],function(t,e){t(e,1,0,"/competencias"),t(e,2,0,"active")},function(t,e){t(e,0,0,r.Ab(e,1).target,r.Ab(e,1).href)})}function M(t){return r.Ib(0,[(t()(),r.pb(0,0,null,null,12,"li",[["class","nav-item dropdown"]],null,null,null,null,null)),(t()(),r.pb(1,0,null,null,2,"a",[["aria-expanded","false"],["aria-haspopup","true"],["class","nav-link dropdown-toggle"],["data-toggle","dropdown"],["href","#"],["id","navbarDropdown"],["role","button"]],null,null,null,null,null)),(t()(),r.pb(2,0,null,null,0,"i",[["class","fa fa-table"]],null,null,null,null,null)),(t()(),r.Gb(-1,null,["\xa0 Tablas "])),(t()(),r.pb(4,0,null,null,8,"div",[["aria-labelledby","navbarDropdown"],["class","dropdown-menu"]],null,null,null,null,null)),(t()(),r.eb(16777216,null,null,1,null,O)),r.ob(6,16384,null,0,A.l,[r.M,r.J],{ngIf:[0,"ngIf"]},null),(t()(),r.eb(16777216,null,null,1,null,x)),r.ob(8,16384,null,0,A.l,[r.M,r.J],{ngIf:[0,"ngIf"]},null),(t()(),r.eb(16777216,null,null,1,null,R)),r.ob(10,16384,null,0,A.l,[r.M,r.J],{ngIf:[0,"ngIf"]},null),(t()(),r.eb(16777216,null,null,1,null,P)),r.ob(12,16384,null,0,A.l,[r.M,r.J],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,6,0,"Administraci\xf3n"==n.usuario.rol),t(e,8,0,"Administraci\xf3n"==n.usuario.rol),t(e,10,0,"Administraci\xf3n"==n.usuario.rol),t(e,12,0,"Administraci\xf3n"==n.usuario.rol)},null)}function L(t){return r.Ib(0,[(t()(),r.pb(0,0,null,null,39,"li",[["class","nav-item dropdown"]],null,null,null,null,null)),(t()(),r.pb(1,0,null,null,2,"a",[["aria-expanded","false"],["aria-haspopup","true"],["class","nav-link dropdown-toggle"],["data-toggle","dropdown"],["href","#"],["id","navbarDropdown"],["role","button"]],null,null,null,null,null)),(t()(),r.pb(2,0,null,null,0,"i",[["class","fa fa-folder"]],null,null,null,null,null)),(t()(),r.Gb(-1,null,["\xa0 Procesos "])),(t()(),r.pb(4,0,null,null,35,"div",[["aria-labelledby","navbarDropdown"],["class","dropdown-menu"]],null,null,null,null,null)),(t()(),r.pb(5,0,null,null,6,"a",[["class","dropdown-item"],["routerLink","/palistas"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Ab(t,6).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r.ob(6,671744,[[12,4]],0,l.r,[l.o,l.a,A.i],{routerLink:[0,"routerLink"]},null),r.ob(7,1720320,null,2,l.q,[l.o,r.k,r.B,[2,l.p],[2,l.r]],{routerLinkActive:[0,"routerLinkActive"]},null),r.Eb(603979776,11,{links:1}),r.Eb(603979776,12,{linksWithHrefs:1}),(t()(),r.pb(10,0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),r.Gb(-1,null,["Palistas"])),(t()(),r.pb(12,0,null,null,6,"a",[["class","dropdown-item"],["routerLink","/inscripciones"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Ab(t,13).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r.ob(13,671744,[[14,4]],0,l.r,[l.o,l.a,A.i],{routerLink:[0,"routerLink"]},null),r.ob(14,1720320,null,2,l.q,[l.o,r.k,r.B,[2,l.p],[2,l.r]],{routerLinkActive:[0,"routerLinkActive"]},null),r.Eb(603979776,13,{links:1}),r.Eb(603979776,14,{linksWithHrefs:1}),(t()(),r.pb(17,0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),r.Gb(-1,null,["Inscripciones"])),(t()(),r.pb(19,0,null,null,6,"a",[["class","dropdown-item"],["routerLink","/consultar-inscripciones"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Ab(t,20).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r.ob(20,671744,[[16,4]],0,l.r,[l.o,l.a,A.i],{routerLink:[0,"routerLink"]},null),r.ob(21,1720320,null,2,l.q,[l.o,r.k,r.B,[2,l.p],[2,l.r]],{routerLinkActive:[0,"routerLinkActive"]},null),r.Eb(603979776,15,{links:1}),r.Eb(603979776,16,{linksWithHrefs:1}),(t()(),r.pb(24,0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),r.Gb(-1,null,["Consultar Inscripciones"])),(t()(),r.pb(26,0,null,null,6,"a",[["class","dropdown-item"],["routerLink","/consola"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Ab(t,27).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r.ob(27,671744,[[18,4]],0,l.r,[l.o,l.a,A.i],{routerLink:[0,"routerLink"]},null),r.ob(28,1720320,null,2,l.q,[l.o,r.k,r.B,[2,l.p],[2,l.r]],{routerLinkActive:[0,"routerLinkActive"]},null),r.Eb(603979776,17,{links:1}),r.Eb(603979776,18,{linksWithHrefs:1}),(t()(),r.pb(31,0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),r.Gb(-1,null,["Consola"])),(t()(),r.pb(33,0,null,null,6,"a",[["class","dropdown-item"],["routerLink","/backup"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Ab(t,34).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r.ob(34,671744,[[20,4]],0,l.r,[l.o,l.a,A.i],{routerLink:[0,"routerLink"]},null),r.ob(35,1720320,null,2,l.q,[l.o,r.k,r.B,[2,l.p],[2,l.r]],{routerLinkActive:[0,"routerLinkActive"]},null),r.Eb(603979776,19,{links:1}),r.Eb(603979776,20,{linksWithHrefs:1}),(t()(),r.pb(38,0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),r.Gb(-1,null,["Backup"]))],function(t,e){t(e,6,0,"/palistas"),t(e,7,0,"active"),t(e,13,0,"/inscripciones"),t(e,14,0,"active"),t(e,20,0,"/consultar-inscripciones"),t(e,21,0,"active"),t(e,27,0,"/consola"),t(e,28,0,"active"),t(e,34,0,"/backup"),t(e,35,0,"active")},function(t,e){t(e,5,0,r.Ab(e,6).target,r.Ab(e,6).href),t(e,12,0,r.Ab(e,13).target,r.Ab(e,13).href),t(e,19,0,r.Ab(e,20).target,r.Ab(e,20).href),t(e,26,0,r.Ab(e,27).target,r.Ab(e,27).href),t(e,33,0,r.Ab(e,34).target,r.Ab(e,34).href)})}function V(t){return r.Ib(0,[(t()(),r.pb(0,0,null,null,12,"li",[["class","nav-item dropdown"]],null,null,null,null,null)),(t()(),r.pb(1,0,null,null,3,"a",[["aria-expanded","false"],["aria-haspopup","true"],["class","nav-link dropdown-toggle"],["data-toggle","dropdown"],["href","#"],["id","navbarDropdown"],["role","button"]],null,null,null,null,null)),(t()(),r.Gb(2,null,[" "," \xa0 "])),(t()(),r.pb(3,0,null,null,0,"i",[["class","fa fa-user"]],null,null,null,null,null)),(t()(),r.Gb(-1,null,["\xa0 "])),(t()(),r.pb(5,0,null,null,7,"div",[["aria-labelledby","navbarDropdown"],["class","dropdown-menu"]],null,null,null,null,null)),(t()(),r.pb(6,0,null,null,3,"a",[["class","dropdown-item"],["routerLink","/profile"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Ab(t,7).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r.ob(7,671744,null,0,l.r,[l.o,l.a,A.i],{routerLink:[0,"routerLink"]},null),(t()(),r.pb(8,0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),r.Gb(-1,null,["Perfil"])),(t()(),r.pb(10,0,null,null,2,"a",[["class","dropdown-item"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onLogout()&&r),r},null,null)),(t()(),r.pb(11,0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),r.Gb(-1,null,["Salir"]))],function(t,e){t(e,7,0,"/profile")},function(t,e){t(e,2,0,e.component.usuario.name),t(e,6,0,r.Ab(e,7).target,r.Ab(e,7).href)})}function j(t){return r.Ib(0,[(t()(),r.pb(0,0,null,null,23,"nav",[["class","navbar navbar-expand-md navbar-dark bg-success"]],null,null,null,null,null)),(t()(),r.pb(1,0,null,null,0,"img",[["class","mr-4"],["src","assets/img/icono.png"]],null,null,null,null,null)),(t()(),r.pb(2,0,null,null,9,"a",[["class","navbar-brand"],["routerLink","/home"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Ab(t,3).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r.ob(3,671744,null,0,l.r,[l.o,l.a,A.i],{routerLink:[0,"routerLink"]},null),(t()(),r.pb(4,0,null,null,3,"h4",[],null,null,null,null,null)),(t()(),r.pb(5,0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),r.Gb(-1,null,["SISRIRCO"])),(t()(),r.Gb(-1,null,[" - Administraci\xf3n "])),(t()(),r.pb(8,0,null,null,3,"h6",[],null,null,null,null,null)),(t()(),r.pb(9,0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),r.Gb(-1,null,["FeBoCaK"])),(t()(),r.Gb(-1,null,[" Federaci\xf3n Bonairense de Canoas y Kayaks"])),(t()(),r.pb(12,0,null,null,1,"button",[["aria-controls","navMenu"],["aria-expanded","false"],["aria-label","Toggle navigation"],["class","navbar-toggler"],["data-target","#navMenu"],["data-toggle","collapse"],["type","button"]],null,null,null,null,null)),(t()(),r.pb(13,0,null,null,0,"span",[["class","navbar-toggler-icon"]],null,null,null,null,null)),(t()(),r.pb(14,0,null,null,9,"div",[["class","collapse navbar-collapse"],["id","navMenu"]],null,null,null,null,null)),(t()(),r.pb(15,0,null,null,8,"ul",[["class","navbar-nav ml-auto"]],null,null,null,null,null)),(t()(),r.eb(16777216,null,null,1,null,N)),r.ob(17,16384,null,0,A.l,[r.M,r.J],{ngIf:[0,"ngIf"]},null),(t()(),r.eb(16777216,null,null,1,null,M)),r.ob(19,16384,null,0,A.l,[r.M,r.J],{ngIf:[0,"ngIf"]},null),(t()(),r.eb(16777216,null,null,1,null,L)),r.ob(21,16384,null,0,A.l,[r.M,r.J],{ngIf:[0,"ngIf"]},null),(t()(),r.eb(16777216,null,null,1,null,V)),r.ob(23,16384,null,0,A.l,[r.M,r.J],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,3,0,"/home"),t(e,17,0,!n.usuario),t(e,19,0,!!n.usuario),t(e,21,0,!!n.usuario),t(e,23,0,!!n.usuario)},function(t,e){t(e,2,0,r.Ab(e,3).target,r.Ab(e,3).href)})}class F{constructor(){this.emitLogout=new r.m}ngOnInit(){}onLogout(){this.emitLogout.emit("salir")}}var U=r.nb({encapsulation:0,styles:[""],data:{}});function q(t){return r.Ib(0,[(t()(),r.pb(0,0,null,null,7,"li",[["class","nav-item"]],null,null,null,null,null)),(t()(),r.pb(1,0,null,null,6,"a",[["class","nav-link"],["routerLink","/login"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Ab(t,2).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r.ob(2,671744,[[2,4]],0,l.r,[l.o,l.a,A.i],{routerLink:[0,"routerLink"]},null),r.ob(3,1720320,null,2,l.q,[l.o,r.k,r.B,[2,l.p],[2,l.r]],{routerLinkActive:[0,"routerLinkActive"]},null),r.Eb(603979776,1,{links:1}),r.Eb(603979776,2,{linksWithHrefs:1}),(t()(),r.pb(6,0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),r.Gb(-1,null,["Ingresar"]))],function(t,e){t(e,2,0,"/login"),t(e,3,0,"active")},function(t,e){t(e,1,0,r.Ab(e,2).target,r.Ab(e,2).href)})}function B(t){return r.Ib(0,[(t()(),r.pb(0,0,null,null,25,"li",[["class","nav-item dropdown"]],null,null,null,null,null)),(t()(),r.pb(1,0,null,null,2,"a",[["aria-expanded","false"],["aria-haspopup","true"],["class","nav-link dropdown-toggle"],["data-toggle","dropdown"],["href","#"],["id","navbarDropdown"],["role","button"]],null,null,null,null,null)),(t()(),r.pb(2,0,null,null,0,"i",[["class","fa fa-folder"]],null,null,null,null,null)),(t()(),r.Gb(-1,null,["\xa0 Procesos "])),(t()(),r.pb(4,0,null,null,21,"div",[["aria-labelledby","navbarDropdown"],["class","dropdown-menu"]],null,null,null,null,null)),(t()(),r.pb(5,0,null,null,6,"a",[["class","dropdown-item"],["routerLink","/palistas"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Ab(t,6).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r.ob(6,671744,[[4,4]],0,l.r,[l.o,l.a,A.i],{routerLink:[0,"routerLink"]},null),r.ob(7,1720320,null,2,l.q,[l.o,r.k,r.B,[2,l.p],[2,l.r]],{routerLinkActive:[0,"routerLinkActive"]},null),r.Eb(603979776,3,{links:1}),r.Eb(603979776,4,{linksWithHrefs:1}),(t()(),r.pb(10,0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),r.Gb(-1,null,["Palistas"])),(t()(),r.pb(12,0,null,null,6,"a",[["class","dropdown-item"],["routerLink","/inscripciones"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Ab(t,13).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r.ob(13,671744,[[6,4]],0,l.r,[l.o,l.a,A.i],{routerLink:[0,"routerLink"]},null),r.ob(14,1720320,null,2,l.q,[l.o,r.k,r.B,[2,l.p],[2,l.r]],{routerLinkActive:[0,"routerLinkActive"]},null),r.Eb(603979776,5,{links:1}),r.Eb(603979776,6,{linksWithHrefs:1}),(t()(),r.pb(17,0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),r.Gb(-1,null,["Inscripciones"])),(t()(),r.pb(19,0,null,null,6,"a",[["class","dropdown-item"],["routerLink","/armar-equipos"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Ab(t,20).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r.ob(20,671744,[[8,4]],0,l.r,[l.o,l.a,A.i],{routerLink:[0,"routerLink"]},null),r.ob(21,1720320,null,2,l.q,[l.o,r.k,r.B,[2,l.p],[2,l.r]],{routerLinkActive:[0,"routerLinkActive"]},null),r.Eb(603979776,7,{links:1}),r.Eb(603979776,8,{linksWithHrefs:1}),(t()(),r.pb(24,0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),r.Gb(-1,null,["Armar equipos"]))],function(t,e){t(e,6,0,"/palistas"),t(e,7,0,"active"),t(e,13,0,"/inscripciones"),t(e,14,0,"active"),t(e,20,0,"/armar-equipos"),t(e,21,0,"active")},function(t,e){t(e,5,0,r.Ab(e,6).target,r.Ab(e,6).href),t(e,12,0,r.Ab(e,13).target,r.Ab(e,13).href),t(e,19,0,r.Ab(e,20).target,r.Ab(e,20).href)})}function G(t){return r.Ib(0,[(t()(),r.pb(0,0,null,null,12,"li",[["class","nav-item dropdown"]],null,null,null,null,null)),(t()(),r.pb(1,0,null,null,3,"a",[["aria-expanded","false"],["aria-haspopup","true"],["class","nav-link dropdown-toggle"],["data-toggle","dropdown"],["href","#"],["id","navbarDropdown"],["role","button"]],null,null,null,null,null)),(t()(),r.Gb(2,null,[" "," \xa0 "])),(t()(),r.pb(3,0,null,null,0,"i",[["class","fa fa-user"]],null,null,null,null,null)),(t()(),r.Gb(-1,null,["\xa0 "])),(t()(),r.pb(5,0,null,null,7,"div",[["aria-labelledby","navbarDropdown"],["class","dropdown-menu"]],null,null,null,null,null)),(t()(),r.pb(6,0,null,null,3,"a",[["class","dropdown-item"],["routerLink","/profile"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Ab(t,7).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r.ob(7,671744,null,0,l.r,[l.o,l.a,A.i],{routerLink:[0,"routerLink"]},null),(t()(),r.pb(8,0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),r.Gb(-1,null,["Perfil"])),(t()(),r.pb(10,0,null,null,2,"a",[["class","dropdown-item"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onLogout()&&r),r},null,null)),(t()(),r.pb(11,0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),r.Gb(-1,null,["Salir"]))],function(t,e){t(e,7,0,"/profile")},function(t,e){t(e,2,0,e.component.usuario.name),t(e,6,0,r.Ab(e,7).target,r.Ab(e,7).href)})}function z(t){return r.Ib(0,[(t()(),r.pb(0,0,null,null,21,"nav",[["class","navbar navbar-expand-md navbar-dark bg-info"]],null,null,null,null,null)),(t()(),r.pb(1,0,null,null,0,"img",[["class","mr-4"],["src","assets/img/icono.png"]],null,null,null,null,null)),(t()(),r.pb(2,0,null,null,9,"a",[["class","navbar-brand"],["routerLink","/home"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Ab(t,3).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r.ob(3,671744,null,0,l.r,[l.o,l.a,A.i],{routerLink:[0,"routerLink"]},null),(t()(),r.pb(4,0,null,null,3,"h4",[],null,null,null,null,null)),(t()(),r.pb(5,0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),r.Gb(-1,null,["SISRIRCO"])),(t()(),r.Gb(-1,null,[" - Inscripciones "])),(t()(),r.pb(8,0,null,null,3,"h6",[],null,null,null,null,null)),(t()(),r.pb(9,0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),r.Gb(-1,null,["FeBoCaK"])),(t()(),r.Gb(-1,null,[" Federaci\xf3n Bonairense de Canoas y Kayaks"])),(t()(),r.pb(12,0,null,null,1,"button",[["aria-controls","navMenu"],["aria-expanded","false"],["aria-label","Toggle navigation"],["class","navbar-toggler"],["data-target","#navMenu"],["data-toggle","collapse"],["type","button"]],null,null,null,null,null)),(t()(),r.pb(13,0,null,null,0,"span",[["class","navbar-toggler-icon"]],null,null,null,null,null)),(t()(),r.pb(14,0,null,null,7,"div",[["class","collapse navbar-collapse"],["id","navMenu"]],null,null,null,null,null)),(t()(),r.pb(15,0,null,null,6,"ul",[["class","navbar-nav ml-auto"]],null,null,null,null,null)),(t()(),r.eb(16777216,null,null,1,null,q)),r.ob(17,16384,null,0,A.l,[r.M,r.J],{ngIf:[0,"ngIf"]},null),(t()(),r.eb(16777216,null,null,1,null,B)),r.ob(19,16384,null,0,A.l,[r.M,r.J],{ngIf:[0,"ngIf"]},null),(t()(),r.eb(16777216,null,null,1,null,G)),r.ob(21,16384,null,0,A.l,[r.M,r.J],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,3,0,"/home"),t(e,17,0,!n.usuario),t(e,19,0,!!n.usuario),t(e,21,0,!!n.usuario)},function(t,e){t(e,2,0,r.Ab(e,3).target,r.Ab(e,3).href)})}class H{constructor(){this.loading=!1}ngOnInit(){this.subscription=this.loading$.subscribe(t=>this.loading=t)}ngOnDestroy(){this.subscription.unsubscribe()}}var W=r.nb({encapsulation:0,styles:[[".spinner[_ngcontent-%COMP%]{position:fixed;z-index:1031;top:50%;left:50%;transform:translate(-50%,-50%)}"]],data:{}});function K(t){return r.Ib(0,[(t()(),r.pb(0,0,null,null,1,"div",[["class","spinner"]],[[2,"d-none",null]],null,null,null,null)),(t()(),r.pb(1,0,null,null,0,"i",[["class","fa fa-spinner fa-spin fa-4x"]],null,null,null,null,null))],null,function(t,e){t(e,0,0,!e.component.loading)})}var Q=n("XNiG"),$=n("VRyK");class Y{constructor(t){this.msgService=t,this.close$=new Q.a}ngOnInit(){this.message$=Object($.a)(this.msgService.message$,this.close$)}closeAlert(){this.close$.next()}}var J=r.nb({encapsulation:2,styles:[],data:{}});function X(t){return r.Ib(0,[(t()(),r.pb(0,0,null,null,5,"div",[["class","alert alert-dismissable mt-2"]],null,null,null,null,null)),r.Db(512,null,A.u,A.v,[r.q,r.r,r.k,r.B]),r.ob(2,278528,null,0,A.j,[A.u],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(t()(),r.pb(3,0,null,null,1,"button",[["class","close"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.closeAlert()&&r),r},null,null)),(t()(),r.Gb(-1,null,[" \xd7 "])),(t()(),r.Gb(5,null,[" ","\n"]))],function(t,e){t(e,2,0,"alert alert-dismissable mt-2",e.context.ngIf.class)},function(t,e){t(e,5,0,e.context.ngIf.message)})}function Z(t){return r.Ib(0,[(t()(),r.eb(16777216,null,null,2,null,X)),r.ob(1,16384,null,0,A.l,[r.M,r.J],{ngIf:[0,"ngIf"]},null),r.Bb(131072,A.b,[r.h])],function(t,e){var n=e.component;t(e,1,0,r.Hb(e,1,0,r.Ab(e,2).transform(n.message$)))},null)}class tt{constructor(t,e,n){this.authService=t,this.router=e,this.spinner=n,this.modulo=i.modulo,e.events.subscribe(t=>{this.checkRouterEvent(t)})}ngOnInit(){this.loading$=this.spinner.getSpinner(),this.usuario$=this.authService.getUser$()}onLogout(){this.authService.logoutUser(),this.router.navigate(["home"])}checkRouterEvent(t){t instanceof l.g&&this.spinner.on(),(t instanceof l.e||t instanceof l.d||t instanceof l.f)&&this.spinner.off()}}var et=n("2Vo4");let nt=(()=>{class t{constructor(){this.subject=new et.a(!1)}on(){this.subject.next(!0)}off(){this.subject.next(!1)}getSpinner(){return this.subject.asObservable()}}return t.ngInjectableDef=r.Mb({factory:function(){return new t},token:t,providedIn:"root"}),t})();var rt=r.nb({encapsulation:2,styles:[],data:{}});function it(t){return r.Ib(0,[(t()(),r.pb(0,0,null,null,2,"app-navbar-admin",[],null,[[null,"emitLogout"]],function(t,e,n){var r=!0;return"emitLogout"===e&&(r=!1!==t.component.onLogout()&&r),r},j,D)),r.ob(1,114688,null,0,k,[],{usuario:[0,"usuario"]},{emitLogout:"emitLogout"}),r.Bb(131072,A.b,[r.h])],function(t,e){var n=e.component;t(e,1,0,r.Hb(e,1,0,r.Ab(e,2).transform(n.usuario$)))},null)}function ot(t){return r.Ib(0,[(t()(),r.pb(0,0,null,null,2,"app-navbar-inscripcion",[],null,[[null,"emitLogout"]],function(t,e,n){var r=!0;return"emitLogout"===e&&(r=!1!==t.component.onLogout()&&r),r},z,U)),r.ob(1,114688,null,0,F,[],{usuario:[0,"usuario"]},{emitLogout:"emitLogout"}),r.Bb(131072,A.b,[r.h])],function(t,e){var n=e.component;t(e,1,0,r.Hb(e,1,0,r.Ab(e,2).transform(n.usuario$)))},null)}function st(t){return r.Ib(0,[(t()(),r.pb(0,0,null,null,1,"app-spinner",[],null,null,null,K,W)),r.ob(1,245760,null,0,H,[],{loading$:[0,"loading$"]},null),(t()(),r.pb(2,0,null,null,5,null,null,null,null,null,null,null)),r.ob(3,16384,null,0,A.o,[],{ngSwitch:[0,"ngSwitch"]},null),(t()(),r.eb(16777216,null,null,1,null,it)),r.ob(5,278528,null,0,A.p,[r.M,r.J,A.o],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),r.eb(16777216,null,null,1,null,ot)),r.ob(7,278528,null,0,A.p,[r.M,r.J,A.o],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),r.pb(8,0,null,null,1,"app-message",[],null,null,null,Z,J)),r.ob(9,114688,null,0,Y,[E.a],null,null),(t()(),r.pb(10,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),r.ob(11,212992,null,0,l.t,[l.b,r.M,r.j,[8,null],r.h],null,null)],function(t,e){var n=e.component;t(e,1,0,n.loading$),t(e,3,0,n.modulo),t(e,5,0,"Administraci\xf3n"),t(e,7,0,"Inscripciones"),t(e,9,0),t(e,11,0)},null)}var at=r.nb({encapsulation:2,styles:[],data:{}});function ut(t){return r.Ib(0,[(t()(),r.pb(0,0,null,null,2,"div",[["class","container-fluid"]],null,null,null,null,null)),(t()(),r.pb(1,0,null,null,1,"app-shell",[],null,null,null,st,rt)),r.ob(2,114688,null,0,tt,[_.a,l.o,nt],null,null)],function(t,e){t(e,2,0)},null)}function lt(t){return r.Ib(0,[(t()(),r.pb(0,0,null,null,1,"app-root",[],null,null,null,ut,at)),r.ob(1,49152,null,0,s,[],null,null)],null,null)}var ct,ht=r.lb("app-root",s,lt,{},{},[]),dt=n("cUpR"),ft=n("yA/v"),pt=n("Xr7G");n("mrSG"),n("6Joi");let mt=ct=class{static enablePersistence(t){return{ngModule:ct,providers:[{provide:pt.b,useValue:!0},{provide:pt.d,useValue:t}]}}};var gt=n("irV9"),yt=n("wj3C"),vt=n.n(yt);(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},n="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function r(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function i(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:r(t)}}!function(t,r){if(r){var i=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in i||(i[s]={}),i=i[s]}(r=r(o=i[t=t[t.length-1]]))!=o&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Promise",function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function r(){this.a=null}function o(t){return t instanceof e?t:new e(function(e){e(t)})}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c(function(){e.g()})}this.a.push(t)};var s=n.setTimeout;r.prototype.c=function(t){s(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(r){this.f(r)}}}this.a=null},r.prototype.f=function(t){this.c(function(){throw t})},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.o),reject:t(this.g)}},e.prototype.o=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.u(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.l(t):this.h(t)}},e.prototype.l=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.v(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.m()},e.prototype.m=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new r;return e.prototype.u=function(t){var e=this.f();t.Ha(e.resolve,e.reject)},e.prototype.v=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(r){n.reject(r)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(n){o(n)}}:e}var i,o,s=new e(function(t,e){i=t,o=e});return this.Ha(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Ha=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=o,e.reject=function(t){return new e(function(e,n){n(t)})},e.race=function(t){return new e(function(e,n){for(var r=i(t),s=r.next();!s.done;s=r.next())o(s.value).Ha(e,n)})},e.all=function(t){var n=i(t),r=n.next();return r.done?o([]):new e(function(t,e){function i(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,o(r.value).Ha(i(s.length-1),e),r=n.next()}while(!r.done)})},e});var o=o||{},s=this||self;function a(t){return"string"==typeof t}function u(t){return"boolean"==typeof t}var l=/^[\w+\/_-]+[=]{0,2}$/,c=null;function h(){}function d(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function f(t){return null===t}function p(t){return"array"==d(t)}function m(t){var e=d(t);return"array"==e||"object"==e&&"number"==typeof t.length}function g(t){return"function"==d(t)}function y(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var v="closure_uid_"+(1e9*Math.random()>>>0),b=0;function w(t,e,n){return t.call.apply(t.bind,arguments)}function _(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function E(t,e,n){return(E=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?w:_).apply(null,arguments)}function S(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var C=Date.now||function(){return+new Date};function T(t,e){function n(){}n.prototype=e.prototype,t.mb=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ad=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function I(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function A(t){if(Error.captureStackTrace)Error.captureStackTrace(this,A);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function k(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");A.call(this,n+t[r])}function D(t,e){throw new k("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function N(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function O(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function x(){this.b=this.a=null}T(A,Error),A.prototype.name="CustomError",T(k,A),k.prototype.name="AssertionError",N.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var R=new N(function(){return new M},function(t){t.reset()});function P(){var t=Bt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function M(){this.next=this.b=this.a=null}function L(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||s).Element&&r.Location){var i=r;break t}}catch(a){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(y(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(a){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;D("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}x.prototype.add=function(t,e){var n=R.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},M.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},M.prototype.reset=function(){this.next=this.b=this.a=null};var V=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(a(t))return a(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},j=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=a(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},F=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i=a(t)?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},U=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=a(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function q(t,e){return 0<=V(t,e)}function B(t,e){var n;return(n=0<=(e=V(t,e)))&&Array.prototype.splice.call(t,e,1),n}function G(t,e){!function(t,e){for(var n=a(t)?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1)})}function z(t){return Array.prototype.concat.apply([],arguments)}function H(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function W(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function K(t){for(var e in t)return!1;return!0}function Q(t){var e,n={};for(e in t)n[e]=t[e];return n}var $="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Y(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<$.length;o++)n=$[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function J(t,e){this.a=t===tt&&e||"",this.b=Z}function X(t){return t instanceof J&&t.constructor===J&&t.b===Z?t.a:(D("expected object of type Const, got '"+t+"'"),"type_error:Const")}J.prototype.na=!0,J.prototype.ma=function(){return this.a},J.prototype.toString=function(){return"Const{"+this.a+"}"};var Z={},tt={},et=new J(tt,"");function nt(){this.a="",this.b=at}function rt(t){return t instanceof nt&&t.constructor===nt&&t.b===at?t.a:(D("expected object of type TrustedResourceUrl, got '"+t+"' of type "+d(t)),"type_error:TrustedResourceUrl")}function it(t,e){var n=X(t);if(!st.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return ut(t=n.replace(ot,function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof J?X(t):encodeURIComponent(String(t))}))}nt.prototype.na=!0,nt.prototype.ma=function(){return this.a.toString()},nt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var ot=/%{(\w+)}/g,st=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^\/\\]|[^:\/\\%]+\/|[^:\/\\%]*[?#]|about:blank#)/i,at={};function ut(t){var e=new nt;return e.a=t,e}var lt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},ct=/&/g,ht=/</g,dt=/>/g,ft=/"/g,pt=/'/g,mt=/\x00/g,gt=/[\x00&<>"']/;function yt(t,e){return-1!=t.indexOf(e)}function bt(t,e){return t<e?-1:t>e?1:0}function wt(){this.a="",this.b=Tt}function _t(t){return t instanceof wt&&t.constructor===wt&&t.b===Tt?t.a:(D("expected object of type SafeUrl, got '"+t+"' of type "+d(t)),"type_error:SafeUrl")}wt.prototype.na=!0,wt.prototype.ma=function(){return this.a.toString()},wt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Et=/^(?:(?:https?|mailto|ftp):|[^:\/?#]*(?:[\/?#]|$))/i;function St(t){return t instanceof wt?t:(t="object"==typeof t&&t.na?t.ma():String(t),Et.test(t)||(t="about:invalid#zClosurez"),It(t))}var Ct,Tt={};function It(t){var e=new wt;return e.a=t,e}It("about:blank");t:{var At=s.navigator;if(At){var kt=At.userAgent;if(kt){Ct=kt;break t}}Ct=""}function Dt(t){return yt(Ct,t)}function Nt(){this.a="",this.b=xt}function Ot(t){return t instanceof Nt&&t.constructor===Nt&&t.b===xt?t.a:(D("expected object of type SafeHtml, got '"+t+"' of type "+d(t)),"type_error:SafeHtml")}Nt.prototype.na=!0,Nt.prototype.ma=function(){return this.a.toString()},Nt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var xt={};function Rt(t){var e=new Nt;return e.a=t,e}Rt("<!DOCTYPE html>");var Pt,Mt,Lt=Rt("");function Vt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function jt(t){return gt.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(ct,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(ht,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(dt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(ft,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(pt,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(mt,"&#0;"))),t}function Ft(t){s.setTimeout(function(){throw t},0)}function Ut(t,e){Mt||function(){if(s.Promise&&s.Promise.resolve){var t=s.Promise.resolve(void 0);Mt=function(){t.then(Gt)}}else Mt=function(){var t=Gt;!g(s.setImmediate)||s.Window&&s.Window.prototype&&!Dt("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(Pt||(Pt=function(){var t=s.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!Dt("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",function(t){var e=ut(X(et));L(t,"HTMLIFrameElement"),t.src=rt(e).toString()}(t),document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(Ot(Lt)),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=E(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!Dt("Trident")&&!Dt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).ub;n.ub=null,t()}},function(t){r.next={ub:t},r=r.next,e.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){s.setTimeout(t,0)}}()),Pt(t)):s.setImmediate(t)}}(),qt||(Mt(),qt=!0),Bt.add(t,e)}Rt("<br>");var qt=!1,Bt=new x;function Gt(){for(var t;t=P();){try{t.a.call(t.b)}catch(e){Ft(e)}O(R,t)}qt=!1}function zt(t,e){if(this.a=Ht,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=h)try{var n=this;t.call(e,function(t){re(n,Wt,t)},function(t){if(!(t instanceof ce))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(e){}re(n,Kt,t)})}catch(r){re(this,Kt,r)}}var Ht=0,Wt=2,Kt=3;function Qt(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Qt.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var $t=new N(function(){return new Qt},function(t){t.reset()});function Yt(t,e,n){var r=$t.get();return r.g=t,r.b=e,r.f=n,r}function Jt(t){if(t instanceof zt)return t;var e=new zt(h);return re(e,Wt,t),e}function Xt(t){return new zt(function(e,n){n(t)})}function Zt(t,e,n){ie(t,e,n,null)||Ut(S(e,t))}function te(t){return new zt(function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Cb:!0,value:o}:{Cb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Zt(t[o],S(i,o,!0),S(i,o,!1));else e(r)})}function ee(t,e){t.b||t.a!=Wt&&t.a!=Kt||oe(t),t.f?t.f.next=e:t.b=e,t.f=e}function ne(t,e,n,r){var i=Yt(null,null,null);return i.a=new zt(function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(s){o(s)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof ce?o(e):t(i)}catch(s){o(s)}}:o}),i.a.c=t,ee(t,i),i.a}function re(t,e,n){t.a==Ht&&(t===n&&(e=Kt,n=new TypeError("Promise cannot resolve to itself")),t.a=1,ie(n,t.Jc,t.Kc,t)||(t.i=n,t.a=e,t.c=null,oe(t),e!=Kt||n instanceof ce||function(t,e){t.g=!0,Ut(function(){t.g&&le.call(null,e)})}(t,n)))}function ie(t,e,n,r){if(t instanceof zt)return ee(t,Yt(e||h,n||null,r)),!0;if(I(t))return t.then(e,n,r),!0;if(y(t))try{var i=t.then;if(g(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,function(t){s||(s=!0,n.call(i,t))},o)}catch(a){o(a)}}(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function oe(t){t.h||(t.h=!0,Ut(t.Ub,t))}function se(t){var e=null;return t.b&&(t.b=(e=t.b).next,e.next=null),t.b||(t.f=null),e}function ae(t,e,n,r){if(n==Kt&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,ue(e,n,r);else try{e.c?e.g.call(e.f):ue(e,n,r)}catch(i){le.call(null,i)}O($t,e)}function ue(t,e,n){e==Wt?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}zt.prototype.then=function(t,e,n){return ne(this,g(t)?t:null,g(e)?e:null,n)},zt.prototype.$goog_Thenable=!0,(t=zt.prototype).ha=function(t,e){return(t=Yt(t,t,e)).c=!0,ee(this,t),this},t.s=function(t,e){return ne(this,null,t,e)},t.cancel=function(t){this.a==Ht&&Ut(function(){!function t(e,n){if(e.a==Ht)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,s=null,a=r.b;a&&(a.c||(i++,a.a==e&&(o=a),!(o&&1<i)));a=a.next)o||(s=a);o&&(r.a==Ht&&1==i?t(r,n):(s?((i=s).next==r.f&&(r.f=i),i.next=i.next.next):se(r),ae(r,o,Kt,n)))}e.c=null}else re(e,Kt,n)}(this,new ce(t))},this)},t.Jc=function(t){this.a=Ht,re(this,Wt,t)},t.Kc=function(t){this.a=Ht,re(this,Kt,t)},t.Ub=function(){for(var t;t=se(this);)ae(this,t,this.a,this.i);this.h=!1};var le=Ft;function ce(t){A.call(this,t)}function he(){0!=de&&(fe[this[v]||(this[v]=++b)]=this),this.qa=this.qa,this.ia=this.ia}T(ce,A),ce.prototype.name="cancel";var de=0,fe={};function pe(t){if(!t.qa&&(t.qa=!0,t.va(),0!=de)){var e=t[v]||(t[v]=++b);if(0!=de&&t.ia&&0<t.ia.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete fe[e]}}function me(t){return me[" "](t),t}he.prototype.qa=!1,he.prototype.va=function(){if(this.ia)for(;this.ia.length;)this.ia.shift()()},me[" "]=h;var ge,ye,ve=Dt("Opera"),be=Dt("Trident")||Dt("MSIE"),we=Dt("Edge"),_e=we||be,Ee=Dt("Gecko")&&!(yt(Ct.toLowerCase(),"webkit")&&!Dt("Edge"))&&!(Dt("Trident")||Dt("MSIE"))&&!Dt("Edge"),Se=yt(Ct.toLowerCase(),"webkit")&&!Dt("Edge");function Ce(){var t=s.document;return t?t.documentMode:void 0}t:{var Te="",Ie=(ye=Ct,Ee?/rv:([^\);]+)(\)|;)/.exec(ye):we?/Edge\/([\d\.]+)/.exec(ye):be?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(ye):Se?/WebKit\/(\S+)/.exec(ye):ve?/(?:Version)[ \/]?(\S+)/.exec(ye):void 0);if(Ie&&(Te=Ie?Ie[1]:""),be){var Ae=Ce();if(null!=Ae&&Ae>parseFloat(Te)){ge=String(Ae);break t}}ge=Te}var ke,De={};function Ne(t){return function(t,e){var n=De;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=lt(String(ge)).split("."),r=lt(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=bt(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||bt(0==s[2].length,0==a[2].length)||bt(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}ke=s.document&&be?Ce():void 0;var Oe=Object.freeze||function(t){return t},xe=!be||9<=Number(ke),Re=be&&!Ne("9"),Pe=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{s.addEventListener("test",h,e),s.removeEventListener("test",h,e)}catch(n){}return t}();function Me(t,e){this.type=t,this.b=this.target=e,this.Ib=!0}function Le(t,e){if(Me.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Ee){t:{try{me(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=a(t.pointerType)?t.pointerType:Ve[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Me.prototype.preventDefault=function(){this.Ib=!1},T(Le,Me);var Ve=Oe({2:"touch",3:"pen",4:"mouse"});Le.prototype.preventDefault=function(){Le.mb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Re)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},Le.prototype.f=function(){return this.a};var je="closure_listenable_"+(1e6*Math.random()|0),Fe=0;function Ue(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.La=i,this.key=++Fe,this.oa=this.Ga=!1}function qe(t){t.oa=!0,t.listener=null,t.proxy=null,t.src=null,t.La=null}function Be(t){this.src=t,this.a={},this.b=0}function Ge(t,e){var n=e.type;n in t.a&&B(t.a[n],e)&&(qe(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function ze(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.oa&&o.listener==e&&o.capture==!!n&&o.La==r)return i}return-1}Be.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=ze(t,e,r,i);return-1<s?(e=t[s],n||(e.Ga=!1)):((e=new Ue(e,this.src,o,!!r,i)).Ga=n,t.push(e)),e};var He="closure_lm_"+(1e6*Math.random()|0),We={};function Ke(t,e,n,r,i){if(r&&r.once)$e(t,e,n,r,i);else if(p(e))for(var o=0;o<e.length;o++)Ke(t,e[o],n,r,i);else n=on(n),t&&t[je]?an(t,e,n,y(r)?!!r.capture:!!r,i):Qe(t,e,n,!1,r,i)}function Qe(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=y(i)?!!i.capture:!!i,a=nn(t);if(a||(t[He]=a=new Be(t)),!(n=a.add(e,n,r,s,o)).proxy)if(r=function(){var t=en,e=xe?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Pe||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Xe(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function $e(t,e,n,r,i){if(p(e))for(var o=0;o<e.length;o++)$e(t,e[o],n,r,i);else n=on(n),t&&t[je]?un(t,e,n,y(r)?!!r.capture:!!r,i):Qe(t,e,n,!0,r,i)}function Ye(t,e,n,r,i){if(p(e))for(var o=0;o<e.length;o++)Ye(t,e[o],n,r,i);else r=y(r)?!!r.capture:!!r,n=on(n),t&&t[je]?(t=t.m,(e=String(e).toString())in t.a&&-1<(n=ze(o=t.a[e],n,r,i))&&(qe(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=nn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=ze(e,n,r,i)),(n=-1<t?e[t]:null)&&Je(n))}function Je(t){if("number"!=typeof t&&t&&!t.oa){var e=t.src;if(e&&e[je])Ge(e.m,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Xe(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=nn(e))?(Ge(n,t),0==n.b&&(n.src=null,e[He]=null)):qe(t)}}}function Xe(t){return t in We?We[t]:We[t]="on"+t}function Ze(t,e,n,r){var i=!0;if((t=nn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.oa&&(o=tn(o,r),i=i&&!1!==o)}return i}function tn(t,e){var n=t.listener,r=t.La||t.src;return t.Ga&&Je(t),n.call(r,e)}function en(t,e){if(t.oa)return!0;if(!xe){if(!e)t:{e=["window","event"];for(var n=s,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Le(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(a){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=Ze(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=Ze(r[i],t,!1,e),n=n&&o}return n}return tn(t,new Le(e,this))}function nn(t){return(t=t[He])instanceof Be?t:null}var rn="__closure_events_fn_"+(1e9*Math.random()>>>0);function on(t){return g(t)?t:(t[rn]||(t[rn]=function(e){return t.handleEvent(e)}),t[rn])}function sn(){he.call(this),this.m=new Be(this),this.Nb=this,this.Ua=null}function an(t,e,n,r,i){t.m.add(String(e),n,!1,r,i)}function un(t,e,n,r,i){t.m.add(String(e),n,!0,r,i)}function ln(t,e,n,r){if(!(e=t.m.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.oa&&s.capture==n){var a=s.listener,u=s.La||s.src;s.Ga&&Ge(t.m,s),i=!1!==a.call(u,r)&&i}}return i&&0!=r.Ib}function cn(t,e,n){if(g(t))n&&(t=E(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=E(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function hn(t){var e=null;return new zt(function(n,r){-1==(e=cn(function(){n(void 0)},t))&&r(Error("Failed to schedule timer."))}).s(function(t){throw s.clearTimeout(e),t})}function dn(t){if(t.S&&"function"==typeof t.S)return t.S();if(a(t))return t.split("");if(m(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function fn(t){if(t.U&&"function"==typeof t.U)return t.U();if(!t.S||"function"!=typeof t.S){if(m(t)||a(t)){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function pn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof pn)for(n=t.U(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function mn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];gn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)gn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function gn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}T(sn,he),sn.prototype[je]=!0,sn.prototype.addEventListener=function(t,e,n,r){Ke(this,t,e,n,r)},sn.prototype.removeEventListener=function(t,e,n,r){Ye(this,t,e,n,r)},sn.prototype.dispatchEvent=function(t){var e,n=this.Ua;if(n)for(e=[];n;n=n.Ua)e.push(n);n=this.Nb;var r=t.type||t;if(a(t))t=new Me(t,n);else if(t instanceof Me)t.target=t.target||n;else{var i=t;Y(t=new Me(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=ln(s,r,!0,t)&&i}if(i=ln(s=t.b=n,r,!0,t)&&i,i=ln(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=ln(s=t.b=e[o],r,!1,t)&&i;return i},sn.prototype.va=function(){if(sn.mb.va.call(this),this.m){var t,e=this.m;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)qe(n[r]);delete e.a[t],e.b--}}this.Ua=null},(t=pn.prototype).S=function(){mn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.U=function(){return mn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return gn(this.b,t)?this.b[t]:e},t.set=function(t,e){gn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.U(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var yn=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function vn(t,e){var n;this.b=this.i=this.f="",this.m=null,this.g=this.c="",this.h=!1,t instanceof vn?(this.h=void 0!==e?e:t.h,bn(this,t.f),this.i=t.i,this.b=t.b,wn(this,t.m),this.c=t.c,_n(this,Un(t.a)),this.g=t.g):t&&(n=String(t).match(yn))?(this.h=!!e,bn(this,n[1]||"",!0),this.i=In(n[2]||""),this.b=In(n[3]||"",!0),wn(this,n[4]),this.c=In(n[5]||"",!0),_n(this,n[6]||"",!0),this.g=In(n[7]||"")):(this.h=!!e,this.a=new Pn(null,this.h))}function bn(t,e,n){t.f=n?In(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function wn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function _n(t,e,n){e instanceof Pn?(t.a=e,function(t,e){e&&!t.f&&(Mn(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Vn(this,e),Fn(this,n,t))},t)),t.f=e}(t.a,t.h)):(n||(e=An(e,xn)),t.a=new Pn(e,t.h))}function En(t,e,n){t.a.set(e,n)}function Sn(t,e){return t.a.get(e)}function Cn(t){return t instanceof vn?new vn(t):new vn(t,void 0)}function Tn(t,e){var n=new vn(null,void 0);return bn(n,"https"),t&&(n.b=t),e&&(n.c=e),n}function In(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function An(t,e,n){return a(t)?(t=encodeURI(t).replace(e,kn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function kn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}vn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(An(e,Dn,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.i)&&t.push(An(e,Dn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(An(n,"/"==n.charAt(0)?On:Nn,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.g)&&t.push("#",An(n,Rn)),t.join("")},vn.prototype.resolve=function(t){var e=new vn(this),n=!!t.f;n?bn(e,t.f):n=!!t.i,n?e.i=t.i:n=!!t.b,n?e.b=t.b:n=null!=t.m;var r=t.c;if(n)wn(e,t.m);else if(n=!!t.c){if("/"!=r.charAt(0))if(this.b&&!this.c)r="/"+r;else{var i=e.c.lastIndexOf("/");-1!=i&&(r=e.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(yt(i,"./")||yt(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.c=r:n=""!==t.a.toString(),n?_n(e,Un(t.a)):n=!!t.g,n&&(e.g=t.g),e};var Dn=/[#\/\?@]/g,Nn=/[#\?:]/g,On=/[#\?]/g,xn=/[#\?@]/g,Rn=/#/g;function Pn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Mn(t){t.a||(t.a=new pn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Ln(t){var e=fn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Pn(null,void 0);t=dn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];p(o)?Fn(n,i,o):n.add(i,o)}return n}function Vn(t,e){Mn(t),e=qn(t,e),gn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,gn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&mn(t)))}function jn(t,e){return Mn(t),e=qn(t,e),gn(t.a.b,e)}function Fn(t,e,n){Vn(t,e),0<n.length&&(t.c=null,t.a.set(qn(t,e),H(n)),t.b+=n.length)}function Un(t){var e=new Pn;return e.c=t.c,t.a&&(e.a=new pn(t.a),e.b=t.b),e}function qn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(t=Pn.prototype).add=function(t,e){Mn(this),this.c=null,t=qn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Mn(this),this.a.forEach(function(n,r){j(n,function(n){t.call(e,n,r,this)},this)},this)},t.U=function(){Mn(this);for(var t=this.a.S(),e=this.a.U(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.S=function(t){Mn(this);var e=[];if(a(t))jn(this,t)&&(e=z(e,this.a.get(qn(this,t))));else{t=this.a.S();for(var n=0;n<t.length;n++)e=z(e,t[n])}return e},t.set=function(t,e){return Mn(this),this.c=null,jn(this,t=qn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.S(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.U(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.S(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Bn=!be||9<=Number(ke);function Gn(t){var e=document;return a(t)?e.getElementById(t):t}function zn(t,e){W(e,function(e,n){e&&"object"==typeof e&&e.na&&(e=e.ma()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:Hn.hasOwnProperty(n)?t.setAttribute(Hn[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e})}var Hn={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Wn(t){if(t&&"number"==typeof t.length){if(y(t))return"function"==typeof t.item||"string"==typeof t.item;if(g(t))return"function"==typeof t.item}return!1}function Kn(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(p(n)){var i=n;n=i.length,r.push("[");for(var o="",s=0;s<n;s++)r.push(o),t(e,i[s],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&"function"!=typeof(s=n[i])&&(r.push(o),Jn(i,r),r.push(":"),t(e,s,r),o=",");return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":Jn(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Qn,t,e),e.join("")}function Qn(){}var $n={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Yn=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Jn(t,e){e.push('"',t.replace(Yn,function(t){var e=$n[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),$n[t]=e),e}),'"')}function Xn(){var t=yr();return be&&!!ke&&11==ke||/Edge\/\d+/.test(t)}function Zn(){return s.window&&s.window.location.href||self&&self.location&&self.location.href||""}function tr(t,e){e=e||s.window;var n="about:blank";t&&(n=_t(St(t)).toString()),e.location.href=n}function er(t){return!!((t=(t||yr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function nr(t){t=t||s.window;try{t.close()}catch(e){}}function rr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=yr().toLowerCase(),r&&(e.target=r,yt(n,"crios/")&&(e.target="_blank")),pr(yr())==dr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof wt?n:St(void 0!==n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((Dt("iPhone")&&!Dt("iPod")&&!Dt("iPad")||Dt("iPad")||Dt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(L(s=r.document.createElement("A"),"HTMLAnchorElement"),e instanceof wt||e instanceof wt||(e="object"==typeof e&&e.na?e.ma():String(e),Et.test(e)||(e="about:invalid#zClosurez"),e=It(e)),s.href=_t(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=r.open("",n,s),t=_t(e).toString(),s&&(_e&&yt(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t=Rt('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+jt(t)+'">'),s.document.write(Ot(t)),s.document.close())):(s=r.open(_t(e).toString(),n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(a){}return s}var ir=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,or=/^[^@]+@[^@]+$/;function sr(){var t=null;return new zt(function(e){"complete"==s.document.readyState?e():(t=function(){e()},$e(window,"load",t))}).s(function(e){throw Ye(window,"load",t),e})}function ar(t){return t=t||yr(),!("file:"!==Er()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function ur(){var t=s.window;try{return!(!t||t==t.top)}catch(e){return!1}}function lr(){return void 0!==s.WorkerGlobalScope&&"function"==typeof s.importScripts}function cr(){return vt.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":vt.a.INTERNAL.hasOwnProperty("node")?"Node":lr()?"Worker":"Browser"}function hr(){var t=cr();return"ReactNative"===t||"Node"===t}var dr="Firefox",fr="Chrome";function pr(t){var e=t.toLowerCase();return yt(e,"opera/")||yt(e,"opr/")||yt(e,"opios/")?"Opera":yt(e,"iemobile")?"IEMobile":yt(e,"msie")||yt(e,"trident/")?"IE":yt(e,"edge/")?"Edge":yt(e,"firefox/")?dr:yt(e,"silk/")?"Silk":yt(e,"blackberry")?"Blackberry":yt(e,"webos")?"Webos":!yt(e,"safari/")||yt(e,"chrome/")||yt(e,"crios/")||yt(e,"android")?!yt(e,"chrome/")&&!yt(e,"crios/")||yt(e,"edge/")?yt(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":fr:"Safari"}var mr={Qc:"FirebaseCore-web",Sc:"FirebaseUI-web"};function gr(t,e){e=e||[];var n,r=[],i={};for(n in mr)i[mr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=cr())?r=pr(i=yr()):"Worker"===r&&(r=pr(i=yr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function yr(){return s.navigator&&s.navigator.userAgent||""}function vr(t,e){t=t.split("."),e=e||s;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function br(){try{var t=s.localStorage,e=Ar();if(t)return t.setItem(e,"1"),t.removeItem(e),!Xn()||!!s.indexedDB}catch(n){return lr()&&!!s.indexedDB}return!1}function wr(){return(_r()||"chrome-extension:"===Er()||ar())&&!hr()&&br()&&!lr()}function _r(){return"http:"===Er()||"https:"===Er()}function Er(){return s.location&&s.location.protocol||null}function Sr(t){return!er(t=t||yr())&&pr(t)!=dr}function Cr(t){return void 0===t?null:Kn(t)}function Tr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!=t[e]&&(n[e]=t[e]);return n}function Ir(t){if(null!==t)return JSON.parse(t)}function Ar(t){return t||Math.floor(1e9*Math.random()).toString()}function kr(t){return"Safari"!=pr(t=t||yr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Dr(){var t=s.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Nr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=yr(),e=cr(),this.b=er(t)||"ReactNative"===e}function Or(){var t=s.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function xr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function Rr(){return!(!vr("fireauth.oauthhelper",s)&&!vr("fireauth.iframe",s))}Nr.prototype.get=function(){var t=s.navigator;return!t||"boolean"!=typeof t.onLine||!_r()&&"chrome-extension:"!==Er()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Pr,Mr={};function Lr(t){Mr[t]||(Mr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Vr={};Object.defineProperty(Vr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Vr,"abcd",{configurable:!0,enumerable:!0,value:2}),Pr=2==Vr.abcd}catch(ye){Pr=!1}function jr(t,e,n){Pr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Fr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&jr(t,n,e[n])}function Ur(t){var e={};return Fr(e,t),e}function qr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)jr(e,n,qr(t[n]));return e}function Br(t){var e={},n=t[zr],r=t[Hr];if(!(t=t[Wr])||t!=Gr&&!n)throw Error("Invalid provider user info!");e[Qr]=r||null,e[Kr]=n||null,jr(this,Yr,t),jr(this,$r,qr(e))}var Gr="EMAIL_SIGNIN",zr="email",Hr="newEmail",Wr="requestType",Kr="email",Qr="fromEmail",$r="data",Yr="operation";function Jr(t,e){this.code=Zr+t,this.message=e||ti[t]||""}function Xr(t){var e=t&&t.code;return e?new Jr(e.substring(Zr.length),t.message):null}T(Jr,Error),Jr.prototype.A=function(){return{code:this.code,message:this.message}},Jr.prototype.toJSON=function(){return this.A()};var Zr="auth/",ti={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The OIDC ID token requires a valid unhashed nonce.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","user-cancelled":"User did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."};function ei(t){var e=t[si];if(void 0===e)throw new Jr("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new Jr("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[ni];if(n&&"object"==typeof n){e=n[li];var r=n[ai];if(n=n[ui],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new Jr("argument-error",ai+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new Jr("argument-error",ui+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new Jr("argument-error",li+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new Jr("missing-android-pkg-name")}}else if(void 0!==n)throw new Jr("argument-error",ni+" property must be a non null object when specified.");if(this.f=null,(e=t[oi])&&"object"==typeof e){if("string"==typeof(e=e[ci])&&e.length)this.f=e;else if(void 0!==e)throw new Jr("argument-error",ci+" property must be a non empty string when specified.")}else if(void 0!==e)throw new Jr("argument-error",oi+" property must be a non null object when specified.");if(void 0!==(e=t[ii])&&"boolean"!=typeof e)throw new Jr("argument-error",ii+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[ri])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new Jr("argument-error",ri+" property must be a non empty string when specified.");this.i=t||null}var ni="android",ri="dynamicLinkDomain",ii="handleCodeInApp",oi="iOS",si="url",ai="installApp",ui="minimumVersion",li="packageName",ci="bundleId";function hi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var di=null,fi=null;function pi(t){this.c=t.sub,C(),this.a=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.b=!!t.is_anonymous||"anonymous"==this.a}function mi(t){return(t=gi(t))&&t.sub&&t.iss&&t.aud&&t.exp?new pi(t):null}function gi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(function(t){var e="";return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=fi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!di){di={},fi={};for(var t=0;65>t;t++)di[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t),fi[di[t]]=t,62<=t&&(fi["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(t)]=t)}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,function(t){e+=String.fromCharCode(t)}),e}(t))}catch(r){}return null}pi.prototype.f=function(){return this.b};var yi,vi={Wc:{Za:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",fb:"https://securetoken.googleapis.com/v1/token",id:"p"},Yc:{Za:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",fb:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},Zc:{Za:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",fb:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};function bi(t){for(var e in vi)if(vi[e].id===t)return{firebaseEndpoint:(t=vi[e]).Za,secureTokenEndpoint:t.fb};return null}yi=bi("__EID__")?"__EID__":void 0;var wi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),_i=["client_id","response_type","scope","redirect_uri","state"],Ei={Rc:{Ma:"locale",Ba:500,Aa:600,Na:"facebook.com",eb:_i},Tc:{Ma:null,Ba:500,Aa:620,Na:"github.com",eb:_i},Uc:{Ma:"hl",Ba:515,Aa:680,Na:"google.com",eb:_i},$c:{Ma:"lang",Ba:485,Aa:705,Na:"twitter.com",eb:wi}};function Si(t){for(var e in Ei)if(Ei[e].Na==t)return Ei[e];return null}function Ci(t){var e={};e["facebook.com"]=Di,e["google.com"]=Oi,e["github.com"]=Ni,e["twitter.com"]=xi;var n=t&&t[Ii];try{if(n)return e[n]?new e[n](t):new ki(t);if(void 0!==t[Ti])return new Ai(t)}catch(r){}return null}var Ti="idToken",Ii="providerId";function Ai(t){var e=t[Ii];if(!e&&t[Ti]){var n=mi(t[Ti]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),jr(this,"providerId",e),jr(this,"isNewUser",n)}function ki(t){Ai.call(this,t),jr(this,"profile",qr((t=Ir(t.rawUserInfo||"{}"))||{}))}function Di(t){if(ki.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Ni(t){if(ki.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");jr(this,"username",this.profile&&this.profile.login||null)}function Oi(t){if(ki.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function xi(t){if(ki.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");jr(this,"username",t.screenName||null)}function Ri(t){this.a=Cn(t)}function Pi(t){var e=Cn(t),n=Sn(e,"link"),r=Sn(Cn(n),"link");return e=Sn(e,"deep_link_id"),Sn(Cn(e),"link")||e||r||n||t}function Mi(){}function Li(t,e){return t.then(function(t){if(t[Es]){var n=mi(t[Es]);if(!n||e!=n.c)throw new Jr("user-mismatch");return t}throw new Jr("user-mismatch")}).s(function(t){throw t&&t.code&&t.code==Zr+"user-not-found"?new Jr("user-mismatch"):t})}function Vi(t,e){if(!e)throw new Jr("internal-error","failed to construct a credential");this.a=e,jr(this,"providerId",t),jr(this,"signInMethod",t)}function ji(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function Fi(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new Vi(t.providerId,t.pendingToken)}catch(e){}return null}function Ui(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&jr(this,"idToken",e.idToken),e.accessToken&&jr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&jr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new Jr("internal-error","failed to construct a credential");jr(this,"accessToken",e.oauthToken),jr(this,"secret",e.oauthTokenSecret)}jr(this,"providerId",t),jr(this,"signInMethod",n)}function qi(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Ln(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function Bi(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new Ui(t.providerId,e,t.signInMethod)}catch(n){}}return null}function Gi(t,e){this.Ac=e||[],Fr(this,{providerId:t,isOAuthProvider:!0}),this.vb={},this.$a=(Si(t)||{}).Ma||null,this.Ya=null}function zi(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new Jr("argument-error",'SAML provider IDs must be prefixed with "saml."');Gi.call(this,t,[])}function Hi(t){Gi.call(this,t,_i),this.a=[]}function Wi(){Hi.call(this,"facebook.com")}function Ki(t){if(!t)throw new Jr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return y(t)&&(e=t.accessToken),(new Wi).credential({accessToken:e})}function Qi(){Hi.call(this,"github.com")}function $i(t){if(!t)throw new Jr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return y(t)&&(e=t.accessToken),(new Qi).credential({accessToken:e})}function Yi(){Hi.call(this,"google.com"),this.ua("profile")}function Ji(t,e){var n=t;return y(t)&&(n=t.idToken,e=t.accessToken),(new Yi).credential({idToken:n,accessToken:e})}function Xi(){Gi.call(this,"twitter.com",wi)}function Zi(t,e){var n=t;if(y(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new Jr("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Ui("twitter.com",n,"twitter.com")}function to(t,e,n){this.a=t,this.c=e,jr(this,"providerId","password"),jr(this,"signInMethod",n===no.EMAIL_LINK_SIGN_IN_METHOD?no.EMAIL_LINK_SIGN_IN_METHOD:no.EMAIL_PASSWORD_SIGN_IN_METHOD)}function eo(t){return t&&t.email&&t.password?new to(t.email,t.password,t.signInMethod):null}function no(){Fr(this,{providerId:"password",isOAuthProvider:!1})}function ro(t,e){if(!(e=io(e)))throw new Jr("argument-error","Invalid email link!");return new to(t,e,no.EMAIL_LINK_SIGN_IN_METHOD)}function io(t){var e=Sn((t=new Ri(t=Pi(t))).a,"oobCode")||null;return"signIn"===(Sn(t.a,"mode")||null)&&e?e:null}function oo(t){if(!(t.Sa&&t.Ra||t.Da&&t.$))throw new Jr("internal-error");this.a=t,jr(this,"providerId","phone"),jr(this,"signInMethod","phone")}function so(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return j(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(n){t[n]&&(e[n]=t[n])}),new oo(e)}return null}function ao(t){return t.a.Da&&t.a.$?{temporaryProof:t.a.Da,phoneNumber:t.a.$}:{sessionInfo:t.a.Sa,code:t.a.Ra}}function uo(t){try{this.a=t||vt.a.auth()}catch(e){throw new Jr("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Fr(this,{providerId:"phone",isOAuthProvider:!1})}function lo(t,e){if(!t)throw new Jr("missing-verification-id");if(!e)throw new Jr("missing-verification-code");return new oo({Sa:t,Ra:e})}function co(t){if(t.temporaryProof&&t.phoneNumber)return new oo({Da:t.temporaryProof,$:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return Ji(o,n);case"facebook.com":return Ki(n);case"github.com":return $i(n);case"twitter.com":return Zi(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new Vi(e,s):new Ui(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new Hi(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(a){return null}}function ho(t){if(!t.isOAuthProvider)throw new Jr("invalid-oauth-provider")}function fo(t,e,n,r,i,o){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.h=o||null,this.a=i||null,!this.g&&!this.a)throw new Jr("invalid-auth-event");if(this.g&&this.a)throw new Jr("invalid-auth-event");if(this.g&&!this.f)throw new Jr("invalid-auth-event")}function po(t){return(t=t||{}).type?new fo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&Xr(t.error),t.postBody):null}function mo(){this.b=null,this.a=[]}T(ki,Ai),T(Di,ki),T(Ni,ki),T(Oi,ki),T(xi,ki),Vi.prototype.ka=function(t){return Us(t,ji(this))},Vi.prototype.b=function(t,e){var n=ji(this);return n.idToken=e,qs(t,n)},Vi.prototype.f=function(t,e){return Li(Bs(t,ji(this)),e)},Vi.prototype.A=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Ui.prototype.ka=function(t){return Us(t,qi(this))},Ui.prototype.b=function(t,e){var n=qi(this);return n.idToken=e,qs(t,n)},Ui.prototype.f=function(t,e){return Li(Bs(t,qi(this)),e)},Ui.prototype.A=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},Gi.prototype.Ca=function(t){return this.vb=Q(t),this},T(zi,Gi),T(Hi,Gi),Hi.prototype.ua=function(t){return q(this.a,t)||this.a.push(t),this},Hi.prototype.Db=function(){return H(this.a)},Hi.prototype.credential=function(t,e){var n;if(!(n=y(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new Jr("argument-error","credential failed: must provide the ID token and/or the access token.");return new Ui(this.providerId,n,this.providerId)},T(Wi,Hi),jr(Wi,"PROVIDER_ID","facebook.com"),jr(Wi,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),T(Qi,Hi),jr(Qi,"PROVIDER_ID","github.com"),jr(Qi,"GITHUB_SIGN_IN_METHOD","github.com"),T(Yi,Hi),jr(Yi,"PROVIDER_ID","google.com"),jr(Yi,"GOOGLE_SIGN_IN_METHOD","google.com"),T(Xi,Gi),jr(Xi,"PROVIDER_ID","twitter.com"),jr(Xi,"TWITTER_SIGN_IN_METHOD","twitter.com"),to.prototype.ka=function(t){return this.signInMethod==no.EMAIL_LINK_SIGN_IN_METHOD?ya(t,Ys,{email:this.a,oobCode:this.c}):ya(t,fa,{email:this.a,password:this.c})},to.prototype.b=function(t,e){return this.signInMethod==no.EMAIL_LINK_SIGN_IN_METHOD?ya(t,Js,{idToken:e,email:this.a,oobCode:this.c}):ya(t,aa,{idToken:e,email:this.a,password:this.c})},to.prototype.f=function(t,e){return Li(this.ka(t),e)},to.prototype.A=function(){return{email:this.a,password:this.c,signInMethod:this.signInMethod}},Fr(no,{PROVIDER_ID:"password"}),Fr(no,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Fr(no,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),oo.prototype.ka=function(t){return t.Ta(ao(this))},oo.prototype.b=function(t,e){var n=ao(this);return n.idToken=e,ya(t,ma,n)},oo.prototype.f=function(t,e){var n=ao(this);return n.operation="REAUTH",Li(t=ya(t,ga,n),e)},oo.prototype.A=function(){var t={providerId:"phone"};return this.a.Sa&&(t.verificationId=this.a.Sa),this.a.Ra&&(t.verificationCode=this.a.Ra),this.a.Da&&(t.temporaryProof=this.a.Da),this.a.$&&(t.phoneNumber=this.a.$),t},uo.prototype.Ta=function(t,e){var n=this.a.c;return Jt(e.verify()).then(function(r){if(!a(r))throw new Jr("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":return function(t,e){return ya(n,oa,e)}(0,{phoneNumber:t,recaptchaToken:r}).then(function(t){return"function"==typeof e.reset&&e.reset(),t},function(t){throw"function"==typeof e.reset&&e.reset(),t});default:throw new Jr("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Fr(uo,{PROVIDER_ID:"phone"}),Fr(uo,{PHONE_SIGN_IN_METHOD:"phone"}),fo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.i&&t.push(this.i),t.join("-")},fo.prototype.A=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.h,error:this.a&&this.a.A()}};var go,yo=null;function vo(t){var e="unauthorized-domain",n=void 0,r=Cn(t);t=r.b,"chrome-extension"==(r=r.f)?n=Vt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Vt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",Jr.call(this,e,n)}function bo(t,e,n){Jr.call(this,t,n),(t=e||{}).wb&&jr(this,"email",t.wb),t.$&&jr(this,"phoneNumber",t.$),t.credential&&jr(this,"credential",t.credential)}function wo(t){if(t.code){var e=t.code||"";0==e.indexOf(Zr)&&(e=e.substring(Zr.length));var n={credential:co(t)};if(t.email)n.wb=t.email;else if(t.phoneNumber)n.$=t.phoneNumber;else if(!n.credential)return new Jr(e,t.message||void 0);return new bo(e,n,t.message)}return null}function _o(){}function Eo(){}function So(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(i){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Co(){}function To(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=E(this.ac,this),this.a.onerror=E(this.Eb,this),this.a.onprogress=E(this.bc,this),this.a.ontimeout=E(this.fc,this)}function Io(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Ao(t,e,n){this.reset(t,e,n,void 0,void 0)}function ko(t){this.f=t,this.b=this.c=this.a=null}function Do(t,e){this.name=t,this.value=e}T(vo,Jr),T(bo,Jr),bo.prototype.A=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber);var e=this.credential&&this.credential.A();return e&&Y(t,e),t},bo.prototype.toJSON=function(){return this.A()},_o.prototype.c=null,T(Eo,_o),Eo.prototype.a=function(){var t=So(this);return t?new ActiveXObject(t):new XMLHttpRequest},Eo.prototype.b=function(){var t={};return So(this)&&(t[0]=!0,t[1]=!0),t},go=new Eo,T(Co,_o),Co.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new To;throw Error("Unsupported browser")},Co.prototype.b=function(){return{}},(t=To.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.ac=function(){this.status=200,this.response=this.responseText=this.a.responseText,Io(this,4)},t.Eb=function(){this.status=500,this.response=this.responseText="",Io(this,4)},t.fc=function(){this.Eb()},t.bc=function(){this.status=200,Io(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Ao.prototype.a=null,Ao.prototype.reset=function(t,e,n,r,i){r||C(),delete this.a},Do.prototype.toString=function(){return this.name};var No=new Do("SEVERE",1e3),Oo=new Do("WARNING",900),xo=new Do("CONFIG",700),Ro=new Do("FINE",500);ko.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(D("Root logger has no level set."),null)}(this).value)for(g(e)&&(e=e()),t=new Ao(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var Po={},Mo=null;function Lo(t){var e;if(Mo||(Mo=new ko(""),Po[""]=Mo,Mo.c=xo),!(e=Po[t])){e=new ko(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=Lo(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,Po[t]=e}return e}function Vo(t,e){t&&t.log(Ro,e,void 0)}function jo(t){this.f=t}function Fo(t){sn.call(this),this.u=t,this.readyState=Uo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.o="GET",this.g="",this.a=!1,this.h=Lo("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}T(jo,_o),jo.prototype.a=function(){return new Fo(this.f)},jo.prototype.b=function(t){return function(){return t}}({}),T(Fo,sn);var Uo=0;function qo(t){t.c.read().then(t.$b.bind(t)).catch(t.Ka.bind(t))}function Bo(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,Go(t)}function Go(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function zo(t){sn.call(this),this.headers=new pn,this.B=t||null,this.c=!1,this.w=this.a=null,this.h=this.N=this.l="",this.f=this.I=this.i=this.G=!1,this.g=0,this.u=null,this.o=Ho,this.v=this.O=!1}(t=Fo.prototype).open=function(t,e){if(this.readyState!=Uo)throw this.abort(),Error("Error reopening a connection");this.o=t,this.g=e,this.readyState=1,Go(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.i,method:this.o,credentials:void 0,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.g,e)).then(this.ec.bind(this),this.Ka.bind(this))},t.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Bo(this,!1)),this.readyState=Uo},t.ec=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,Go(this)),this.a&&(this.readyState=3,Go(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.cc.bind(this),this.Ka.bind(this)):void 0!==s.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.l=new TextDecoder,qo(this)):t.text().then(this.dc.bind(this),this.Ka.bind(this)))))},t.$b=function(t){if(this.a){var e=this.l.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?Bo(this,!0):Go(this),3==this.readyState&&qo(this)}},t.dc=function(t){this.a&&(this.response=this.responseText=t,Bo(this,!0))},t.cc=function(t){this.a&&(this.response=t,Bo(this,!0))},t.Ka=function(t){var e=this.h;e&&e.log(Oo,"Failed to fetch url "+this.g,t instanceof Error?t:Error(t)),this.a&&Bo(this,!0)},t.setRequestHeader=function(t,e){this.i.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(Oo,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(Oo,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},T(zo,sn);var Ho="";zo.prototype.b=Lo("goog.net.XhrIo");var Wo=/^https?$/i,Ko=["POST","PUT"];function Qo(t){return"content-type"==t.toLowerCase()}function $o(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Yo(t),Xo(t)}function Yo(t){t.G||(t.G=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Jo(t){if(t.c&&void 0!==o)if(t.w[1]&&4==ts(t)&&2==es(t))Vo(t.b,ns(t,"Local request error detected and ignored"));else if(t.i&&4==ts(t))cn(t.Hb,0,t);else if(t.dispatchEvent("readystatechange"),4==ts(t)){Vo(t.b,ns(t,"Request complete")),t.c=!1;try{var e,n=es(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var a=String(t.l).match(yn)[1]||null;if(!a&&s.self&&s.self.location){var u=s.self.location.protocol;a=u.substr(0,u.length-1)}i=!Wo.test(a?a.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var l=2<ts(t)?t.a.statusText:""}catch(c){Vo(t.b,"Can not get status: "+c.message),l=""}t.h=l+" ["+es(t)+"]",Yo(t)}}finally{Xo(t)}}}function Xo(t,e){if(t.a){Zo(t);var n=t.a,r=t.w[0]?h:null;t.a=null,t.w=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){(t=t.b)&&t.log(No,"Problem encountered resetting onreadystatechange: "+i.message,void 0)}}}function Zo(t){t.a&&t.v&&(t.a.ontimeout=null),t.u&&(s.clearTimeout(t.u),t.u=null)}function ts(t){return t.a?t.a.readyState:0}function es(t){try{return 2<ts(t)?t.a.status:-1}catch(e){return-1}}function ns(t,e){return e+" ["+t.N+" "+t.l+" "+es(t)+"]"}function rs(t){var e=ps;this.g=[],this.v=e,this.u=t||null,this.f=this.a=!1,this.c=void 0,this.l=this.w=this.i=!1,this.h=0,this.b=null,this.m=0}function is(t,e,n){t.a=!0,t.c=n,t.f=!e,us(t)}function os(t){if(t.a){if(!t.l)throw new ls(t);t.l=!1}}function ss(t,e,n,r){t.g.push([e,n,r]),t.a&&us(t)}function as(t){return U(t.g,function(t){return g(t[1])})}function us(t){if(t.h&&t.a&&as(t)){var e=t.h,n=ds[e];n&&(s.clearTimeout(n.a),delete ds[e]),t.h=0}t.b&&(t.b.m--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var u=o.call(i||t.u,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(I(e)||"function"==typeof s.Promise&&e instanceof s.Promise)&&(r=!0,t.i=!0)}catch(l){e=l,t.f=!0,as(t)||(n=!0)}}t.c=e,r&&(u=E(t.o,t,!0),r=E(t.o,t,!1),e instanceof rs?(ss(e,u,r),e.w=!0):e.then(u,r)),n&&(e=new hs(e),ds[e.a]=e,t.h=e.a)}function ls(){A.call(this)}function cs(){A.call(this)}function hs(t){this.a=s.setTimeout(E(this.c,this),0),this.b=t}(t=zo.prototype).Ea=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Vo(this.b,ns(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(Vo(this.b,ns(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Xo(this))},t.va=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Xo(this,!0)),zo.mb.va.call(this)},t.Hb=function(){this.qa||(this.I||this.i||this.f?Jo(this):this.tc())},t.tc=function(){Jo(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.o){case Ho:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(No,"Response type "+this.o+" is not supported on this browser",void 0),null}catch(e){return Vo(this.b,"Can not get response: "+e.message),null}},rs.prototype.cancel=function(t){if(this.a)this.c instanceof rs&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.m--,0>=e.m&&e.cancel())}this.v?this.v.call(this.u,this):this.l=!0,this.a||(t=new cs(this),os(this),is(this,!1,t))}},rs.prototype.o=function(t,e){this.i=!1,is(this,t,e)},rs.prototype.then=function(t,e,n){var r,i,o=new zt(function(t,e){r=t,i=e});return ss(this,r,function(t){t instanceof cs?o.cancel():i(t)}),o.then(t,e,n)},rs.prototype.$goog_Thenable=!0,T(ls,A),ls.prototype.message="Deferred has already fired",ls.prototype.name="AlreadyCalledError",T(cs,A),cs.prototype.message="Deferred was canceled",cs.prototype.name="CanceledError",hs.prototype.c=function(){throw delete ds[this.a],this.b};var ds={};function fs(t){var e={},n=e.document||document,r=rt(t).toString(),i=document.createElement("SCRIPT"),o={Jb:i,Ea:void 0},a=new rs(o),u=null,h=null!=e.timeout?e.timeout:5e3;return 0<h&&(u=window.setTimeout(function(){ms(i,!0);var t=new vs(ys,"Timeout reached for loading script "+r);os(a),is(a,!1,t)},h),o.Ea=u),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(ms(i,e.bd||!1,u),os(a),is(a,!0,null))},i.onerror=function(){ms(i,!0,u);var t=new vs(gs,"Error while loading script "+r);os(a),is(a,!1,t)},Y(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),zn(i,o),function(t,e){L(t,"HTMLScriptElement"),t.src=rt(e),null===c&&(c=(e=(e=s.document).querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&l.test(e)?e:""),(e=c)&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function ps(){if(this&&this.Jb){var t=this.Jb;t&&"SCRIPT"==t.tagName&&ms(t,!0,this.Ea)}}function ms(t,e,n){null!=n&&s.clearTimeout(n),t.onload=h,t.onerror=h,t.onreadystatechange=h,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var gs=0,ys=1;function vs(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),A.call(this,n),this.code=t}function bs(t){this.f=t}function ws(t,e,n){if(this.b=t,this.i=(t=e||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Ss,this.f=Q(t.secureTokenHeaders||Cs),this.g=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.h=t.firebaseTimeout||Ts,this.a=Q(t.firebaseHeaders||Is),n&&(this.a["X-Client-Version"]=n,this.f["X-Client-Version"]=n),n="Node"==cr(),!(n=s.XMLHttpRequest||n&&vt.a.INTERNAL.node&&vt.a.INTERNAL.node.XMLHttpRequest)&&!lr())throw new Jr("internal-error","The XMLHttpRequest compatibility library was not found.");this.c=void 0,this.c=lr()?new jo(self):hr()?new bs(n):new Co}T(vs,A),T(bs,_o),bs.prototype.a=function(){return new this.f},bs.prototype.b=function(){return{}};var _s,Es="idToken",Ss=new Nr(3e4,6e4),Cs={"Content-Type":"application/x-www-form-urlencoded"},Ts=new Nr(3e4,6e4),Is={"Content-Type":"application/json"};function As(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function ks(t,e){e?(t.a["X-Client-Version"]=e,t.f["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.f["X-Client-Version"])}function Ds(t,e,n,r,i,o,a){(function(){var t=yr();return!((t=pr(t)!=fr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||be&&ke&&!(9<ke))})()||lr()?t=E(t.o,t):(_s||(_s=new zt(function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(s[Os]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){ss(fs(it(Ns,{onload:Os})),null,e,void 0)}(0,function(){e(Error("CORS_UNSUPPORTED"))}))}(t,e)})),t=E(t.l,t)),t(e,n,r,i,o,a)}ws.prototype.o=function(t,e,n,r,i,o){if(lr()&&(void 0===s.fetch||void 0===s.Headers||void 0===s.Request))throw new Jr("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var u=new zo(this.c);if(o){u.g=Math.max(0,o);var l=setTimeout(function(){u.dispatchEvent("timeout")},o)}an(u,"complete",function(){l&&clearTimeout(l);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return Vo(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(n){t=null}e&&e(t)}),un(u,"ready",function(){l&&clearTimeout(l),pe(this)}),un(u,"timeout",function(){l&&clearTimeout(l),pe(this),e&&e(null)}),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.N=n,t.G=!1,t.c=!0,t.a=t.B?t.B.a():go.a(),t.w=function(t){return t.c||(t.c=t.b())}(t.B?t.B:go),t.a.onreadystatechange=E(t.Hb,t);try{Vo(t.b,ns(t,"Opening Xhr")),t.I=!0,t.a.open(n,String(e),!0),t.I=!1}catch(u){return Vo(t.b,ns(t,"Error opening Xhr: "+u.message)),void $o(t,u)}e=r||"";var o=new pn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(m(t)||a(t))j(t,e,void 0);else for(var n=fn(t),r=dn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){o.set(e,t)}),i=function(t){t:{for(var e=Qo,n=t.length,r=a(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:a(t)?t.charAt(e):t[e]}(o.U()),r=s.FormData&&e instanceof s.FormData,!q(Ko,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},t),t.o&&(t.a.responseType=t.o),"withCredentials"in t.a&&t.a.withCredentials!==t.O&&(t.a.withCredentials=t.O);try{Zo(t),0<t.g&&(t.v=function(t){return be&&Ne(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),Vo(t.b,ns(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.v)),t.v?(t.a.timeout=t.g,t.a.ontimeout=E(t.Ea,t)):t.u=cn(t.Ea,t.g,t)),Vo(t.b,ns(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(u){Vo(t.b,ns(t,"Send error: "+u.message)),$o(t,u)}}(u,t,n,r,i)};var Ns=new J(tt,"https://apis.google.com/js/client.js?onload=%{onload}"),Os="__fcb"+Math.floor(1e6*Math.random()).toString();function xs(t){if(!a(t=t.email)||!or.test(t))throw new Jr("invalid-email")}function Rs(t){"email"in t&&xs(t)}function Ps(t){if(!t[Es])throw new Jr("internal-error")}function Ms(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new Jr("internal-error")}else{if(!t.sessionInfo)throw new Jr("missing-verification-id");if(!t.code)throw new Jr("missing-verification-code")}}ws.prototype.l=function(t,e,n,r,i){var o=this;_s.then(function(){window.gapi.client.setApiKey(o.b);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})}).s(function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},ws.prototype.kb=function(){return ya(this,ua,{})},ws.prototype.nb=function(t,e){return ya(this,sa,{idToken:t,email:e})},ws.prototype.ob=function(t,e){return ya(this,aa,{idToken:t,password:e})};var Ls={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function Vs(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new Jr("internal-error")}function js(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&jn(t=new Pn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function Fs(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=wo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=wo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=wo(t)):t.errorMessage&&(e=va(t.errorMessage)),e)throw e;if(!t[Es])throw new Jr("internal-error")}function Us(t,e){return e.returnIdpCredential=!0,ya(t,la,e)}function qs(t,e){return e.returnIdpCredential=!0,ya(t,ha,e)}function Bs(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,ya(t,ca,e)}function Gs(t){if(!t.oobCode)throw new Jr("invalid-action-code")}(t=ws.prototype).pb=function(t,e){var n={idToken:t},r=[];return W(Ls,function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)}),r.length&&(n.deleteAttribute=r),ya(this,sa,n)},t.hb=function(t,e){return Y(t={requestType:"PASSWORD_RESET",email:t},e),ya(this,ea,t)},t.ib=function(t,e){return Y(t={requestType:"EMAIL_SIGNIN",email:t},e),ya(this,Zs,t)},t.gb=function(t,e){return Y(t={requestType:"VERIFY_EMAIL",idToken:t},e),ya(this,ta,t)},t.Ta=function(t){return ya(this,pa,t)},t.Xa=function(t,e){return ya(this,ia,{oobCode:t,newPassword:e})},t.Ia=function(t){return ya(this,Hs,{oobCode:t})},t.Va=function(t){return ya(this,zs,{oobCode:t})};var zs={endpoint:"setAccountInfo",D:Gs,da:"email"},Hs={endpoint:"resetPassword",D:Gs,J:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e)throw new Jr("internal-error")}},Ws={endpoint:"signupNewUser",D:function(t){if(xs(t),!t.password)throw new Jr("weak-password")},J:Ps,R:!0},Ks={endpoint:"createAuthUri"},Qs={endpoint:"deleteAccount",T:["idToken"]},$s={endpoint:"setAccountInfo",T:["idToken","deleteProvider"],D:function(t){if(!p(t.deleteProvider))throw new Jr("internal-error")}},Ys={endpoint:"emailLinkSignin",T:["email","oobCode"],D:xs,J:Ps,R:!0},Js={endpoint:"emailLinkSignin",T:["idToken","email","oobCode"],D:xs,J:Ps,R:!0},Xs={endpoint:"getAccountInfo"},Zs={endpoint:"getOobConfirmationCode",T:["requestType"],D:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new Jr("internal-error");xs(t)},da:"email"},ta={endpoint:"getOobConfirmationCode",T:["idToken","requestType"],D:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new Jr("internal-error")},da:"email"},ea={endpoint:"getOobConfirmationCode",T:["requestType"],D:function(t){if("PASSWORD_RESET"!=t.requestType)throw new Jr("internal-error");xs(t)},da:"email"},na={sb:!0,endpoint:"getProjectConfig",Gb:"GET"},ra={sb:!0,endpoint:"getRecaptchaParam",Gb:"GET",J:function(t){if(!t.recaptchaSiteKey)throw new Jr("internal-error")}},ia={endpoint:"resetPassword",D:Gs,da:"email"},oa={endpoint:"sendVerificationCode",T:["phoneNumber","recaptchaToken"],da:"sessionInfo"},sa={endpoint:"setAccountInfo",T:["idToken"],D:Rs,R:!0},aa={endpoint:"setAccountInfo",T:["idToken"],D:function(t){if(Rs(t),!t.password)throw new Jr("weak-password")},J:Ps,R:!0},ua={endpoint:"signupNewUser",J:Ps,R:!0},la={endpoint:"verifyAssertion",D:Vs,Oa:js,J:Fs,R:!0},ca={endpoint:"verifyAssertion",D:Vs,Oa:js,J:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new Jr("user-not-found");if(t.errorMessage)throw va(t.errorMessage);if(!t[Es])throw new Jr("internal-error")},R:!0},ha={endpoint:"verifyAssertion",D:function(t){if(Vs(t),!t.idToken)throw new Jr("internal-error")},Oa:js,J:Fs,R:!0},da={endpoint:"verifyCustomToken",D:function(t){if(!t.token)throw new Jr("invalid-custom-token")},J:Ps,R:!0},fa={endpoint:"verifyPassword",D:function(t){if(xs(t),!t.password)throw new Jr("wrong-password")},J:Ps,R:!0},pa={endpoint:"verifyPhoneNumber",D:Ms,J:Ps},ma={endpoint:"verifyPhoneNumber",D:function(t){if(!t.idToken)throw new Jr("internal-error");Ms(t)},J:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",wo(t);Ps(t)}},ga={Tb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",D:Ms,J:Ps};function ya(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.T))return Xt(new Jr("internal-error"));var r,i=e.Gb||"POST";return Jt(n).then(e.D).then(function(){return e.R&&(n.returnSecureToken=!0),function(t,e,n,r,i,o){var s=Cn(t.g+e);En(s,"key",t.b),o&&En(s,"cb",C().toString());var a="GET"==n;if(a)for(var u in r)r.hasOwnProperty(u)&&En(s,u,r[u]);return new zt(function(e,o){Ds(t,s.toString(),function(t){t?t.error?o(ba(t,i||{})):e(t):o(new Jr("network-request-failed"))},n,a?void 0:Kn(Tr(r)),t.a,t.h.get())})}(t,e.endpoint,i,n,e.Tb,e.sb||!1)}).then(function(t){return r=t,e.Oa?e.Oa(n,r):r}).then(e.J).then(function(){if(!e.da)return r;if(!(e.da in r))throw new Jr("internal-error");return r[e.da]})}function va(t){return ba({error:{errors:[{message:t}],code:400,message:t}})}function ba(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new Jr(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",Y(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",ADMIN_ONLY_OPERATION:"admin-restricted-operation"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*(.*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new Jr(r[i],e);return!e&&t&&(e=Cr(t)),new Jr("internal-error",e)}function wa(t){this.b=t,this.a=null,this.bb=function(t){return(Ca||(Ca=new zt(function(t,e){function n(){Dr(),vr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Dr(),e(Error("Network Error"))},timeout:Ea.get()})}if(vr("gapi.iframes.Iframe"))t();else if(vr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();s[r]=function(){vr("gapi.load")?n():e(Error("Network Error"))},Jt(fs(r=it(_a,{onload:r}))).s(function(){e(Error("Network Error"))})}}).s(function(t){throw Ca=null,t}))).then(function(){return new zt(function(e,n){vr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:vr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){n(Error("Network Error"))},Sa.get());r.ping(i).then(i,function(){n(Error("Network Error"))})})})})}(this)}var _a=new J(tt,"https://apis.google.com/js/api.js?onload=%{onload}"),Ea=new Nr(3e4,6e4),Sa=new Nr(5e3,15e3),Ca=null;function Ta(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=Tn(this.i,"/__/auth/iframe"),En(this.a,"apiKey",this.g),En(this.a,"appName",this.h),this.b=null,this.c=[]}function Ia(t,e,n,r,i){this.o=t,this.l=e,this.c=n,this.m=r,this.h=this.g=this.i=null,this.a=i,this.f=null}function Aa(t){try{return vt.a.app(t).auth().ya()}catch(e){return[]}}function ka(t,e,n,r,i){this.l=t,this.f=e,this.b=n,this.c=r||null,this.h=i||null,this.o=this.u=this.v=null,this.g=[],this.m=this.a=null}function Da(t){var e=Zn();return function(t){return ya(t,na,{}).then(function(t){return t.authorizedDomains||[]})}(t).then(function(t){t:{var n=Cn(e),r=n.f;n=n.b;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=Cn(o).b==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:ir.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new vo(Zn())})}function Na(t){return t.m?t.m:(t.m=sr().then(function(){if(!t.u){var e=t.c,n=t.h,r=Aa(t.b),i=new Ta(t.l,t.f,t.b);i.f=e,i.b=n,i.c=H(r||[]),t.u=i.toString()}t.i=new wa(t.u),function(t){if(!t.i)throw Error("IfcHandler must be initialized!");!function(t,e){t.bb.then(function(){t.a.register("authEvent",e,vr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(t.i,function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=po(e.authEvent),n=0;n<t.g.length;n++)r=t.g[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Jt(n)}return n.status="ERROR",Jt(n)})}(t)}),t.m)}function Oa(t){return t.o||(t.v=t.c?gr(t.c,Aa(t.b)):null,t.o=new ws(t.f,bi(t.h),t.v)),t.o}function xa(t,e,n,r,i,o,s,a,u,l){return(t=new Ia(t,e,n,r,i)).i=o,t.g=s,t.h=a,t.b=Q(u||null),t.f=l,t.toString()}function Ra(t){if(this.a=t||vt.a.INTERNAL.reactNative&&vt.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new Jr("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Pa(t){this.b=t,this.a={},this.f=E(this.c,this)}Ta.prototype.toString=function(){return this.f?En(this.a,"v",this.f):Vn(this.a.a,"v"),this.b?En(this.a,"eid",this.b):Vn(this.a.a,"eid"),this.c.length?En(this.a,"fw",this.c.join(",")):Vn(this.a.a,"fw"),this.a.toString()},Ia.prototype.toString=function(){var t=Tn(this.o,"/__/auth/handler");if(En(t,"apiKey",this.l),En(t,"appName",this.c),En(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=vt.a.app(this.c).auth().ea()}catch(a){n=null}for(var r in e.Ya=n,En(t,"providerId",this.a.providerId),n=Tr((e=this.a).vb))n[r]=n[r].toString();r=e.Ac,n=Q(n);for(var i=0;i<r.length;i++){var o=r[i];o in n&&delete n[o]}e.$a&&e.Ya&&!n[e.$a]&&(n[e.$a]=e.Ya),K(n)||En(t,"customParameters",Cr(n))}if("function"==typeof this.a.Db&&(e=this.a.Db()).length&&En(t,"scopes",e.join(",")),this.i?En(t,"redirectUrl",this.i):Vn(t.a,"redirectUrl"),this.g?En(t,"eventId",this.g):Vn(t.a,"eventId"),this.h?En(t,"v",this.h):Vn(t.a,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Sn(t,s)&&En(t,s,this.b[s]);return this.f?En(t,"eid",this.f):Vn(t.a,"eid"),(s=Aa(this.c)).length&&En(t,"fw",s.join(",")),t.toString()},(t=ka.prototype).Bb=function(t,e,n){var r=new Jr("popup-closed-by-user"),i=new Jr("web-storage-unsupported"),o=this,s=!1;return this.fa().then(function(){(function(t){var e={type:"webStorageSupport"};return Na(t).then(function(){return function(t,e){return t.bb.then(function(){return new zt(function(n){t.a.send(e.type,e,n,vr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(t.i,e)}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})})(o).then(function(n){n||(t&&nr(t),e(i),s=!0)})}).s(function(){}).then(function(){if(!s)return function(t){return new zt(function(e){return function n(){hn(2e3).then(function(){if(t&&!t.closed)return n();e()})}()})}(t)}).then(function(){if(!s)return hn(n).then(function(){e(r)})})},t.Kb=function(){var t=yr();return!Sr(t)&&!kr(t)},t.Fb=function(){return!1},t.zb=function(t,e,n,r,i,o,s){if(!t)return Xt(new Jr("popup-blocked"));if(s&&!Sr())return this.fa().s(function(e){nr(t),i(e)}),r(),Jt();this.a||(this.a=Da(Oa(this)));var a=this;return this.a.then(function(){var e=a.fa().s(function(e){throw nr(t),i(e),e});return r(),e}).then(function(){ho(n),s||tr(xa(a.l,a.f,a.b,e,n,null,o,a.c,void 0,a.h),t)}).s(function(t){throw"auth/network-request-failed"==t.code&&(a.a=null),t})},t.Ab=function(t,e,n){this.a||(this.a=Da(Oa(this)));var r=this;return this.a.then(function(){ho(e),tr(xa(r.l,r.f,r.b,t,e,Zn(),n,r.c,void 0,r.h))}).s(function(t){throw"auth/network-request-failed"==t.code&&(r.a=null),t})},t.fa=function(){var t=this;return Na(this).then(function(){return t.i.bb}).s(function(){throw t.a=null,new Jr("network-request-failed")})},t.Mb=function(){return!0},t.wa=function(t){this.g.push(t)},t.Ja=function(t){G(this.g,function(e){return e==t})},(t=Ra.prototype).get=function(t){return Jt(this.a.getItem(t)).then(function(t){return t&&Ir(t)})},t.set=function(t,e){return Jt(this.a.setItem(t,Cr(e)))},t.P=function(t){return Jt(this.a.removeItem(t))},t.Y=function(){},t.ca=function(){};var Ma,La=[];function Va(t,e,n){K(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function ja(t){this.a=t}function Fa(t){this.c=t,this.b=!1,this.a=[]}function Ua(t,e,n,r){var i,o,s,a,u=n||{},l=null;if(t.b)return Xt(Error("connection_unavailable"));var c=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new zt(function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),s=setTimeout(function(){r(Error("unsupported_event"))},c),t.a.push(l={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout(function(){r(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}}),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))}).then(function(e){return qa(t,l),e}).s(function(e){throw qa(t,l),e})}function qa(t,e){if(e){var n=e.messageChannel;n&&(n.port1.removeEventListener("message",e.onMessage),n.port1.close()),G(t.a,function(t){return t==e})}}function Ba(){if(!za())throw new Jr("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.l=s.indexedDB,this.type="indexedDB",this.g=this.m=this.f=this.i=null,this.u=!1,this.h=null;var t=this;lr()&&self?(this.m=function(){var t=lr()?self:null;if(j(La,function(n){n.b==t&&(e=n)}),!e){var e=new Pa(t);La.push(e)}return e}(),Va(this.m,"keyChanged",function(e,n){return $a(t).then(function(e){return 0<e.length&&j(t.a,function(t){t(e)}),{keyProcessed:q(e,n.key)}})}),Va(this.m,"ping",function(){return Jt(["keyChanged"])})):function(){var t=s.navigator;return t&&t.serviceWorker?Jt().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).s(function(){return null}):Jt(null)}().then(function(e){(t.h=e)&&(t.g=new Fa(new ja(e)),Ua(t.g,"ping",null,!0).then(function(e){e[0].fulfilled&&q(e[0].value,"keyChanged")&&(t.u=!0)}).s(function(){}))})}function Ga(t){return t.o||(t.o=function t(e){return new zt(function(n,r){var i=e.l.open("firebaseLocalStorageDb",1);i.onerror=function(t){try{t.preventDefault()}catch(e){}r(Error(t.target.error))},i.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){r(e)}},i.onsuccess=function(i){(i=i.target.result).objectStoreNames.contains("firebaseLocalStorage")?n(i):function(t){return new zt(function(e,n){var r=t.l.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}})}(e).then(function(){return t(e)}).then(function(t){n(t)}).s(function(t){r(t)})}})}(t)),t.o}function za(){try{return!!s.indexedDB}catch(ye){return!1}}function Ha(t){return t.objectStore("firebaseLocalStorage")}function Wa(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Ka(t){return new zt(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function Qa(t,e){return t.g&&t.h&&function(){var t=s.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Ua(t.g,"keyChanged",{key:e},t.u).then(function(){}).s(function(){}):Jt()}function $a(t){return Ga(t).then(function(t){var e=Ha(Wa(t,!1));return e.getAll?Ka(e.getAll()):new zt(function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}})}).then(function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=function t(e,n){var r,i=[];for(r in e)r in n?typeof e[r]!=typeof n[r]?i.push(r):"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(t.c,n),t.c=n}return r})}function Ya(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Ja(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Jt().then(function(){if(za()){var t=Ar(),r="__sak"+t;return Ma||(Ma=new Ba),(n=Ma).set(r,t).then(function(){return n.get(r)}).then(function(e){if(e!==t)throw Error("indexedDB not supported!");return n.P(r)}).then(function(){return n}).s(function(){return e.c})}return e.c}).then(function(t){return e.type=t.type,t.Y(function(t){j(e.a,function(e){e(t)})}),t})}function Xa(){this.a={},this.type="inMemory"}function Za(){if(!function(){var t="Node"==cr();if(!(t=tu()||t&&vt.a.INTERNAL.node&&vt.a.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==cr())throw new Jr("internal-error","The LocalStorage compatibility library was not found.");throw new Jr("web-storage-unsupported")}this.a=tu()||vt.a.INTERNAL.node.localStorage,this.type="localStorage"}function tu(){try{var t=s.localStorage,e=Ar();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function eu(){this.type="nullStorage"}function nu(){if(!function(){var t="Node"==cr();if(!(t=ru()||t&&vt.a.INTERNAL.node&&vt.a.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==cr())throw new Jr("internal-error","The SessionStorage compatibility library was not found.");throw new Jr("web-storage-unsupported")}this.a=ru()||vt.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function ru(){try{var t=s.sessionStorage,e=Ar();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function iu(){var t={};t.Browser=au,t.Node=uu,t.ReactNative=lu,t.Worker=cu,this.a=t[cr()]}Pa.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];j(r,function(e){i.push(Jt().then(function(){return e(t.origin,t.data.data)}))}),te(i).then(function(r){var i=[];j(r,function(t){i.push({fulfilled:t.Cb,value:t.value,reason:t.reason?t.reason.message:void 0})}),j(i,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})})}},ja.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Fa.prototype.close=function(){for(;0<this.a.length;)qa(this,this.a[0]);this.b=!0},(t=Ba.prototype).set=function(t,e){var n,r=!1,i=this;return Ga(this).then(function(e){return Ka((e=Ha(Wa(n=e,!0))).get(t))}).then(function(o){var s=Ha(Wa(n,!0));return o?(o.value=e,Ka(s.put(o))):(i.b++,r=!0,(o={}).fbase_key=t,o.value=e,Ka(s.add(o)))}).then(function(){return i.c[t]=e,Qa(i,t)}).ha(function(){r&&i.b--})},t.get=function(t){return Ga(this).then(function(e){return Ka(Ha(Wa(e,!1)).get(t))}).then(function(t){return t&&t.value})},t.P=function(t){var e=!1,n=this;return Ga(this).then(function(r){return e=!0,n.b++,Ka(Ha(Wa(r,!0)).delete(t))}).then(function(){return delete n.c[t],Qa(n,t)}).ha(function(){e&&n.b--})},t.Y=function(t){0==this.a.length&&function(t){Ya(t),function e(){t.f=setTimeout(function(){t.i=$a(t).then(function(e){0<e.length&&j(t.a,function(t){t(e)})}).then(function(){e()}).s(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()}(this),this.a.push(t)},t.ca=function(t){G(this.a,function(e){return e==t}),0==this.a.length&&Ya(this)},(t=Ja.prototype).get=function(t){return this.b.then(function(e){return e.get(t)})},t.set=function(t,e){return this.b.then(function(n){return n.set(t,e)})},t.P=function(t){return this.b.then(function(e){return e.P(t)})},t.Y=function(t){this.a.push(t)},t.ca=function(t){G(this.a,function(e){return e==t})},(t=Xa.prototype).get=function(t){return Jt(this.a[t])},t.set=function(t,e){return this.a[t]=e,Jt()},t.P=function(t){return delete this.a[t],Jt()},t.Y=function(){},t.ca=function(){},(t=Za.prototype).get=function(t){var e=this;return Jt().then(function(){return Ir(e.a.getItem(t))})},t.set=function(t,e){var n=this;return Jt().then(function(){var r=Cr(e);null===r?n.P(t):n.a.setItem(t,r)})},t.P=function(t){var e=this;return Jt().then(function(){e.a.removeItem(t)})},t.Y=function(t){s.window&&Ke(s.window,"storage",t)},t.ca=function(t){s.window&&Ye(s.window,"storage",t)},(t=eu.prototype).get=function(){return Jt(null)},t.set=function(){return Jt()},t.P=function(){return Jt()},t.Y=function(){},t.ca=function(){},(t=nu.prototype).get=function(t){var e=this;return Jt().then(function(){return Ir(e.a.getItem(t))})},t.set=function(t,e){var n=this;return Jt().then(function(){var r=Cr(e);null===r?n.P(t):n.a.setItem(t,r)})},t.P=function(t){var e=this;return Jt().then(function(){e.a.removeItem(t)})},t.Y=function(){},t.ca=function(){};var ou,su,au={C:Za,Qa:nu},uu={C:Za,Qa:nu},lu={C:Ra,Qa:eu},cu={C:Za,Qa:eu},hu={Vc:"local",NONE:"none",Xc:"session"};function du(){var t=!(kr(yr())||!ur()),e=Sr(),n=br();this.o=t,this.h=e,this.m=n,this.a={},ou||(ou=new iu),t=ou;try{this.g=!Xn()&&Rr()||!s.indexedDB?new t.a.C:new Ja(lr()?new Xa:new t.a.C)}catch(r){this.g=new Xa,this.h=!0}try{this.i=new t.a.Qa}catch(r){this.i=new Xa}this.l=new Xa,this.f=E(this.Lb,this),this.b={}}function fu(){return su||(su=new du),su}function pu(t,e){switch(e){case"session":return t.i;case"none":return t.l;default:return t.g}}function mu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function gu(t,e,n){return n=mu(e,n),"local"==e.C&&(t.b[n]=null),pu(t,e.C).P(n)}function yu(t){t.c&&(clearInterval(t.c),t.c=null)}function vu(t){this.a=t,this.b=fu()}(t=du.prototype).get=function(t,e){return pu(this,t.C).get(mu(t,e))},t.set=function(t,e,n){var r=mu(t,n),i=this,o=pu(this,t.C);return o.set(r,e).then(function(){return o.get(r)}).then(function(e){"local"==t.C&&(i.b[r]=e)})},t.addListener=function(t,e,n){t=mu(t,e),this.m&&(this.b[t]=s.localStorage.getItem(t)),K(this.a)&&(pu(this,"local").Y(this.f),this.h||(Xn()||!Rr())&&s.indexedDB||!this.m||function(t){yu(t),t.c=setInterval(function(){for(var e in t.a){var n=s.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Le({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Lb(n))}},1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=mu(t,e),this.a[t]&&(G(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),K(this.a)&&(pu(this,"local").ca(this.f),yu(this))},t.Lb=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=s.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.Wa(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?pu(this,"local").ca(this.f):yu(this),this.o)if(n=s.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?s.localStorage.setItem(e,r):s.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===s.localStorage.getItem(e)||(o.b[e]=s.localStorage.getItem(e),o.Wa(e))},be&&ke&&10==ke&&s.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else j(t,E(this.Wa,this))},t.Wa=function(t){this.a[t]&&j(this.a[t],function(t){t()})};var bu,wu={name:"authEvent",C:"local"};function _u(){this.a=fu()}function Eu(t,e){this.b=Su,this.f=s.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.m=s.Int32Array?new Int32Array(64):Array(64),void 0!==bu||(bu=s.Int32Array?new Int32Array(Nu):Nu),this.reset()}T(Eu,function(){this.b=-1});for(var Su=64,Cu=Su-1,Tu=[],Iu=0;Iu<Cu;Iu++)Tu[Iu]=0;var Au=z(128,Tu);function ku(t){for(var e=t.f,n=t.m,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){var o=(0|n[e-16])+(((i=0|n[e-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+(((r=0|n[e-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],l=0|t.a[4],c=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var d=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))|0)+((s=(s=l&c^~l&h)+(0|bu[e])|0)+(0|n[e])|0)|0,o=h,h=c,c=l,l=u+s|0,u=a,a=i,i=r,r=s+d|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+l|0,t.a[5]=t.a[5]+c|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function Du(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if(a(e))for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(ku(t),i=0);else{if(!m(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(ku(t),i=0)}}t.c=i,t.g+=n}Eu.prototype.reset=function(){this.g=this.c=0,this.a=s.Int32Array?new Int32Array(this.h):H(this.h)};var Nu=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Ou(){Eu.call(this,8,xu)}T(Ou,Eu);var xu=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Ru(t,e,n,r,i){this.l=t,this.i=e,this.m=n,this.o=r||null,this.u=i||null,this.h=e+":"+n,this.v=new _u,this.g=new vu(this.h),this.f=null,this.b=[],this.a=this.c=null}function Pu(t){return new Jr("invalid-cordova-configuration",t)}function Mu(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function Lu(t){return t.f||(t.f=t.fa().then(function(){return new zt(function(e){t.wa(function n(r){return e(r),t.Ja(n),!1}),function(t){function e(e){r=!0,i&&i.cancel(),Vu(t).then(function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=Pi(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Ir(Sn(o=Cn(i),"firebaseError")||null))?Xr(o):null)?new fo(r.c,r.b,null,null,o):new fo(r.c,r.b,i,r.f)),i=o||n}Mu(t,i)})}var n=new fo("unknown",null,null,null,new Jr("no-auth-event")),r=!1,i=hn(500).then(function(){return Vu(t).then(function(){r||Mu(t,n)})}),o=s.handleOpenURL;s.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(vr("BuildInfo.packageName",s).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(n){console.error(n)}},yo||(yo=new mo),function(t){var e=yo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=vr("universalLinks.subscribe",s))&&t(null,e.b))}(e)}(t)})})),t.f}function Vu(t){var e=null;return function(t){return t.b.get(wu,t.a).then(function(t){return po(t)})}(t.g).then(function(n){return e=n,gu((n=t.g).b,wu,n.a)}).then(function(){return e})}function ju(t){this.a=t,this.b=fu()}(t=Ru.prototype).fa=function(){return this.za?this.za:this.za=(ar(void 0)?sr().then(function(){return new zt(function(t,e){var n=s.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):Xt(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof vr("universalLinks.subscribe",s))throw Pu("cordova-universal-links-plugin-fix is not installed");if(void 0===vr("BuildInfo.packageName",s))throw Pu("cordova-plugin-buildinfo is not installed");if("function"!=typeof vr("cordova.plugins.browsertab.openUrl",s))throw Pu("cordova-plugin-browsertab is not installed");if("function"!=typeof vr("cordova.InAppBrowser.open",s))throw Pu("cordova-plugin-inappbrowser is not installed")},function(){throw new Jr("cordova-not-ready")})},t.Bb=function(t,e){return e(new Jr("operation-not-supported-in-this-environment")),Jt()},t.zb=function(){return Xt(new Jr("operation-not-supported-in-this-environment"))},t.Mb=function(){return!1},t.Kb=function(){return!0},t.Fb=function(){return!0},t.Ab=function(t,e,n){if(this.c)return Xt(new Jr("redirect-operation-pending"));var r=this,i=s.document,o=null,a=null,u=null,l=null;return this.c=Jt().then(function(){return ho(e),Lu(r)}).then(function(){return function(t,e,n,r){var i=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),o=new fo(e,r,null,i,new Jr("no-auth-event")),a=vr("BuildInfo.packageName",s);if("string"!=typeof a)throw new Jr("invalid-cordova-configuration");var u=vr("BuildInfo.displayName",s),l={};if(yr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=a;else{if(!yr().toLowerCase().match(/android/))return Xt(new Jr("operation-not-supported-in-this-environment"));l.apn=a}u&&(l.appDisplayName=u),i=function(t){var e=new Ou;Du(e,t),t=[];var n=8*e.g;Du(e,Au,56>e.c?56-e.c:e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(ku(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return F(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}(t)}(i),l.sessionId=i;var c=xa(t.l,t.i,t.m,e,n,null,r,t.o,l,t.u);return t.fa().then(function(){var e=t.h;return t.v.a.set(wu,o.A(),e)}).then(function(){var e=vr("cordova.plugins.browsertab.isAvailable",s);if("function"!=typeof e)throw new Jr("invalid-cordova-configuration");var n=null;e(function(e){if(e){if("function"!=typeof(n=vr("cordova.plugins.browsertab.openUrl",s)))throw new Jr("invalid-cordova-configuration");n(c)}else{if("function"!=typeof(n=vr("cordova.InAppBrowser.open",s)))throw new Jr("invalid-cordova-configuration");e=yr(),t.a=n(c,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(r,t,e,n)}).then(function(){return new zt(function(t,e){a=function(){var e=vr("cordova.plugins.browsertab.close",s);return t(),"function"==typeof e&&e(),r.a&&"function"==typeof r.a.close&&(r.a.close(),r.a=null),!1},r.wa(a),l=function(){Or()&&u()},i.addEventListener("resume",u=function(){o||(o=hn(2e3).then(function(){e(new Jr("redirect-cancelled-by-user"))}))},!1),yr().toLowerCase().match(/android/)||i.addEventListener("visibilitychange",l,!1)}).s(function(t){return Vu(r).then(function(){throw t})})}).ha(function(){u&&i.removeEventListener("resume",u,!1),l&&i.removeEventListener("visibilitychange",l,!1),o&&o.cancel(),a&&r.Ja(a),r.c=null})},t.wa=function(t){this.b.push(t),Lu(this).s(function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new fo("unknown",null,null,null,new Jr("no-auth-event")),t(e))})},t.Ja=function(t){G(this.b,function(e){return e==t})};var Fu={name:"pendingRedirect",C:"session"};function Uu(t){return gu(t.b,Fu,t.a)}function qu(t,e,n){this.i={},this.v=0,this.B=t,this.l=e,this.o=n,this.h=[],this.f=!1,this.m=E(this.u,this),this.b=new el,this.w=new sl,this.g=new ju(this.l+":"+this.o),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.w,this.c.linkViaPopup=this.w,this.c.reauthViaPopup=this.w,this.a=Bu(this.B,this.l,this.o,yi)}function Bu(t,e,n,r){var i=vt.a.SDK_VERSION||null;return ar()?new Ru(t,e,n,i,r):new ka(t,e,n,i,r)}function Gu(t){t.f||(t.f=!0,t.a.wa(t.m));var e=t.a;return t.a.fa().s(function(n){throw t.a==e&&t.reset(),n})}function zu(t){t.a.Kb()&&Gu(t).s(function(e){var n=new fo("unknown",null,null,null,new Jr("operation-not-supported-in-this-environment"));Yu(e)&&t.u(n)}),t.a.Fb()||nl(t.b)}function Hu(t,e){q(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Fu,t.a).then(function(t){return"pending"==t})}(t.g).then(function(e){e?Uu(t.g).then(function(){Gu(t).s(function(e){var n=new fo("unknown",null,null,null,new Jr("operation-not-supported-in-this-environment"));Yu(e)&&t.u(n)})}):zu(t)}).s(function(){zu(t)})}function Wu(t,e){G(t.h,function(t){return t==e})}qu.prototype.reset=function(){this.f=!1,this.a.Ja(this.m),this.a=Bu(this.B,this.l,this.o),this.i={}},qu.prototype.u=function(t){if(!t)throw new Jr("invalid-auth-event");if(6e5<=C()-this.v&&(this.i={},this.v=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.tb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.v=C())),e=!0;break}}return nl(this.b),e};var Ku=new Nr(2e3,1e4),Qu=new Nr(3e4,6e4);function $u(t,e,n,r,i,o){return t.a.zb(e,n,r,function(){t.f||(t.f=!0,t.a.wa(t.m))},function(){t.reset()},i,o)}function Yu(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Ju(t,e,n,r){var i;return function(t){return t.b.set(Fu,"pending",t.a)}(t.g).then(function(){return t.a.Ab(e,n,r).s(function(e){if(Yu(e))throw new Jr("operation-not-supported-in-this-environment");return i=e,Uu(t.g).then(function(){throw i})}).then(function(){return t.a.Mb()?new zt(function(){}):Uu(t.g).then(function(){return t.la()}).then(function(){}).s(function(){})})})}function Xu(t,e,n,r,i){return t.a.Bb(r,function(t){e.ga(n,null,t,i)},Ku.get())}qu.prototype.la=function(){return this.b.la()};var Zu={};function tl(t,e,n){var r=e+":"+n;return Zu[r]||(Zu[r]=new qu(t,e,n)),Zu[r]}function el(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function nl(t){t.g||(t.g=!0,ol(t,!1,null,null))}function rl(t){t.g&&!t.i&&ol(t,!1,null,null)}function il(t,e){if(t.b=function(){return Jt(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function ol(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Xt(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):il(t,n):il(t,{user:null}),t.f=[],t.c=[]}function sl(){}function al(){this.qb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.qb},set:function(t){this.qb=t},enumerable:!1})}function ul(t,e){this.a=e,jr(this,"verificationId",t)}function ll(t,e,n,r){return new uo(t).Ta(e,n).then(function(t){return new ul(t,r)})}function cl(t){var e=gi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new Jr("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Fr(this,{token:t,expirationTime:xr(1e3*e.exp),authTime:xr(1e3*e.auth_time),issuedAtTime:xr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,claims:e})}function hl(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function dl(t){this.f=t,this.b=this.a=null,this.c=0}function fl(t,e){var n=e[Es],r=e.refreshToken;e=pl(e.expiresIn),t.b=n,t.c=e,t.a=r}function pl(t){return C()+1e3*parseInt(t,10)}function ml(t,e){this.a=t||null,this.b=e||null,Fr(this,{lastSignInTime:xr(e||null),creationTime:xr(t||null)})}function gl(t,e,n,r,i,o){Fr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function yl(t,e){for(var n in Me.call(this,t),e)this[n]=e[n]}function vl(t,e,n){this.G=[],this.l=t.apiKey,this.o=t.appName,this.u=t.authDomain||null,t=vt.a.SDK_VERSION?gr(vt.a.SDK_VERSION):null,this.a=new ws(this.l,bi(yi),t),this.c=new dl(this.a),Tl(this,e[Es]),fl(this.c,e),jr(this,"refreshToken",this.c.a),kl(this,n||{}),sn.call(this),this.I=!1,this.u&&wr()&&(this.i=tl(this.u,this.l,this.o)),this.N=[],this.h=null,this.w=function(t){return new hl(function(){return t.F(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var e=t.c.c-C()-3e5;return 0<e?e:0})}(this),this.V=E(this.Fa,this);var r=this;this.ja=null,this.ta=function(t){r.pa(t.g)},this.X=null,this.O=[],this.sa=function(t){wl(r,t.c)},this.W=null}function bl(t,e){t.X&&Ye(t.X,"languageCodeChanged",t.ta),(t.X=e)&&Ke(e,"languageCodeChanged",t.ta)}function wl(t,e){t.O=e,ks(t.a,vt.a.SDK_VERSION?gr(vt.a.SDK_VERSION,t.O):null)}function _l(t,e){t.W&&Ye(t.W,"frameworkChanged",t.sa),(t.W=e)&&Ke(e,"frameworkChanged",t.sa)}function El(t){try{return vt.a.app(t.o).auth()}catch(e){throw new Jr("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.o+"'!")}}function Sl(t){t.B||t.w.b||(t.w.start(),Ye(t,"tokenChanged",t.V),Ke(t,"tokenChanged",t.V))}function Cl(t){Ye(t,"tokenChanged",t.V),t.w.stop()}function Tl(t,e){t.ra=e,jr(t,"_lat",e)}function Il(t){for(var e=[],n=0;n<t.N.length;n++)e.push(t.N[n](t));return te(e).then(function(){return t})}function Al(t){t.i&&!t.I&&(t.I=!0,Hu(t.i,t))}function kl(t,e){Fr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,metadata:new ml(e.createdAt,e.lastLoginAt),providerData:[]})}function Dl(){}function Nl(t){return Jt().then(function(){if(t.B)throw new Jr("app-deleted")})}function Ol(t){return F(t.providerData,function(t){return t.providerId})}function xl(t,e){e&&(Rl(t,e.providerId),t.providerData.push(e))}function Rl(t,e){G(t.providerData,function(t){return t.providerId==e})}function Pl(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&jr(t,e,n)}function Ml(t,e){t!=e&&(Fr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,providerData:[]}),jr(t,"metadata",e.metadata?function(t){return new ml(t.a,t.b)}(e.metadata):new ml),j(e.providerData,function(e){xl(t,e)}),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.c,e.c),jr(t,"refreshToken",t.c.a))}function Ll(t){return t.F().then(function(e){var n=t.isAnonymous;return function(t,e){return ya(t.a,Xs,{idToken:e}).then(E(t.uc,t))}(t,e).then(function(){return n||Pl(t,"isAnonymous",!1),e})})}function Vl(t,e){e[Es]&&t.ra!=e[Es]&&(fl(t.c,e),t.dispatchEvent(new yl("tokenChanged")),Tl(t,e[Es]),Pl(t,"refreshToken",t.c.a))}function jl(t,e){return Ll(t).then(function(){if(q(Ol(t),e))return Il(t).then(function(){throw new Jr("provider-already-linked")})})}function Fl(t,e,n){return Ur({user:t,credential:co(e),additionalUserInfo:e=Ci(e),operationType:n})}function Ul(t,e){return Vl(t,e),t.reload().then(function(){return t})}function ql(t,e,n,r,i){if(!wr())return Xt(new Jr("operation-not-supported-in-this-environment"));if(t.h&&!i)return Xt(t.h);var o=Si(n.providerId),s=Ar(t.uid+":::"),a=null;(!Sr()||ur())&&t.u&&n.isOAuthProvider&&(a=xa(t.u,t.l,t.o,e,n,null,s,vt.a.SDK_VERSION||null));var u=rr(a,o&&o.Ba,o&&o.Aa);return r=r().then(function(){if(Gl(t),!i)return t.F().then(function(){})}).then(function(){return $u(t.i,u,e,n,s,!!a)}).then(function(){return new zt(function(n,r){t.ga(e,null,new Jr("cancelled-popup-request"),t.g||null),t.f=n,t.v=r,t.g=s,t.b=Xu(t.i,t,e,u,s)})}).then(function(t){return u&&nr(u),t?Ur(t):null}).s(function(t){throw u&&nr(u),t}),zl(t,r,i)}function Bl(t,e,n,r,i){if(!wr())return Xt(new Jr("operation-not-supported-in-this-environment"));if(t.h&&!i)return Xt(t.h);var o=null,s=Ar(t.uid+":::");return r=r().then(function(){if(Gl(t),!i)return t.F().then(function(){})}).then(function(){return t.aa=s,Il(t)}).then(function(e){return t.ba&&(e=(e=t.ba).b.set(Kl,t.A(),e.a)),e}).then(function(){return Ju(t.i,e,n,s)}).s(function(e){if(o=e,t.ba)return Ql(t.ba);throw o}).then(function(){if(o)throw o}),zl(t,r,i)}function Gl(t){if(!t.i||!t.I){if(t.i&&!t.I)throw new Jr("internal-error");throw new Jr("auth-domain-config-required")}}function zl(t,e,n){var r=function(t,e,n){return t.h&&!n?(e.cancel(),Xt(t.h)):e.s(function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new yl("userInvalidated")),t.h=e),e})}(t,e,n);return t.G.push(r),r.ha(function(){B(t.G,r)}),r}function Hl(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!(t.stsTokenManager&&t.stsTokenManager.accessToken&&t.stsTokenManager.expirationTime))return null;n[Es]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null,n.expiresIn=(t.stsTokenManager.expirationTime-C())/1e3;var r=new vl(e,n,t);return t.providerData&&j(t.providerData,function(t){t&&xl(r,Ur(t))}),t.redirectEventId&&(r.aa=t.redirectEventId),r}function Wl(t){this.a=t,this.b=fu()}el.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},el.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(ol(this,!0,null,t.a),Jt()):e.xa(n,r)?function(t,e,n){n=n.xa(e.c,e.b);var r=e.g,i=e.f,o=e.h,s=!!e.c.match(/Redirect$/);n(r,i,o).then(function(e){ol(t,s,e,null)}).s(function(e){ol(t,s,null,e)})}(this,t,e):Xt(new Jr("invalid-auth-event")):(ol(this,!1,null,null),Jt())}else Xt(new Jr("invalid-auth-event"))},el.prototype.la=function(){var t=this;return new zt(function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new Jr("timeout");t.a&&t.a.cancel(),t.a=hn(Qu.get()).then(function(){t.b||(t.g=!0,ol(t,!0,null,e))})}(t))})},sl.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.ga(t.c,null,t.a,t.b),Jt()):e.xa(n,r)?function(t,e){var n=t.b,r=t.c;e.xa(r,n)(t.g,t.f,t.h).then(function(t){e.ga(r,t,null,n)}).s(function(t){e.ga(r,null,t,n)})}(t,e):Xt(new Jr("invalid-auth-event"))}else Xt(new Jr("invalid-auth-event"))},ul.prototype.confirm=function(t){return t=lo(this.verificationId,t),this.a(t)},hl.prototype.start=function(){this.a=this.c,function t(e,n){e.stop(),e.b=hn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(e,n)).then(function(){return function(){var t=s.document,e=null;return Or()||!t?Jt():new zt(function(n){e=function(){Or()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)}).s(function(n){throw t.removeEventListener("visibilitychange",e,!1),n})}()}).then(function(){return e.h()}).then(function(){t(e,!0)}).s(function(n){e.i(n)&&t(e,!1)})}(this,!0)},hl.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},dl.prototype.A=function(){return{apiKey:this.f.b,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},dl.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Xt(new Jr("user-token-expired")):t||!this.b||C()>this.c-3e4?this.a?function(t,e){return function(t,e){return new zt(function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?Ds(t,t.i+"?key="+encodeURIComponent(t.b),function(t){t?t.error?r(ba(t)):t.access_token&&t.refresh_token?n(t):r(new Jr("internal-error")):r(new Jr("network-request-failed"))},"POST",Ln(e).toString(),t.f,t.m.get()):r(new Jr("internal-error"))})}(t.f,e).then(function(e){return t.b=e.access_token,t.c=pl(e.expires_in),t.a=e.refresh_token,{accessToken:t.b,expirationTime:t.c,refreshToken:t.a}}).s(function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e})}(this,{grant_type:"refresh_token",refresh_token:this.a}):Jt(null):Jt({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},ml.prototype.A=function(){return{lastLoginAt:this.b,createdAt:this.a}},T(yl,Me),T(vl,sn),vl.prototype.pa=function(t){this.ja=t,As(this.a,t)},vl.prototype.ea=function(){return this.ja},vl.prototype.ya=function(){return H(this.O)},vl.prototype.Fa=function(){this.w.b&&(this.w.stop(),this.w.start())},jr(vl.prototype,"providerId","firebase"),(t=vl.prototype).reload=function(){var t=this;return zl(this,Nl(this).then(function(){return Ll(t).then(function(){return Il(t)}).then(Dl)}))},t.Zb=function(t){return this.F(t).then(function(t){return new cl(t)})},t.F=function(t){var e=this;return zl(this,Nl(this).then(function(){return e.c.getToken(t)}).then(function(t){if(!t)throw new Jr("internal-error");return t.accessToken!=e.ra&&(Tl(e,t.accessToken),e.dispatchEvent(new yl("tokenChanged"))),Pl(e,"refreshToken",t.refreshToken),t.accessToken}))},t.uc=function(t){if(!(t=t.users)||!t.length)throw new Jr("internal-error");kl(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?F(t,function(t){return new gl(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[]}(t),n=0;n<e.length;n++)xl(this,e[n]);Pl(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length))},t.vc=function(t){return Lr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.cb(t)},t.cb=function(t){var e=this,n=null;return zl(this,t.f(this.a,this.uid).then(function(t){return Vl(e,t),n=Fl(e,t,"reauthenticate"),e.h=null,e.reload()}).then(function(){return n}),!0)},t.mc=function(t){return Lr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.ab(t)},t.ab=function(t){var e=this,n=null;return zl(this,jl(this,t.providerId).then(function(){return e.F()}).then(function(n){return t.b(e.a,n)}).then(function(t){return n=Fl(e,t,"link"),Ul(e,t)}).then(function(){return n}))},t.nc=function(t,e){var n=this;return zl(this,jl(this,"phone").then(function(){return ll(El(n),t,e,E(n.ab,n))}))},t.wc=function(t,e){var n=this;return zl(this,Jt().then(function(){return ll(El(n),t,e,E(n.cb,n))}),!0)},t.nb=function(t){var e=this;return zl(this,this.F().then(function(n){return e.a.nb(n,t)}).then(function(t){return Vl(e,t),e.reload()}))},t.Nc=function(t){var e=this;return zl(this,this.F().then(function(n){return t.b(e.a,n)}).then(function(t){return Vl(e,t),e.reload()}))},t.ob=function(t){var e=this;return zl(this,this.F().then(function(n){return e.a.ob(n,t)}).then(function(t){return Vl(e,t),e.reload()}))},t.pb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Nl(this);var e=this;return zl(this,this.F().then(function(n){return e.a.pb(n,{displayName:t.displayName,photoUrl:t.photoURL})}).then(function(t){return Vl(e,t),Pl(e,"displayName",t.displayName||null),Pl(e,"photoURL",t.photoUrl||null),j(e.providerData,function(t){"password"===t.providerId&&(jr(t,"displayName",e.displayName),jr(t,"photoURL",e.photoURL))}),Il(e)}).then(Dl))},t.Lc=function(t){var e=this;return zl(this,Ll(this).then(function(n){return q(Ol(e),t)?function(t,e,n){return ya(t,$s,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then(function(t){var n={};return j(t.providerUserInfo||[],function(t){n[t.providerId]=!0}),j(Ol(e),function(t){n[t]||Rl(e,t)}),n[uo.PROVIDER_ID]||jr(e,"phoneNumber",null),Il(e)}):Il(e).then(function(){throw new Jr("no-such-provider")})}))},t.delete=function(){var t=this;return zl(this,this.F().then(function(e){return ya(t.a,Qs,{idToken:e})}).then(function(){t.dispatchEvent(new yl("userDeleted"))})).then(function(){for(var e=0;e<t.G.length;e++)t.G[e].cancel("app-deleted");bl(t,null),_l(t,null),t.G=[],t.B=!0,Cl(t),jr(t,"refreshToken",null),t.i&&Wu(t.i,t)})},t.tb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.aa||null)==e||"reauthViaRedirect"==t&&(this.aa||null)==e)},t.ga=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.b&&(this.b.cancel(),this.b=null),delete this.f,delete this.v)},t.xa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?E(this.xb,this):"reauthViaPopup"==t&&e==(this.g||null)?E(this.yb,this):"linkViaRedirect"==t&&(this.aa||null)==e?E(this.xb,this):"reauthViaRedirect"==t&&(this.aa||null)==e?E(this.yb,this):null},t.oc=function(t){var e=this;return ql(this,"linkViaPopup",t,function(){return jl(e,t.providerId).then(function(){return Il(e)})},!1)},t.xc=function(t){return ql(this,"reauthViaPopup",t,function(){return Jt()},!0)},t.pc=function(t){var e=this;return Bl(this,"linkViaRedirect",t,function(){return jl(e,t.providerId)},!1)},t.yc=function(t){return Bl(this,"reauthViaRedirect",t,function(){return Jt()},!0)},t.xb=function(t,e,n){var r=this;this.b&&(this.b.cancel(),this.b=null);var i=null;return zl(this,this.F().then(function(i){return qs(r.a,{requestUri:t,postBody:n,sessionId:e,idToken:i})}).then(function(t){return i=Fl(r,t,"link"),Ul(r,t)}).then(function(){return i}))},t.yb=function(t,e,n){var r=this;this.b&&(this.b.cancel(),this.b=null);var i=null;return zl(this,Jt().then(function(){return Li(Bs(r.a,{requestUri:t,sessionId:e,postBody:n}),r.uid)}).then(function(t){return i=Fl(r,t,"reauthenticate"),Vl(r,t),r.h=null,r.reload()}).then(function(){return i}),!0)},t.gb=function(t){var e=this,n=null;return zl(this,this.F().then(function(e){return n=e,void 0===t||K(t)?{}:hi(new ei(t))}).then(function(t){return e.a.gb(n,t)}).then(function(t){if(e.email!=t)return e.reload()}).then(function(){}))},t.toJSON=function(){return this.A()},t.A=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,providerData:[],apiKey:this.l,appName:this.o,authDomain:this.u,stsTokenManager:this.c.A(),redirectEventId:this.aa||null};return this.metadata&&Y(t,this.metadata.A()),j(this.providerData,function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))}),t};var Kl={name:"redirectUser",C:"session"};function Ql(t){return gu(t.b,Kl,t.a)}function $l(t){this.a=t,this.b=fu(),this.c=null,this.f=function(t){var e=Xl("local"),n=Xl("session"),r=Xl("none");return function(t,e,n){var r=mu(e,n),i=pu(t,e.C);return t.get(e,n).then(function(o){var a=null;try{a=Ir(s.localStorage.getItem(r))}catch(u){}if(a&&!o)return s.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&s.localStorage.removeItem(r)})}(t.b,e,t.a).then(function(){return t.b.get(n,t.a)}).then(function(i){return i?n:t.b.get(r,t.a).then(function(n){return n?r:t.b.get(e,t.a).then(function(n){return n?e:t.b.get(Jl,t.a).then(function(t){return t?Xl(t):e})})})}).then(function(e){return t.c=e,Yl(t,e.C)}).s(function(){t.c||(t.c=e)})}(this),this.b.addListener(Xl("local"),this.a,E(this.g,this))}function Yl(t,e){var n,r=[];for(n in hu)hu[n]!==e&&r.push(gu(t.b,Xl(hu[n]),t.a));return r.push(gu(t.b,Jl,t.a)),function(t){return new zt(function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)Zt(t[a],S(o,a),s);else e(i)})}(r)}$l.prototype.g=function(){var t=this,e=Xl("local");nc(this,function(){return Jt().then(function(){return t.c&&"local"!=t.c.C?t.b.get(e,t.a):null}).then(function(n){if(n)return Yl(t,"local").then(function(){t.c=e})})})};var Jl={name:"persistence",C:"session"};function Xl(t){return{name:"authUser",C:t}}function Zl(t,e){return nc(t,function(){return t.b.set(t.c,e.A(),t.a)})}function tc(t){return nc(t,function(){return gu(t.b,t.c,t.a)})}function ec(t,e){return nc(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),Hl(t||{})})})}function nc(t,e){return t.f=t.f.then(e,e),t.f}function rc(t){if(this.l=!1,jr(this,"settings",new al),jr(this,"app",t),!hc(this).options||!hc(this).options.apiKey)throw new Jr("invalid-api-key");t=vt.a.SDK_VERSION?gr(vt.a.SDK_VERSION):null,this.c=new ws(hc(this).options&&hc(this).options.apiKey,bi(yi),t),this.N=[],this.o=[],this.I=[],this.Pb=vt.a.INTERNAL.createSubscribe(E(this.ic,this)),this.O=void 0,this.Qb=vt.a.INTERNAL.createSubscribe(E(this.jc,this)),lc(this,null),this.h=new $l(hc(this).options.apiKey+":"+hc(this).name),this.w=new Wl(hc(this).options.apiKey+":"+hc(this).name),this.V=mc(this,function(t){var e=hc(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Kl,t.a).then(function(t){return t&&e&&(t.authDomain=e),Hl(t||{})})}(t.w,hc(t).options.authDomain).then(function(e){return(t.B=e)&&(e.ba=t.w),Ql(t.w)});return mc(t,e)}(t).then(function(){return ec(t.h,e)}).then(function(e){return e?(e.ba=t.w,t.B&&(t.B.aa||null)==(e.aa||null)?e:e.reload().then(function(){return Zl(t.h,e).then(function(){return e})}).s(function(n){return"auth/network-request-failed"==n.code?e:tc(t.h)})):null}).then(function(e){lc(t,e||null)});return mc(t,n)}(this)),this.i=mc(this,function(t){return t.V.then(function(){return ac(t)}).s(function(){}).then(function(){if(!t.l)return t.ja()}).s(function(){}).then(function(){if(!t.l){t.X=!0;var e=t.h;e.b.addListener(Xl("local"),e.a,t.ja)}})}(this)),this.X=!1,this.ja=E(this.Ic,this),this.Fa=E(this.Z,this),this.ra=E(this.Xb,this),this.sa=E(this.gc,this),this.ta=E(this.hc,this),this.a=null,function(t){var e=hc(t).options.authDomain,n=hc(t).options.apiKey;e&&wr()&&(t.Ob=t.V.then(function(){if(!t.l){if(t.a=tl(e,n,hc(t).name),Hu(t.a,t),dc(t)&&Al(dc(t)),t.B){Al(t.B);var r=t.B;r.pa(t.ea()),bl(r,t),wl(r=t.B,t.G),_l(r,t),t.B=null}return t.a}}))}(this),this.INTERNAL={},this.INTERNAL.delete=E(this.delete,this),this.INTERNAL.logFramework=E(this.qc,this),this.u=0,sn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.ea()},set:function(t){this.pa(t)},enumerable:!1}),t.W=null}(this),this.G=[]}function ic(t){Me.call(this,"languageCodeChanged"),this.g=t}function oc(t){Me.call(this,"frameworkChanged"),this.c=t}function sc(t){return t.Ob||Xt(new Jr("auth-domain-config-required"))}function ac(t){if(!wr())return Xt(new Jr("operation-not-supported-in-this-environment"));var e=sc(t).then(function(){return t.a.la()}).then(function(t){return t?Ur(t):null});return mc(t,e)}function uc(t,e){var n={};return n.apiKey=hc(t).options.apiKey,n.authDomain=hc(t).options.authDomain,n.appName=hc(t).name,t.V.then(function(){return function(t,e,n,r){var i=new vl(t,e);return n&&(i.ba=n),r&&wl(i,r),i.reload().then(function(){return i})}(n,e,t.w,t.ya())}).then(function(e){return dc(t)&&e.uid==dc(t).uid?(Ml(dc(t),e),t.Z(e)):(lc(t,e),Al(e),t.Z(e))}).then(function(){pc(t)})}function lc(t,e){dc(t)&&(function(t,e){G(t.N,function(t){return t==e})}(dc(t),t.Fa),Ye(dc(t),"tokenChanged",t.ra),Ye(dc(t),"userDeleted",t.sa),Ye(dc(t),"userInvalidated",t.ta),Cl(dc(t))),e&&(e.N.push(t.Fa),Ke(e,"tokenChanged",t.ra),Ke(e,"userDeleted",t.sa),Ke(e,"userInvalidated",t.ta),0<t.u&&Sl(e)),jr(t,"currentUser",e),e&&(e.pa(t.ea()),bl(e,t),wl(e,t.G),_l(e,t))}function cc(t,e){var n=null,r=null;return mc(t,e.then(function(e){return n=co(e),r=Ci(e),uc(t,e)}).then(function(){return Ur({user:dc(t),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function hc(t){return t.app}function dc(t){return t.currentUser}function fc(t){return dc(t)&&dc(t)._lat||null}function pc(t){if(t.X){for(var e=0;e<t.o.length;e++)t.o[e]&&t.o[e](fc(t));if(t.O!==t.getUid()&&t.I.length)for(t.O=t.getUid(),e=0;e<t.I.length;e++)t.I[e]&&t.I[e](fc(t))}}function mc(t,e){return t.N.push(e),e.ha(function(){B(t.N,e)}),e}function gc(){}function yc(){this.a={},this.b=1e12}$l.prototype.jb=function(t){var e=null,n=this;return function(t){var e=new Jr("invalid-persistence-type"),n=new Jr("unsupported-persistence-type");t:{for(r in hu)if(hu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(cr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;default:if(!br()&&"none"!==t)throw n}}(t),nc(this,function(){return t!=n.c.C?n.b.get(n.c,n.a).then(function(r){return e=r,Yl(n,t)}).then(function(){if(n.c=Xl(t),e)return n.b.set(n.c,e,n.a)}):Jt()})},T(rc,sn),T(ic,Me),T(oc,Me),(t=rc.prototype).jb=function(t){return mc(this,t=this.h.jb(t))},t.pa=function(t){this.W===t||this.l||(this.W=t,As(this.c,this.W),this.dispatchEvent(new ic(this.ea())))},t.ea=function(){return this.W},t.Oc=function(){var t=s.navigator;this.pa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.qc=function(t){this.G.push(t),ks(this.c,vt.a.SDK_VERSION?gr(vt.a.SDK_VERSION,this.G):null),this.dispatchEvent(new oc(this.G))},t.ya=function(){return H(this.G)},t.toJSON=function(){return{apiKey:hc(this).options.apiKey,authDomain:hc(this).options.authDomain,appName:hc(this).name,currentUser:dc(this)&&dc(this).A()}},t.tb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.ga=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.b&&(this.b.cancel(),this.b=null),delete this.f,delete this.v)},t.xa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?E(this.Wb,this):null},t.Wb=function(t,e,n){var r=this;t={requestUri:t,postBody:n,sessionId:e},this.b&&(this.b.cancel(),this.b=null);var i=null,o=null,s=Us(r.c,t).then(function(t){return i=co(t),o=Ci(t),t});return mc(this,t=r.V.then(function(){return s}).then(function(t){return uc(r,t)}).then(function(){return Ur({user:dc(r),credential:i,additionalUserInfo:o,operationType:"signIn"})}))},t.Gc=function(t){if(!wr())return Xt(new Jr("operation-not-supported-in-this-environment"));var e=this,n=Si(t.providerId),r=Ar(),i=null;(!Sr()||ur())&&hc(this).options.authDomain&&t.isOAuthProvider&&(i=xa(hc(this).options.authDomain,hc(this).options.apiKey,hc(this).name,"signInViaPopup",t,null,r,vt.a.SDK_VERSION||null));var o=rr(i,n&&n.Ba,n&&n.Aa);return mc(this,n=sc(this).then(function(e){return $u(e,o,"signInViaPopup",t,r,!!i)}).then(function(){return new zt(function(t,n){e.ga("signInViaPopup",null,new Jr("cancelled-popup-request"),e.g),e.f=t,e.v=n,e.g=r,e.b=Xu(e.a,e,"signInViaPopup",o,r)})}).then(function(t){return o&&nr(o),t?Ur(t):null}).s(function(t){throw o&&nr(o),t}))},t.Hc=function(t){if(!wr())return Xt(new Jr("operation-not-supported-in-this-environment"));var e=this;return mc(this,sc(this).then(function(){return function(t){return nc(t,function(){return t.b.set(Jl,t.c.C,t.a)})}(e.h)}).then(function(){return Ju(e.a,"signInViaRedirect",t)}))},t.la=function(){var t=this;return ac(this).then(function(e){return t.a&&rl(t.a.b),e}).s(function(e){throw t.a&&rl(t.a.b),e})},t.Mc=function(t){if(!t)return Xt(new Jr("null-user"));var e=this,n={};n.apiKey=hc(this).options.apiKey,n.authDomain=hc(this).options.authDomain,n.appName=hc(this).name;var r=function(t,e,n,r){e=e||{apiKey:t.l,authDomain:t.u,appName:t.o};var i=t.c,o={};return o[Es]=i.b,o.refreshToken=i.a,o.expiresIn=(i.c-C())/1e3,e=new vl(e,o),n&&(e.ba=n),r&&wl(e,r),Ml(e,t),e}(t,n,e.w,e.ya());return mc(this,this.i.then(function(){if(hc(e).options.apiKey!=t.l)return r.reload()}).then(function(){return dc(e)&&t.uid==dc(e).uid?(Ml(dc(e),t),e.Z(t)):(lc(e,r),Al(r),e.Z(r))}).then(function(){pc(e)}))},t.lb=function(){var t=this;return mc(this,this.i.then(function(){return t.a&&rl(t.a.b),dc(t)?(lc(t,null),tc(t.h).then(function(){pc(t)})):Jt()}))},t.Ic=function(){var t=this;return ec(this.h,hc(this).options.authDomain).then(function(e){if(!t.l){var n;if(n=dc(t)&&e){n=dc(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Ml(dc(t),e),dc(t).F();(dc(t)||e)&&(lc(t,e),e&&(Al(e),e.ba=t.w),t.a&&Hu(t.a,t),pc(t))}})},t.Z=function(t){return Zl(this.h,t)},t.Xb=function(){pc(this),this.Z(dc(this))},t.gc=function(){this.lb()},t.hc=function(){this.lb()},t.ic=function(t){var e=this;this.addAuthTokenListener(function(){t.next(dc(e))})},t.jc=function(t){var e=this;!function(t,e){t.I.push(e),mc(t,t.i.then(function(){!t.l&&q(t.I,e)&&t.O!==t.getUid()&&(t.O=t.getUid(),e(fc(t)))}))}(this,function(){t.next(dc(e))})},t.sc=function(t,e,n){var r=this;return this.X&&Promise.resolve().then(function(){g(t)?t(dc(r)):g(t.next)&&t.next(dc(r))}),this.Pb(t,e,n)},t.rc=function(t,e,n){var r=this;return this.X&&Promise.resolve().then(function(){r.O=r.getUid(),g(t)?t(dc(r)):g(t.next)&&t.next(dc(r))}),this.Qb(t,e,n)},t.Yb=function(t){var e=this;return mc(this,this.i.then(function(){return dc(e)?dc(e).F(t).then(function(t){return{accessToken:t}}):null}))},t.Cc=function(t){var e=this;return this.i.then(function(){return cc(e,ya(e.c,da,{token:t}))}).then(function(t){var n=t.user;return Pl(n,"isAnonymous",!1),e.Z(n),t})},t.Dc=function(t,e){var n=this;return this.i.then(function(){return cc(n,ya(n.c,fa,{email:t,password:e}))})},t.Sb=function(t,e){var n=this;return this.i.then(function(){return cc(n,ya(n.c,Ws,{email:t,password:e}))})},t.Pa=function(t){var e=this;return this.i.then(function(){return cc(e,t.ka(e.c))})},t.Bc=function(t){return Lr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Pa(t)},t.kb=function(){var t=this;return this.i.then(function(){var e=dc(t);if(e&&e.isAnonymous){var n=Ur({providerId:null,isNewUser:!1});return Ur({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return cc(t,t.c.kb()).then(function(e){var n=e.user;return Pl(n,"isAnonymous",!0),t.Z(n),e})})},t.getUid=function(){return dc(this)&&dc(this).uid||null},t.Rb=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&dc(this)&&Sl(dc(this))},t.zc=function(t){var e=this;j(this.o,function(n){n==t&&e.u--}),0>this.u&&(this.u=0),0==this.u&&dc(this)&&Cl(dc(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.o.push(t),mc(this,this.i.then(function(){e.l||q(e.o,t)&&t(fc(e))}))},t.removeAuthTokenListener=function(t){G(this.o,function(e){return e==t})},t.delete=function(){this.l=!0;for(var t=0;t<this.N.length;t++)this.N[t].cancel("app-deleted");return this.N=[],this.h&&(t=this.h).b.removeListener(Xl("local"),t.a,this.ja),this.a&&(Wu(this.a,this),rl(this.a.b)),Promise.resolve()},t.Vb=function(t){return mc(this,function(t,e){return ya(t,Ks,{identifier:e,continueUri:_r()?Zn():"http://localhost"}).then(function(t){return t.signinMethods||[]})}(this.c,t))},t.kc=function(t){return!!io(t)},t.ib=function(t,e){var n=this;return mc(this,Jt().then(function(){var t=new ei(e);if(!t.c)throw new Jr("argument-error",ii+" must be true when sending sign in link to email");return hi(t)}).then(function(e){return n.c.ib(t,e)}).then(function(){}))},t.Pc=function(t){return this.Ia(t).then(function(t){return t.data.email})},t.Xa=function(t,e){return mc(this,this.c.Xa(t,e).then(function(){}))},t.Ia=function(t){return mc(this,this.c.Ia(t).then(function(t){return new Br(t)}))},t.Va=function(t){return mc(this,this.c.Va(t).then(function(){}))},t.hb=function(t,e){var n=this;return mc(this,Jt().then(function(){return void 0===e||K(e)?{}:hi(new ei(e))}).then(function(e){return n.c.hb(t,e)}).then(function(){}))},t.Fc=function(t,e){return mc(this,ll(this,t,e,E(this.Pa,this)))},t.Ec=function(t,e){var n=this;return mc(this,Jt().then(function(){var r=ro(t,e||Zn());return n.Pa(r)}))},gc.prototype.render=function(){},gc.prototype.reset=function(){},gc.prototype.getResponse=function(){},gc.prototype.execute=function(){};var vc=null;function bc(t,e){return(e=wc(e))&&t.a[e]||null}function wc(t){return(t=void 0===t?1e12:t)?t.toString():null}function _c(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=Gn(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():Ke(this.f,"click",this.i)}function Ec(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Sc(){}yc.prototype.render=function(t,e){return this.a[this.b.toString()]=new _c(t,e),this.b++},yc.prototype.reset=function(t){var e=bc(this,t);t=wc(t),e&&t&&(e.delete(),delete this.a[t])},yc.prototype.getResponse=function(t){return(t=bc(this,t))?t.getResponse():null},yc.prototype.execute=function(t){(t=bc(this,t))&&t.execute()},_c.prototype.getResponse=function(){return Ec(this),this.b},_c.prototype.execute=function(){Ec(this);var t=this;this.a||(this.a=setTimeout(function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout(function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()},6e4)},500))},_c.prototype.delete=function(){Ec(this),this.g=!0,clearTimeout(this.a),this.a=null,Ye(this.f,"click",this.i)},Sc.prototype.g=function(){return vc||(vc=new yc),Jt(vc)},Sc.prototype.c=function(){};var Cc=null;function Tc(){this.b=s.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Ic=new J(tt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Ac=new Nr(3e4,6e4);Tc.prototype.g=function(t){var e=this;return new zt(function(n,r){var i=setTimeout(function(){r(new Jr("network-request-failed"))},Ac.get());!s.grecaptcha||t!==e.f&&!e.b?(s[e.a]=function(){if(s.grecaptcha){e.f=t;var o=s.grecaptcha.render;s.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(s.grecaptcha)}else clearTimeout(i),r(new Jr("internal-error"));delete s[e.a]},Jt(fs(it(Ic,{onload:e.a,hl:t||""}))).s(function(){clearTimeout(i),r(new Jr("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(i),n(s.grecaptcha))})},Tc.prototype.c=function(){this.b--};var kc=null;function Dc(t,e,n,r,i,o,a){if(jr(this,"type","recaptcha"),this.c=this.f=null,this.B=!1,this.l=e,this.g=null,a?(Cc||(Cc=new Sc),a=Cc):(kc||(kc=new Tc),a=kc),this.o=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[xc])throw new Jr("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Rc],!s.document)throw new Jr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!Gn(e)||!this.i&&Gn(e).hasChildNodes())throw new Jr("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.u=new ws(t,o||null,i||null),this.v=r||function(){return null};var u=this;this.m=[];var l=this.a[Nc];this.a[Nc]=function(t){if(Pc(u,t),"function"==typeof l)l(t);else if("string"==typeof l){var e=vr(l,s);"function"==typeof e&&e(t)}};var c=this.a[Oc];this.a[Oc]=function(){if(Pc(u,null),"function"==typeof c)c();else if("string"==typeof c){var t=vr(c,s);"function"==typeof t&&t()}}}var Nc="callback",Oc="expired-callback",xc="sitekey",Rc="size";function Pc(t,e){for(var n=0;n<t.m.length;n++)try{t.m[n](e)}catch(r){}}function Mc(t,e){return t.h.push(e),e.ha(function(){B(t.h,e)}),e}function Lc(t){if(t.B)throw new Jr("internal-error","RecaptchaVerifier instance has been destroyed.")}function Vc(t,e,n){var r=!1;try{this.b=n||vt.a.app()}catch(s){throw new Jr("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new Jr("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().ya()}catch(s){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(s){}o=vt.a.SDK_VERSION?gr(vt.a.SDK_VERSION,o):null,Dc.call(this,n,t,e,function(){try{var t=i.b.auth().ea()}catch(e){t=null}return t},o,bi(yi),r)}function jc(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new Jr("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Fc.length)throw new Jr("internal-error","Argument validator received an unsupported number of arguments.");n=Fc[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new Jr("argument-error",t+" failed: "+r)}(t=Dc.prototype).za=function(){var t=this;return this.f?this.f:this.f=Mc(this,Jt().then(function(){if(_r()&&!lr())return sr();throw new Jr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return t.o.g(t.v())}).then(function(e){return t.g=e,ya(t.u,ra,{})}).then(function(e){t.a[xc]=e.recaptchaSiteKey}).s(function(e){throw t.f=null,e}))},t.render=function(){Lc(this);var t=this;return Mc(this,this.za().then(function(){if(null===t.c){var e=t.l;if(!t.i){var n=Gn(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!Bn&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',jt(s.name),'"'),s.type){o.push(' type="',jt(s.type),'"');var u={};Y(u,s),delete u.type,s=u}o.push(">"),o=o.join("")}return o=i.createElement(o),s&&(a(s)?o.className=s:p(s)?o.className=s.join(" "):zn(o,s)),2<r.length&&function(t,e,n){function r(n){n&&e.appendChild(a(n)?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];!m(o)||y(o)&&0<o.nodeType?r(o):j(Wn(o)?H(o):o,r)}}(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c}))},t.verify=function(){Lc(this);var t=this;return Mc(this,this.render().then(function(e){return new zt(function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){G(t.m,function(t){return t==e})}(t,i),n(e))};t.m.push(i),t.i&&t.g.execute(t.c)}})}))},t.reset=function(){Lc(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Lc(this),this.B=!0,this.o.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=Gn(this.l);for(var e;e=t.firstChild;)t.removeChild(e)}},T(Vc,Dc);var Fc="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Uc(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:a}}function qc(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:u}}function Bc(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:y}}function Gc(t,e){return{name:t||"",K:"a function",optional:!!e,M:g}}function zc(t,e){return{name:t||"",K:"null",optional:!!e,M:f}}function Hc(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){return!!e&&!(!e.ka||t&&e.providerId!==t)}}}function Wc(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!!(t&&a(t.type)&&g(t.verify))}}}function Kc(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function Qc(t,e){for(var n in e){var r=e[n].name;t[r]=Jc(r,t[n],e[n].j)}}function $c(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:S(function(t){return this[t]},n),set:S(function(t,e,n,r){jc(t,[n],[r],!0),this[e]=r},r,n,e[n].rb),enumerable:!0})}}function Yc(t,e,n,r){t[e]=Jc(e,n,r)}function Jc(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return jc(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Qc(rc.prototype,{Va:{name:"applyActionCode",j:[Uc("code")]},Ia:{name:"checkActionCode",j:[Uc("code")]},Xa:{name:"confirmPasswordReset",j:[Uc("code"),Uc("newPassword")]},Sb:{name:"createUserWithEmailAndPassword",j:[Uc("email"),Uc("password")]},Vb:{name:"fetchSignInMethodsForEmail",j:[Uc("email")]},la:{name:"getRedirectResult",j:[]},kc:{name:"isSignInWithEmailLink",j:[Uc("emailLink")]},rc:{name:"onAuthStateChanged",j:[Kc(Bc(),Gc(),"nextOrObserver"),Gc("opt_error",!0),Gc("opt_completed",!0)]},sc:{name:"onIdTokenChanged",j:[Kc(Bc(),Gc(),"nextOrObserver"),Gc("opt_error",!0),Gc("opt_completed",!0)]},hb:{name:"sendPasswordResetEmail",j:[Uc("email"),Kc(Bc("opt_actionCodeSettings",!0),zc(null,!0),"opt_actionCodeSettings",!0)]},ib:{name:"sendSignInLinkToEmail",j:[Uc("email"),Bc("actionCodeSettings")]},jb:{name:"setPersistence",j:[Uc("persistence")]},Bc:{name:"signInAndRetrieveDataWithCredential",j:[Hc()]},kb:{name:"signInAnonymously",j:[]},Pa:{name:"signInWithCredential",j:[Hc()]},Cc:{name:"signInWithCustomToken",j:[Uc("token")]},Dc:{name:"signInWithEmailAndPassword",j:[Uc("email"),Uc("password")]},Ec:{name:"signInWithEmailLink",j:[Uc("email"),Uc("emailLink",!0)]},Fc:{name:"signInWithPhoneNumber",j:[Uc("phoneNumber"),Wc()]},Gc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Hc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Mc:{name:"updateCurrentUser",j:[Kc({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof vl)}},zc(),"user")]},lb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Uc(null,!0)]},Oc:{name:"useDeviceLanguage",j:[]},Pc:{name:"verifyPasswordResetCode",j:[Uc("code")]}}),$c(rc.prototype,{lc:{name:"languageCode",rb:Kc(Uc(),zc(),"languageCode")}}),(rc.Persistence=hu).LOCAL="local",rc.Persistence.SESSION="session",rc.Persistence.NONE="none",Qc(vl.prototype,{delete:{name:"delete",j:[]},Zb:{name:"getIdTokenResult",j:[qc("opt_forceRefresh",!0)]},F:{name:"getIdToken",j:[qc("opt_forceRefresh",!0)]},mc:{name:"linkAndRetrieveDataWithCredential",j:[Hc()]},ab:{name:"linkWithCredential",j:[Hc()]},nc:{name:"linkWithPhoneNumber",j:[Uc("phoneNumber"),Wc()]},oc:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},pc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},vc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Hc()]},cb:{name:"reauthenticateWithCredential",j:[Hc()]},wc:{name:"reauthenticateWithPhoneNumber",j:[Uc("phoneNumber"),Wc()]},xc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},yc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},gb:{name:"sendEmailVerification",j:[Kc(Bc("opt_actionCodeSettings",!0),zc(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Uc(null,!0)]},Lc:{name:"unlink",j:[Uc("provider")]},nb:{name:"updateEmail",j:[Uc("email")]},ob:{name:"updatePassword",j:[Uc("password")]},Nc:{name:"updatePhoneNumber",j:[Hc("phone")]},pb:{name:"updateProfile",j:[Bc("profile")]}}),Qc(yc.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Qc(gc.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Qc(zt.prototype,{ha:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),$c(al.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",rb:qc("appVerificationDisabledForTesting")}}),Qc(ul.prototype,{confirm:{name:"confirm",j:[Uc("verificationCode")]}}),Yc(Mi,"fromJSON",function(t){t=a(t)?JSON.parse(t):t;for(var e,n=[Bi,eo,so,Fi],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[Kc(Uc(),Bc(),"json")]),Yc(no,"credential",function(t,e){return new to(t,e)},[Uc("email"),Uc("password")]),Qc(to.prototype,{A:{name:"toJSON",j:[Uc(null,!0)]}}),Qc(Wi.prototype,{ua:{name:"addScope",j:[Uc("scope")]},Ca:{name:"setCustomParameters",j:[Bc("customOAuthParameters")]}}),Yc(Wi,"credential",Ki,[Kc(Uc(),Bc(),"token")]),Yc(no,"credentialWithLink",ro,[Uc("email"),Uc("emailLink")]),Qc(Qi.prototype,{ua:{name:"addScope",j:[Uc("scope")]},Ca:{name:"setCustomParameters",j:[Bc("customOAuthParameters")]}}),Yc(Qi,"credential",$i,[Kc(Uc(),Bc(),"token")]),Qc(Yi.prototype,{ua:{name:"addScope",j:[Uc("scope")]},Ca:{name:"setCustomParameters",j:[Bc("customOAuthParameters")]}}),Yc(Yi,"credential",Ji,[Kc(Uc(),Kc(Bc(),zc()),"idToken"),Kc(Uc(),zc(),"accessToken",!0)]),Qc(Xi.prototype,{Ca:{name:"setCustomParameters",j:[Bc("customOAuthParameters")]}}),Yc(Xi,"credential",Zi,[Kc(Uc(),Bc(),"token"),Uc("secret",!0)]),Qc(Hi.prototype,{ua:{name:"addScope",j:[Uc("scope")]},credential:{name:"credential",j:[Kc(Uc(),Kc(Bc(),zc()),"optionsOrIdToken"),Kc(Uc(),zc(),"accessToken",!0)]},Ca:{name:"setCustomParameters",j:[Bc("customOAuthParameters")]}}),Qc(Ui.prototype,{A:{name:"toJSON",j:[Uc(null,!0)]}}),Qc(Vi.prototype,{A:{name:"toJSON",j:[Uc(null,!0)]}}),Yc(uo,"credential",lo,[Uc("verificationId"),Uc("verificationCode")]),Qc(uo.prototype,{Ta:{name:"verifyPhoneNumber",j:[Uc("phoneNumber"),Wc()]}}),Qc(oo.prototype,{A:{name:"toJSON",j:[Uc(null,!0)]}}),Qc(Jr.prototype,{toJSON:{name:"toJSON",j:[Uc(null,!0)]}}),Qc(bo.prototype,{toJSON:{name:"toJSON",j:[Uc(null,!0)]}}),Qc(vo.prototype,{toJSON:{name:"toJSON",j:[Uc(null,!0)]}}),Qc(Vc.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),function(){if(void 0===vt.a||!vt.a.INTERNAL||!vt.a.INTERNAL.registerService)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={Auth:rc,AuthCredential:Mi,Error:Jr};Yc(t,"EmailAuthProvider",no,[]),Yc(t,"FacebookAuthProvider",Wi,[]),Yc(t,"GithubAuthProvider",Qi,[]),Yc(t,"GoogleAuthProvider",Yi,[]),Yc(t,"TwitterAuthProvider",Xi,[]),Yc(t,"OAuthProvider",Hi,[Uc("providerId")]),Yc(t,"SAMLAuthProvider",zi,[Uc("providerId")]),Yc(t,"PhoneAuthProvider",uo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof rc)}}]),Yc(t,"RecaptchaVerifier",Vc,[Kc(Uc(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Bc("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof vt.a.app.App)}}]),vt.a.INTERNAL.registerService("auth",function(t,e){return e({INTERNAL:{getUid:E((t=new rc(t)).getUid,t),getToken:E(t.Yb,t),addAuthTokenListener:E(t.Rb,t),removeAuthTokenListener:E(t.zc,t)}}),t},t,function(t,e){if("create"===t)try{e.auth()}catch(n){}}),vt.a.INTERNAL.extendNamespace({User:vl})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});let bt=class{};var wt=n("8OjO");let _t=(()=>{class t{constructor(t){this.dataService=t}resolve(t,e){return this.dataService.getRecord$("consola","01")}}return t.ngInjectableDef=r.Mb({factory:function(){return new t(r.Nb(wt.a))},token:t,providedIn:"root"}),t})();const Et=()=>n.e(11).then(n.bind(null,"4Wpg")).then(t=>t.UsuariosModuleNgFactory),St=()=>n.e(7).then(n.bind(null,"A1Ij")).then(t=>t.ClubesModuleNgFactory),Ct=()=>n.e(8).then(n.bind(null,"Vvmb")).then(t=>t.CompetenciasModuleNgFactory),Tt=()=>n.e(9).then(n.bind(null,"uhC2")).then(t=>t.DistanciasModuleNgFactory),It=()=>n.e(10).then(n.bind(null,"kist")).then(t=>t.PalistasModuleNgFactory),At=()=>n.e(5).then(n.bind(null,"7HEH")).then(t=>t.InscripcionesModuleNgFactory),kt=()=>n.e(12).then(n.bind(null,"vbEt")).then(t=>t.BackupModuleNgFactory);class Dt{}class Nt{}var Ot=r.mb(o,[s],function(t){return r.yb([r.zb(512,r.j,r.X,[[8,[a.a,f,v,I,ht]],[3,r.j],r.v]),r.zb(5120,r.s,r.jb,[[3,r.s]]),r.zb(4608,A.n,A.m,[r.s,[2,A.x]]),r.zb(5120,r.fb,r.kb,[r.x]),r.zb(5120,r.c,r.gb,[]),r.zb(5120,r.q,r.hb,[]),r.zb(5120,r.r,r.ib,[]),r.zb(4608,dt.b,dt.k,[A.d]),r.zb(6144,r.E,null,[dt.b]),r.zb(4608,dt.e,dt.g,[]),r.zb(5120,dt.c,function(t,e,n,r,i,o,s,a){return[new dt.i(t,e,n),new dt.n(r),new dt.m(i,o,s,a)]},[A.d,r.x,r.z,A.d,A.d,dt.e,r.Y,[2,dt.f]]),r.zb(4608,dt.d,dt.d,[dt.c,r.x]),r.zb(135680,dt.l,dt.l,[A.d]),r.zb(4608,dt.j,dt.j,[dt.d,dt.l,r.c]),r.zb(6144,r.C,null,[dt.j]),r.zb(6144,dt.o,null,[dt.l]),r.zb(4608,r.K,r.K,[r.x]),r.zb(5120,l.a,l.D,[l.o]),r.zb(4608,l.h,l.h,[]),r.zb(6144,l.j,null,[l.h]),r.zb(135680,l.u,l.u,[l.o,r.u,r.i,r.p,l.j]),r.zb(4608,l.i,l.i,[]),r.zb(5120,l.I,l.z,[l.o,A.s,l.k]),r.zb(5120,l.l,l.G,[l.E]),r.zb(5120,r.b,function(t){return[t]},[l.l]),r.zb(5120,ft.b,ft.e,[ft.d,[2,ft.c]]),r.zb(4608,pt.a,pt.a,[ft.d,[2,ft.c],[2,pt.b],[2,pt.c],r.z,r.x,[2,pt.d]]),r.zb(4608,gt.a,gt.a,[ft.d,[2,ft.c],r.z,r.x]),r.zb(4608,b.z,b.z,[]),r.zb(4608,b.d,b.d,[]),r.zb(1073742336,A.c,A.c,[]),r.zb(1024,r.l,dt.p,[]),r.zb(1024,r.w,function(){return[l.y()]},[]),r.zb(512,l.E,l.E,[r.p]),r.zb(1024,r.d,function(t,e){return[dt.q(t),l.F(e)]},[[2,r.w],l.E]),r.zb(512,r.e,r.e,[[2,r.d]]),r.zb(131584,r.g,r.g,[r.x,r.Y,r.p,r.l,r.j,r.e]),r.zb(1073742336,r.f,r.f,[r.g]),r.zb(1073742336,dt.a,dt.a,[[3,dt.a]]),r.zb(1024,l.x,l.B,[[3,l.o]]),r.zb(512,l.w,l.c,[]),r.zb(512,l.b,l.b,[]),r.zb(256,l.k,{},[]),r.zb(1024,A.i,l.A,[A.r,[2,A.a],l.k]),r.zb(512,A.h,A.h,[A.i,A.r]),r.zb(512,r.i,r.i,[]),r.zb(512,r.u,r.H,[r.i,[2,r.I]]),r.zb(1024,l.m,function(){return[[{path:"home",resolve:{competenciaData:_t},component:u},{path:"error",component:p},{path:"login",component:w},{path:"usuarios",loadChildren:Et},{path:"categorias",loadChildren:"./tables/categorias/categorias.module#CategoriasModule"},{path:"clubes",loadChildren:St},{path:"competencias",loadChildren:Ct},{path:"distancias",loadChildren:Tt},{path:"palistas",loadChildren:It},{path:"inscripciones",loadChildren:At},{path:"backup",loadChildren:kt}]]},[]),r.zb(1024,l.o,l.C,[r.g,l.w,l.b,A.h,r.p,r.u,r.i,l.m,l.k,[2,l.v],[2,l.n]]),r.zb(1073742336,l.s,l.s,[[2,l.x],[2,l.o]]),r.zb(1073742336,Dt,Dt,[]),r.zb(1073742336,ft.a,ft.a,[]),r.zb(1073742336,mt,mt,[]),r.zb(1073742336,bt,bt,[]),r.zb(1073742336,b.y,b.y,[]),r.zb(1073742336,b.g,b.g,[]),r.zb(1073742336,b.t,b.t,[]),r.zb(1073742336,Nt,Nt,[]),r.zb(1073742336,o,o,[]),r.zb(256,r.W,!0,[]),r.zb(256,ft.d,{apiKey:"AIzaSyBKM08A9WHEhTLXbY7CxF49gN5fl-hk8f8",authDomain:"febocak-02.firebaseapp.com",databaseURL:"https://febocak-02.firebaseio.com",projectId:"febocak-02",storageBucket:"",messagingSenderId:"850669499931",appId:"1:850669499931:web:53e8e8e339850d33"},[]),r.zb(256,ft.c,void 0,[])])});i.production&&Object(r.Q)(),dt.h().bootstrapModuleFactory(Ot).catch(t=>console.error(t))},zVF4:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("mrSG"),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(t,e){if(!t)throw s(e)},s=function(t){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},a=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,c=(15&a)<<2|l>>6,h=63&l;u||(h=64,s||(c=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[c],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},l=function(t){try{return u.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function c(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=c(t[n],e[n]));return t}var h=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var f="FirebaseError",p=function(t){function e(n,r){var i=t.call(this,r)||this;return i.code=n,i.name=f,Object.setPrototypeOf(i,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,m.prototype.create),i}return r.__extends(e,t),e}(Error),m=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?g(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new p(i,a),l=0,c=Object.keys(r);l<c.length;l++){var h=c[l];"_"!==h.slice(-1)&&(h in u&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),u[h]=r[h])}return u},t}();function g(t,e){return t.replace(y,function(t,n){var r=e[n];return null!=r?r.toString():"<"+n+"?>"})}var y=/\{\$([^}]+)}/g;function v(t){return JSON.parse(t)}var b=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=v(l(o[0])||""),n=v(l(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},w=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=l^a&(u^l),o=1518500249):(i=a^u^l,o=1859775393):r<60?(i=a&u|l&(a|u),o=2400959708):(i=a^u^l,o=3395469782);var h=(s<<5|s>>>27)+i+c+o+n[r]&4294967295;c=l,l=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}(),_=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=E),void 0===r.error&&(r.error=E),void 0===r.complete&&(r.complete=E);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function E(){}function S(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}e.CONSTANTS=i,e.Deferred=h,e.ErrorFactory=m,e.FirebaseError=p,e.Sha1=w,e.assert=o,e.assertionError=s,e.async=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){t.apply(void 0,n)}).catch(function(t){e&&e(t)})}},e.base64=u,e.base64Decode=l,e.base64Encode=function(t){var e=a(t);return u.encodeByteArray(e,!0)},e.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.createSubscribe=function(t,e){var n=new _(t,e);return n.subscribe.bind(n)},e.decode=b,e.deepCopy=function(t){return c(void 0,t)},e.deepExtend=c,e.errorPrefix=S,e.getUA=d,e.isAdmin=function(t){var e=b(t).claims;return"object"==typeof e&&!0===e.admin},e.isBrowser=function(){return"object"==typeof self&&self.self===self},e.isEmpty=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())},e.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}},e.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.isValidFormat=function(t){var e=b(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e=b(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),i=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},e.issuedAtTime=function(t){var e=b(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.jsonEval=v,e.map=function(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r},e.querystring=function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach(function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}}),e},e.safeGet=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},e.stringToByteArray=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var s=i-55296;o(++r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},e.stringify=function(t){return JSON.stringify(t)},e.validateArgCount=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},e.validateCallback=function(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(S(t,e,r)+"must be a valid function.")},e.validateContextObject=function(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(S(t,e,r)+"must be a valid context object.")},e.validateNamespace=function(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(S(t,e,r)+"must be a valid firebase namespace.")}},zn8P:function(t,e,n){var r={"./tables/categorias/categorias.module.ngfactory":["6t7D",6]};function i(t){if(!n.o(r,t))return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e});var e=r[t],i=e[0];return n.e(e[1]).then(function(){return n(i)})}i.keys=function(){return Object.keys(r)},i.id="zn8P",t.exports=i}},[[0,0]]]);